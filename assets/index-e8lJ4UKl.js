var oE=Object.freeze,sO=Object.defineProperty;var dr=(t,e)=>oE(sO(t,"raw",{value:oE(e||t.slice())}));function NH(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function oO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ts(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var N1={exports:{}},rf={},O1={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=Symbol.for("react.element"),aO=Symbol.for("react.portal"),lO=Symbol.for("react.fragment"),uO=Symbol.for("react.strict_mode"),cO=Symbol.for("react.profiler"),hO=Symbol.for("react.provider"),dO=Symbol.for("react.context"),fO=Symbol.for("react.forward_ref"),pO=Symbol.for("react.suspense"),mO=Symbol.for("react.memo"),gO=Symbol.for("react.lazy"),aE=Symbol.iterator;function _O(t){return t===null||typeof t!="object"?null:(t=aE&&t[aE]||t["@@iterator"],typeof t=="function"?t:null)}var D1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M1=Object.assign,L1={};function ka(t,e,n){this.props=t,this.context=e,this.refs=L1,this.updater=n||D1}ka.prototype.isReactComponent={};ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F1(){}F1.prototype=ka.prototype;function ly(t,e,n){this.props=t,this.context=e,this.refs=L1,this.updater=n||D1}var uy=ly.prototype=new F1;uy.constructor=ly;M1(uy,ka.prototype);uy.isPureReactComponent=!0;var lE=Array.isArray,V1=Object.prototype.hasOwnProperty,cy={current:null},U1={key:!0,ref:!0,__self:!0,__source:!0};function $1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)V1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zu,type:t,key:s,ref:o,props:i,_owner:cy.current}}function yO(t,e){return{$$typeof:zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hy(t){return typeof t=="object"&&t!==null&&t.$$typeof===zu}function vO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uE=/\/+/g;function sm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vO(""+t.key):e.toString(36)}function gh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zu:case aO:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+sm(o,0):r,lE(i)?(n="",t!=null&&(n=t.replace(uE,"$&/")+"/"),gh(i,e,n,"",function(c){return c})):i!=null&&(hy(i)&&(i=yO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(uE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",lE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+sm(s,a);o+=gh(s,e,n,l,i)}else if(l=_O(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+sm(s,a++),o+=gh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fc(t,e,n){if(t==null)return t;var r=[],i=0;return gh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function wO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},_h={transition:null},EO={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:_h,ReactCurrentOwner:cy};function j1(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Fc,forEach:function(t,e,n){Fc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fc(t,function(){e++}),e},toArray:function(t){return Fc(t,function(e){return e})||[]},only:function(t){if(!hy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=ka;we.Fragment=lO;we.Profiler=cO;we.PureComponent=ly;we.StrictMode=uO;we.Suspense=pO;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EO;we.act=j1;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=M1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)V1.call(e,l)&&!U1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zu,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:dO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hO,_context:t},t.Consumer=t};we.createElement=$1;we.createFactory=function(t){var e=$1.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:fO,render:t}};we.isValidElement=hy;we.lazy=function(t){return{$$typeof:gO,_payload:{_status:-1,_result:t},_init:wO}};we.memo=function(t,e){return{$$typeof:mO,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=_h.transition;_h.transition={};try{t()}finally{_h.transition=e}};we.unstable_act=j1;we.useCallback=function(t,e){return nn.current.useCallback(t,e)};we.useContext=function(t){return nn.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};we.useEffect=function(t,e){return nn.current.useEffect(t,e)};we.useId=function(){return nn.current.useId()};we.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return nn.current.useMemo(t,e)};we.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};we.useRef=function(t){return nn.current.useRef(t)};we.useState=function(t){return nn.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return nn.current.useTransition()};we.version="18.3.1";O1.exports=we;var N=O1.exports;const Ts=x1(N),Jl=oO({__proto__:null,default:Ts},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO=N,IO=Symbol.for("react.element"),SO=Symbol.for("react.fragment"),CO=Object.prototype.hasOwnProperty,AO=TO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RO={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CO.call(e,r)&&!RO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IO,type:t,key:s,ref:o,props:i,_owner:AO.current}}rf.Fragment=SO;rf.jsx=z1;rf.jsxs=z1;N1.exports=rf;var Y=N1.exports,lg={},B1={exports:{}},kn={},W1={exports:{}},q1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,J){var ee=F.length;F.push(J);e:for(;0<ee;){var $=ee-1>>>1,V=F[$];if(0<i(V,J))F[$]=J,F[ee]=V,ee=$;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var J=F[0],ee=F.pop();if(ee!==J){F[0]=ee;e:for(var $=0,V=F.length,U=V>>>1;$<U;){var B=2*($+1)-1,ge=F[B],H=B+1,re=F[H];if(0>i(ge,ee))H<V&&0>i(re,ge)?(F[$]=re,F[H]=ee,$=H):(F[$]=ge,F[B]=ee,$=B);else if(H<V&&0>i(re,ee))F[$]=re,F[H]=ee,$=H;else break e}}return J}function i(F,J){var ee=F.sortIndex-J.sortIndex;return ee!==0?ee:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(F){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=F)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function b(F){if(E=!1,C(F),!y)if(n(l)!==null)y=!0,G(D);else{var J=n(c);J!==null&&de(b,J.startTime-F)}}function D(F,J){y=!1,E&&(E=!1,v(w),w=-1),g=!0;var ee=p;try{for(C(J),d=n(l);d!==null&&(!(d.expirationTime>J)||F&&!P());){var $=d.callback;if(typeof $=="function"){d.callback=null,p=d.priorityLevel;var V=$(d.expirationTime<=J);J=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),C(J)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var B=n(c);B!==null&&de(b,B.startTime-J),U=!1}return U}finally{d=null,p=ee,g=!1}}var L=!1,S=null,w=-1,A=5,k=-1;function P(){return!(t.unstable_now()-k<A)}function x(){if(S!==null){var F=t.unstable_now();k=F;var J=!0;try{J=S(!0,F)}finally{J?I():(L=!1,S=null)}}else L=!1}var I;if(typeof _=="function")I=function(){_(x)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,z=K.port2;K.port1.onmessage=x,I=function(){z.postMessage(null)}}else I=function(){R(x,0)};function G(F){S=F,L||(L=!0,I())}function de(F,J){w=R(function(){F(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,G(D))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var ee=p;p=J;try{return F()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=p;p=F;try{return J()}finally{p=ee}},t.unstable_scheduleCallback=function(F,J,ee){var $=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?$+ee:$):ee=$,F){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ee+V,F={id:h++,callback:J,priorityLevel:F,startTime:ee,expirationTime:V,sortIndex:-1},ee>$?(F.sortIndex=ee,e(c,F),n(l)===null&&F===n(c)&&(E?(v(w),w=-1):E=!0,de(b,ee-$))):(F.sortIndex=V,e(l,F),y||g||(y=!0,G(D))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var J=p;return function(){var ee=p;p=J;try{return F.apply(this,arguments)}finally{p=ee}}}})(q1);W1.exports=q1;var kO=W1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PO=N,Cn=kO;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H1=new Set,Zl={};function Js(t,e){na(t,e),na(t+"Capture",e)}function na(t,e){for(Zl[t]=e,t=0;t<e.length;t++)H1.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ug=Object.prototype.hasOwnProperty,bO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cE={},hE={};function xO(t){return ug.call(hE,t)?!0:ug.call(cE,t)?!1:bO.test(t)?hE[t]=!0:(cE[t]=!0,!1)}function NO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OO(t,e,n,r){if(e===null||typeof e>"u"||NO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var dy=/[\-:]([a-z])/g;function fy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dy,fy);Mt[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dy,fy);Mt[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dy,fy);Mt[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function py(t,e,n,r){var i=Mt.hasOwnProperty(e)?Mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OO(e,n,i,r)&&(n=null),r||i===null?xO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=PO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vc=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),gy=Symbol.for("react.forward_ref"),hg=Symbol.for("react.suspense"),dg=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),Q1=Symbol.for("react.offscreen"),dE=Symbol.iterator;function sl(t){return t===null||typeof t!="object"?null:(t=dE&&t[dE]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,om;function El(t){if(om===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);om=e&&e[1]||""}return"\n"+om+t}var am=!1;function lm(t,e){if(!t||am)return"";am=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{am=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?El(t):""}function DO(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=lm(t.type,!1),t;case 11:return t=lm(t.type.render,!1),t;case 1:return t=lm(t.type,!0),t;default:return""}}function fg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ro:return"Fragment";case Ao:return"Portal";case cg:return"Profiler";case my:return"StrictMode";case hg:return"Suspense";case dg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K1:return(t.displayName||"Context")+".Consumer";case G1:return(t._context.displayName||"Context")+".Provider";case gy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _y:return e=t.displayName||null,e!==null?e:fg(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return fg(t(e))}catch(n){}}return null}function MO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fg(e);case 8:return e===my?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LO(t){var e=Y1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=LO(t))}function X1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function pg(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function fE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J1(t,e){e=e.checked,e!=null&&py(t,"checked",e,!1)}function mg(t,e){J1(t,e);var n=Bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gg(t,e.type,n):e.hasOwnProperty("defaultValue")&&gg(t,e.type,Bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gg(t,e,n){(e!=="number"||Bh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tl=Array.isArray;function zo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Bi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _g(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Tl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Bi(n)}}function Z1(t,e){var n=Bi(e.value),r=Bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $c,tC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FO=["Webkit","ms","Moz","O"];Object.keys(xl).forEach(function(t){FO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xl[e]=xl[t]})});function nC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xl.hasOwnProperty(t)&&xl[t]?(""+e).trim():e+"px"}function rC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VO=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vg(t,e){if(e){if(VO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=null;function yy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tg=null,Bo=null,Wo=null;function _E(t){if(t=qu(t)){if(typeof Tg!="function")throw Error(q(280));var e=t.stateNode;e&&(e=uf(e),Tg(t.stateNode,t.type,e))}}function iC(t){Bo?Wo?Wo.push(t):Wo=[t]:Bo=t}function sC(){if(Bo){var t=Bo,e=Wo;if(Wo=Bo=null,_E(t),e)for(t=0;t<e.length;t++)_E(e[t])}}function oC(t,e){return t(e)}function aC(){}var um=!1;function lC(t,e,n){if(um)return t(e,n);um=!0;try{return oC(t,e,n)}finally{um=!1,(Bo!==null||Wo!==null)&&(aC(),sC())}}function tu(t,e){var n=t.stateNode;if(n===null)return null;var r=uf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Ig=!1;if(Kr)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){Ig=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch(t){Ig=!1}function UO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Nl=!1,Wh=null,qh=!1,Sg=null,$O={onError:function(t){Nl=!0,Wh=t}};function jO(t,e,n,r,i,s,o,a,l){Nl=!1,Wh=null,UO.apply($O,arguments)}function zO(t,e,n,r,i,s,o,a,l){if(jO.apply(this,arguments),Nl){if(Nl){var c=Wh;Nl=!1,Wh=null}else throw Error(q(198));qh||(qh=!0,Sg=c)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yE(t){if(Zs(t)!==t)throw Error(q(188))}function BO(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yE(i),t;if(s===r)return yE(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function cC(t){return t=BO(t),t!==null?hC(t):null}function hC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hC(t);if(e!==null)return e;t=t.sibling}return null}var dC=Cn.unstable_scheduleCallback,vE=Cn.unstable_cancelCallback,WO=Cn.unstable_shouldYield,qO=Cn.unstable_requestPaint,it=Cn.unstable_now,HO=Cn.unstable_getCurrentPriorityLevel,vy=Cn.unstable_ImmediatePriority,fC=Cn.unstable_UserBlockingPriority,Hh=Cn.unstable_NormalPriority,GO=Cn.unstable_LowPriority,pC=Cn.unstable_IdlePriority,sf=null,vr=null;function KO(t){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(sf,t,void 0,(t.current.flags&128)===128)}catch(e){}}var rr=Math.clz32?Math.clz32:XO,QO=Math.log,YO=Math.LN2;function XO(t){return t>>>=0,t===0?32:31-(QO(t)/YO|0)|0}var jc=64,zc=4194304;function Il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Il(a):(s&=o,s!==0&&(r=Il(s)))}else o=n&~i,o!==0?r=Il(o):s!==0&&(r=Il(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rr(e),i=1<<n,r|=t[n],e&=~i;return r}function JO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=JO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mC(){var t=jc;return jc<<=1,!(jc&4194240)&&(jc=64),t}function cm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function eD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function wy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function gC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _C,Ey,yC,vC,wC,Ag=!1,Bc=[],Pi=null,bi=null,xi=null,nu=new Map,ru=new Map,_i=[],tD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wE(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":nu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(e.pointerId)}}function al(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qu(e),e!==null&&Ey(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function nD(t,e,n,r,i){switch(e){case"focusin":return Pi=al(Pi,t,e,n,r,i),!0;case"dragenter":return bi=al(bi,t,e,n,r,i),!0;case"mouseover":return xi=al(xi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return nu.set(s,al(nu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ru.set(s,al(ru.get(s)||null,t,e,n,r,i)),!0}return!1}function EC(t){var e=Is(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=uC(n),e!==null){t.blockedOn=e,wC(t.priority,function(){yC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eg=r,n.target.dispatchEvent(r),Eg=null}else return e=qu(n),e!==null&&Ey(e),t.blockedOn=n,!1;e.shift()}return!0}function EE(t,e,n){yh(t)&&n.delete(e)}function rD(){Ag=!1,Pi!==null&&yh(Pi)&&(Pi=null),bi!==null&&yh(bi)&&(bi=null),xi!==null&&yh(xi)&&(xi=null),nu.forEach(EE),ru.forEach(EE)}function ll(t,e){t.blockedOn===e&&(t.blockedOn=null,Ag||(Ag=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,rD)))}function iu(t){function e(i){return ll(i,t)}if(0<Bc.length){ll(Bc[0],t);for(var n=1;n<Bc.length;n++){var r=Bc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pi!==null&&ll(Pi,t),bi!==null&&ll(bi,t),xi!==null&&ll(xi,t),nu.forEach(e),ru.forEach(e),n=0;n<_i.length;n++)r=_i[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)EC(n),n.blockedOn===null&&_i.shift()}var qo=ii.ReactCurrentBatchConfig,Kh=!0;function iD(t,e,n,r){var i=xe,s=qo.transition;qo.transition=null;try{xe=1,Ty(t,e,n,r)}finally{xe=i,qo.transition=s}}function sD(t,e,n,r){var i=xe,s=qo.transition;qo.transition=null;try{xe=4,Ty(t,e,n,r)}finally{xe=i,qo.transition=s}}function Ty(t,e,n,r){if(Kh){var i=Rg(t,e,n,r);if(i===null)wm(t,e,r,Qh,n),wE(t,r);else if(nD(i,t,e,n,r))r.stopPropagation();else if(wE(t,r),e&4&&-1<tD.indexOf(t)){for(;i!==null;){var s=qu(i);if(s!==null&&_C(s),s=Rg(t,e,n,r),s===null&&wm(t,e,r,Qh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wm(t,e,r,null,n)}}var Qh=null;function Rg(t,e,n,r){if(Qh=null,t=yy(r),t=Is(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qh=t,null}function TC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HO()){case vy:return 1;case fC:return 4;case Hh:case GO:return 16;case pC:return 536870912;default:return 16}default:return 16}}var Si=null,Iy=null,vh=null;function IC(){if(vh)return vh;var t,e=Iy,n=e.length,r,i="value"in Si?Si.value:Si.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return vh=i.slice(t,1<r?1-r:void 0)}function wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function TE(){return!1}function Pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wc:TE,this.isPropagationStopped=TE,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sy=Pn(Pa),Wu=Je({},Pa,{view:0,detail:0}),oD=Pn(Wu),hm,dm,ul,of=Je({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(hm=t.screenX-ul.screenX,dm=t.screenY-ul.screenY):dm=hm=0,ul=t),hm)},movementY:function(t){return"movementY"in t?t.movementY:dm}}),IE=Pn(of),aD=Je({},of,{dataTransfer:0}),lD=Pn(aD),uD=Je({},Wu,{relatedTarget:0}),fm=Pn(uD),cD=Je({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),hD=Pn(cD),dD=Je({},Pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fD=Pn(dD),pD=Je({},Pa,{data:0}),SE=Pn(pD),mD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_D={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_D[t])?!!e[t]:!1}function Cy(){return yD}var vD=Je({},Wu,{key:function(t){if(t.key){var e=mD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cy,charCode:function(t){return t.type==="keypress"?wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wD=Pn(vD),ED=Je({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CE=Pn(ED),TD=Je({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cy}),ID=Pn(TD),SD=Je({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),CD=Pn(SD),AD=Je({},of,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RD=Pn(AD),kD=[9,13,27,32],Ay=Kr&&"CompositionEvent"in window,Ol=null;Kr&&"documentMode"in document&&(Ol=document.documentMode);var PD=Kr&&"TextEvent"in window&&!Ol,SC=Kr&&(!Ay||Ol&&8<Ol&&11>=Ol),AE=" ",RE=!1;function CC(t,e){switch(t){case"keyup":return kD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ko=!1;function bD(t,e){switch(t){case"compositionend":return AC(e);case"keypress":return e.which!==32?null:(RE=!0,AE);case"textInput":return t=e.data,t===AE&&RE?null:t;default:return null}}function xD(t,e){if(ko)return t==="compositionend"||!Ay&&CC(t,e)?(t=IC(),vh=Iy=Si=null,ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SC&&e.locale!=="ko"?null:e.data;default:return null}}var ND={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ND[t.type]:e==="textarea"}function RC(t,e,n,r){iC(r),e=Yh(e,"onChange"),0<e.length&&(n=new Sy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Dl=null,su=null;function OD(t){VC(t,0)}function af(t){var e=xo(t);if(X1(e))return t}function DD(t,e){if(t==="change")return e}var kC=!1;if(Kr){var pm;if(Kr){var mm="oninput"in document;if(!mm){var PE=document.createElement("div");PE.setAttribute("oninput","return;"),mm=typeof PE.oninput=="function"}pm=mm}else pm=!1;kC=pm&&(!document.documentMode||9<document.documentMode)}function bE(){Dl&&(Dl.detachEvent("onpropertychange",PC),su=Dl=null)}function PC(t){if(t.propertyName==="value"&&af(su)){var e=[];RC(e,su,t,yy(t)),lC(OD,e)}}function MD(t,e,n){t==="focusin"?(bE(),Dl=e,su=n,Dl.attachEvent("onpropertychange",PC)):t==="focusout"&&bE()}function LD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return af(su)}function FD(t,e){if(t==="click")return af(e)}function VD(t,e){if(t==="input"||t==="change")return af(e)}function UD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:UD;function ou(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ug.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function xE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function NE(t,e){var n=xE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xE(n)}}function bC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xC(){for(var t=window,e=Bh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=Bh(t.document)}return e}function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $D(t){var e=xC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bC(n.ownerDocument.documentElement,n)){if(r!==null&&Ry(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=NE(n,s);var o=NE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jD=Kr&&"documentMode"in document&&11>=document.documentMode,Po=null,kg=null,Ml=null,Pg=!1;function OE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pg||Po==null||Po!==Bh(r)||(r=Po,"selectionStart"in r&&Ry(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ml&&ou(Ml,r)||(Ml=r,r=Yh(kg,"onSelect"),0<r.length&&(e=new Sy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},gm={},NC={};Kr&&(NC=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function lf(t){if(gm[t])return gm[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NC)return gm[t]=e[n];return t}var OC=lf("animationend"),DC=lf("animationiteration"),MC=lf("animationstart"),LC=lf("transitionend"),FC=new Map,DE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,e){FC.set(t,e),Js(e,[t])}for(var _m=0;_m<DE.length;_m++){var ym=DE[_m],zD=ym.toLowerCase(),BD=ym[0].toUpperCase()+ym.slice(1);ns(zD,"on"+BD)}ns(OC,"onAnimationEnd");ns(DC,"onAnimationIteration");ns(MC,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(LC,"onTransitionEnd");na("onMouseEnter",["mouseout","mouseover"]);na("onMouseLeave",["mouseout","mouseover"]);na("onPointerEnter",["pointerout","pointerover"]);na("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function ME(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zO(r,e,void 0,t),t.currentTarget=null}function VC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ME(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ME(i,a,c),s=l}}}if(qh)throw t=Sg,qh=!1,Sg=null,t}function Be(t,e){var n=e[Dg];n===void 0&&(n=e[Dg]=new Set);var r=t+"__bubble";n.has(r)||(UC(e,t,2,!1),n.add(r))}function vm(t,e,n){var r=0;e&&(r|=4),UC(n,t,r,e)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function au(t){if(!t[Hc]){t[Hc]=!0,H1.forEach(function(n){n!=="selectionchange"&&(WD.has(n)||vm(n,!1,t),vm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hc]||(e[Hc]=!0,vm("selectionchange",!1,e))}}function UC(t,e,n,r){switch(TC(e)){case 1:var i=iD;break;case 4:i=sD;break;default:i=Ty}n=i.bind(null,e,n,t),i=void 0,!Ig||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Is(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lC(function(){var c=s,h=yy(n),d=[];e:{var p=FC.get(t);if(p!==void 0){var g=Sy,y=t;switch(t){case"keypress":if(wh(n)===0)break e;case"keydown":case"keyup":g=wD;break;case"focusin":y="focus",g=fm;break;case"focusout":y="blur",g=fm;break;case"beforeblur":case"afterblur":g=fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=IE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=lD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ID;break;case OC:case DC:case MC:g=hD;break;case LC:g=CD;break;case"scroll":g=oD;break;case"wheel":g=RD;break;case"copy":case"cut":case"paste":g=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=CE}var E=(e&4)!==0,R=!E&&t==="scroll",v=E?p!==null?p+"Capture":null:p;E=[];for(var _=c,C;_!==null;){C=_;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,v!==null&&(b=tu(_,v),b!=null&&E.push(lu(_,b,C)))),R)break;_=_.return}0<E.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Eg&&(y=n.relatedTarget||n.fromElement)&&(Is(y)||y[Qr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Is(y):null,y!==null&&(R=Zs(y),y!==R||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(E=IE,b="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=CE,b="onPointerLeave",v="onPointerEnter",_="pointer"),R=g==null?p:xo(g),C=y==null?p:xo(y),p=new E(b,_+"leave",g,n,h),p.target=R,p.relatedTarget=C,b=null,Is(h)===c&&(E=new E(v,_+"enter",y,n,h),E.target=C,E.relatedTarget=R,b=E),R=b,g&&y)t:{for(E=g,v=y,_=0,C=E;C;C=po(C))_++;for(C=0,b=v;b;b=po(b))C++;for(;0<_-C;)E=po(E),_--;for(;0<C-_;)v=po(v),C--;for(;_--;){if(E===v||v!==null&&E===v.alternate)break t;E=po(E),v=po(v)}E=null}else E=null;g!==null&&LE(d,p,g,E,!1),y!==null&&R!==null&&LE(d,R,y,E,!0)}}e:{if(p=c?xo(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=DD;else if(kE(p))if(kC)D=VD;else{D=LD;var L=MD}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=FD);if(D&&(D=D(t,c))){RC(d,D,n,h);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&gg(p,"number",p.value)}switch(L=c?xo(c):window,t){case"focusin":(kE(L)||L.contentEditable==="true")&&(Po=L,kg=c,Ml=null);break;case"focusout":Ml=kg=Po=null;break;case"mousedown":Pg=!0;break;case"contextmenu":case"mouseup":case"dragend":Pg=!1,OE(d,n,h);break;case"selectionchange":if(jD)break;case"keydown":case"keyup":OE(d,n,h)}var S;if(Ay)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ko?CC(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(SC&&n.locale!=="ko"&&(ko||w!=="onCompositionStart"?w==="onCompositionEnd"&&ko&&(S=IC()):(Si=h,Iy="value"in Si?Si.value:Si.textContent,ko=!0)),L=Yh(c,w),0<L.length&&(w=new SE(w,t,null,n,h),d.push({event:w,listeners:L}),S?w.data=S:(S=AC(n),S!==null&&(w.data=S)))),(S=PD?bD(t,n):xD(t,n))&&(c=Yh(c,"onBeforeInput"),0<c.length&&(h=new SE("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}VC(d,e)})}function lu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tu(t,n),s!=null&&r.unshift(lu(t,s,i)),s=tu(t,e),s!=null&&r.push(lu(t,s,i))),t=t.return}return r}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function LE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=tu(n,s),l!=null&&o.unshift(lu(n,l,a))):i||(l=tu(n,s),l!=null&&o.push(lu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qD=/\r\n?/g,HD=/\u0000|\uFFFD/g;function FE(t){return(typeof t=="string"?t:""+t).replace(qD,"\n").replace(HD,"")}function Gc(t,e,n){if(e=FE(e),FE(t)!==e&&n)throw Error(q(425))}function Xh(){}var bg=null,xg=null;function Ng(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,GD=typeof clearTimeout=="function"?clearTimeout:void 0,VE=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof VE<"u"?function(t){return VE.resolve(null).then(t).catch(QD)}:Og;function QD(t){setTimeout(function(){throw t})}function Em(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),iu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);iu(e)}function Ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),_r="__reactFiber$"+ba,uu="__reactProps$"+ba,Qr="__reactContainer$"+ba,Dg="__reactEvents$"+ba,YD="__reactListeners$"+ba,XD="__reactHandles$"+ba;function Is(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=UE(t);t!==null;){if(n=t[_r])return n;t=UE(t)}return e}t=n,n=t.parentNode}return null}function qu(t){return t=t[_r]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function uf(t){return t[uu]||null}var Mg=[],No=-1;function rs(t){return{current:t}}function qe(t){0>No||(t.current=Mg[No],Mg[No]=null,No--)}function Ue(t,e){No++,Mg[No]=t.current,t.current=e}var Wi={},Kt=rs(Wi),un=rs(!1),Ms=Wi;function ra(t,e){var n=t.type.contextTypes;if(!n)return Wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function cn(t){return t=t.childContextTypes,t!=null}function Jh(){qe(un),qe(Kt)}function $E(t,e,n){if(Kt.current!==Wi)throw Error(q(168));Ue(Kt,e),Ue(un,n)}function $C(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,MO(t)||"Unknown",i));return Je({},n,r)}function Zh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wi,Ms=Kt.current,Ue(Kt,t),Ue(un,un.current),!0}function jE(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=$C(t,e,Ms),r.__reactInternalMemoizedMergedChildContext=t,qe(un),qe(Kt),Ue(Kt,t)):qe(un),Ue(un,n)}var Lr=null,cf=!1,Tm=!1;function jC(t){Lr===null?Lr=[t]:Lr.push(t)}function JD(t){cf=!0,jC(t)}function is(){if(!Tm&&Lr!==null){Tm=!0;var t=0,e=xe;try{var n=Lr;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,cf=!1}catch(i){throw Lr!==null&&(Lr=Lr.slice(t+1)),dC(vy,is),i}finally{xe=e,Tm=!1}}return null}var Oo=[],Do=0,ed=null,td=0,Nn=[],On=0,Ls=null,Ur=1,$r="";function ms(t,e){Oo[Do++]=td,Oo[Do++]=ed,ed=t,td=e}function zC(t,e,n){Nn[On++]=Ur,Nn[On++]=$r,Nn[On++]=Ls,Ls=t;var r=Ur;t=$r;var i=32-rr(r)-1;r&=~(1<<i),n+=1;var s=32-rr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ur=1<<32-rr(e)+i|n<<i|r,$r=s+t}else Ur=1<<s|n<<i|r,$r=t}function ky(t){t.return!==null&&(ms(t,1),zC(t,1,0))}function Py(t){for(;t===ed;)ed=Oo[--Do],Oo[Do]=null,td=Oo[--Do],Oo[Do]=null;for(;t===Ls;)Ls=Nn[--On],Nn[On]=null,$r=Nn[--On],Nn[On]=null,Ur=Nn[--On],Nn[On]=null}var Tn=null,vn=null,Ge=!1,Jn=null;function BC(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,vn=Ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ls!==null?{id:Ur,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,vn=null,!0):!1;default:return!1}}function Lg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fg(t){if(Ge){var e=vn;if(e){var n=e;if(!zE(t,e)){if(Lg(t))throw Error(q(418));e=Ni(n.nextSibling);var r=Tn;e&&zE(t,e)?BC(r,n):(t.flags=t.flags&-4097|2,Ge=!1,Tn=t)}}else{if(Lg(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ge=!1,Tn=t}}}function BE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Kc(t){if(t!==Tn)return!1;if(!Ge)return BE(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ng(t.type,t.memoizedProps)),e&&(e=vn)){if(Lg(t))throw WC(),Error(q(418));for(;e;)BC(t,e),e=Ni(e.nextSibling)}if(BE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=Tn?Ni(t.stateNode.nextSibling):null;return!0}function WC(){for(var t=vn;t;)t=Ni(t.nextSibling)}function ia(){vn=Tn=null,Ge=!1}function by(t){Jn===null?Jn=[t]:Jn.push(t)}var ZD=ii.ReactCurrentBatchConfig;function cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Qc(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WE(t){var e=t._init;return e(t._payload)}function qC(t){function e(v,_){if(t){var C=v.deletions;C===null?(v.deletions=[_],v.flags|=16):C.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Li(v,_),v.index=0,v.sibling=null,v}function s(v,_,C){return v.index=C,t?(C=v.alternate,C!==null?(C=C.index,C<_?(v.flags|=2,_):C):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,C,b){return _===null||_.tag!==6?(_=Pm(C,v.mode,b),_.return=v,_):(_=i(_,C),_.return=v,_)}function l(v,_,C,b){var D=C.type;return D===Ro?h(v,_,C.props.children,b,C.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fi&&WE(D)===_.type)?(b=i(_,C.props),b.ref=cl(v,_,C),b.return=v,b):(b=Rh(C.type,C.key,C.props,null,v.mode,b),b.ref=cl(v,_,C),b.return=v,b)}function c(v,_,C,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=bm(C,v.mode,b),_.return=v,_):(_=i(_,C.children||[]),_.return=v,_)}function h(v,_,C,b,D){return _===null||_.tag!==7?(_=xs(C,v.mode,b,D),_.return=v,_):(_=i(_,C),_.return=v,_)}function d(v,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Pm(""+_,v.mode,C),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vc:return C=Rh(_.type,_.key,_.props,null,v.mode,C),C.ref=cl(v,null,_),C.return=v,C;case Ao:return _=bm(_,v.mode,C),_.return=v,_;case fi:var b=_._init;return d(v,b(_._payload),C)}if(Tl(_)||sl(_))return _=xs(_,v.mode,C,null),_.return=v,_;Qc(v,_)}return null}function p(v,_,C,b){var D=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:a(v,_,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Vc:return C.key===D?l(v,_,C,b):null;case Ao:return C.key===D?c(v,_,C,b):null;case fi:return D=C._init,p(v,_,D(C._payload),b)}if(Tl(C)||sl(C))return D!==null?null:h(v,_,C,b,null);Qc(v,C)}return null}function g(v,_,C,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(C)||null,a(_,v,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vc:return v=v.get(b.key===null?C:b.key)||null,l(_,v,b,D);case Ao:return v=v.get(b.key===null?C:b.key)||null,c(_,v,b,D);case fi:var L=b._init;return g(v,_,C,L(b._payload),D)}if(Tl(b)||sl(b))return v=v.get(C)||null,h(_,v,b,D,null);Qc(_,b)}return null}function y(v,_,C,b){for(var D=null,L=null,S=_,w=_=0,A=null;S!==null&&w<C.length;w++){S.index>w?(A=S,S=null):A=S.sibling;var k=p(v,S,C[w],b);if(k===null){S===null&&(S=A);break}t&&S&&k.alternate===null&&e(v,S),_=s(k,_,w),L===null?D=k:L.sibling=k,L=k,S=A}if(w===C.length)return n(v,S),Ge&&ms(v,w),D;if(S===null){for(;w<C.length;w++)S=d(v,C[w],b),S!==null&&(_=s(S,_,w),L===null?D=S:L.sibling=S,L=S);return Ge&&ms(v,w),D}for(S=r(v,S);w<C.length;w++)A=g(S,v,w,C[w],b),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?w:A.key),_=s(A,_,w),L===null?D=A:L.sibling=A,L=A);return t&&S.forEach(function(P){return e(v,P)}),Ge&&ms(v,w),D}function E(v,_,C,b){var D=sl(C);if(typeof D!="function")throw Error(q(150));if(C=D.call(C),C==null)throw Error(q(151));for(var L=D=null,S=_,w=_=0,A=null,k=C.next();S!==null&&!k.done;w++,k=C.next()){S.index>w?(A=S,S=null):A=S.sibling;var P=p(v,S,k.value,b);if(P===null){S===null&&(S=A);break}t&&S&&P.alternate===null&&e(v,S),_=s(P,_,w),L===null?D=P:L.sibling=P,L=P,S=A}if(k.done)return n(v,S),Ge&&ms(v,w),D;if(S===null){for(;!k.done;w++,k=C.next())k=d(v,k.value,b),k!==null&&(_=s(k,_,w),L===null?D=k:L.sibling=k,L=k);return Ge&&ms(v,w),D}for(S=r(v,S);!k.done;w++,k=C.next())k=g(S,v,w,k.value,b),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?w:k.key),_=s(k,_,w),L===null?D=k:L.sibling=k,L=k);return t&&S.forEach(function(x){return e(v,x)}),Ge&&ms(v,w),D}function R(v,_,C,b){if(typeof C=="object"&&C!==null&&C.type===Ro&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Vc:e:{for(var D=C.key,L=_;L!==null;){if(L.key===D){if(D=C.type,D===Ro){if(L.tag===7){n(v,L.sibling),_=i(L,C.props.children),_.return=v,v=_;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fi&&WE(D)===L.type){n(v,L.sibling),_=i(L,C.props),_.ref=cl(v,L,C),_.return=v,v=_;break e}n(v,L);break}else e(v,L);L=L.sibling}C.type===Ro?(_=xs(C.props.children,v.mode,b,C.key),_.return=v,v=_):(b=Rh(C.type,C.key,C.props,null,v.mode,b),b.ref=cl(v,_,C),b.return=v,v=b)}return o(v);case Ao:e:{for(L=C.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(v,_.sibling),_=i(_,C.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=bm(C,v.mode,b),_.return=v,v=_}return o(v);case fi:return L=C._init,R(v,_,L(C._payload),b)}if(Tl(C))return y(v,_,C,b);if(sl(C))return E(v,_,C,b);Qc(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,C),_.return=v,v=_):(n(v,_),_=Pm(C,v.mode,b),_.return=v,v=_),o(v)):n(v,_)}return R}var sa=qC(!0),HC=qC(!1),nd=rs(null),rd=null,Mo=null,xy=null;function Ny(){xy=Mo=rd=null}function Oy(t){var e=nd.current;qe(nd),t._currentValue=e}function Vg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){rd=t,xy=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(xy!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(rd===null)throw Error(q(308));Mo=t,rd.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var Ss=null;function Dy(t){Ss===null?Ss=[t]:Ss.push(t)}function GC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yr(t,r)}function Yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function My(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yr(t,n)}return i=r.interleaved,i===null?(e.next=e,Dy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yr(t,n)}function Eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}function qE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;pi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,E=a;switch(p=e,g=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=Je({},d,p);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=d}}function HE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Hu={},wr=rs(Hu),cu=rs(Hu),hu=rs(Hu);function Cs(t){if(t===Hu)throw Error(q(174));return t}function Ly(t,e){switch(Ue(hu,e),Ue(cu,t),Ue(wr,Hu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yg(e,t)}qe(wr),Ue(wr,e)}function oa(){qe(wr),qe(cu),qe(hu)}function QC(t){Cs(hu.current);var e=Cs(wr.current),n=yg(e,t.type);e!==n&&(Ue(cu,t),Ue(wr,n))}function Fy(t){cu.current===t&&(qe(wr),qe(cu))}var Ke=rs(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Im=[];function Vy(){for(var t=0;t<Im.length;t++)Im[t]._workInProgressVersionPrimary=null;Im.length=0}var Th=ii.ReactCurrentDispatcher,Sm=ii.ReactCurrentBatchConfig,Fs=0,Xe=null,pt=null,wt=null,od=!1,Ll=!1,du=0,eM=0;function jt(){throw Error(q(321))}function Uy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function $y(t,e,n,r,i,s){if(Fs=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Th.current=t===null||t.memoizedState===null?iM:sM,t=n(r,i),Ll){s=0;do{if(Ll=!1,du=0,25<=s)throw Error(q(301));s+=1,wt=pt=null,e.updateQueue=null,Th.current=oM,t=n(r,i)}while(Ll)}if(Th.current=ad,e=pt!==null&&pt.next!==null,Fs=0,wt=pt=Xe=null,od=!1,e)throw Error(q(300));return t}function jy(){var t=du!==0;return du=0,t}function pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Xe.memoizedState=wt=t:wt=wt.next=t,wt}function zn(){if(pt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Xe.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(q(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Xe.memoizedState=wt=t:wt=wt.next=t}return wt}function fu(t,e){return typeof e=="function"?e(t):e}function Cm(t){var e=zn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Fs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Xe.lanes|=h,Vs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ar(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xe.lanes|=s,Vs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Am(t){var e=zn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ar(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function YC(){}function XC(t,e){var n=Xe,r=zn(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,zy(eA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,pu(9,ZC.bind(null,n,r,i,e),void 0,null),It===null)throw Error(q(349));Fs&30||JC(n,e,i)}return i}function JC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ZC(t,e,n,r){e.value=n,e.getSnapshot=r,tA(e)&&nA(t)}function eA(t,e,n){return n(function(){tA(e)&&nA(t)})}function tA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function nA(t){var e=Yr(t,1);e!==null&&ir(e,t,1,-1)}function GE(t){var e=pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:t},e.queue=t,t=t.dispatch=rM.bind(null,Xe,t),[e.memoizedState,t]}function pu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rA(){return zn().memoizedState}function Ih(t,e,n,r){var i=pr();Xe.flags|=t,i.memoizedState=pu(1|e,n,void 0,r===void 0?null:r)}function hf(t,e,n,r){var i=zn();r=r===void 0?null:r;var s=void 0;if(pt!==null){var o=pt.memoizedState;if(s=o.destroy,r!==null&&Uy(r,o.deps)){i.memoizedState=pu(e,n,s,r);return}}Xe.flags|=t,i.memoizedState=pu(1|e,n,s,r)}function KE(t,e){return Ih(8390656,8,t,e)}function zy(t,e){return hf(2048,8,t,e)}function iA(t,e){return hf(4,2,t,e)}function sA(t,e){return hf(4,4,t,e)}function oA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aA(t,e,n){return n=n!=null?n.concat([t]):null,hf(4,4,oA.bind(null,e,t),n)}function By(){}function lA(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uA(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Uy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cA(t,e,n){return Fs&21?(ar(n,e)||(n=mC(),Xe.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function tM(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Sm.transition;Sm.transition={};try{t(!1),e()}finally{xe=n,Sm.transition=r}}function hA(){return zn().memoizedState}function nM(t,e,n){var r=Mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dA(t))fA(e,n);else if(n=GC(t,e,n,r),n!==null){var i=en();ir(n,t,r,i),pA(n,e,r)}}function rM(t,e,n){var r=Mi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dA(t))fA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=e.interleaved;l===null?(i.next=i,Dy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch(c){}finally{}n=GC(t,e,i,r),n!==null&&(i=en(),ir(n,t,r,i),pA(n,e,r))}}function dA(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function fA(t,e){Ll=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wy(t,n)}}var ad={readContext:jn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},iM={readContext:jn,useCallback:function(t,e){return pr().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:KE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,oA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nM.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=pr();return t={current:t},e.memoizedState=t},useState:GE,useDebugValue:By,useDeferredValue:function(t){return pr().memoizedState=t},useTransition:function(){var t=GE(!1),e=t[0];return t=tM.bind(null,t[1]),pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=pr();if(Ge){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),It===null)throw Error(q(349));Fs&30||JC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,KE(eA.bind(null,r,s,t),[t]),r.flags|=2048,pu(9,ZC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pr(),e=It.identifierPrefix;if(Ge){var n=$r,r=Ur;n=(r&~(1<<32-rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sM={readContext:jn,useCallback:lA,useContext:jn,useEffect:zy,useImperativeHandle:aA,useInsertionEffect:iA,useLayoutEffect:sA,useMemo:uA,useReducer:Cm,useRef:rA,useState:function(){return Cm(fu)},useDebugValue:By,useDeferredValue:function(t){var e=zn();return cA(e,pt.memoizedState,t)},useTransition:function(){var t=Cm(fu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:YC,useSyncExternalStore:XC,useId:hA,unstable_isNewReconciler:!1},oM={readContext:jn,useCallback:lA,useContext:jn,useEffect:zy,useImperativeHandle:aA,useInsertionEffect:iA,useLayoutEffect:sA,useMemo:uA,useReducer:Am,useRef:rA,useState:function(){return Am(fu)},useDebugValue:By,useDeferredValue:function(t){var e=zn();return pt===null?e.memoizedState=t:cA(e,pt.memoizedState,t)},useTransition:function(){var t=Am(fu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:YC,useSyncExternalStore:XC,useId:hA,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ug(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var df={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=Mi(t),s=Hr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(ir(e,t,i,r),Eh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=Mi(t),s=Hr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,i),e!==null&&(ir(e,t,i,r),Eh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=Mi(t),i=Hr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Oi(t,i,r),e!==null&&(ir(e,t,r,n),Eh(e,t,r))}};function QE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ou(n,r)||!ou(i,s):!0}function mA(t,e,n){var r=!1,i=Wi,s=e.contextType;return typeof s=="object"&&s!==null?s=jn(s):(i=cn(e)?Ms:Kt.current,r=e.contextTypes,s=(r=r!=null)?ra(t,i):Wi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function YE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&df.enqueueReplaceState(e,e.state,null)}function $g(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},My(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jn(s):(s=cn(e)?Ms:Kt.current,i.context=ra(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ug(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&df.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function aa(t,e){try{var n="",r=e;do n+=DO(r),r=r.return;while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rm(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function jg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aM=typeof WeakMap=="function"?WeakMap:Map;function gA(t,e,n){n=Hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ud||(ud=!0,Xg=r),jg(t,e)},n}function _A(t,e,n){n=Hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){jg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jg(t,e),typeof r!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EM.bind(null,t,e,n),e.then(t,t))}function JE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ZE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hr(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var lM=ii.ReactCurrentOwner,an=!1;function Jt(t,e,n,r){e.child=t===null?HC(e,null,n,r):sa(e,t.child,n,r)}function eT(t,e,n,r,i){n=n.render;var s=e.ref;return Ho(e,i),r=$y(t,e,n,r,s,i),n=jy(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Ge&&n&&ky(e),e.flags|=1,Jt(t,e,r,i),e.child)}function tT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yA(t,e,s,r,i)):(t=Rh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ou,n(o,r)&&t.ref===e.ref)return Xr(t,e,i)}return e.flags|=1,t=Li(s,r),t.ref=e.ref,t.return=e,e.child=t}function yA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ou(s,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,Xr(t,e,i)}return zg(t,e,n,r,i)}function vA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Fo,_n),_n|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(Fo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ue(Fo,_n),_n|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ue(Fo,_n),_n|=r;return Jt(t,e,i,n),e.child}function wA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zg(t,e,n,r,i){var s=cn(n)?Ms:Kt.current;return s=ra(e,s),Ho(e,i),n=$y(t,e,n,r,s,i),r=jy(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Ge&&r&&ky(e),e.flags|=1,Jt(t,e,n,i),e.child)}function nT(t,e,n,r,i){if(cn(n)){var s=!0;Zh(e)}else s=!1;if(Ho(e,i),e.stateNode===null)Sh(t,e),mA(e,n,r),$g(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=cn(n)?Ms:Kt.current,c=ra(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&YE(e,o,r,c),pi=!1;var p=e.memoizedState;o.state=p,id(e,r,o,i),l=e.memoizedState,a!==r||p!==l||un.current||pi?(typeof h=="function"&&(Ug(e,n,h,r),l=e.memoizedState),(a=pi||QE(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,KC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jn(l):(l=cn(n)?Ms:Kt.current,l=ra(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&YE(e,o,r,l),pi=!1,p=e.memoizedState,o.state=p,id(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||un.current||pi?(typeof g=="function"&&(Ug(e,n,g,r),y=e.memoizedState),(c=pi||QE(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Bg(t,e,n,r,s,i)}function Bg(t,e,n,r,i,s){wA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jE(e,n,!1),Xr(t,e,s);r=e.stateNode,lM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sa(e,t.child,null,s),e.child=sa(e,null,a,s)):Jt(t,e,a,s),e.memoizedState=r.state,i&&jE(e,n,!0),e.child}function EA(t){var e=t.stateNode;e.pendingContext?$E(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$E(t,e.context,!1),Ly(t,e.containerInfo)}function rT(t,e,n,r,i){return ia(),by(i),e.flags|=256,Jt(t,e,n,r),e.child}var Wg={dehydrated:null,treeContext:null,retryLane:0};function qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function TA(t,e,n){var r=e.pendingProps,i=Ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ue(Ke,i&1),t===null)return Fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mf(o,r,0,null),t=xs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qg(n),e.memoizedState=Wg,t):Wy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return uM(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Li(a,s):(s=xs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Wg,r}return s=t.child,t=s.sibling,r=Li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wy(t,e){return e=mf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yc(t,e,n,r){return r!==null&&by(r),sa(e,t.child,null,n),t=Wy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uM(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rm(Error(q(422))),Yc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mf({mode:"visible",children:r.children},i,0,null),s=xs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&sa(e,t.child,null,o),e.child.memoizedState=qg(o),e.memoizedState=Wg,s);if(!(e.mode&1))return Yc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Rm(s,r,void 0),Yc(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yr(t,i),ir(r,t,i,-1))}return Yy(),r=Rm(Error(q(421))),Yc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vn=Ni(i.nextSibling),Tn=e,Ge=!0,Jn=null,t!==null&&(Nn[On++]=Ur,Nn[On++]=$r,Nn[On++]=Ls,Ur=t.id,$r=t.overflow,Ls=e),e=Wy(e,r.children),e.flags|=4096,e)}function iT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vg(t.return,e,n)}function km(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function IA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iT(t,n,e);else if(t.tag===19)iT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),km(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}km(e,!0,n,null,s);break;case"together":km(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cM(t,e,n){switch(e.tag){case 3:EA(e),ia();break;case 5:QC(e);break;case 1:cn(e.type)&&Zh(e);break;case 4:Ly(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ue(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?TA(t,e,n):(Ue(Ke,Ke.current&1),t=Xr(t,e,n),t!==null?t.sibling:null);Ue(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return IA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,vA(t,e,n)}return Xr(t,e,n)}var SA,Hg,CA,AA;SA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hg=function(){};CA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Cs(wr.current);var s=null;switch(n){case"input":i=pg(t,i),r=pg(t,r),s=[];break;case"select":i=Je({},i,{value:void 0}),r=Je({},r,{value:void 0}),s=[];break;case"textarea":i=_g(t,i),r=_g(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xh)}vg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};AA=function(t,e,n,r){n!==r&&(e.flags|=4)};function hl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hM(t,e,n){var r=e.pendingProps;switch(Py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return cn(e.type)&&Jh(),zt(e),null;case 3:return r=e.stateNode,oa(),qe(un),qe(Kt),Vy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(e_(Jn),Jn=null))),Hg(t,e),zt(e),null;case 5:Fy(e);var i=Cs(hu.current);if(n=e.type,t!==null&&e.stateNode!=null)CA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return zt(e),null}if(t=Cs(wr.current),Kc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_r]=e,r[uu]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<Sl.length;i++)Be(Sl[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":fE(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":mE(r,s),Be("invalid",r)}vg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),i=["children",""+a]):Zl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":Uc(r),pE(r,s,!0);break;case"textarea":Uc(r),gE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_r]=e,t[uu]=r,SA(t,e,!1,!1),e.stateNode=t;e:{switch(o=wg(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sl.length;i++)Be(Sl[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":fE(t,r),i=pg(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Je({},r,{value:void 0}),Be("invalid",t);break;case"textarea":mE(t,r),i=_g(t,r),Be("invalid",t);break;default:i=r}vg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?rC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&eu(t,l):typeof l=="number"&&eu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Be("scroll",t):l!=null&&py(t,s,l,o))}switch(n){case"input":Uc(t),pE(t,r,!1);break;case"textarea":Uc(t),gE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Bi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zo(t,!!r.multiple,s,!1):r.defaultValue!=null&&zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(t&&e.stateNode!=null)AA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Cs(hu.current),Cs(wr.current),Kc(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(s=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Gc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return zt(e),null;case 13:if(qe(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&vn!==null&&e.mode&1&&!(e.flags&128))WC(),ia(),e.flags|=98560,s=!1;else if(s=Kc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[_r]=e}else ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),s=!1}else Jn!==null&&(e_(Jn),Jn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?gt===0&&(gt=3):Yy())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return oa(),Hg(t,e),t===null&&au(e.stateNode.containerInfo),zt(e),null;case 10:return Oy(e.type._context),zt(e),null;case 17:return cn(e.type)&&Jh(),zt(e),null;case 19:if(qe(Ke),s=e.memoizedState,s===null)return zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hl(s,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sd(t),o!==null){for(e.flags|=128,hl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&it()>la&&(e.flags|=128,r=!0,hl(s,!1),e.lanes=4194304)}else{if(!r)if(t=sd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return zt(e),null}else 2*it()-s.renderingStartTime>la&&n!==1073741824&&(e.flags|=128,r=!0,hl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=it(),e.sibling=null,n=Ke.current,Ue(Ke,r?n&1|2:n&1),e):(zt(e),null);case 22:case 23:return Qy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function dM(t,e){switch(Py(e),e.tag){case 1:return cn(e.type)&&Jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oa(),qe(un),qe(Kt),Vy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fy(e),null;case 13:if(qe(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ke),null;case 4:return oa(),null;case 10:return Oy(e.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var Xc=!1,Ht=!1,fM=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function Gg(t,e,n){try{n()}catch(r){nt(t,e,r)}}var sT=!1;function pM(t,e){if(bg=Kh,t=xC(),Ry(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(b){n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xg={focusedElem:t,selectionRange:n},Kh=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,R=y.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:Yn(e.type,E),R);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(b){nt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return y=sT,sT=!1,y}function Fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gg(e,n,s)}i=i.next}while(i!==r)}}function ff(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RA(t){var e=t.alternate;e!==null&&(t.alternate=null,RA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[uu],delete e[Dg],delete e[YD],delete e[XD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kA(t){return t.tag===5||t.tag===3||t.tag===4}function oT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xh));else if(r!==4&&(t=t.child,t!==null))for(Qg(t,e,n),t=t.sibling;t!==null;)Qg(t,e,n),t=t.sibling}function Yg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yg(t,e,n),t=t.sibling;t!==null;)Yg(t,e,n),t=t.sibling}var Pt=null,Xn=!1;function hi(t,e,n){for(n=n.child;n!==null;)PA(t,e,n),n=n.sibling}function PA(t,e,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(sf,n)}catch(a){}switch(n.tag){case 5:Ht||Lo(n,e);case 6:var r=Pt,i=Xn;Pt=null,hi(t,e,n),Pt=r,Xn=i,Pt!==null&&(Xn?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Xn?(t=Pt,n=n.stateNode,t.nodeType===8?Em(t.parentNode,n):t.nodeType===1&&Em(t,n),iu(t)):Em(Pt,n.stateNode));break;case 4:r=Pt,i=Xn,Pt=n.stateNode.containerInfo,Xn=!0,hi(t,e,n),Pt=r,Xn=i;break;case 0:case 11:case 14:case 15:if(!Ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gg(n,e,o),i=i.next}while(i!==r)}hi(t,e,n);break;case 1:if(!Ht&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nt(n,e,a)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(Ht=(r=Ht)||n.memoizedState!==null,hi(t,e,n),Ht=r):hi(t,e,n);break;default:hi(t,e,n)}}function aT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fM),e.forEach(function(r){var i=IM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pt=a.stateNode,Xn=!1;break e;case 3:Pt=a.stateNode.containerInfo,Xn=!0;break e;case 4:Pt=a.stateNode.containerInfo,Xn=!0;break e}a=a.return}if(Pt===null)throw Error(q(160));PA(s,o,i),Pt=null,Xn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){nt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bA(e,t),e=e.sibling}function bA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),fr(t),r&4){try{Fl(3,t,t.return),ff(3,t)}catch(E){nt(t,t.return,E)}try{Fl(5,t,t.return)}catch(E){nt(t,t.return,E)}}break;case 1:Qn(e,t),fr(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(Qn(e,t),fr(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{eu(i,"")}catch(E){nt(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&J1(i,s),wg(a,o);var c=wg(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?rC(i,d):h==="dangerouslySetInnerHTML"?tC(i,d):h==="children"?eu(i,d):py(i,h,d,c)}switch(a){case"input":mg(i,s);break;case"textarea":Z1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?zo(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?zo(i,!!s.multiple,s.defaultValue,!0):zo(i,!!s.multiple,s.multiple?[]:"",!1))}i[uu]=s}catch(E){nt(t,t.return,E)}}break;case 6:if(Qn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){nt(t,t.return,E)}}break;case 3:if(Qn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{iu(e.containerInfo)}catch(E){nt(t,t.return,E)}break;case 4:Qn(e,t),fr(t);break;case 13:Qn(e,t),fr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gy=it())),r&4&&aT(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(c=Ht)||h,Qn(e,t),Ht=c):Qn(e,t),fr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(d=Z=h;Z!==null;){switch(p=Z,g=p.child,p.tag){case 0:case 11:case 14:case 15:Fl(4,p,p.return);break;case 1:Lo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){nt(r,n,E)}}break;case 5:Lo(p,p.return);break;case 22:if(p.memoizedState!==null){uT(d);continue}}g!==null?(g.return=p,Z=g):uT(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=nC("display",o))}catch(E){nt(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){nt(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qn(e,t),fr(t),r&4&&aT(t);break;case 21:break;default:Qn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kA(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(eu(i,""),r.flags&=-33);var s=oT(t);Yg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=oT(t);Qg(t,a,o);break;default:throw Error(q(161))}}catch(l){nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mM(t,e,n){Z=t,xA(t)}function xA(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ht;a=Xc;var c=Ht;if(Xc=o,(Ht=l)&&!c)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?cT(i):l!==null?(l.return=o,Z=l):cT(i);for(;s!==null;)Z=s,xA(s),s=s.sibling;Z=i,Xc=a,Ht=c}lT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):lT(t)}}function lT(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||ff(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&iu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ht||e.flags&512&&Kg(e)}catch(p){nt(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function uT(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function cT(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ff(4,e)}catch(l){nt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){nt(e,i,l)}}var s=e.return;try{Kg(e)}catch(l){nt(e,s,l)}break;case 5:var o=e.return;try{Kg(e)}catch(l){nt(e,o,l)}}}catch(l){nt(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var gM=Math.ceil,ld=ii.ReactCurrentDispatcher,qy=ii.ReactCurrentOwner,Fn=ii.ReactCurrentBatchConfig,Se=0,It=null,ct=null,Nt=0,_n=0,Fo=rs(0),gt=0,mu=null,Vs=0,pf=0,Hy=0,Vl=null,sn=null,Gy=0,la=1/0,Mr=null,ud=!1,Xg=null,Di=null,Jc=!1,Ci=null,cd=0,Ul=0,Jg=null,Ch=-1,Ah=0;function en(){return Se&6?it():Ch!==-1?Ch:Ch=it()}function Mi(t){return t.mode&1?Se&2&&Nt!==0?Nt&-Nt:ZD.transition!==null?(Ah===0&&(Ah=mC()),Ah):(t=xe,t!==0||(t=window.event,t=t===void 0?16:TC(t.type)),t):1}function ir(t,e,n,r){if(50<Ul)throw Ul=0,Jg=null,Error(q(185));Bu(t,n,r),(!(Se&2)||t!==It)&&(t===It&&(!(Se&2)&&(pf|=n),gt===4&&yi(t,Nt)),hn(t,r),n===1&&Se===0&&!(e.mode&1)&&(la=it()+500,cf&&is()))}function hn(t,e){var n=t.callbackNode;ZO(t,e);var r=Gh(t,t===It?Nt:0);if(r===0)n!==null&&vE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vE(n),e===1)t.tag===0?JD(hT.bind(null,t)):jC(hT.bind(null,t)),KD(function(){!(Se&6)&&is()}),n=null;else{switch(gC(r)){case 1:n=vy;break;case 4:n=fC;break;case 16:n=Hh;break;case 536870912:n=pC;break;default:n=Hh}n=UA(n,NA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NA(t,e){if(Ch=-1,Ah=0,Se&6)throw Error(q(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var r=Gh(t,t===It?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hd(t,r);else{e=r;var i=Se;Se|=2;var s=DA();(It!==t||Nt!==e)&&(Mr=null,la=it()+500,bs(t,e));do try{vM();break}catch(a){OA(t,a)}while(!0);Ny(),ld.current=s,Se=i,ct!==null?e=0:(It=null,Nt=0,e=gt)}if(e!==0){if(e===2&&(i=Cg(t),i!==0&&(r=i,e=Zg(t,i))),e===1)throw n=mu,bs(t,0),yi(t,r),hn(t,it()),n;if(e===6)yi(t,r);else{if(i=t.current.alternate,!(r&30)&&!_M(i)&&(e=hd(t,r),e===2&&(s=Cg(t),s!==0&&(r=s,e=Zg(t,s))),e===1))throw n=mu,bs(t,0),yi(t,r),hn(t,it()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:gs(t,sn,Mr);break;case 3:if(yi(t,r),(r&130023424)===r&&(e=Gy+500-it(),10<e)){if(Gh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Og(gs.bind(null,t,sn,Mr),e);break}gs(t,sn,Mr);break;case 4:if(yi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gM(r/1960))-r,10<r){t.timeoutHandle=Og(gs.bind(null,t,sn,Mr),r);break}gs(t,sn,Mr);break;case 5:gs(t,sn,Mr);break;default:throw Error(q(329))}}}return hn(t,it()),t.callbackNode===n?NA.bind(null,t):null}function Zg(t,e){var n=Vl;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=hd(t,e),t!==2&&(e=sn,sn=n,e!==null&&e_(e)),t}function e_(t){sn===null?sn=t:sn.push.apply(sn,t)}function _M(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(o){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yi(t,e){for(e&=~Hy,e&=~pf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),r=1<<n;t[n]=-1,e&=~r}}function hT(t){if(Se&6)throw Error(q(327));Go();var e=Gh(t,0);if(!(e&1))return hn(t,it()),null;var n=hd(t,e);if(t.tag!==0&&n===2){var r=Cg(t);r!==0&&(e=r,n=Zg(t,r))}if(n===1)throw n=mu,bs(t,0),yi(t,e),hn(t,it()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,sn,Mr),hn(t,it()),null}function Ky(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(la=it()+500,cf&&is())}}function Us(t){Ci!==null&&Ci.tag===0&&!(Se&6)&&Go();var e=Se;Se|=1;var n=Fn.transition,r=xe;try{if(Fn.transition=null,xe=1,t)return t()}finally{xe=r,Fn.transition=n,Se=e,!(Se&6)&&is()}}function Qy(){_n=Fo.current,qe(Fo)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GD(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(Py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jh();break;case 3:oa(),qe(un),qe(Kt),Vy();break;case 5:Fy(r);break;case 4:oa();break;case 13:qe(Ke);break;case 19:qe(Ke);break;case 10:Oy(r.type._context);break;case 22:case 23:Qy()}n=n.return}if(It=t,ct=t=Li(t.current,null),Nt=_n=e,gt=0,mu=null,Hy=pf=Vs=0,sn=Vl=null,Ss!==null){for(e=0;e<Ss.length;e++)if(n=Ss[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ss=null}return t}function OA(t,e){do{var n=ct;try{if(Ny(),Th.current=ad,od){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}od=!1}if(Fs=0,wt=pt=Xe=null,Ll=!1,du=0,qy.current=null,n===null||n.return===null){gt=1,mu=e,ct=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=JE(o);if(g!==null){g.flags&=-257,ZE(g,o,a,s,e),g.mode&1&&XE(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var E=new Set;E.add(l),e.updateQueue=E}else y.add(l);break e}else{if(!(e&1)){XE(s,c,e),Yy();break e}l=Error(q(426))}}else if(Ge&&a.mode&1){var R=JE(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),ZE(R,o,a,s,e),by(aa(l,a));break e}}s=l=aa(l,a),gt!==4&&(gt=2),Vl===null?Vl=[s]:Vl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=gA(s,l,e);qE(s,v);break e;case 1:a=l;var _=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Di===null||!Di.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=_A(s,a,e);qE(s,b);break e}}s=s.return}while(s!==null)}LA(n)}catch(D){e=D,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function DA(){var t=ld.current;return ld.current=ad,t===null?ad:t}function Yy(){(gt===0||gt===3||gt===2)&&(gt=4),It===null||!(Vs&268435455)&&!(pf&268435455)||yi(It,Nt)}function hd(t,e){var n=Se;Se|=2;var r=DA();(It!==t||Nt!==e)&&(Mr=null,bs(t,e));do try{yM();break}catch(i){OA(t,i)}while(!0);if(Ny(),Se=n,ld.current=r,ct!==null)throw Error(q(261));return It=null,Nt=0,gt}function yM(){for(;ct!==null;)MA(ct)}function vM(){for(;ct!==null&&!WO();)MA(ct)}function MA(t){var e=VA(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?LA(t):ct=e,qy.current=null}function LA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dM(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ct=null;return}}else if(n=hM(n,e,_n),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);gt===0&&(gt=5)}function gs(t,e,n){var r=xe,i=Fn.transition;try{Fn.transition=null,xe=1,wM(t,e,n,r)}finally{Fn.transition=i,xe=r}return null}function wM(t,e,n,r){do Go();while(Ci!==null);if(Se&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(eD(t,s),t===It&&(ct=It=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jc||(Jc=!0,UA(Hh,function(){return Go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fn.transition,Fn.transition=null;var o=xe;xe=1;var a=Se;Se|=4,qy.current=null,pM(t,n),bA(n,t),$D(xg),Kh=!!bg,xg=bg=null,t.current=n,mM(n),qO(),Se=a,xe=o,Fn.transition=s}else t.current=n;if(Jc&&(Jc=!1,Ci=t,cd=i),s=t.pendingLanes,s===0&&(Di=null),KO(n.stateNode),hn(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,t=Xg,Xg=null,t;return cd&1&&t.tag!==0&&Go(),s=t.pendingLanes,s&1?t===Jg?Ul++:(Ul=0,Jg=t):Ul=0,is(),null}function Go(){if(Ci!==null){var t=gC(cd),e=Fn.transition,n=xe;try{if(Fn.transition=null,xe=16>t?16:t,Ci===null)var r=!1;else{if(t=Ci,Ci=null,cd=0,Se&6)throw Error(q(331));var i=Se;for(Se|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Z=c;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:Fl(8,h,s)}var d=h.child;if(d!==null)d.return=h,Z=d;else for(;Z!==null;){h=Z;var p=h.sibling,g=h.return;if(RA(h),h===c){Z=null;break}if(p!==null){p.return=g,Z=p;break}Z=g}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var R=E.sibling;E.sibling=null,E=R}while(E!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Fl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Z=v;break e}Z=s.return}}var _=t.current;for(Z=_;Z!==null;){o=Z;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Z=C;else e:for(o=_;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ff(9,a)}}catch(D){nt(a,a.return,D)}if(a===o){Z=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Z=b;break e}Z=a.return}}if(Se=i,is(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(sf,t)}catch(D){}r=!0}return r}finally{xe=n,Fn.transition=e}}return!1}function dT(t,e,n){e=aa(n,e),e=gA(t,e,1),t=Oi(t,e,1),e=en(),t!==null&&(Bu(t,1,e),hn(t,e))}function nt(t,e,n){if(t.tag===3)dT(t,t,n);else for(;e!==null;){if(e.tag===3){dT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Di===null||!Di.has(r))){t=aa(n,t),t=_A(e,t,1),e=Oi(e,t,1),t=en(),e!==null&&(Bu(e,1,t),hn(e,t));break}}e=e.return}}function EM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Nt&n)===n&&(gt===4||gt===3&&(Nt&130023424)===Nt&&500>it()-Gy?bs(t,0):Hy|=n),hn(t,e)}function FA(t,e){e===0&&(t.mode&1?(e=zc,zc<<=1,!(zc&130023424)&&(zc=4194304)):e=1);var n=en();t=Yr(t,e),t!==null&&(Bu(t,e,n),hn(t,n))}function TM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FA(t,n)}function IM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),FA(t,n)}var VA;VA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,cM(t,e,n);an=!!(t.flags&131072)}else an=!1,Ge&&e.flags&1048576&&zC(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sh(t,e),t=e.pendingProps;var i=ra(e,Kt.current);Ho(e,n),i=$y(null,e,r,t,i,n);var s=jy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(s=!0,Zh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,My(e),i.updater=df,e.stateNode=i,i._reactInternals=e,$g(e,r,t,n),e=Bg(null,e,r,!0,s,n)):(e.tag=0,Ge&&s&&ky(e),Jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=CM(r),t=Yn(r,t),i){case 0:e=zg(null,e,r,t,n);break e;case 1:e=nT(null,e,r,t,n);break e;case 11:e=eT(null,e,r,t,n);break e;case 14:e=tT(null,e,r,Yn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),zg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),nT(t,e,r,i,n);case 3:e:{if(EA(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,KC(t,e),id(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=aa(Error(q(423)),e),e=rT(t,e,r,n,i);break e}else if(r!==i){i=aa(Error(q(424)),e),e=rT(t,e,r,n,i);break e}else for(vn=Ni(e.stateNode.containerInfo.firstChild),Tn=e,Ge=!0,Jn=null,n=HC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ia(),r===i){e=Xr(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return QC(e),t===null&&Fg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ng(r,i)?o=null:s!==null&&Ng(r,s)&&(e.flags|=32),wA(t,e),Jt(t,e,o,n),e.child;case 6:return t===null&&Fg(e),null;case 13:return TA(t,e,n);case 4:return Ly(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sa(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),eT(t,e,r,i,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ue(nd,r._currentValue),r._currentValue=o,s!==null)if(ar(s.value,o)){if(s.children===i.children&&!un.current){e=Xr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Hr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Vg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ho(e,n),i=jn(i),r=r(i),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,i=Yn(r,e.pendingProps),i=Yn(r.type,i),tT(t,e,r,i,n);case 15:return yA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Sh(t,e),e.tag=1,cn(r)?(t=!0,Zh(e)):t=!1,Ho(e,n),mA(e,r,i),$g(e,r,i,n),Bg(null,e,r,!0,t,n);case 19:return IA(t,e,n);case 22:return vA(t,e,n)}throw Error(q(156,e.tag))};function UA(t,e){return dC(t,e)}function SM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new SM(t,e,n,r)}function Xy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CM(t){if(typeof t=="function")return Xy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gy)return 11;if(t===_y)return 14}return 2}function Li(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ro:return xs(n.children,i,s,e);case my:o=8,i|=8;break;case cg:return t=Mn(12,n,e,i|2),t.elementType=cg,t.lanes=s,t;case hg:return t=Mn(13,n,e,i),t.elementType=hg,t.lanes=s,t;case dg:return t=Mn(19,n,e,i),t.elementType=dg,t.lanes=s,t;case Q1:return mf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G1:o=10;break e;case K1:o=9;break e;case gy:o=11;break e;case _y:o=14;break e;case fi:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xs(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function mf(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=Q1,t.lanes=n,t.stateNode={isHidden:!1},t}function Pm(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function bm(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cm(0),this.expirationTimes=cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jy(t,e,n,r,i,s,o,a,l){return t=new AM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},My(s),t}function RM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $A(t){if(!t)return Wi;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(cn(n))return $C(t,n,e)}return e}function jA(t,e,n,r,i,s,o,a,l){return t=Jy(n,r,!0,t,i,s,o,a,l),t.context=$A(null),n=t.current,r=en(),i=Mi(n),s=Hr(r,i),s.callback=e!=null?e:null,Oi(n,s,i),t.current.lanes=i,Bu(t,i,r),hn(t,r),t}function gf(t,e,n,r){var i=e.current,s=en(),o=Mi(i);return n=$A(n),e.context===null?e.context=n:e.pendingContext=n,e=Hr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oi(i,e,o),t!==null&&(ir(t,i,o,s),Eh(t,i,o)),o}function dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zy(t,e){fT(t,e),(t=t.alternate)&&fT(t,e)}function kM(){return null}var zA=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}_f.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));gf(t,e,null,null)};_f.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Us(function(){gf(null,t,null,null)}),e[Qr]=null}};function _f(t){this._internalRoot=t}_f.prototype.unstable_scheduleHydration=function(t){if(t){var e=vC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&EC(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pT(){}function PM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=dd(o);s.call(c)}}var o=jA(e,r,t,0,null,!1,!1,"",pT);return t._reactRootContainer=o,t[Qr]=o.current,au(t.nodeType===8?t.parentNode:t),Us(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=dd(l);a.call(c)}}var l=Jy(t,0,!1,null,null,!1,!1,"",pT);return t._reactRootContainer=l,t[Qr]=l.current,au(t.nodeType===8?t.parentNode:t),Us(function(){gf(e,l,n,r)}),l}function vf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=dd(o);a.call(l)}}gf(e,o,t,i)}else o=PM(n,e,t,i,r);return dd(o)}_C=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Il(e.pendingLanes);n!==0&&(wy(e,n|1),hn(e,it()),!(Se&6)&&(la=it()+500,is()))}break;case 13:Us(function(){var r=Yr(t,1);if(r!==null){var i=en();ir(r,t,1,i)}}),Zy(t,1)}};Ey=function(t){if(t.tag===13){var e=Yr(t,134217728);if(e!==null){var n=en();ir(e,t,134217728,n)}Zy(t,134217728)}};yC=function(t){if(t.tag===13){var e=Mi(t),n=Yr(t,e);if(n!==null){var r=en();ir(n,t,e,r)}Zy(t,e)}};vC=function(){return xe};wC=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};Tg=function(t,e,n){switch(e){case"input":if(mg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=uf(r);if(!i)throw Error(q(90));X1(r),mg(r,i)}}}break;case"textarea":Z1(t,n);break;case"select":e=n.value,e!=null&&zo(t,!!n.multiple,e,!1)}};oC=Ky;aC=Us;var bM={usingClientEntryPoint:!1,Events:[qu,xo,uf,iC,sC,Ky]},dl={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xM={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cC(t),t===null?null:t.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||kM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{sf=Zc.inject(xM),vr=Zc}catch(t){}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bM;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(q(200));return RM(t,e,null,n)};kn.createRoot=function(t,e){if(!tv(t))throw Error(q(299));var n=!1,r="",i=zA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jy(t,1,!1,null,null,n,!1,r,i),t[Qr]=e.current,au(t.nodeType===8?t.parentNode:t),new ev(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=cC(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return Us(t)};kn.hydrate=function(t,e,n){if(!yf(e))throw Error(q(200));return vf(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=zA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jA(e,null,t,1,n!=null?n:null,i,!1,s,o),t[Qr]=e.current,au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _f(e)};kn.render=function(t,e,n){if(!yf(e))throw Error(q(200));return vf(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!yf(t))throw Error(q(40));return t._reactRootContainer?(Us(function(){vf(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};kn.unstable_batchedUpdates=Ky;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yf(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return vf(t,e,n,!1,r)};kn.version="18.3.1-next-f1338f8080-20240426";function BA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BA)}catch(t){console.error(t)}}BA(),B1.exports=kn;var WA=B1.exports;const eh=x1(WA);var mT=WA;lg.createRoot=mT.createRoot,lg.hydrateRoot=mT.hydrateRoot;var gT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=function(t,e){if(!t)throw xa(e)},xa=function(t){return new Error("Firebase Database ("+qA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},NM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new OM;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GA=function(t){const e=HA(t);return nv.encodeByteArray(e,!0)},fd=function(t){return GA(t).replace(/\./g,"")},pd=function(t){try{return nv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){return KA(void 0,t)}function KA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!MM(n)||(t[n]=KA(t[n],e[n]));return t}function MM(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=()=>LM().__FIREBASE_DEFAULTS__,VM=()=>{if(typeof process>"u"||typeof gT>"u")return;const t=gT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&pd(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return FM()||VM()||UM()}catch(t){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t));return}},QA=t=>{var e,n;return(n=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},YA=t=>{const e=QA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XA=()=>{var t;return(t=wf())===null||t===void 0?void 0:t.config},JA=t=>{var e;return(e=wf())===null||e===void 0?void 0:e["_".concat(t)]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(r),aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fd(JSON.stringify(n)),fd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function $M(){var t;const e=(t=wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function eR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jM(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nR(){return qA.NODE_ADMIN===!0}function zM(){return!$M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rR(){try{return typeof indexedDB=="object"}catch(t){return!1}}function iR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function BM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WM,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i="".concat(this.service,"/").concat(e),s=this.errors[e],o=s?qM(s,r):"Error",a="".concat(this.serviceName,": ").concat(o," (").concat(i,").");return new cr(i,a,r)}}function qM(t,e){return t.replace(HM,(n,r)=>{const i=e[r];return i!=null?String(i):"<".concat(r,"?>")})}const HM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=gu(pd(s[0])||""),n=gu(pd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},GM=function(t){const e=sR(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},KM=function(t){const e=sR(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ua(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function md(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function _u(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(_T(s)&&_T(o)){if(!_u(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _T(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function YM(t,e){const n=new XM(t,e);return n.subscribe.bind(n)}class XM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xm),i.error===void 0&&(i.error=xm),i.complete===void 0&&(i.complete=xm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xm(){}function ca(t,e){return"".concat(t," failed: ").concat(e," argument ")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Q(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ef=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=1e3,t2=2,n2=4*60*60*1e3,r2=.5;function yT(t,e=e2,n=t2){const r=e*Math.pow(n,t),i=Math.round(r2*r*(Math.random()-.5)*2);return Math.min(n2,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i2=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(o2(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:s2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function s2(t){return t===_s?void 0:t}function o2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const l2={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},u2=Ee.INFO,c2={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},h2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=c2[e];if(i)console[i]("[".concat(r,"]  ").concat(t.name,":"),...n);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))};class Gu{constructor(e){this.name=e,this._logLevel=u2,this._logHandler=h2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const d2=(t,e)=>e.some(n=>t instanceof n);let vT,wT;function f2(){return vT||(vT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p2(){return wT||(wT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oR=new WeakMap,t_=new WeakMap,aR=new WeakMap,Nm=new WeakMap,iv=new WeakMap;function m2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oR.set(n,t)}).catch(()=>{}),iv.set(e,t),e}function g2(t){if(t_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});t_.set(t,e)}let n_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return t_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _2(t){n_=t(n_)}function y2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Om(this),e,...n);return aR.set(r,e.sort?e.sort():[e]),Fi(r)}:p2().includes(t)?function(...e){return t.apply(Om(this),e),Fi(oR.get(this))}:function(...e){return Fi(t.apply(Om(this),e))}}function v2(t){return typeof t=="function"?y2(t):(t instanceof IDBTransaction&&g2(t),d2(t,f2())?new Proxy(t,n_):t)}function Fi(t){if(t instanceof IDBRequest)return m2(t);if(Nm.has(t))return Nm.get(t);const e=v2(t);return e!==t&&(Nm.set(t,e),iv.set(e,t)),e}const Om=t=>iv.get(t);function lR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Fi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fi(o.result),l.oldVersion,l.newVersion,Fi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const w2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],Dm=new Map;function ET(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=E2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||w2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Dm.set(e,s),s}_2(t=>({...t,get:(e,n,r)=>ET(e,n)||t.get(e,n,r),has:(e,n)=>!!ET(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(I2(n)){const r=n.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(n=>n).join(" ")}}function I2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const r_="@firebase/app",TT="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Gu("@firebase/app"),S2="@firebase/app-compat",C2="@firebase/analytics-compat",A2="@firebase/analytics",R2="@firebase/app-check-compat",k2="@firebase/app-check",P2="@firebase/auth",b2="@firebase/auth-compat",x2="@firebase/database",N2="@firebase/database-compat",O2="@firebase/functions",D2="@firebase/functions-compat",M2="@firebase/installations",L2="@firebase/installations-compat",F2="@firebase/messaging",V2="@firebase/messaging-compat",U2="@firebase/performance",$2="@firebase/performance-compat",j2="@firebase/remote-config",z2="@firebase/remote-config-compat",B2="@firebase/storage",W2="@firebase/storage-compat",q2="@firebase/firestore",H2="@firebase/vertexai-preview",G2="@firebase/firestore-compat",K2="firebase",Q2="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="[DEFAULT]",Y2={[r_]:"fire-core",[S2]:"fire-core-compat",[A2]:"fire-analytics",[C2]:"fire-analytics-compat",[k2]:"fire-app-check",[R2]:"fire-app-check-compat",[P2]:"fire-auth",[b2]:"fire-auth-compat",[x2]:"fire-rtdb",[N2]:"fire-rtdb-compat",[O2]:"fire-fn",[D2]:"fire-fn-compat",[M2]:"fire-iid",[L2]:"fire-iid-compat",[F2]:"fire-fcm",[V2]:"fire-fcm-compat",[U2]:"fire-perf",[$2]:"fire-perf-compat",[j2]:"fire-rc",[z2]:"fire-rc-compat",[B2]:"fire-gcs",[W2]:"fire-gcs-compat",[q2]:"fire-fst",[G2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[K2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,X2=new Map,s_=new Map;function IT(t,e){try{t.container.addComponent(e)}catch(n){$s.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function lr(t){const e=t.name;if(s_.has(e))return $s.debug("There were multiple attempts to register component ".concat(e,".")),!1;s_.set(e,t);for(const n of _d.values())IT(n,t);for(const n of X2.values())IT(n,t);return!0}function ss(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vi=new eo("app","Firebase",J2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=Q2;function uR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:i_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vi.create("bad-app-name",{appName:String(i)});if(n||(n=XA()),!n)throw Vi.create("no-options");const s=_d.get(i);if(s){if(_u(n,s.options)&&_u(r,s.config))return s;throw Vi.create("duplicate-app",{appName:i})}const o=new a2(i);for(const l of s_.values())o.addComponent(l);const a=new Z2(n,r,o);return _d.set(i,a),a}function Tf(t=i_){const e=_d.get(t);if(!e&&t===i_&&XA())return uR();if(!e)throw Vi.create("no-app",{appName:t});return e}function dn(t,e,n){var r;let i=(r=Y2[t])!==null&&r!==void 0?r:t;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];s&&a.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&a.push("and"),o&&a.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),$s.warn(a.join(" "));return}lr(new Bn("".concat(i,"-version"),()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="firebase-heartbeat-database",tL=1,yu="firebase-heartbeat-store";let Mm=null;function cR(){return Mm||(Mm=lR(eL,tL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),Mm}async function nL(t){try{const n=(await cR()).transaction(yu),r=await n.objectStore(yu).get(hR(t));return await n.done,r}catch(e){if(e instanceof cr)$s.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(n.message)}}}async function ST(t,e){try{const r=(await cR()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,hR(t)),await r.done}catch(n){if(n instanceof cr)$s.warn(n.message);else{const r=Vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$s.warn(r.message)}}}function hR(t){return"".concat(t.name,"!").concat(t.options.appId)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1024,iL=30*24*60*60*1e3;class sL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=CT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=iL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=CT(),{heartbeatsToSend:r,unsentEntries:i}=oL(this._heartbeatsCache.heartbeats),s=fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function CT(){return new Date().toISOString().substring(0,10)}function oL(t,e=rL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),AT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),AT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rR()?iR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ST(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ST(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function AT(t){return fd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t){lr(new Bn("platform-logger",e=>new T2(e),"PRIVATE")),lr(new Bn("heartbeat",e=>new sL(e),"PRIVATE")),dn(r_,TT,t),dn(r_,TT,"esm2017"),dn("fire-js","")}lL("");var uL="firebase",cL="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn(uL,cL,"app");function sv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hL=dR,fR=new eo("auth","Firebase",dR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Gu("@firebase/auth");function dL(t,...e){yd.logLevel<=Ee.WARN&&yd.warn("Auth (".concat(to,"): ").concat(t),...e)}function kh(t,...e){yd.logLevel<=Ee.ERROR&&yd.error("Auth (".concat(to,"): ").concat(t),...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,...e){throw av(t,...e)}function sr(t,...e){return av(t,...e)}function ov(t,e,n){const r=Object.assign(Object.assign({},hL()),{[e]:n});return new eo("auth","Firebase",r).create(e,{appName:t.name})}function Ns(t){return ov(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fL(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rr(t,"argument-error"),ov(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function av(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fR.create(t,...e)}function ce(t,e,...n){if(!t)throw av(e,...n)}function zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kh(e),new Error(e)}function Jr(t,e){t||zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pL(){return RT()==="http:"||RT()==="https:"}function RT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pL()||eR()||"connection"in navigator)?navigator.onLine:!0}function gL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=rv()||tR()}get(){return mL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e){Jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new Ku(3e4,6e4);function uv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Oa(t,e,n,r,i={}){return mR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Na(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),pR.fetch()(gR(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function mR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_L),e);try{const i=new wL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw th(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw th(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw th(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw th(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ov(t,h,c);Rr(t,h)}}catch(i){if(i instanceof cr)throw i;Rr(t,"network-request-failed",{message:String(i)})}}async function vL(t,e,n,r,i={}){const s=await Oa(t,e,n,r,i);return"mfaPendingCredential"in s&&Rr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function gR(t,e,n,r){const i="".concat(e).concat(n,"?").concat(r);return t.config.emulator?lv(t.config,i):"".concat(t.config.apiScheme,"://").concat(i)}class wL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sr(this.auth,"network-request-failed")),yL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function th(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=sr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(t,e){return Oa(t,"POST","/v1/accounts:delete",e)}async function _R(t,e){return Oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function TL(t,e=!1){const n=Me(t),r=await n.getIdToken(e),i=cv(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$l(Lm(i.auth_time)),issuedAtTime:$l(Lm(i.iat)),expirationTime:$l(Lm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Lm(t){return Number(t)*1e3}function cv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{const i=pd(n);return i?JSON.parse(i):(kh("Failed to decode base64 JWT payload"),null)}catch(i){return kh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function kT(t){const e=cv(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&IL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vu(t,_R(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yR(s.providerUserInfo):[],a=AL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new a_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function CL(t){const e=Me(t);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yR(t){return t.map(e=>{var{providerId:n}=e,r=sv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e){const n=await mR(t,{},async()=>{const r=Na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=gR(t,i,"/v1/token","key=".concat(s)),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kL(t,e){return Oa(t,"POST","/v2/accounts:revokeToken",uv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=kT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await RL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ko;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Br{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new a_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vu(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TL(this,e)}reload(){return CL(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(Ns(this.auth));const e=await this.getIdToken();return await vu(this,EL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:b,isAnonymous:D,providerData:L,stsTokenManager:S}=n;ce(C&&S,e,"internal-error");const w=Ko.fromJSON(this.name,S);ce(typeof C=="string",e,"internal-error"),di(d,e.name),di(p,e.name),ce(typeof b=="boolean",e,"internal-error"),ce(typeof D=="boolean",e,"internal-error"),di(g,e.name),di(y,e.name),di(E,e.name),di(R,e.name),di(v,e.name),di(_,e.name);const A=new Br({uid:C,auth:e,email:p,emailVerified:b,displayName:d,isAnonymous:D,photoURL:y,phoneNumber:g,tenantId:E,stsTokenManager:w,createdAt:v,lastLoginAt:_});return L&&Array.isArray(L)&&(A.providerData=L.map(k=>Object.assign({},k))),R&&(A._redirectEventId=R),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ko;i.updateFromServerResponse(n);const s=new Br({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?yR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ko;a.updateFromIdToken(r);const l=new Br({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new a_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new Map;function Wr(t){Jr(t instanceof Function,"Expected a class definition");let e=PT.get(t);return e?(Jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vR.type="NONE";const bT=vR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e,n){return"firebase:".concat(t,":").concat(e,":").concat(n)}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ph(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ph("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(Wr(bT),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Wr(bT);const o=Ph(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Br._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch(h){}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Qo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch(h){}})),new Qo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SR(e))return"Blackberry";if(CR(e))return"Webos";if(hv(e))return"Safari";if((e.includes("chrome/")||ER(e))&&!e.includes("edge/"))return"Chrome";if(IR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wR(t=Lt()){return/firefox\//i.test(t)}function hv(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ER(t=Lt()){return/crios\//i.test(t)}function TR(t=Lt()){return/iemobile/i.test(t)}function IR(t=Lt()){return/android/i.test(t)}function SR(t=Lt()){return/blackberry/i.test(t)}function CR(t=Lt()){return/webos/i.test(t)}function If(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PL(t=Lt()){var e;return If(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bL(){return jM()&&document.documentMode===10}function AR(t=Lt()){return If(t)||IR(t)||CR(t)||SR(t)||/windows phone/i.test(t)||TR(t)}function xL(){try{return!!(window&&window!==window.top)}catch(t){return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e=[]){let n;switch(t){case"Browser":n=xT(Lt());break;case"Worker":n="".concat(xT(Lt()),"-").concat(t);break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return"".concat(n,"/JsCore/").concat(to,"/").concat(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e={}){return Oa(t,"GET","/v2/passwordPolicy",uv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=6;class ML{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:DL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NT(this),this.idTokenSubscription=new NT(this),this.beforeStateQueue=new NL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _R(this,{idToken:e}),r=await Br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(Ns(this));const n=e?Me(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OL(this),n=new ML(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&dL("Error while retrieving App Check token: ".concat(n.error)),n==null?void 0:n.token}}function Sf(t){return Me(t)}class NT{constructor(e){this.auth=e,this.observer=null,this.addObserver=YM(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FL(t){dv=t}function VL(t){return dv.loadJS(t)}function UL(){return dv.gapiScript}function $L(t){return"__".concat(t).concat(Math.floor(Math.random()*1e6))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t,e){const n=ss(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(_u(s,e!=null?e:{}))return i;Rr(i,"already-initialized")}return n.initialize({options:e})}function zL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BL(t,e,n){const r=Sf(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=kR(e),{host:o,port:a}=WL(e),l=a===null?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),qL()}function kR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WL(t){const e=kR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:OT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:OT(o)}}}function OT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,n){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return vL(t,"POST","/v1/accounts:signInWithIdp",uv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="http://localhost";class js extends PR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=sv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new js(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:HL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends fv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Qu{constructor(){super("facebook.com")}static credential(e){return js._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch(n){return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return js._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vr.credential(n,r)}catch(i){return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com";Vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Qu{constructor(){super("github.com")}static credential(e){return js._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch(n){return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Qu{constructor(){super("twitter.com")}static credential(e,n){return js._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ei.credential(n,r)}catch(i){return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Br._fromIdTokenResponse(e,r,i),o=DT(r);return new ha({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=DT(r);return new ha({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function DT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wd(e,n,r,i)}}function bR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(t,s,e,r):s})}async function GL(t,e,n=!1){const r=await vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ha._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e,n=!1){const{auth:r}=t;if(jr(r.app))return Promise.reject(Ns(r));const i="reauthenticate";try{const s=await vu(t,bR(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=cv(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),ha._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e,n=!1){if(jr(t.app))return Promise.reject(Ns(t));const r="signIn",i=await bR(t,r,e),s=await ha._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function YL(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function XL(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function JL(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){const t=Lt();return hv(t)||If(t)}const eF=1e3,tF=10;class NR extends xR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ZL()&&xL(),this.fallbackToPolling=AR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tF):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NR.type="LOCAL";const nF=NR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends xR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OR.type="SESSION";const DR=OR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Cf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await rF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=pv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function sF(t){Er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function oF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function aF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lF(){return MR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="firebaseLocalStorageDb",uF=1,Td="firebaseLocalStorage",FR="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Af(t,e){return t.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function cF(){const t=indexedDB.deleteDatabase(LR);return new Yu(t).toPromise()}function l_(){const t=indexedDB.open(LR,uF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Td,{keyPath:FR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Td)?e(r):(r.close(),await cF(),e(await l_()))})})}async function MT(t,e,n){const r=Af(t,!0).put({[FR]:e,value:n});return new Yu(r).toPromise()}async function hF(t,e){const n=Af(t,!1).get(e),r=await new Yu(n).toPromise();return r===void 0?null:r.value}function LT(t,e){const n=Af(t,!0).delete(e);return new Yu(n).toPromise()}const dF=800,fF=3;class VR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cf._getInstance(lF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oF(),!this.activeServiceWorker)return;this.sender=new iF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l_();return await MT(e,Ed,"1"),await LT(e,Ed),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>MT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Af(i,!1).getAll();return new Yu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VR.type="LOCAL";const pF=VR;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e){return e?Wr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends PR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mF(t){return QL(t.auth,new mv(t),t.bypassAuthState)}function gF(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),KL(n,new mv(t),t.bypassAuthState)}async function _F(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),GL(n,new mv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mF;case"linkViaPopup":case"linkViaRedirect":return _F;case"reauthViaPopup":case"reauthViaRedirect":return gF;default:Rr(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=new Ku(2e3,1e4);async function vF(t,e,n){if(jr(t.app))return Promise.reject(sr(t,"operation-not-supported-in-this-environment"));const r=Sf(t);fL(t,e,fv);const i=UR(r,n);return new As(r,"signInViaPopup",e,i).executeNotNull()}class As extends $R{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yF.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="pendingRedirect",bh=new Map;class EF extends $R{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const r=await TF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TF(t,e){const n=CF(e),r=SF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function IF(t,e){bh.set(t._key(),e)}function SF(t){return Wr(t._redirectPersistence)}function CF(t){return Ph(wF,t.config.apiKey,t.name)}async function AF(t,e,n=!1){if(jr(t.app))return Promise.reject(Ns(t));const r=Sf(t),i=UR(r,e),o=await new EF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=10*60*1e3;class kF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RF&&this.cachedEventUids.clear(),this.cachedEventUids.has(FT(e))}saveEventToCache(e){this.cachedEventUids.add(FT(e)),this.lastProcessedEventTime=Date.now()}}function FT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e={}){return Oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NF=/^https?/;async function OF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bF(t);for(const n of e)try{if(DF(n))return}catch(r){}Rr(t,"unauthorized-domain")}function DF(t){const e=o_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NF.test(n))return!1;if(xF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new Ku(3e4,6e4);function VT(){const t=Er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LF(t){return new Promise((e,n)=>{var r,i,s;function o(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),n(sr(t,"network-request-failed"))},timeout:MF.get()})}if(!((i=(r=Er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Er().gapi)===null||s===void 0)&&s.load)o();else{const a=$L("iframefcb");return Er()[a]=()=>{gapi.load?o():n(sr(t,"network-request-failed"))},VL("".concat(UL(),"?onload=").concat(a)).catch(l=>n(l))}}).catch(e=>{throw xh=null,e})}let xh=null;function FF(t){return xh=xh||LF(t),xh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=new Ku(5e3,15e3),UF="__/auth/iframe",$F="emulator/auth/iframe",jF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BF(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lv(e,$F):"https://".concat(t.config.authDomain,"/").concat(UF),r={apiKey:e.apiKey,appName:t.name,v:to},i=zF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Na(r).slice(1))}async function WF(t){const e=await FF(t),n=Er().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:BF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=sr(t,"network-request-failed"),a=Er().setTimeout(()=>{s(o)},VF.get());function l(){Er().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HF=500,GF=600,KF="_blank",QF="http://localhost";class UT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function YF(t,e,n,r=HF,i=GF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qF),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Lt().toLowerCase();n&&(a=ER(c)?KF:n),wR(c)&&(e=e||QF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>"".concat(p).concat(g,"=").concat(y,","),"");if(PL(c)&&a!=="_self")return XF(e||"",a),new UT(null);const d=window.open(e||"",a,h);ce(d,t,"popup-blocked");try{d.focus()}catch(p){}return new UT(d)}function XF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="__/auth/handler",ZF="emulator/auth/handler",eV=encodeURIComponent("fac");async function $T(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:to,eventId:i};if(e instanceof fv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",md(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Qu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?"#".concat(eV,"=").concat(encodeURIComponent(l)):"";return"".concat(tV(t),"?").concat(Na(a).slice(1)).concat(c)}function tV({config:t}){return t.emulator?lv(t,ZF):"https://".concat(t.authDomain,"/").concat(JF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="webStorageSupport";class nV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DR,this._completeRedirectFn=AF,this._overrideRedirectResult=IF}async _openPopup(e,n,r,i){var s;Jr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $T(e,n,r,o_(),i);return YF(e,o,pv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $T(e,n,r,o_(),i);return sF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WF(e),r=new kF(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Fm];o!==void 0&&n(!!o),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AR()||hv()||If()}}const rV=nV;var jT="@firebase/auth",zT="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oV(t){lr(new Bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RR(t)},c=new LL(r,i,s,l);return zL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lr(new Bn("auth-internal",e=>{const n=Sf(e.getProvider("auth").getImmediate());return(r=>new iV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(jT,zT,sV(t)),dn(jT,zT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=5*60,lV=JA("authIdTokenMaxAge")||aV;let BT=null;const uV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lV)return;const i=n==null?void 0:n.token;BT!==i&&(BT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function cV(t=Tf()){const e=ss(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jL(t,{popupRedirectResolver:rV,persistence:[pF,nF,DR]}),r=JA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=uV(s.toString());XL(n,o,()=>o(n.currentUser)),YL(n,a=>o(a))}}const i=QA("auth");return i&&BL(n,"http://".concat(i)),n}function hV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=sr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oV("Browser");/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const dV={};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function nh(t){return Object.isFrozen(t)&&Object.isFrozen(t.raw)}function rh(t){return t.toString().indexOf("`")===-1}var T1,I1,S1,C1;rh(t=>t(T1||(T1=dr([""]))))||rh(t=>t(I1||(I1=dr(["\0"],["\\0"]))))||rh(t=>t(S1||(S1=dr(["\n"],["\\n"]))))||rh(t=>t(C1||(C1=dr(["\0"],["\\u0000"]))));var A1,R1,k1,P1;nh(A1||(A1=dr([""])))&&nh(R1||(R1=dr(["\0"],["\\0"])))&&nh(k1||(k1=dr(["\n"],["\\n"])))&&nh(P1||(P1=dr(["\0"],["\\u0000"])));/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */let zR="google#safe";function fV(){if(typeof window<"u")return window.trustedTypes}function BR(){var t;return zR!==""&&(t=fV())!==null&&t!==void 0?t:null}let ih;function pV(){var t,e;if(ih===void 0)try{ih=(e=(t=BR())===null||t===void 0?void 0:t.createPolicy(zR,{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n}))!==null&&e!==void 0?e:null}catch(n){ih=null}return ih}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */class WR{constructor(e,n){this.privateDoNotAccessOrElseWrappedResourceUrl=e}toString(){return this.privateDoNotAccessOrElseWrappedResourceUrl.toString()}}function WT(t){var e;const n=t,r=(e=pV())===null||e===void 0?void 0:e.createScriptURL(n);return r!=null?r:new WR(n,dV)}function mV(t){var e;if(!((e=BR())===null||e===void 0)&&e.isScriptURL(t))return t;if(t instanceof WR)return t.privateDoNotAccessOrElseWrappedResourceUrl;{let n="";throw new Error(n)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function gV(t,...e){if(e.length===0)return WT(t[0]);t[0].toLowerCase();let n=t[0];for(let r=0;r<e.length;r++)n+=encodeURIComponent(e[r])+t[r+1];return WT(n)}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function _V(t){return yV("script",t)}function yV(t,e){var n;const r=e.document,i=(n=r.querySelector)===null||n===void 0?void 0:n.call(r,"".concat(t,"[nonce]"));return i&&(i.nonce||i.getAttribute("nonce"))||""}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function vV(t){const e=t.ownerDocument&&t.ownerDocument.defaultView,n=_V(e||window);n&&t.setAttribute("nonce",n)}function wV(t,e,n){t.src=mV(e),vV(t)}const qR="@firebase/installations",gv="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=1e4,GR="w:".concat(gv),KR="FIS_v2",EV="https://firebaseinstallations.googleapis.com/v1",TV=60*60*1e3,IV="installations",SV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zs=new eo(IV,SV,CV);function QR(t){return t instanceof cr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR({projectId:t}){return"".concat(EV,"/projects/").concat(t,"/installations")}function XR(t){return{token:t.token,requestStatus:2,expiresIn:RV(t.expiresIn),creationTime:Date.now()}}async function JR(t,e){const r=(await e.json()).error;return zs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ZR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function AV(t,{refreshToken:e}){const n=ZR(t);return n.append("Authorization",kV(e)),n}async function ek(t){const e=await t();return e.status>=500&&e.status<600?t():e}function RV(t){return Number(t.replace("s","000"))}function kV(t){return"".concat(KR," ").concat(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=YR(t),i=ZR(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:KR,appId:t.appId,sdkVersion:GR},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await ek(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:XR(c.authToken)}}else throw await JR("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=/^[cdef][\w-]{21}$/,u_="";function NV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=OV(t);return xV.test(n)?n:u_}catch(t){return u_}}function OV(t){return bV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return"".concat(t.appName,"!").concat(t.appId)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Map;function rk(t,e){const n=Rf(t);ik(n,e),DV(n,e)}function ik(t,e){const n=nk.get(t);if(n)for(const r of n)r(e)}function DV(t,e){const n=MV();n&&n.postMessage({key:t,fid:e}),LV()}let Rs=null;function MV(){return!Rs&&"BroadcastChannel"in self&&(Rs=new BroadcastChannel("[Firebase] FID Change"),Rs.onmessage=t=>{ik(t.data.key,t.data.fid)}),Rs}function LV(){nk.size===0&&Rs&&(Rs.close(),Rs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="firebase-installations-database",VV=1,Bs="firebase-installations-store";let Vm=null;function _v(){return Vm||(Vm=lR(FV,VV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bs)}}})),Vm}async function Id(t,e){const n=Rf(t),i=(await _v()).transaction(Bs,"readwrite"),s=i.objectStore(Bs),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&rk(t,e.fid),e}async function sk(t){const e=Rf(t),r=(await _v()).transaction(Bs,"readwrite");await r.objectStore(Bs).delete(e),await r.done}async function kf(t,e){const n=Rf(t),i=(await _v()).transaction(Bs,"readwrite"),s=i.objectStore(Bs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&rk(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yv(t){let e;const n=await kf(t.appConfig,r=>{const i=UV(r),s=$V(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===u_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function UV(t){const e=t||{fid:NV(),registrationStatus:0};return ok(e)}function $V(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(zs.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=jV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zV(t)}:{installationEntry:e}}async function jV(t,e){try{const n=await PV(t,e);return Id(t.appConfig,n)}catch(n){throw QR(n)&&n.customData.serverCode===409?await sk(t.appConfig):await Id(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function zV(t){let e=await qT(t.appConfig);for(;e.registrationStatus===1;)await tk(100),e=await qT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await yv(t);return r||n}return e}function qT(t){return kf(t,e=>{if(!e)throw zs.create("installation-not-found");return ok(e)})}function ok(t){return BV(t)?{fid:t.fid,registrationStatus:0}:t}function BV(t){return t.registrationStatus===1&&t.registrationTime+HR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV({appConfig:t,heartbeatServiceProvider:e},n){const r=qV(t,n),i=AV(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:GR,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await ek(()=>fetch(r,a));if(l.ok){const c=await l.json();return XR(c)}else throw await JR("Generate Auth Token",l)}function qV(t,{fid:e}){return"".concat(YR(t),"/").concat(e,"/authTokens:generate")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(t,e=!1){let n;const r=await kf(t.appConfig,s=>{if(!ak(s))throw zs.create("not-registered");const o=s.authToken;if(!e&&KV(o))return s;if(o.requestStatus===1)return n=HV(t,e),s;{if(!navigator.onLine)throw zs.create("app-offline");const a=YV(s);return n=GV(t,a),a}});return n?await n:r.authToken}async function HV(t,e){let n=await HT(t.appConfig);for(;n.authToken.requestStatus===1;)await tk(100),n=await HT(t.appConfig);const r=n.authToken;return r.requestStatus===0?vv(t,e):r}function HT(t){return kf(t,e=>{if(!ak(e))throw zs.create("not-registered");const n=e.authToken;return XV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function GV(t,e){try{const n=await WV(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Id(t.appConfig,r),n}catch(n){if(QR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sk(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Id(t.appConfig,r)}throw n}}function ak(t){return t!==void 0&&t.registrationStatus===2}function KV(t){return t.requestStatus===2&&!QV(t)}function QV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TV}function YV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function XV(t){return t.requestStatus===1&&t.requestTime+HR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t){const e=t,{installationEntry:n,registrationPromise:r}=await yv(e);return r?r.catch(console.error):vv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV(t,e=!1){const n=t;return await e4(n),(await vv(n,e)).token}async function e4(t){const{registrationPromise:e}=await yv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){if(!t||!t.options)throw Um("App Configuration");if(!t.name)throw Um("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Um(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Um(t){return zs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="installations",n4="installations-internal",r4=t=>{const e=t.getProvider("app").getImmediate(),n=t4(e),r=ss(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},i4=t=>{const e=t.getProvider("app").getImmediate(),n=ss(e,lk).getImmediate();return{getId:()=>JV(n),getToken:i=>ZV(n,i)}};function s4(){lr(new Bn(lk,r4,"PUBLIC")),lr(new Bn(n4,i4,"PRIVATE"))}s4();dn(qR,gv);dn(qR,gv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="analytics",o4="firebase_id",a4="origin",l4=60*1e3,u4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",c4="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Gu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}var b1;function h4(t,e){const n=document.createElement("script"),r=gV(b1||(b1=dr(["https://www.googletagmanager.com/gtag/js?l=","&id=",""])),t,e);wV(n,r),n.async=!0,document.head.appendChild(n)}function d4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function f4(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await uk(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){In.error(a)}t("config",i,s)}async function p4(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await uk(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){In.error(s)}}function m4(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await p4(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await f4(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){In.error(a)}}return i}function g4(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=m4(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function _4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(c4)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new eo("analytics","Analytics",y4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=30,w4=1e3;class E4{constructor(e={},n=w4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ck=new E4;function T4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function I4(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:T4(r)},s=u4.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch(l){}throw Vn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function S4(t,e=ck,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Vn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Vn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new R4;return setTimeout(async()=>{a.abort()},l4),hk({appId:r,apiKey:i,measurementId:s},o,a,e)}async function hk(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ck){var s;const{appId:o,measurementId:a}=t;try{await C4(r,e)}catch(l){if(a)return In.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(a)+' provided in the "measurementId" field in the local Firebase config. ['.concat(l==null?void 0:l.message,"]")),{appId:o,measurementId:a};throw l}try{const l=await I4(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!A4(c)){if(i.deleteThrottleMetadata(o),a)return In.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(a)+' provided in the "measurementId" field in the local Firebase config. ['.concat(c==null?void 0:c.message,"]")),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?yT(n,i.intervalMillis,v4):yT(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,d),In.debug("Calling attemptFetch again in ".concat(h," millis")),hk(t,d,r,i)}}function C4(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function A4(t){if(!(t instanceof cr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class R4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function k4(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(){if(rR())try{await iR()}catch(t){return In.warn(Vn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return In.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function b4(t,e,n,r,i,s,o){var a;const l=S4(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&In.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(g.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(g=>In.error(g)),e.push(l);const c=P4().then(g=>{if(g)return r.getId()}),[h,d]=await Promise.all([l,c]);_4(s)||h4(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[a4]="firebase",p.update=!0,d!=null&&(p[o4]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.app=e}_delete(){return delete jl[this.app.options.appId],Promise.resolve()}}let jl={},GT=[];const KT={};let $m="dataLayer",N4="gtag",QT,dk,YT=!1;function O4(){const t=[];if(eR()&&t.push("This is a browser extension environment."),BM()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>"(".concat(i+1,") ").concat(r)).join(" "),n=Vn.create("invalid-analytics-context",{errorInfo:e});In.warn(n.message)}}function D4(t,e,n){O4();const r=t.options.appId;if(!r)throw Vn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)In.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(t.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw Vn.create("no-api-key");if(jl[r]!=null)throw Vn.create("already-exists",{id:r});if(!YT){d4($m);const{wrappedGtag:s,gtagCore:o}=g4(jl,GT,KT,$m,N4);dk=s,QT=o,YT=!0}return jl[r]=b4(t,GT,KT,e,QT,$m,n),new x4(t)}function M4(t=Tf()){t=Me(t);const e=ss(t,Sd);return e.isInitialized()?e.getImmediate():L4(t)}function L4(t,e={}){const n=ss(t,Sd);if(n.isInitialized()){const i=n.getImmediate();if(_u(e,n.getOptions()))return i;throw Vn.create("already-initialized")}return n.initialize({options:e})}function F4(t,e,n,r){t=Me(t),k4(dk,jl[t.app.options.appId],e,n,r).catch(i=>In.error(i))}const XT="@firebase/analytics",JT="0.10.6";function V4(){lr(new Bn(Sd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return D4(r,i,n)},"PUBLIC")),lr(new Bn("analytics-internal",t,"PRIVATE")),dn(XT,JT),dn(XT,JT,"esm2017");function t(e){try{const n=e.getProvider(Sd).getImmediate();return{logEvent:(r,i,s)=>F4(n,r,i,s)}}catch(n){throw Vn.create("interop-component-reg-failed",{reason:n})}}}V4();var ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Os,fk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function A(){}A.prototype=w.prototype,S.D=w.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(k,P,x){for(var I=Array(arguments.length-2),K=2;K<arguments.length;K++)I[K-2]=arguments[K];return w.prototype[P].apply(k,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,w,A){A||(A=0);var k=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)k[P]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(P=0;16>P;++P)k[P]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=S.g[0],A=S.g[1],P=S.g[2];var x=S.g[3],I=w+(x^A&(P^x))+k[0]+3614090360&4294967295;w=A+(I<<7&4294967295|I>>>25),I=x+(P^w&(A^P))+k[1]+3905402710&4294967295,x=w+(I<<12&4294967295|I>>>20),I=P+(A^x&(w^A))+k[2]+606105819&4294967295,P=x+(I<<17&4294967295|I>>>15),I=A+(w^P&(x^w))+k[3]+3250441966&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(x^A&(P^x))+k[4]+4118548399&4294967295,w=A+(I<<7&4294967295|I>>>25),I=x+(P^w&(A^P))+k[5]+1200080426&4294967295,x=w+(I<<12&4294967295|I>>>20),I=P+(A^x&(w^A))+k[6]+2821735955&4294967295,P=x+(I<<17&4294967295|I>>>15),I=A+(w^P&(x^w))+k[7]+4249261313&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(x^A&(P^x))+k[8]+1770035416&4294967295,w=A+(I<<7&4294967295|I>>>25),I=x+(P^w&(A^P))+k[9]+2336552879&4294967295,x=w+(I<<12&4294967295|I>>>20),I=P+(A^x&(w^A))+k[10]+4294925233&4294967295,P=x+(I<<17&4294967295|I>>>15),I=A+(w^P&(x^w))+k[11]+2304563134&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(x^A&(P^x))+k[12]+1804603682&4294967295,w=A+(I<<7&4294967295|I>>>25),I=x+(P^w&(A^P))+k[13]+4254626195&4294967295,x=w+(I<<12&4294967295|I>>>20),I=P+(A^x&(w^A))+k[14]+2792965006&4294967295,P=x+(I<<17&4294967295|I>>>15),I=A+(w^P&(x^w))+k[15]+1236535329&4294967295,A=P+(I<<22&4294967295|I>>>10),I=w+(P^x&(A^P))+k[1]+4129170786&4294967295,w=A+(I<<5&4294967295|I>>>27),I=x+(A^P&(w^A))+k[6]+3225465664&4294967295,x=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(x^w))+k[11]+643717713&4294967295,P=x+(I<<14&4294967295|I>>>18),I=A+(x^w&(P^x))+k[0]+3921069994&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(P^x&(A^P))+k[5]+3593408605&4294967295,w=A+(I<<5&4294967295|I>>>27),I=x+(A^P&(w^A))+k[10]+38016083&4294967295,x=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(x^w))+k[15]+3634488961&4294967295,P=x+(I<<14&4294967295|I>>>18),I=A+(x^w&(P^x))+k[4]+3889429448&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(P^x&(A^P))+k[9]+568446438&4294967295,w=A+(I<<5&4294967295|I>>>27),I=x+(A^P&(w^A))+k[14]+3275163606&4294967295,x=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(x^w))+k[3]+4107603335&4294967295,P=x+(I<<14&4294967295|I>>>18),I=A+(x^w&(P^x))+k[8]+1163531501&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(P^x&(A^P))+k[13]+2850285829&4294967295,w=A+(I<<5&4294967295|I>>>27),I=x+(A^P&(w^A))+k[2]+4243563512&4294967295,x=w+(I<<9&4294967295|I>>>23),I=P+(w^A&(x^w))+k[7]+1735328473&4294967295,P=x+(I<<14&4294967295|I>>>18),I=A+(x^w&(P^x))+k[12]+2368359562&4294967295,A=P+(I<<20&4294967295|I>>>12),I=w+(A^P^x)+k[5]+4294588738&4294967295,w=A+(I<<4&4294967295|I>>>28),I=x+(w^A^P)+k[8]+2272392833&4294967295,x=w+(I<<11&4294967295|I>>>21),I=P+(x^w^A)+k[11]+1839030562&4294967295,P=x+(I<<16&4294967295|I>>>16),I=A+(P^x^w)+k[14]+4259657740&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(A^P^x)+k[1]+2763975236&4294967295,w=A+(I<<4&4294967295|I>>>28),I=x+(w^A^P)+k[4]+1272893353&4294967295,x=w+(I<<11&4294967295|I>>>21),I=P+(x^w^A)+k[7]+4139469664&4294967295,P=x+(I<<16&4294967295|I>>>16),I=A+(P^x^w)+k[10]+3200236656&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(A^P^x)+k[13]+681279174&4294967295,w=A+(I<<4&4294967295|I>>>28),I=x+(w^A^P)+k[0]+3936430074&4294967295,x=w+(I<<11&4294967295|I>>>21),I=P+(x^w^A)+k[3]+3572445317&4294967295,P=x+(I<<16&4294967295|I>>>16),I=A+(P^x^w)+k[6]+76029189&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(A^P^x)+k[9]+3654602809&4294967295,w=A+(I<<4&4294967295|I>>>28),I=x+(w^A^P)+k[12]+3873151461&4294967295,x=w+(I<<11&4294967295|I>>>21),I=P+(x^w^A)+k[15]+530742520&4294967295,P=x+(I<<16&4294967295|I>>>16),I=A+(P^x^w)+k[2]+3299628645&4294967295,A=P+(I<<23&4294967295|I>>>9),I=w+(P^(A|~x))+k[0]+4096336452&4294967295,w=A+(I<<6&4294967295|I>>>26),I=x+(A^(w|~P))+k[7]+1126891415&4294967295,x=w+(I<<10&4294967295|I>>>22),I=P+(w^(x|~A))+k[14]+2878612391&4294967295,P=x+(I<<15&4294967295|I>>>17),I=A+(x^(P|~w))+k[5]+4237533241&4294967295,A=P+(I<<21&4294967295|I>>>11),I=w+(P^(A|~x))+k[12]+1700485571&4294967295,w=A+(I<<6&4294967295|I>>>26),I=x+(A^(w|~P))+k[3]+2399980690&4294967295,x=w+(I<<10&4294967295|I>>>22),I=P+(w^(x|~A))+k[10]+4293915773&4294967295,P=x+(I<<15&4294967295|I>>>17),I=A+(x^(P|~w))+k[1]+2240044497&4294967295,A=P+(I<<21&4294967295|I>>>11),I=w+(P^(A|~x))+k[8]+1873313359&4294967295,w=A+(I<<6&4294967295|I>>>26),I=x+(A^(w|~P))+k[15]+4264355552&4294967295,x=w+(I<<10&4294967295|I>>>22),I=P+(w^(x|~A))+k[6]+2734768916&4294967295,P=x+(I<<15&4294967295|I>>>17),I=A+(x^(P|~w))+k[13]+1309151649&4294967295,A=P+(I<<21&4294967295|I>>>11),I=w+(P^(A|~x))+k[4]+4149444226&4294967295,w=A+(I<<6&4294967295|I>>>26),I=x+(A^(w|~P))+k[11]+3174756917&4294967295,x=w+(I<<10&4294967295|I>>>22),I=P+(w^(x|~A))+k[2]+718787259&4294967295,P=x+(I<<15&4294967295|I>>>17),I=A+(x^(P|~w))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+x&4294967295}r.prototype.u=function(S,w){w===void 0&&(w=S.length);for(var A=w-this.blockSize,k=this.B,P=this.h,x=0;x<w;){if(P==0)for(;x<=A;)i(this,S,x),x+=this.blockSize;if(typeof S=="string"){for(;x<w;)if(k[P++]=S.charCodeAt(x++),P==this.blockSize){i(this,k),P=0;break}}else for(;x<w;)if(k[P++]=S[x++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;var A=8*this.o;for(w=S.length-8;w<S.length;++w)S[w]=A&255,A/=256;for(this.u(S),S=Array(16),w=A=0;4>w;++w)for(var k=0;32>k;k+=8)S[A++]=this.g[w]>>>k&255;return S};function s(S,w){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=w(S)}function o(S,w){this.h=w;for(var A=[],k=!0,P=S.length-1;0<=P;P--){var x=S[P]|0;k&&x==w||(A[P]=x,k=!1)}this.g=A}var a={};function l(S){return-128<=S&&128>S?s(S,function(w){return new o([w|0],0>w?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return R(c(-S));for(var w=[],A=1,k=0;S>=A;k++)w[k]=S/A|0,A*=4294967296;return new o(w,0)}function h(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return R(h(S.substring(1),w));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(w,8)),k=d,P=0;P<S.length;P+=8){var x=Math.min(8,S.length-P),I=parseInt(S.substring(P,P+x),w);8>x?(x=c(Math.pow(w,x)),k=k.j(x).add(c(I))):(k=k.j(A),k=k.add(c(I)))}return k}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-R(this).m();for(var S=0,w=1,A=0;A<this.g.length;A++){var k=this.i(A);S+=(0<=k?k:4294967296+k)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(E(this))return"-"+R(this).toString(S);for(var w=c(Math.pow(S,6)),A=this,k="";;){var P=b(A,w).g;A=v(A,P.j(w));var x=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=P,y(A))return x+k;for(;6>x.length;)x="0"+x;k=x+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=v(this,S),E(S)?-1:y(S)?0:1};function R(S){for(var w=S.g.length,A=[],k=0;k<w;k++)A[k]=~S.g[k];return new o(A,~S.h).add(p)}t.abs=function(){return E(this)?R(this):this},t.add=function(S){for(var w=Math.max(this.g.length,S.g.length),A=[],k=0,P=0;P<=w;P++){var x=k+(this.i(P)&65535)+(S.i(P)&65535),I=(x>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);k=I>>>16,x&=65535,I&=65535,A[P]=I<<16|x}return new o(A,A[A.length-1]&-2147483648?-1:0)};function v(S,w){return S.add(R(w))}t.j=function(S){if(y(this)||y(S))return d;if(E(this))return E(S)?R(this).j(R(S)):R(R(this).j(S));if(E(S))return R(this.j(R(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var w=this.g.length+S.g.length,A=[],k=0;k<2*w;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<S.g.length;P++){var x=this.i(k)>>>16,I=this.i(k)&65535,K=S.i(P)>>>16,z=S.i(P)&65535;A[2*k+2*P]+=I*z,_(A,2*k+2*P),A[2*k+2*P+1]+=x*z,_(A,2*k+2*P+1),A[2*k+2*P+1]+=I*K,_(A,2*k+2*P+1),A[2*k+2*P+2]+=x*K,_(A,2*k+2*P+2)}for(k=0;k<w;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=w;k<2*w;k++)A[k]=0;return new o(A,0)};function _(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function C(S,w){this.g=S,this.h=w}function b(S,w){if(y(w))throw Error("division by zero");if(y(S))return new C(d,d);if(E(S))return w=b(R(S),w),new C(R(w.g),R(w.h));if(E(w))return w=b(S,R(w)),new C(R(w.g),w.h);if(30<S.g.length){if(E(S)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var A=p,k=w;0>=k.l(S);)A=D(A),k=D(k);var P=L(A,1),x=L(k,1);for(k=L(k,2),A=L(A,2);!y(k);){var I=x.add(k);0>=I.l(S)&&(P=P.add(A),x=I),k=L(k,1),A=L(A,1)}return w=v(S,P.j(w)),new C(P,w)}for(P=d;0<=S.l(w);){for(A=Math.max(1,Math.floor(S.m()/w.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),x=c(A),I=x.j(w);E(I)||0<I.l(S);)A-=k,x=c(A),I=x.j(w);y(x)&&(x=p),P=P.add(x),S=v(S,I)}return new C(P,S)}t.A=function(S){return b(this,S).h},t.and=function(S){for(var w=Math.max(this.g.length,S.g.length),A=[],k=0;k<w;k++)A[k]=this.i(k)&S.i(k);return new o(A,this.h&S.h)},t.or=function(S){for(var w=Math.max(this.g.length,S.g.length),A=[],k=0;k<w;k++)A[k]=this.i(k)|S.i(k);return new o(A,this.h|S.h)},t.xor=function(S){for(var w=Math.max(this.g.length,S.g.length),A=[],k=0;k<w;k++)A[k]=this.i(k)^S.i(k);return new o(A,this.h^S.h)};function D(S){for(var w=S.g.length+1,A=[],k=0;k<w;k++)A[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(A,S.h)}function L(S,w){var A=w>>5;w%=32;for(var k=S.g.length-A,P=[],x=0;x<k;x++)P[x]=0<w?S.i(x+A)>>>w|S.i(x+A+1)<<32-w:S.i(x+A);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Os=o}).apply(typeof ZT<"u"?ZT:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pk,mk,Cl,gk,Nh,c_,_k,yk,vk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var O=u[T];if(!(O in m))break e;m=m[O]}u=u[u.length-1],T=m[u],f=f(T),f!=T&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,T=!1,O={next:function(){if(!T&&m<u.length){var M=m++;return{value:f(M,u[M]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,O,M){for(var X=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)X[Le-2]=arguments[Le];return f.prototype[O].apply(T,X)}}function E(u){const f=u.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=u[T];return m}return[]}function R(u,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const O=u.length||0,M=T.length||0;u.length=O+M;for(let X=0;X<M;X++)u[O+X]=T[X]}else u.push(T)}}class v{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var D=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(u,f,m){for(const T in u)f.call(m,u[T],T,u)}function S(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function w(u){const f={};for(const m in u)f[m]=u[m];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let m,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(m in T)u[m]=T[m];for(let M=0;M<A.length;M++)m=A[M],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function P(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function x(u){a.setTimeout(()=>{throw u},0)}function I(){var u=J;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,m){const T=z.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var z=new v(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let de,F=!1,J=new K,ee=()=>{const u=a.Promise.resolve(void 0);de=()=>{u.then($)}};var $=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(m){x(m)}var f=z;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}F=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch(m){}return u}();function ge(u,f){if(U.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(D){e:{try{b(f.nodeName);var O=!0;break e}catch(M){}O=!1}O||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:H[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ge.aa.h.call(this)}}y(ge,U);var H={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),At=0;function je(u,f,m,T,O){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=O,this.key=++At,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,f,m,T,O){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var X=Ft(u,f,T,O);return-1<X?(f=u[X],m||(f.fa=!1)):(f=new je(f,this.src,M,!!T,O),f.fa=m,u.push(f)),f};function be(u,f){var m=f.type;if(m in u.g){var T=u.g[m],O=Array.prototype.indexOf.call(T,f,void 0),M;(M=0<=O)&&Array.prototype.splice.call(T,O,1),M&&(oe(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ft(u,f,m,T){for(var O=0;O<u.length;++O){var M=u[O];if(!M.da&&M.listener==f&&M.capture==!!m&&M.ha==T)return O}return-1}var ae="closure_lm_"+(1e6*Math.random()|0),me={};function Ec(u,f,m,T,O){if(Array.isArray(f)){for(var M=0;M<f.length;M++)Ec(u,f[M],m,T,O);return null}return m=cw(m),u&&u[re]?u.K(f,m,c(T)?!!T.capture:!!T,O):jp(u,f,m,!1,T,O)}function jp(u,f,m,T,O,M){if(!f)throw Error("Invalid event type");var X=c(O)?!!O.capture:!!O,Le=xr(u);if(Le||(u[ae]=Le=new ue(u)),m=Le.add(f,m,T,X,M),m.proxy)return m;if(T=lo(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)B||(O=X),O===void 0&&(O=!1),u.addEventListener(f.toString(),T,O);else if(u.attachEvent)u.attachEvent(cs(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function lo(){function u(m){return f.call(u.src,u.listener,m)}const f=hr;return u}function us(u,f,m,T,O){if(Array.isArray(f))for(var M=0;M<f.length;M++)us(u,f[M],m,T,O);else T=c(T)?!!T.capture:!!T,m=cw(m),u&&u[re]?(u=u.i,f=String(f).toString(),f in u.g&&(M=u.g[f],m=Ft(M,m,T,O),-1<m&&(oe(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete u.g[f],u.h--)))):u&&(u=xr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ft(f,m,T,O)),(m=-1<u?f[u]:null)&&ai(m))}function ai(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[re])be(f.i,u);else{var m=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(m,T,u.capture):f.detachEvent?f.detachEvent(cs(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=xr(f))?(be(m,u),m.h==0&&(m.src=null,f[ae]=null)):oe(u)}}}function cs(u){return u in me?me[u]:me[u]="on"+u}function hr(u,f){if(u.da)u=!0;else{f=new ge(f,this);var m=u.listener,T=u.ha||u.src;u.fa&&ai(u),u=m.call(T,f)}return u}function xr(u){return u=u[ae],u instanceof ue?u:null}var zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function cw(u){return typeof u=="function"?u:(u[zp]||(u[zp]=function(f){return u.handleEvent(f)}),u[zp])}function Vt(){V.call(this),this.i=new ue(this),this.M=this,this.F=null}y(Vt,V),Vt.prototype[re]=!0,Vt.prototype.removeEventListener=function(u,f,m,T){us(this,u,f,m,T)};function Yt(u,f){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new U(f,u);else if(f instanceof U)f.target=f.target||u;else{var O=f;f=new U(T,u),k(f,O)}if(O=!0,m)for(var M=m.length-1;0<=M;M--){var X=f.g=m[M];O=Tc(X,T,!0,f)&&O}if(X=f.g=u,O=Tc(X,T,!0,f)&&O,O=Tc(X,T,!1,f)&&O,m)for(M=0;M<m.length;M++)X=f.g=m[M],O=Tc(X,T,!1,f)&&O}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],T=0;T<m.length;T++)oe(m[T]);delete u.g[f],u.h--}}this.F=null},Vt.prototype.K=function(u,f,m,T){return this.i.add(String(u),f,!1,m,T)},Vt.prototype.L=function(u,f,m,T){return this.i.add(String(u),f,!0,m,T)};function Tc(u,f,m,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,M=0;M<f.length;++M){var X=f[M];if(X&&!X.da&&X.capture==m){var Le=X.listener,Rt=X.ha||X.src;X.fa&&be(u.i,X),O=Le.call(Rt,T)!==!1&&O}}return O&&!T.defaultPrevented}function hw(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function dw(u){u.g=hw(()=>{u.g=null,u.i&&(u.i=!1,dw(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class ON extends V{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:dw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qa(u){V.call(this),this.h=u,this.g={}}y(qa,V);var fw=[];function pw(u){L(u.g,function(f,m){this.g.hasOwnProperty(m)&&ai(f)},u),u.g={}}qa.prototype.N=function(){qa.aa.N.call(this),pw(this)},qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bp=a.JSON.stringify,DN=a.JSON.parse,MN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Wp(){}Wp.prototype.h=null;function mw(u){return u.h||(u.h=u.i())}function gw(){}var Ha={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qp(){U.call(this,"d")}y(qp,U);function Hp(){U.call(this,"c")}y(Hp,U);var hs={},_w=null;function Ic(){return _w=_w||new Vt}hs.La="serverreachability";function yw(u){U.call(this,hs.La,u)}y(yw,U);function Ga(u){const f=Ic();Yt(f,new yw(f))}hs.STAT_EVENT="statevent";function vw(u,f){U.call(this,hs.STAT_EVENT,u),this.stat=f}y(vw,U);function Xt(u){const f=Ic();Yt(f,new vw(f,u))}hs.Ma="timingevent";function ww(u,f){U.call(this,hs.Ma,u),this.size=f}y(ww,U);function Ka(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Qa(){this.g=!0}Qa.prototype.xa=function(){this.g=!1};function LN(u,f,m,T,O,M){u.info(function(){if(u.g)if(M)for(var X="",Le=M.split("&"),Rt=0;Rt<Le.length;Rt++){var Ce=Le[Rt].split("=");if(1<Ce.length){var Ut=Ce[0];Ce=Ce[1];var $t=Ut.split("_");X=2<=$t.length&&$t[1]=="type"?X+(Ut+"="+Ce+"&"):X+(Ut+"=redacted&")}}else X=null;else X=M;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+"\n"+m+"\n"+X})}function FN(u,f,m,T,O,M,X){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+"\n"+m+"\n"+M+" "+X})}function uo(u,f,m,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+UN(u,m)+(T?" "+T:"")})}function VN(u,f){u.info(function(){return"TIMEOUT: "+f})}Qa.prototype.info=function(){};function UN(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var M=O[0];if(M!="noop"&&M!="stop"&&M!="close")for(var X=1;X<O.length;X++)O[X]=""}}}}return Bp(m)}catch(Le){return f}}var Sc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ew={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gp;function Cc(){}y(Cc,Wp),Cc.prototype.g=function(){return new XMLHttpRequest},Cc.prototype.i=function(){return{}},Gp=new Cc;function li(u,f,m,T){this.j=u,this.i=f,this.l=m,this.R=T||1,this.U=new qa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tw}function Tw(){this.i=null,this.g="",this.h=!1}var Iw={},Kp={};function Qp(u,f,m){u.L=1,u.v=Pc(Nr(f)),u.m=m,u.P=!0,Sw(u,null)}function Sw(u,f){u.F=Date.now(),Ac(u),u.A=Nr(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Vw(m.i,"t",T),u.C=0,m=u.j.J,u.h=new Tw,u.g=nE(u.j,m?f:null,!u.m),0<u.O&&(u.M=new ON(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,T=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(fw[0]=O.toString()),O=fw);for(var M=0;M<O.length;M++){var X=Ec(m,O[M],T||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ga(),LN(u.i,u.u,u.A,u.l,u.R,u.m)}li.prototype.ca=function(u){u=u.target;const f=this.M;f&&Or(u)==3?f.j():this.Y(u)},li.prototype.Y=function(u){try{if(u==this.g)e:{const $t=Or(this.g);var f=this.g.Ba();const fo=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||qw(this.g)))){this.J||$t!=4||f==7||(f==8||0>=fo?Ga(3):Ga(2)),Yp(this);var m=this.g.Z();this.X=m;t:if(Cw(this)){var T=qw(this.g);u="";var O=T.length,M=Or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),Ya(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(M&&f==O-1)});T.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=m==200,FN(this.i,this.u,this.A,this.l,this.R,$t,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Rt=this.g;if((Le=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Le)){var Ce=Le;break t}}Ce=null}if(m=Ce)uo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xp(this,m);else{this.o=!1,this.s=3,Xt(12),ds(this),Ya(this);break e}}if(this.P){m=!0;let Kn;for(;!this.J&&this.C<X.length;)if(Kn=$N(this,X),Kn==Kp){$t==4&&(this.s=4,Xt(14),m=!1),uo(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==Iw){this.s=4,Xt(15),uo(this.i,this.l,X,"[Invalid Chunk]"),m=!1;break}else uo(this.i,this.l,Kn,null),Xp(this,Kn);if(Cw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||X.length!=0||this.h.h||(this.s=1,Xt(16),m=!1),this.o=this.o&&m,!m)uo(this.i,this.l,X,"[Invalid Chunked Response]"),ds(this),Ya(this);else if(0<X.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),rm(Ut),Ut.M=!0,Xt(11))}}else uo(this.i,this.l,X,null),Xp(this,X);$t==4&&ds(this),this.o&&!this.J&&($t==4?Jw(this.j,this):(this.o=!1,Ac(this)))}else rO(this.g),m==400&&0<X.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),ds(this),Ya(this)}}}catch($t){}finally{}};function Cw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $N(u,f){var m=u.C,T=f.indexOf("\n",m);return T==-1?Kp:(m=Number(f.substring(m,T)),isNaN(m)?Iw:(T+=1,T+m>f.length?Kp:(f=f.slice(T,T+m),u.C=T+m,f)))}li.prototype.cancel=function(){this.J=!0,ds(this)};function Ac(u){u.S=Date.now()+u.I,Aw(u,u.I)}function Aw(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ka(p(u.ba,u),f)}function Yp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}li.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(VN(this.i,this.A),this.L!=2&&(Ga(),Xt(17)),ds(this),this.s=2,Ya(this)):Aw(this,this.S-u)};function Ya(u){u.j.G==0||u.J||Jw(u.j,u)}function ds(u){Yp(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,pw(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Xp(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Jp(m.h,u))){if(!u.K&&Jp(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(f)}catch(Ce){T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Dc(m),Nc(m);else break e;nm(m),Xt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ka(p(m.Za,m),6e3));if(1>=Pw(m.h)&&m.ca){try{m.ca()}catch(Ce){}m.ca=void 0}}else ps(m,11)}else if((u.K||m.g==u)&&Dc(m),!_(f))for(O=m.Da.g.parse(f),f=0;f<O.length;f++){let Ce=O[f];if(m.T=Ce[0],Ce=Ce[1],m.G==2)if(Ce[0]=="c"){m.K=Ce[1],m.ia=Ce[2];const Ut=Ce[3];Ut!=null&&(m.la=Ut,m.j.info("VER="+m.la));const $t=Ce[4];$t!=null&&(m.Aa=$t,m.j.info("SVER="+m.Aa));const fo=Ce[5];fo!=null&&typeof fo=="number"&&0<fo&&(T=1.5*fo,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const Kn=u.g;if(Kn){const Lc=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lc){var M=T.h;M.g||Lc.indexOf("spdy")==-1&&Lc.indexOf("quic")==-1&&Lc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Zp(M,M.h),M.h=null))}if(T.D){const im=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;im&&(T.ya=im,ze(T.I,T.D,im))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var X=u;if(T.qa=tE(T,T.J?T.ia:null,T.W),X.K){bw(T.h,X);var Le=X,Rt=T.L;Rt&&(Le.I=Rt),Le.B&&(Yp(Le),Ac(Le)),T.g=X}else Yw(T);0<m.i.length&&Oc(m)}else Ce[0]!="stop"&&Ce[0]!="close"||ps(m,7);else m.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ps(m,7):tm(m):Ce[0]!="noop"&&m.l&&m.l.ta(Ce),m.v=0)}}Ga(4)}catch(Ce){}}var jN=class{constructor(u,f){this.g=u,this.map=f}};function Rw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pw(u){return u.h?1:u.g?u.g.size:0}function Jp(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Zp(u,f){u.g?u.g.add(f):u.h=f}function bw(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Rw.prototype.cancel=function(){if(this.i=xw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function xw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return E(u.i)}function zN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,T=0;T<m;T++)f.push(u[T]);return f}f=[],m=0;for(T in u)f[m++]=u[T];return f}function BN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const T in u)f[m++]=T;return f}}}function Nw(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=BN(u),T=zN(u),O=T.length,M=0;M<O;M++)f.call(void 0,T[M],m&&m[M],u)}var Ow=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WN(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),O=null;if(0<=T){var M=u[m].substring(0,T);O=u[m].substring(T+1)}else M=u[m];f(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function fs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fs){this.h=u.h,Rc(this,u.j),this.o=u.o,this.g=u.g,kc(this,u.s),this.l=u.l;var f=u.i,m=new Za;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Dw(this,m),this.m=u.m}else u&&(f=String(u).match(Ow))?(this.h=!1,Rc(this,f[1]||"",!0),this.o=Xa(f[2]||""),this.g=Xa(f[3]||"",!0),kc(this,f[4]),this.l=Xa(f[5]||"",!0),Dw(this,f[6]||"",!0),this.m=Xa(f[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}fs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ja(f,Mw,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ja(f,Mw,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ja(m,m.charAt(0)=="/"?GN:HN,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ja(m,QN)),u.join("")};function Nr(u){return new fs(u)}function Rc(u,f,m){u.j=m?Xa(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function kc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Dw(u,f,m){f instanceof Za?(u.i=f,YN(u.i,u.h)):(m||(f=Ja(f,KN)),u.i=new Za(f,u.h))}function ze(u,f,m){u.i.set(f,m)}function Pc(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xa(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ja(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,qN),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function qN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mw=/[#\/\?@]/g,HN=/[#\?:]/g,GN=/[#\?]/g,KN=/[#\?@]/g,QN=/#/g;function Za(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function ui(u){u.g||(u.g=new Map,u.h=0,u.i&&WN(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Za.prototype,t.add=function(u,f){ui(this),this.i=null,u=co(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Lw(u,f){ui(u),f=co(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Fw(u,f){return ui(u),f=co(u,f),u.g.has(f)}t.forEach=function(u,f){ui(this),this.g.forEach(function(m,T){m.forEach(function(O){u.call(f,O,T,this)},this)},this)},t.na=function(){ui(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const O=u[T];for(let M=0;M<O.length;M++)m.push(f[T])}return m},t.V=function(u){ui(this);let f=[];if(typeof u=="string")Fw(this,u)&&(f=f.concat(this.g.get(co(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return ui(this),this.i=null,u=co(this,u),Fw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Vw(u,f,m){Lw(u,f),0<m.length&&(u.i=null,u.g.set(co(u,f),E(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const M=encodeURIComponent(String(T)),X=this.V(T);for(T=0;T<X.length;T++){var O=M;X[T]!==""&&(O+="="+encodeURIComponent(String(X[T]))),u.push(O)}}return this.i=u.join("&")};function co(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function YN(u,f){f&&!u.j&&(ui(u),u.i=null,u.g.forEach(function(m,T){var O=T.toLowerCase();T!=O&&(Lw(this,T),Vw(this,O,m))},u)),u.j=f}function XN(u,f){const m=new Qa;if(a.Image){const T=new Image;T.onload=g(ci,m,"TestLoadImage: loaded",!0,f,T),T.onerror=g(ci,m,"TestLoadImage: error",!1,f,T),T.onabort=g(ci,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(ci,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function JN(u,f){const m=new Qa,T=new AbortController,O=setTimeout(()=>{T.abort(),ci(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(M=>{clearTimeout(O),M.ok?ci(m,"TestPingServer: ok",!0,f):ci(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ci(m,"TestPingServer: error",!1,f)})}function ci(u,f,m,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(m)}catch(M){}}function ZN(){this.g=new MN}function eO(u,f,m){const T=m||"";try{Nw(u,function(O,M){let X=O;c(O)&&(X=Bp(O)),f.push(T+M+"="+encodeURIComponent(X))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function el(u){this.l=u.Ub||null,this.j=u.eb||!1}y(el,Wp),el.prototype.g=function(){return new bc(this.l,this.j)},el.prototype.i=function(u){return function(){return u}}({});function bc(u,f){Vt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(bc,Vt),t=bc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,nl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nl(this)),this.g&&(this.readyState=3,nl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?tl(this):nl(this),this.readyState==3&&Uw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,tl(this))},t.Qa=function(u){this.g&&(this.response=u,tl(this))},t.ga=function(){this.g&&tl(this)};function tl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,nl(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join("\r\n")};function nl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $w(u){let f="";return L(u,function(m,T){f+=T,f+=":",f+=m,f+="\r\n"}),f}function em(u,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=$w(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ze(u,f,m))}function Ze(u){Vt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ze,Vt);var tO=/^https?$/i,nO=["POST","PUT"];t=Ze.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gp.g(),this.v=this.o?mw(this.o):mw(Gp),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){jw(this,M);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)m.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())m.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(nO,f,void 0))||T||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,X]of m)this.g.setRequestHeader(M,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ww(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){jw(this,M)}};function jw(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,zw(u),xc(u)}function zw(u){u.A||(u.A=!0,Yt(u,"complete"),Yt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Yt(this,"complete"),Yt(this,"abort"),xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xc(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Bw(this):this.bb())},t.bb=function(){Bw(this)};function Bw(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Or(u)!=4||u.Z()!=2)){if(u.u&&Or(u)==4)hw(u.Ea,0,u);else if(Yt(u,"readystatechange"),Or(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=X===0){var O=String(u.D).match(Ow)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),T=!tO.test(O?O.toLowerCase():"")}m=T}if(m)Yt(u,"complete"),Yt(u,"success");else{u.m=6;try{var M=2<Or(u)?u.g.statusText:""}catch(Le){M=""}u.l=M+" ["+u.Z()+"]",zw(u)}}finally{xc(u)}}}}function xc(u,f){if(u.g){Ww(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Yt(u,"ready");try{m.onreadystatechange=T}catch(O){}}}function Ww(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Or(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Or(this)?this.g.status:-1}catch(u){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),DN(f)}};function qw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch(f){return null}}function rO(u){const f={};u=(u.g&&2<=Or(u)&&u.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<u.length;T++){if(_(u[T]))continue;var m=P(u[T]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=f[O]||[];f[O]=M,M.push(m)}S(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rl(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Hw(u){this.Aa=0,this.i=[],this.j=new Qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rl("baseRetryDelayMs",5e3,u),this.cb=rl("retryDelaySeedMs",1e4,u),this.Wa=rl("forwardChannelMaxRetries",2,u),this.wa=rl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Rw(u&&u.concurrentRequestLimit),this.Da=new ZN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hw.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,T){Xt(0),this.W=u,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=tE(this,null,this.W),Oc(this)};function tm(u){if(Gw(u),u.G==3){var f=u.U++,m=Nr(u.I);if(ze(m,"SID",u.K),ze(m,"RID",f),ze(m,"TYPE","terminate"),il(u,m),f=new li(u,u.j,f),f.L=2,f.v=Pc(Nr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch(T){}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=nE(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ac(f)}eE(u)}function Nc(u){u.g&&(rm(u),u.g.cancel(),u.g=null)}function Gw(u){Nc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Dc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Oc(u){if(!kw(u.h)&&!u.s){u.s=!0;var f=u.Ga;de||ee(),F||(de(),F=!0),J.add(f,u),u.B=0}}function iO(u,f){return Pw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ka(p(u.Ga,u,f),Zw(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new li(this,this.j,u);let M=this.o;if(this.S&&(M?(M=w(M),k(M,this.S)):M=this.S),this.m!==null||this.O||(O.H=M,M=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Qw(this,O,f),m=Nr(this.I),ze(m,"RID",u),ze(m,"CVER",22),this.D&&ze(m,"X-HTTP-Session-Id",this.D),il(this,m),M&&(this.O?f="headers="+encodeURIComponent(String($w(M)))+"&"+f:this.m&&em(m,this.m,M)),Zp(this.h,O),this.Ua&&ze(m,"TYPE","init"),this.P?(ze(m,"$req",f),ze(m,"SID","null"),O.T=!0,Qp(O,m,null)):Qp(O,m,f),this.G=2}}else this.G==3&&(u?Kw(this,u):this.i.length==0||kw(this.h)||Kw(this))};function Kw(u,f){var m;f?m=f.l:m=u.U++;const T=Nr(u.I);ze(T,"SID",u.K),ze(T,"RID",m),ze(T,"AID",u.T),il(u,T),u.m&&u.o&&em(T,u.m,u.o),m=new li(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Qw(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zp(u.h,m),Qp(m,T,f)}function il(u,f){u.H&&L(u.H,function(m,T){ze(f,T,m)}),u.l&&Nw({},function(m,T){ze(f,T,m)})}function Qw(u,f,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let M=-1;for(;;){const X=["count="+m];M==-1?0<m?(M=O[0].g,X.push("ofs="+M)):M=0:X.push("ofs="+M);let Le=!0;for(let Rt=0;Rt<m;Rt++){let Ce=O[Rt].g;const Ut=O[Rt].map;if(Ce-=M,0>Ce)M=Math.max(0,O[Rt].g-100),Le=!1;else try{eO(Ut,X,"req"+Ce+"_")}catch($t){T&&T(Ut)}}if(Le){T=X.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,T}function Yw(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;de||ee(),F||(de(),F=!0),J.add(f,u),u.v=0}}function nm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ka(p(u.Fa,u),Zw(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Xw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ka(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Nc(this),Xw(this))};function rm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Xw(u){u.g=new li(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Nr(u.qa);ze(f,"RID","rpc"),ze(f,"SID",u.K),ze(f,"AID",u.T),ze(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(f,"TO",u.ja),ze(f,"TYPE","xmlhttp"),il(u,f),u.m&&u.o&&em(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Pc(Nr(f)),m.m=null,m.P=!0,Sw(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Nc(this),nm(this),Xt(19))};function Dc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Jw(u,f){var m=null;if(u.g==f){Dc(u),rm(u),u.g=null;var T=2}else if(Jp(u.h,f))m=f.D,bw(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;T=Ic(),Yt(T,new ww(T,m)),Oc(u)}else Yw(u);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&iO(u,f)||T==2&&nm(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),O){case 1:ps(u,5);break;case 4:ps(u,10);break;case 3:ps(u,6);break;default:ps(u,2)}}}function Zw(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function ps(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),T=u.Xa;const O=!T;T=new fs(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rc(T,"https"),Pc(T),O?XN(T.toString(),m):JN(T.toString(),m)}else Xt(2);u.G=0,u.l&&u.l.sa(f),eE(u),Gw(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function eE(u){if(u.G=0,u.ka=[],u.l){const f=xw(u.h);(f.length!=0||u.i.length!=0)&&(R(u.ka,f),R(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function tE(u,f,m){var T=m instanceof fs?Nr(m):new fs(m);if(T.g!="")f&&(T.g=f+"."+T.g),kc(T,T.s);else{var O=a.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var M=new fs(null);T&&Rc(M,T),f&&(M.g=f),O&&kc(M,O),m&&(M.l=m),T=M}return m=u.D,f=u.ya,m&&f&&ze(T,m,f),ze(T,"VER",u.la),il(u,T),T}function nE(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ze(new el({eb:m})):new Ze(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rE(){}t=rE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mc(){}Mc.prototype.g=function(u,f){return new gn(u,f)};function gn(u,f){Vt.call(this),this.g=new Hw(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ho(this)}y(gn,Vt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){tm(this.g)},gn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Bp(u),u=m);f.i.push(new jN(f.Ya++,u)),f.G==3&&Oc(f)},gn.prototype.N=function(){this.g.l=null,delete this.j,tm(this.g),delete this.g,gn.aa.N.call(this)};function iE(u){qp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(iE,qp);function sE(){Hp.call(this),this.status=1}y(sE,Hp);function ho(u){this.g=u}y(ho,rE),ho.prototype.ua=function(){Yt(this.g,"a")},ho.prototype.ta=function(u){Yt(this.g,new iE(u))},ho.prototype.sa=function(u){Yt(this.g,new sE)},ho.prototype.ra=function(){Yt(this.g,"b")},Mc.prototype.createWebChannel=Mc.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,vk=function(){return new Mc},yk=function(){return Ic()},_k=hs,c_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sc.NO_ERROR=0,Sc.TIMEOUT=8,Sc.HTTP_ERROR=6,Nh=Sc,Ew.COMPLETE="complete",gk=Ew,gw.EventType=Ha,Ha.OPEN="a",Ha.CLOSE="b",Ha.ERROR="c",Ha.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Cl=gw,mk=el,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,pk=Ze}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const eI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new Gu("@firebase/firestore");function fl(){return Ws.logLevel}function ne(t,...e){if(Ws.logLevel<=Ee.DEBUG){const n=e.map(wv);Ws.debug("Firestore (".concat(Da,"): ").concat(t),...n)}}function Zr(t,...e){if(Ws.logLevel<=Ee.ERROR){const n=e.map(wv);Ws.error("Firestore (".concat(Da,"): ").concat(t),...n)}}function da(t,...e){if(Ws.logLevel<=Ee.WARN){const n=e.map(wv);Ws.warn("Firestore (".concat(Da,"): ").concat(t),...n)}}function wv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e="FIRESTORE (".concat(Da,") INTERNAL ASSERTION FAILED: ")+t;throw Zr(e),new Error(e)}function $e(t,e){t||he()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class $4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j4{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ui,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new wk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new qt(e)}}class z4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(s.error.message));const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider","Received ".concat(o?"new":"existing"," token.")),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new W4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=H4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function fa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new _t(0,0))}static max(){return new fe(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class We extends wu{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(j.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const G4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends wu{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return G4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new te(j.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new te(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new te(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(We.fromString(e))}static fromName(e){return new se(We.fromString(e).popFirst(5))}static empty(){return new se(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new We(e.slice()))}}function K4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new qi(i,se.empty(),e)}function Q4(t){return new qi(t.readTime,t.key,-1)}class qi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qi(fe.min(),se.empty(),-1)}static max(){return new qi(fe.max(),se.empty(),-1)}}function Y4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==X4)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Z4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ju(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ev.oe=-1;function Pf(t){return t==null}function Cd(t){return t===0&&1/t==-1/0}function eU(t){return typeof t=="number"&&Number.isInteger(t)&&!Cd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ft=class h_{constructor(e,n){this.comparator=e,this.root=n||$i.EMPTY}insert(e,n){return new h_(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new h_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push("".concat(n,":").concat(r)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}},oh=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$i=class Dr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Dr.RED,this.left=i!=null?i:Dr.EMPTY,this.right=s!=null?s:Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Dr(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}};$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1;$i.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $i(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nI(this.data.getIterator())}getIteratorFrom(e){return new nI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class nI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Ot(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ik("Invalid base64 string: "+s):s}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const tU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if($e(!!t),typeof t=="string"){let e=0;const n=tU.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qs(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Iv(t){const e=t.mapValue.fields.__previous_value__;return Tv(e)?Iv(e):e}function Eu(t){const e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tv(t)?4:rU(t)?9007199254740991:10:he()}function kr(t,e){if(t===e)return!0;const n=Hs(t);if(n!==Hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eu(t).isEqual(Eu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hi(i.timestampValue),a=Hi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return qs(i.bytesValue).isEqual(qs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?Cd(o)===Cd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fa(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(tI(o)!==tI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!kr(o[l],a[l])))return!1;return!0}(t,e);default:return he()}}function Iu(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function pa(t,e){if(t===e)return 0;const n=Hs(t),r=Hs(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=lt(s.integerValue||s.doubleValue),l=lt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rI(t.timestampValue,e.timestampValue);case 4:return rI(Eu(t),Eu(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=qs(s),l=qs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Pe(a[c],l[c]);if(h!==0)return h}return Pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Pe(lt(s.latitude),lt(o.latitude));return a!==0?a:Pe(lt(s.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=pa(a[c],l[c]);if(h)return h}return Pe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ah.mapValue&&o===ah.mapValue)return 0;if(s===ah.mapValue)return 1;if(o===ah.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Pe(l[d],h[d]);if(p!==0)return p;const g=pa(a[l[d]],c[h[d]]);if(g!==0)return g}return Pe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw he()}}function rI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Hi(t),r=Hi(e),i=Pe(n.seconds,r.seconds);return i!==0?i:Pe(n.nanos,r.nanos)}function ma(t){return d_(t)}function d_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return"time(".concat(r.seconds,",").concat(r.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return"geo(".concat(n.latitude,",").concat(n.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=d_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+="".concat(o,":").concat(d_(n.fields[o]));return i+"}"}(t.mapValue):he()}function iI(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function f_(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function sI(t){return!!t&&"nullValue"in t}function oI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oh(t){return!!t&&"mapValue"in t}function zl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=zl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){no(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(zl(this.value))}}function Sk(t){const e=[];return no(t.fields,(n,r)=>{const i=new xt([n]);if(Oh(r)){const s=Sk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Gt(e,0,fe.min(),fe.min(),fe.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new Gt(e,1,n,fe.min(),r,i,0)}static newNoDocument(e,n){return new Gt(e,2,n,fe.min(),fe.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,fe.min(),fe.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function aI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=pa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function lI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function iU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{}class ht extends Ck{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oU(e,n,r):n==="array-contains"?new uU(e,r):n==="in"?new cU(e,r):n==="not-in"?new hU(e,r):n==="array-contains-any"?new dU(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aU(e,r):new lU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(pa(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends Ck{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ur(e,n)}matches(e){return Ak(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ak(t){return t.op==="and"}function Rk(t){return sU(t)&&Ak(t)}function sU(t){for(const e of t.filters)if(e instanceof ur)return!1;return!0}function p_(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ma(t.value);if(Rk(t))return t.filters.map(e=>p_(e)).join(",");{const e=t.filters.map(n=>p_(n)).join(",");return"".concat(t.op,"(").concat(e,")")}}function kk(t,e){return t instanceof ht?function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof ur?function(r,i){return i instanceof ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kk(o,i.filters[a]),!0):!1}(t,e):void he()}function Pk(t){return t instanceof ht?function(n){return"".concat(n.field.canonicalString()," ").concat(n.op," ").concat(ma(n.value))}(t):t instanceof ur?function(n){return n.op.toString()+" {"+n.getFilters().map(Pk).join(" ,")+"}"}(t):"Filter"}class oU extends ht{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class aU extends ht{constructor(e,n){super(e,"in",n),this.keys=bk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lU extends ht{constructor(e,n){super(e,"not-in",n),this.keys=bk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class uU extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sv(n)&&Iu(n.arrayValue,this.value)}}class cU extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Iu(this.value.arrayValue,n)}}class hU extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Iu(this.value.arrayValue,n)}}class dU extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Iu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function uI(t,e=null,n=[],r=[],i=null,s=null,o=null){return new fU(t,e,n,r,i,s,o)}function Cv(t){const e=pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>p_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ma(r)).join(",")),e.ue=n}return e.ue}function Av(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lI(t.startAt,e.startAt)&&lI(t.endAt,e.endAt)}function m_(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pU(t,e,n,r,i,s,o,a){return new Zu(t,e,n,r,i,s,o,a)}function Rv(t){return new Zu(t)}function cI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xk(t){return t.collectionGroup!==null}function Bl(t){const e=pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ot(xt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Rd(s,r))}),n.has(xt.keyField().canonicalString())||e.ce.push(new Rd(xt.keyField(),r))}return e.ce}function Tr(t){const e=pe(t);return e.le||(e.le=mU(e,Bl(t))),e.le}function mU(t,e){if(t.limitType==="F")return uI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Rd(i.field,s)});const n=t.endAt?new Ad(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ad(t.startAt.position,t.startAt.inclusive):null;return uI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function g_(t,e){const n=t.filters.concat([e]);return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function __(t,e,n){return new Zu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bf(t,e){return Av(Tr(t),Tr(e))&&t.limitType===e.limitType}function Nk(t){return"".concat(Cv(Tr(t)),"|lt:").concat(t.limitType)}function To(t){return"Query(target=".concat(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=", filters: [".concat(n.filters.map(i=>Pk(i)).join(", "),"]")),Pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=", orderBy: [".concat(n.orderBy.map(i=>function(o){return"".concat(o.field.canonicalString()," (").concat(o.dir,")")}(i)).join(", "),"]")),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ma(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ma(i)).join(",")),"Target(".concat(r,")")}(Tr(t)),"; limitType=").concat(t.limitType,")")}function xf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Bl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=aI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Bl(r),i)||r.endAt&&!function(o,a,l){const c=aI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Bl(r),i))}(t,e)}function gU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ok(t){return(e,n)=>{let r=!1;for(const i of Bl(t)){const s=_U(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _U(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?pa(l,c):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Tk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new ft(se.comparator);function ei(){return yU}const Dk=new ft(se.comparator);function Al(...t){let e=Dk;for(const n of t)e=e.insert(n.key,n);return e}function Mk(t){let e=Dk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return Wl()}function Lk(){return Wl()}function Wl(){return new Ma(t=>t.toString(),(t,e)=>t.isEqual(e))}const vU=new ft(se.comparator),wU=new Ot(se.comparator);function Te(...t){let e=wU;for(const n of t)e=e.add(n);return e}const EU=new Ot(Pe);function TU(){return EU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function Vk(t){return{integerValue:""+t}}function IU(t,e){return eU(e)?Vk(e):Fk(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function SU(t,e,n){return t instanceof kd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tv(s)&&(s=Iv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Su?$k(t,e):t instanceof Cu?jk(t,e):function(i,s){const o=Uk(i,s),a=hI(o)+hI(i.Pe);return f_(o)&&f_(i.Pe)?Vk(a):Fk(i.serializer,a)}(t,e)}function CU(t,e,n){return t instanceof Su?$k(t,e):t instanceof Cu?jk(t,e):n}function Uk(t,e){return t instanceof Pd?function(r){return f_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class kd extends Nf{}class Su extends Nf{constructor(e){super(),this.elements=e}}function $k(t,e){const n=zk(e);for(const r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Cu extends Nf{constructor(e){super(),this.elements=e}}function jk(t,e){let n=zk(e);for(const r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}class Pd extends Nf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hI(t){return lt(t.integerValue||t.doubleValue)}function zk(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Su&&i instanceof Su||r instanceof Cu&&i instanceof Cu?fa(r.elements,i.elements,kr):r instanceof Pd&&i instanceof Pd?kr(r.Pe,i.Pe):r instanceof kd&&i instanceof kd}(t.transform,e.transform)}class RU{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Of{}function Bk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kv(t.key,Un.none()):new ec(t.key,t.data,Un.none());{const n=t.data,r=on.empty();let i=new Ot(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new os(t.key,r,new wn(i.toArray()),Un.none())}}function kU(t,e,n){t instanceof ec?function(i,s,o){const a=i.value.clone(),l=fI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof os?function(i,s,o){if(!Dh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=fI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Wk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ql(t,e,n,r){return t instanceof ec?function(s,o,a,l){if(!Dh(s.precondition,o))return a;const c=s.value.clone(),h=pI(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(s,o,a,l){if(!Dh(s.precondition,o))return a;const c=pI(s.fieldTransforms,l,o),h=o.data;return h.setAll(Wk(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Dh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function PU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Uk(r.transform,i||null);s!=null&&(n===null&&(n=on.empty()),n.set(r.field,s))}return n||null}function dI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fa(r,i,(s,o)=>AU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends Of{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends Of{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Wk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fI(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,CU(o,a,n[i]))}return r}function pI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,SU(s,o,e))}return r}class kv extends Of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bU extends Of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Lk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Bk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(n,r)=>dI(n,r))&&fa(this.baseMutations,e.baseMutations,(n,r)=>dI(n,r))}}class Pv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return vU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Pv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ie;function DU(t){switch(t){default:return he();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function qk(t){if(t===void 0)return Zr("GRPC error has no .code"),j.UNKNOWN;switch(t){case at.OK:return j.OK;case at.CANCELLED:return j.CANCELLED;case at.UNKNOWN:return j.UNKNOWN;case at.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case at.INTERNAL:return j.INTERNAL;case at.UNAVAILABLE:return j.UNAVAILABLE;case at.UNAUTHENTICATED:return j.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case at.NOT_FOUND:return j.NOT_FOUND;case at.ALREADY_EXISTS:return j.ALREADY_EXISTS;case at.PERMISSION_DENIED:return j.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case at.ABORTED:return j.ABORTED;case at.OUT_OF_RANGE:return j.OUT_OF_RANGE;case at.UNIMPLEMENTED:return j.UNIMPLEMENTED;case at.DATA_LOSS:return j.DATA_LOSS;default:return he()}}(Ie=at||(at={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Os([4294967295,4294967295],0);function mI(t){const e=MU().encode(t),n=new fk;return n.update(e),new Uint8Array(n.digest())}function gI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Os([n,r],0),new Os([i,s],0)]}class bv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl("Invalid padding: ".concat(n));if(r<0)throw new Rl("Invalid hash count: ".concat(r));if(e.length>0&&this.hashCount===0)throw new Rl("Invalid hash count: ".concat(r));if(e.length===0&&n!==0)throw new Rl("Invalid padding when bitmap length is 0: ".concat(n));this.Ie=8*e.length-n,this.Te=Os.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Os.fromNumber(r)));return i.compare(LU)===1&&(i=new Os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=mI(e),[r,i]=gI(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new bv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=mI(e),[r,i]=gI(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Df(fe.min(),i,new ft(Pe),ei(),Te())}}class tc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tc(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Hk{constructor(e,n){this.targetId=e,this.me=n}}class Gk{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _I{constructor(){this.fe=0,this.ge=vI(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Te(),n=Te(),r=Te();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new tc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=vI()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FU{constructor(e){this.Le=e,this.Be=new Map,this.ke=ei(),this.qe=yI(),this.Qe=new ft(Pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(m_(s))if(r===0){const o=new se(s.path);this.Ue(n,o,Gt.newNoDocument(o,fe.min()))}else $e(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=qs(r).toUint8Array()}catch(l){if(l instanceof Ik)return da("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bv(o,i,s)}catch(l){return da(l instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(s.path.canonicalString());e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&m_(a.target)){const l=new se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Gt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Te();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Df(e,n,this.Qe,this.ke,r);return this.ke=ei(),this.qe=yI(),this.Qe=new ft(Pe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _I,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ot(Pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _I),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yI(){return new ft(se.comparator)}function vI(){return new ft(se.comparator)}const VU={asc:"ASCENDING",desc:"DESCENDING"},UU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$U={and:"AND",or:"OR"};class jU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function y_(t,e){return t.useProto3Json||Pf(e)?e:{value:e}}function bd(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zU(t,e){return bd(t,e.toTimestamp())}function Ir(t){return $e(!!t),fe.fromTimestamp(function(n){const r=Hi(n);return new _t(r.seconds,r.nanos)}(t))}function xv(t,e){return v_(t,e).canonicalString()}function v_(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Qk(t){const e=We.fromString(t);return $e(eP(e)),e}function w_(t,e){return xv(t.databaseId,e.path)}function jm(t,e){const n=Qk(e);if(n.get(1)!==t.databaseId.projectId)throw new te(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(Xk(n))}function Yk(t,e){return xv(t.databaseId,e)}function BU(t){const e=Qk(t);return e.length===4?We.emptyPath():Xk(e)}function E_(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xk(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wI(t,e,n){return{name:w_(t,e),fields:n.value.mapValue.fields}}function WU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?($e(h===void 0||typeof h=="string"),Qt.fromBase64String(h||"")):($e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:qk(c.code);return new te(h,c.message||"")}(o);n=new Gk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jm(t,r.document.name),s=Ir(r.document.updateTime),o=r.document.createTime?Ir(r.document.createTime):fe.min(),a=new on({mapValue:{fields:r.document.fields}}),l=Gt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Mh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jm(t,r.document),s=r.readTime?Ir(r.readTime):fe.min(),o=Gt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Mh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jm(t,r.document),s=r.removedTargetIds||[];n=new Mh([],s,i,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new OU(i,s),a=r.targetId;n=new Hk(a,o)}}return n}function qU(t,e){let n;if(e instanceof ec)n={update:wI(t,e.key,e.value)};else if(e instanceof kv)n={delete:w_(t,e.key)};else if(e instanceof os)n={update:wI(t,e.key,e.data),updateMask:e$(e.fieldMask)};else{if(!(e instanceof bU))return he();n={verify:w_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof kd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Su)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:zU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he()}(t,e.precondition)),n}function HU(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ir(i.updateTime):Ir(s);return o.isEqual(fe.min())&&(o=Ir(s)),new RU(o,i.transformResults||[])}(n,e))):[]}function GU(t,e){return{documents:[Yk(t,e.path)]}}function KU(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Yk(t,i);const s=function(c){if(c.length!==0)return Zk(ur.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Io(p.field),direction:XU(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=y_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function QU(t){let e=BU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=Jk(d);return p instanceof ur&&Rk(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Rd(So(y.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Pf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new Ad(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new Ad(g,p)}(n.endAt)),pU(e,i,o,s,a,"F",l,c)}function YU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=So(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=So(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=So(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(So(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ur.create(n.compositeFilter.filters.map(r=>Jk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function XU(t){return VU[t]}function JU(t){return UU[t]}function ZU(t){return $U[t]}function Io(t){return{fieldPath:t.canonicalString()}}function So(t){return xt.fromServerFormat(t.fieldPath)}function Zk(t){return t instanceof ht?function(n){if(n.op==="=="){if(oI(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(sI(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(oI(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(sI(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:JU(n.op),value:n.value}}}(t):t instanceof ur?function(n){const r=n.getFilters().map(i=>Zk(i));return r.length===1?r[0]:{compositeFilter:{op:ZU(n.op),filters:r}}}(t):he()}function e$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r,i,s=fe.min(),o=fe.min(),a=Qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e){this.ct=e}}function n$(t){const e=QU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this._n=new i$}addToCollectionParentIndex(e,n){return this._n.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(qi.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class i${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ot(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ga(0)}static Ln(){return new ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(){this.changes=new Ma(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ql(r.mutation,i,wn.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const i=ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Al();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ei();const o=Wl(),a=function(){return Wl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof os)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ql(h.mutation,c,h.mutation.getFieldMask(),_t.now())):o.set(c.key,wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new o$(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wl();let i=new ft((o,a)=>o-a),s=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||wn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Te()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Lk();h.forEach(p=>{if(!s.has(p)){const g=Bk(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(ks());let a=-1,l=s;return o.next(c=>W.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Te())).next(h=>({batchId:a,changes:Mk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let i=Al();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Al();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,l=>{const c=function(d,p){return new Zu(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Gt.newInvalidDocument(h)))});let a=Al();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ql(h.mutation,c,wn.empty(),_t.now()),xf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return W.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ir(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:n$(i.bundledQuery),readTime:Ir(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(){this.overlays=new ft(se.comparator),this.hr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=ks(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ft((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=ks(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ks(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return W.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NU(n,r));let s=this.hr.get(n);s===void 0&&(s=Te(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.Pr=new Ot(vt.Ir),this.Tr=new Ot(vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new vt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new se(new We([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new se(new We([])),r=new vt(n,e),i=new vt(n,e+1);let s=Te();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return se.comparator(e.key,n.key)||Pe(e.pr,n.pr)}static Er(e,n){return Pe(e.pr,n.pr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ot(vt.Ir)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(Pe);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),W.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new vt(new se(s),0);let a=new Ot(Pe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),W.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return W.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new vt(n,0),i=this.wr.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e){this.vr=e,this.docs=function(){return new ft(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=ei();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Gt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ei();const o=n.path,a=new se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Y4(Q4(h),r)<=0||(i.has(h.key)||xf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}Fr(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new d$(this)}getSize(e){return W.resolve(this.size)}}class d$ extends s${constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e){this.persistence=e,this.Mr=new Ma(n=>Cv(n),Av),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Nv,this.targetCount=0,this.Lr=ga.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),W.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new ga(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.qn(n),W.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,n){this.Br={},this.overlays={},this.kr=new Ev(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new f$(this),this.indexManager=new r$,this.remoteDocumentCache=function(i){return new h$(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new t$(n),this.$r=new l$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new c$(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new m$(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return W.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class m$ extends J4{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.zr=new Nv,this.jr=null}static Hr(e){return new Ov(e)}get Jr(){if(this.jr)return this.jr;throw he()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),W.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Jr,r=>{const i=se.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,fe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return W.or([()=>W.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Te(),i=Te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Dv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return zM()?8:Z4(Lt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new g$;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(fl()<=Ee.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),W.resolve()):(fl()<=Ee.DEBUG&&ne("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(fl()<=Ee.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(n))):W.resolve())}ji(e,n){if(cI(n))return W.resolve(null);let r=Tr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=__(n,null,"F"),r=Tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Te(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,__(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return cI(n)||i.isEqual(fe.min())?W.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?W.resolve(null):(fl()<=Ee.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),To(n)),this.es(e,o,n,K4(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ot(Ok(e));return n.forEach((i,s)=>{xf(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return fl()<=Ee.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",To(n)),this.zi.getDocumentsMatchingQuery(e,n,qi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ft(Pe),this.rs=new Ma(s=>Cv(s),Av),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a$(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function v$(t,e,n,r){return new y$(t,e,n,r)}async function tP(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Te();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function w$(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=W.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(E=>{const R=c.docVersions.get(y);$e(R!==null),E.version.compareTo(R)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nP(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function E$(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Qt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(E,R,v){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&a.push(n.Qr.updateTargetData(s,g))});let l=ei(),c=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(T$(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(fe.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function T$(t,e,n){let r=Te(),i=Te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ei();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function I$(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function S$(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function T_(t,e,n){const r=pe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ju(o))throw o;ne("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(o))}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function EI(t,e,n){const r=pe(t);let i=fe.min(),s=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=pe(l),p=d.rs.get(h);return p!==void 0?W.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,Tr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:fe.min(),n?s:Te())).next(a=>(C$(r,gU(e),a),{documents:a,hs:s})))}function C$(t,e,n){let r=t.ss.get(e)||fe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class TI{constructor(){this.activeTargetIds=TU()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A${constructor(){this.no=new TI,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new TI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function zm(){return lh===null?lh=function(){return 268435456+Math.round(2147483648*Math.random())}():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class b$ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So="projects/".concat(i,"/databases/").concat(s),this.bo=this.databaseId.database==="(default)"?"project_id=".concat(i):"project_id=".concat(i,"&database_id=").concat(s)}get Do(){return!1}Co(n,r,i,s,o){const a=zm(),l=this.vo(n,r.toUriEncodedString());ne("RestConnection","Sending RPC '".concat(n,"' ").concat(a,":"),l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(ne("RestConnection","Received RPC '".concat(n,"' ").concat(a,": "),h),h),h=>{throw da("RestConnection","RPC '".concat(n,"' ").concat(a," failed with error: "),h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Da}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=k$[n];return"".concat(this.wo,"/v1/").concat(r,":").concat(i)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=zm();return new Promise((o,a)=>{const l=new pk;l.setWithCredentials(!0),l.listenOnce(gk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nh.NO_ERROR:const h=l.getResponseJson();ne(Bt,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(h)),o(h);break;case Nh.TIMEOUT:ne(Bt,"RPC '".concat(e,"' ").concat(s," timed out")),a(new te(j.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const d=l.getStatus();if(ne(Bt,"RPC '".concat(e,"' ").concat(s," failed with status:"),d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(R){const v=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(g.status);a(new te(y,g.message))}else a(new te(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(j.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ne(Bt,"RPC '".concat(e,"' ").concat(s," completed."))}});const c=JSON.stringify(i);ne(Bt,"RPC '".concat(e,"' ").concat(s," sending request:"),i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=zm(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vk(),a=yk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new mk({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ne(Bt,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(h),l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new P$({lo:R=>{g?ne(Bt,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),R):(p||(ne(Bt,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),d.open(),p=!0),ne(Bt,"RPC '".concat(e,"' stream ").concat(i," sending:"),R),d.send(R))},ho:()=>d.close()}),E=(R,v,_)=>{R.listen(v,C=>{try{_(C)}catch(b){setTimeout(()=>{throw b},0)}})};return E(d,Cl.EventType.OPEN,()=>{g||(ne(Bt,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),y.mo())}),E(d,Cl.EventType.CLOSE,()=>{g||(g=!0,ne(Bt,"RPC '".concat(e,"' stream ").concat(i," transport closed")),y.po())}),E(d,Cl.EventType.ERROR,R=>{g||(g=!0,da(Bt,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),R),y.po(new te(j.UNAVAILABLE,"The operation could not be completed")))}),E(d,Cl.EventType.MESSAGE,R=>{var v;if(!g){const _=R.data[0];$e(!!_);const C=_,b=C.error||((v=C[0])===null||v===void 0?void 0:v.error);if(b){ne(Bt,"RPC '".concat(e,"' stream ").concat(i," received error:"),b);const D=b.status;let L=function(A){const k=at[A];if(k!==void 0)return qk(k)}(D),S=b.message;L===void 0&&(L=j.INTERNAL,S="Unknown error status: "+D+" with message "+b.message),g=!0,y.po(new te(L,S)),d.close()}else ne(Bt,"RPC '".concat(e,"' stream ").concat(i," received:"),_),y.yo(_)}}),E(a,_k.STAT_EVENT,R=>{R.stat===c_.PROXY?ne(Bt,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):R.stat===c_.NOPROXY&&ne(Bt,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{y.fo()},0),y}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){return new jU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new rP(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Zr(n.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new te(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return ne("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x$ extends iP{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=WU(this.serializer,e),r=function(s){if(!("targetChange"in s))return fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?Ir(o.readTime):fe.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=E_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=m_(l)?{documents:GU(s,l)}:{query:KU(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Kk(s,o.resumeToken);const c=y_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=bd(s,o.snapshotVersion.toTimestamp());const c=y_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=YU(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=E_(this.serializer),n.removeTarget=e,this.i_(n)}}class N$ extends iP{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=HU(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.A_(r,n)}return $e(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=E_(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qU(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new te(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,v_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(j.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,v_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(j.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class D${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Zr(n),this.y_=!1):ne("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{ro(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.M_.add(4),await nc(c),c.N_.set("Unknown"),c.M_.delete(4),await Lf(c)}(this))})}),this.N_=new D$(r,i)}}async function Lf(t){if(ro(t))for(const e of t.x_)await e(!0)}async function nc(t){for(const e of t.x_)await e(!1)}function sP(t,e){const n=pe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Vv(n)?Fv(n):La(n).Xo()&&Lv(n,e))}function Mv(t,e){const n=pe(t),r=La(n);n.F_.delete(e),r.Xo()&&oP(n,e),n.F_.size===0&&(r.Xo()?r.n_():ro(n)&&n.N_.set("Unknown"))}function Lv(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}La(t).P_(e)}function oP(t,e){t.L_.xe(e),La(t).I_(e)}function Fv(t){t.L_=new FU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),La(t).start(),t.N_.w_()}function Vv(t){return ro(t)&&!La(t).Zo()&&t.F_.size>0}function ro(t){return pe(t).M_.size===0}function aP(t){t.L_=void 0}async function L$(t){t.N_.set("Online")}async function F$(t){t.F_.forEach((e,n)=>{Lv(t,e)})}async function V$(t,e){aP(t),Vv(t)?(t.N_.D_(e),Fv(t)):t.N_.set("Unknown")}async function U$(t,e,n){if(t.N_.set("Online"),e instanceof Gk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xd(t,r)}else if(e instanceof Mh?t.L_.Ke(e):e instanceof Hk?t.L_.He(e):t.L_.We(e),!n.isEqual(fe.min()))try{const r=await nP(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(Qt.EMPTY_BYTE_STRING,h.snapshotVersion)),oP(s,l);const d=new Ai(h.target,l,c,h.sequenceNumber);Lv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await xd(t,r)}}async function xd(t,e,n){if(!Ju(e))throw e;t.M_.add(1),await nc(t),t.N_.set("Offline"),n||(n=()=>nP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Lf(t)})}function lP(t,e){return e().catch(n=>xd(t,n,e))}async function Ff(t){const e=pe(t),n=Gi(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;$$(e);)try{const i=await I$(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,j$(e,i)}catch(i){await xd(e,i)}uP(e)&&cP(e)}function $$(t){return ro(t)&&t.v_.length<10}function j$(t,e){t.v_.push(e);const n=Gi(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function uP(t){return ro(t)&&!Gi(t).Zo()&&t.v_.length>0}function cP(t){Gi(t).start()}async function z$(t){Gi(t).V_()}async function B$(t){const e=Gi(t);for(const n of t.v_)e.d_(n.mutations)}async function W$(t,e,n){const r=t.v_.shift(),i=Pv.from(r,e,n);await lP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ff(t)}async function q$(t,e){e&&Gi(t).E_&&await async function(r,i){if(function(o){return DU(o)&&o!==j.ABORTED}(i.code)){const s=r.v_.shift();Gi(r).t_(),await lP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ff(r)}}(t,e),uP(t)&&cP(t)}async function SI(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=ro(n);n.M_.add(3),await nc(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Lf(n)}async function H$(t,e){const n=pe(t);e?(n.M_.delete(2),await Lf(n)):e||(n.M_.add(2),await nc(n),n.N_.set("Unknown"))}function La(t){return t.B_||(t.B_=function(n,r,i){const s=pe(n);return s.f_(),new x$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:L$.bind(null,t),To:F$.bind(null,t),Ao:V$.bind(null,t),h_:U$.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Vv(t)?Fv(t):t.N_.set("Unknown")):(await t.B_.stop(),aP(t))})),t.B_}function Gi(t){return t.k_||(t.k_=function(n,r,i){const s=pe(n);return s.f_(),new N$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:z$.bind(null,t),Ao:q$.bind(null,t),R_:B$.bind(null,t),A_:W$.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Ff(t)):(await t.k_.stop(),t.v_.length>0&&(ne("RemoteStore","Stopping write stream with ".concat(t.v_.length," pending writes")),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Uv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(t,e){if(Zr("AsyncQueue","".concat(e,": ").concat(t)),Ju(t))return new te(j.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Al(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new Xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.q_=new ft(se.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):he():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _a{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _a(e,n,Xo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class K${constructor(){this.queries=new Ma(e=>Nk(e),bf),this.onlineState="Unknown",this.z_=new Set}}async function hP(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new G$,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$v(o,"Initialization of query '".concat(To(e.query),"' failed"));return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&jv(n)}async function dP(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q$(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&jv(n)}function Y$(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function jv(t){t.z_.forEach(e=>{e.next()})}var I_,AI;(AI=I_||(I_={})).J_="default",AI.Cache="cache";class fP{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==I_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.key=e}}class mP{constructor(e){this.key=e}}class X${constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Te(),this.mutatedKeys=Te(),this.Ia=Ok(e),this.Ta=new Xo(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new CI,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=xf(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let R=!1;p&&g?p.data.isEqual(g.data)?y!==E&&(r.track({type:3,doc:g}),R=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),R=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),R=!0):p&&!g&&(r.track({type:1,doc:p}),R=!0,(l||c)&&(a=!0)),R&&(g?(o=o.add(g),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(g,y){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return E(g)-E(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new _a(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new CI,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Te(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new mP(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new pP(r))}),n}pa(e){this.la=e.hs,this.Pa=Te();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return _a.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class J${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Z${constructor(e){this.key=e,this.wa=!1}}class e3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ma(a=>Nk(a),bf),this.Da=new Map,this.Ca=new Set,this.va=new ft(se.comparator),this.Fa=new Map,this.Ma=new Nv,this.xa={},this.Oa=new Map,this.Na=ga.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function t3(t,e,n=!0){const r=EP(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await gP(r,e,n,!0),i}async function n3(t,e){const n=EP(t);await gP(n,e,!0,!1)}async function gP(t,e,n,r){const i=await S$(t.localStore,Tr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await r3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&sP(t.remoteStore,i),a}async function r3(t,e,n,r,i){t.Ba=(d,p,g)=>async function(E,R,v,_){let C=R.view.da(v);C.Xi&&(C=await EI(E.localStore,R.query,!1).then(({documents:S})=>R.view.da(S,C)));const b=_&&_.targetChanges.get(R.targetId),D=_&&_.targetMismatches.get(R.targetId)!=null,L=R.view.applyChanges(C,E.isPrimaryClient,b,D);return kI(E,R.targetId,L.fa),L.snapshot}(t,d,p,g);const s=await EI(t.localStore,e,!0),o=new X$(e,s.hs),a=o.da(s.documents),l=tc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);kI(t,n,c.fa);const h=new J$(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function i3(t,e,n){const r=pe(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!bf(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await T_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mv(r.remoteStore,i.targetId),S_(r,i.targetId)}).catch(Xu)):(S_(r,i.targetId),await T_(r.localStore,i.targetId,!0))}async function s3(t,e){const n=pe(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mv(n.remoteStore,r.targetId))}async function o3(t,e,n){const r=f3(t);try{const i=await function(o,a){const l=pe(o),c=_t.now(),h=a.reduce((g,y)=>g.add(y.key),Te());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=ei(),E=Te();return l.os.getEntries(g,h).next(R=>{y=R,y.forEach((v,_)=>{_.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(R=>{d=R;const v=[];for(const _ of a){const C=PU(_,d.get(_.key).overlayedDocument);C!=null&&v.push(new os(_.key,C,Sk(C.value.mapValue),Un.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(R=>{p=R;const v=R.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(g,R.batchId,v)})}).then(()=>({batchId:p.batchId,changes:Mk(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new ft(Pe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await rc(r,i.changes),await Ff(r.remoteStore)}catch(i){const s=$v(i,"Failed to persist write");n.reject(s)}}async function _P(t,e){const n=pe(t);try{const r=await E$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?$e(o.wa):i.removedDocuments.size>0&&($e(o.wa),o.wa=!1))}),await rc(n,r,e)}catch(r){await Xu(r)}}function RI(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.U_)p.j_(a)&&(c=!0)}),c&&jv(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a3(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new ft(se.comparator);o=o.insert(s,Gt.newNoDocument(s,fe.min()));const a=Te().add(s),l=new Df(fe.min(),new Map,new ft(Pe),o,a);await _P(r,l),r.va=r.va.remove(s),r.Fa.delete(e),zv(r)}else await T_(r.localStore,e,!1).then(()=>S_(r,e,n)).catch(Xu)}async function l3(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await w$(n.localStore,e);vP(n,r,null),yP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rc(n,i)}catch(i){await Xu(i)}}async function u3(t,e,n){const r=pe(t);try{const i=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>($e(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);vP(r,e,n),yP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rc(r,i)}catch(i){await Xu(i)}}function yP(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function vP(t,e,n){const r=pe(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function S_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||wP(t,r)})}function wP(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Mv(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),zv(t))}function kI(t,e,n){for(const r of n)r instanceof pP?(t.Ma.addReference(r.key,e),c3(t,r)):r instanceof mP?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||wP(t,r.key)):he()}function c3(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.Ca.add(r),zv(t))}function zv(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new se(We.fromString(e)),r=t.Na.next();t.Fa.set(r,new Z$(n)),t.va=t.va.insert(n,r),sP(t.remoteStore,new Ai(Tr(Rv(n.path)),r,"TargetPurposeLimboResolution",Ev.oe))}}async function rc(t,e,n){const r=pe(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Dv.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=pe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>W.forEach(c,p=>W.forEach(p.qi,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>W.forEach(p.Qi,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Ju(d))throw d;ne("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.ns.get(p),y=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,E)}}}(r.localStore,s))}async function h3(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await tP(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new te(j.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rc(n,r.us)}}function d3(t,e){const n=pe(t),r=n.Fa.get(e);if(r&&r.wa)return Te().add(r.key);{let i=Te();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function EP(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_P.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a3.bind(null,e),e.Sa.h_=Q$.bind(null,e.eventManager),e.Sa.ka=Y$.bind(null,e.eventManager),e}function f3(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u3.bind(null,e),e}class PI{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return v$(this.persistence,new _$,e.initialUser,this.serializer)}createPersistence(e){return new p$(Ov.Hr,this.serializer)}createSharedClientState(e){return new A$}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class p3{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>RI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h3.bind(null,this.syncEngine),await H$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K$}()}createDatastore(e){const n=Mf(e.databaseInfo.databaseId),r=function(s){return new b$(s)}(e.databaseInfo);return function(s,o,a,l){return new O$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new M$(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>RI(this.syncEngine,n,0),function(){return II.D()?new II:new R$}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new e3(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=pe(r);ne("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await nc(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qt.UNAUTHENTICATED,this.clientId=Ek.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ne("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$v(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wm(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _3(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>SI(e.remoteStore,i)),t._onlineComponents=e}function g3(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function _3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!g3(n))throw n;da("Error using user provided cache. Falling back to memory cache: "+n),await Wm(t,new PI)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Wm(t,new PI);return t._offlineComponents}async function IP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await bI(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await bI(t,new p3))),t._onlineComponents}function y3(t){return IP(t).then(e=>e.syncEngine)}async function C_(t){const e=await IP(t),n=e.eventManager;return n.onListen=t3.bind(null,e.syncEngine),n.onUnlisten=i3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s3.bind(null,e.syncEngine),n}function v3(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new TP({next:p=>{o.enqueueAndForget(()=>dP(s,d)),p.fromCache&&l.source==="server"?c.reject(new te(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new fP(a,h,{includeMetadataChanges:!0,ra:!0});return hP(s,d)}(await C_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t,e,n){if(!n)throw new te(j.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function w3(t,e,n,r){if(e===!0&&r===!0)throw new te(j.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}function NI(t){if(!se.isDocumentKey(t))throw new te(j.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function OI(t){if(se.isDocumentKey(t))throw new te(j.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return typeof t=="function"?"a function":he()}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vf(t);throw new te(j.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (must not be NaN)"));if(s.timeoutSeconds<5)throw new te(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (minimum allowed value is 5)"));if(s.timeoutSeconds>30)throw new te(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new te(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new U4;switch(r.type){case"firstParty":return new B4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xI.get(n);r&&(ne("ComponentProvider","Removing Datastore"),xI.delete(n),r.terminate())}(this),Promise.resolve()}}function E3(t,e,n,r={}){var i;const s=(t=$n(t,Uf))._getSettings(),o="".concat(e,":").concat(n);if(s.host!=="firestore.googleapis.com"&&s.host!==o&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=qt.MOCK_USER;else{a=ZA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new te(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qt(c)}t._authCredentials=new $4(new wk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class Sr extends io{constructor(e,n,r){super(e,n,Rv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new se(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function A_(t,e,...n){if(t=Me(t),CP("collection","path",e),t instanceof Uf){const r=We.fromString(e,...n);return OI(r),new Sr(t,null,r)}{if(!(t instanceof Dt||t instanceof Sr))throw new te(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return OI(r),new Sr(t.firestore,null,r)}}function Fr(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Ek.newId()),CP("doc","path",e),t instanceof Uf){const r=We.fromString(e,...n);return NI(r),new Dt(t,null,new se(r))}{if(!(t instanceof Dt||t instanceof Sr))throw new te(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return NI(r),new Dt(t.firestore,t instanceof Sr?t.converter:null,new se(r))}}function T3(t,e){return t=Me(t),e=Me(e),(t instanceof Dt||t instanceof Sr)&&(e instanceof Dt||e instanceof Sr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new rP(this,"async_queue_retry"),this.hu=()=>{const n=Bm();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Bm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Ui;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ju(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r);throw Zr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Uv.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&he()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function MI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ki extends Uf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new I3}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||AP(this),this._firestoreClient.terminate()}}function S3(t,e){const n=typeof t=="object"?t:Tf(),r=typeof t=="string"?t:"(default)",i=ss(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=YA("firestore");s&&E3(i,...s)}return i}function Bv(t){return t._firestoreClient||AP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AP(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new nU(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,SP(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new m3(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ya(Qt.fromBase64String(e))}catch(n){throw new te(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ya(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=/^__.*__$/;class A3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new ec(e,this.data,n,this.fieldTransforms)}}class RP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class Hv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Nd(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(kP(this.fu)&&C3.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class R3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mf(e)}Fu(e,n,r,i=!1){return new Hv({fu:e,methodName:n,vu:r,path:xt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jf(t){const e=t._freezeSettings(),n=Mf(t._databaseId);return new R3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PP(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Gv("Data must be an object, but it was:",o,r);const a=bP(r,o);let l,c;if(s.merge)l=new wn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=R_(e,d,n);if(!o.contains(p))throw new te(j.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));NP(h,p)||h.push(p)}l=new wn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new A3(new on(a),l,c)}class zf extends Wv{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}function k3(t,e,n,r){const i=t.Fu(1,e,n);Gv("Data must be an object, but it was:",i,r);const s=[],o=on.empty();no(r,(l,c)=>{const h=Kv(e,l,n);c=Me(c);const d=i.Su(h);if(c instanceof zf)s.push(h);else{const p=ic(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new wn(s);return new RP(o,a,i.fieldTransforms)}function P3(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[R_(e,r,n)],l=[i];if(s.length%2!=0)throw new te(j.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let p=0;p<s.length;p+=2)a.push(R_(e,s[p])),l.push(s[p+1]);const c=[],h=on.empty();for(let p=a.length-1;p>=0;--p)if(!NP(c,a[p])){const g=a[p];let y=l[p];y=Me(y);const E=o.Su(g);if(y instanceof zf)c.push(g);else{const R=ic(y,E);R!=null&&(c.push(g),h.set(g,R))}}const d=new wn(c);return new RP(h,d,o.fieldTransforms)}function b3(t,e,n,r=!1){return ic(n,t.Fu(r?4:3,e))}function ic(t,e){if(xP(t=Me(t)))return Gv("Unsupported field value:",e,t),bP(t,e);if(t instanceof Wv)return function(r,i){if(!kP(i.fu))throw i.Du("".concat(r._methodName,"() can only be used with update() and set()"));if(!i.path)throw i.Du("".concat(r._methodName,"() is not currently supported inside arrays"));const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ic(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=_t.fromDate(r);return{timestampValue:bd(i.serializer,s)}}if(r instanceof _t){const s=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bd(i.serializer,s)}}if(r instanceof qv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ya)return{bytesValue:Kk(i.serializer,r._byteString)};if(r instanceof Dt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(s.projectId,"/").concat(s.database));return{referenceValue:xv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du("Unsupported field value: ".concat(Vf(r)))}(t,e)}function bP(t,e){const n={};return Tk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,i)=>{const s=ic(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof qv||t instanceof ya||t instanceof Dt||t instanceof Wv)}function Gv(t,e,n){if(!xP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function R_(t,e,n){if((e=Me(e))instanceof $f)return e._internalPath;if(typeof e=="string")return Kv(t,e);throw Nd("Field path arguments must be of type string or ",t,!1,void 0,n)}const x3=new RegExp("[~\\*/\\[\\]]");function Kv(t,e,n){if(e.search(x3)>=0)throw Nd("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new $f(...e.split("."))._internalPath}catch(r){throw Nd("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Nd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new te(j.INVALID_ARGUMENT,a+t+l)}function NP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N3 extends OP{data(){return super.data()}}function Qv(t,e){return typeof e=="string"?Kv(t,e):e instanceof $f?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yv{}class O3 extends Yv{}function D3(t,e,...n){let r=[];e instanceof Yv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Fa).length,a=s.filter(l=>l instanceof sc).length;if(o>1||o>0&&a>0)throw new te(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class sc extends O3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new sc(e,n,r)}_apply(e){const n=this._parse(e);return MP(e._query,n),new io(e.firestore,e.converter,g_(e._query,n))}_parse(e){const n=jf(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(j.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(h,"' queries on documentId()."));if(h==="in"||h==="not-in"){VI(d,h);const g=[];for(const y of d)g.push(FI(l,s,y));p={arrayValue:{values:g}}}else p=FI(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||VI(d,h),p=b3(a,o,d,h==="in"||h==="not-in");return ht.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function uh(t,e,n){const r=e,i=Qv("where",t);return sc._create(i,r,n)}class Fa extends Yv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fa(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)MP(o,l),o=g_(o,l)}(e._query,n),new io(e.firestore,e.converter,g_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function LI(...t){return t.forEach(e=>LP("or",e)),Fa._create("or",t)}function M3(...t){return t.forEach(e=>LP("and",e)),Fa._create("and",t)}function FI(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new te(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xk(e)&&n.indexOf("/")!==-1)throw new te(j.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=e.path.child(We.fromString(n));if(!se.isDocumentKey(r))throw new te(j.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return iI(t,new se(r))}if(n instanceof Dt)return iI(t,n._key);throw new te(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Vf(n),"."))}function VI(t,e){if(!Array.isArray(t)||t.length===0)throw new te(j.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function MP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(j.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new te(j.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function LP(t,e){if(!(e instanceof sc||e instanceof Fa))throw new te(j.INVALID_ARGUMENT,"Function ".concat(t,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class L3{convertValue(e,n="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return no(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new qv(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Iv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);$e(eP(r));const i=new Tu(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(n)||Zr("Document ".concat(s," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(n.projectId,"/").concat(n.database,") instead.")),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VP extends OP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Lh extends VP{data(e={}){return super.data(e)}}class UP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new kl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lh(this._firestore,this._userDataWriter,r.key,r,new kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:F3(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function F3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}class Xv extends L3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function V3(t){t=$n(t,io);const e=$n(t.firestore,Ki),n=Bv(e),r=new Xv(e);return DP(t._query),v3(n,t._query).then(i=>new UP(e,r,t,i))}function U3(t,e,n){t=$n(t,Dt);const r=$n(t.firestore,Ki),i=FP(t.converter,e,n);return Bf(r,[PP(jf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Un.none())])}function pl(t,e,n,...r){t=$n(t,Dt);const i=$n(t.firestore,Ki),s=jf(i);let o;return o=typeof(e=Me(e))=="string"||e instanceof $f?P3(s,"updateDoc",t._key,e,n,r):k3(s,"updateDoc",t._key,e),Bf(i,[o.toMutation(t._key,Un.exists(!0))])}function $3(t){return Bf($n(t.firestore,Ki),[new kv(t._key,Un.none())])}function j3(t,e){const n=$n(t.firestore,Ki),r=Fr(t),i=FP(t.converter,e);return Bf(n,[PP(jf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function z3(t,...e){var n,r,i;t=Me(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||MI(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(MI(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof Dt)c=$n(t.firestore,Ki),h=Rv(t._key.path),l={next:d=>{e[o]&&e[o](B3(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=$n(t,io);c=$n(d.firestore,Ki),h=d._query;const p=new Xv(c);l={next:g=>{e[o]&&e[o](new UP(c,p,d,g))},error:e[o+1],complete:e[o+2]},DP(t._query)}return function(p,g,y,E){const R=new TP(E),v=new fP(g,R,y);return p.asyncQueue.enqueueAndForget(async()=>hP(await C_(p),v)),()=>{R.$a(),p.asyncQueue.enqueueAndForget(async()=>dP(await C_(p),v))}}(Bv(c),h,a,l)}function Bf(t,e){return function(r,i){const s=new Ui;return r.asyncQueue.enqueueAndForget(async()=>o3(await y3(r),i,s)),s.promise}(Bv(t),e)}function B3(t,e,n){const r=n.docs.get(e._key),i=new Xv(t);return new VP(t,i,e._key,r,new kl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Da=i})(to),lr(new Bn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ki(new j4(r.getProvider("auth-internal")),new q4(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),dn(eI,"4.6.4",e),dn(eI,"4.6.4","esm2017")})();var UI={};const $I="@firebase/database",jI="1.0.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $P="";function W3(t){$P=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Pr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new q3(e)}}catch(e){}return new H3},Ps=jP("localStorage"),G3=jP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Gu("@firebase/database"),K3=function(){let t=1;return function(){return t++}}(),zP=function(t){const e=ZM(t),n=new QM;n.update(e);const r=n.digest();return nv.encodeByteArray(r)},oc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=oc.apply(null,r):typeof r=="object"?e+=mt(r):e+=r,e+=" "}return e};let Hl=null,zI=!0;const Q3=function(t,e){Q(!e,"Can't turn on custom loggers persistently."),Jo.logLevel=Ee.VERBOSE,Hl=Jo.log.bind(Jo)},Tt=function(...t){if(zI===!0&&(zI=!1,Hl===null&&G3.get("logging_enabled")===!0&&Q3()),Hl){const e=oc.apply(null,t);Hl(e)}},ac=function(t){return function(...e){Tt(t,...e)}},k_=function(...t){const e="FIREBASE INTERNAL ERROR: "+oc(...t);Jo.error(e)},ti=function(...t){const e="FIREBASE FATAL ERROR: ".concat(oc(...t));throw Jo.error(e),new Error(e)},tn=function(...t){const e="FIREBASE WARNING: "+oc(...t);Jo.warn(e)},Y3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},X3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},va="[MIN_NAME]",Gs="[MAX_NAME]",so=function(t,e){if(t===e)return 0;if(t===va||e===Gs)return-1;if(e===va||t===Gs)return 1;{const n=BI(t),r=BI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},J3=function(t,e){return t===e?0:t<e?-1:1},ml=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},Jv=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=mt(e[r]),n+=":",n+=Jv(t[e[r]]);return n+="}",n},BP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function St(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const WP=function(t){Q(!Wf(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},Z3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},e5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function t5(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const n5=new RegExp("^-?(0*)\\d{1,10}$"),r5=-2147483648,i5=2147483647,BI=function(t){if(n5.test(t)){const e=Number(t);if(e>=r5&&e<=i5)return e}return null},Va=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},s5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tn('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" are invalid. This usually indicates your app was not initialized correctly.'))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tn(e)}}class Fh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Fh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="5",qP="v",HP="s",GP="r",KP="f",QP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YP="ls",XP="p",P_="ac",JP="websocket",ZP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ps.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ps.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(n)}}function l5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function tb(t,e,n){Q(typeof e=="string","typeof type must == string"),Q(typeof n=="object","typeof params must == object");let r;if(e===JP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ZP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);l5(t)&&(n.ns=t.namespace);const i=[];return St(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(){this.counters_={}}incrementCounter(e,n=1){Pr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return DM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm={},Hm={};function e0(t){const e=t.toString();return qm[e]||(qm[e]=new u5),qm[e]}function c5(t,e){const n=t.toString();return Hm[n]||(Hm[n]=e()),Hm[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Va(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="start",d5="close",f5="pLPCommand",p5="pRTLPCB",nb="id",rb="pw",ib="ser",m5="cb",g5="seg",_5="ts",y5="d",v5="dframe",sb=1870,ob=30,w5=sb-ob,E5=25e3,T5=3e4;class Vo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ac(e),this.stats_=e0(n),this.urlFn=l=>(this.appCheckToken&&(l[P_]=this.appCheckToken),tb(n,ZP,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new h5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(T5)),X3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new t0((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===WI)this.id=a,this.password=l;else if(o===d5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[WI]="t",r[ib]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[m5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qP]=Zv,this.transportSessionId&&(r[HP]=this.transportSessionId),this.lastSessionId&&(r[YP]=this.lastSessionId),this.applicationId&&(r[XP]=this.applicationId),this.appCheckToken&&(r[P_]=this.appCheckToken),typeof location<"u"&&location.hostname&&QP.test(location.hostname)&&(r[GP]=KP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vo.forceAllow_=!0}static forceDisallow(){Vo.forceDisallow_=!0}static isAvailable(){return Vo.forceAllow_?!0:!Vo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Z3()&&!e5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=GA(n),i=BP(r,w5);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[v5]="t",r[nb]=e,r[rb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class t0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=K3(),window[f5+this.uniqueCallbackIdentifier]=e,window[p5+this.uniqueCallbackIdentifier]=n,this.myIFrame=t0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Tt("frame writing exception"),a.stack&&Tt(a.stack),Tt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tt("No IE domain setting required")}catch(n){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[nb]=this.myID,e[rb]=this.myPW,e[ib]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ob+r.length<=sb;){const o=this.pendingSegs.shift();r=r+"&"+g5+i+"="+o.seg+"&"+_5+i+"="+o.ts+"&"+y5+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(E5)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Tt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=16384,S5=45e3;let Od=null;typeof MozWebSocket<"u"?Od=MozWebSocket:typeof WebSocket<"u"&&(Od=WebSocket);class er{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ac(this.connId),this.stats_=e0(n),this.connURL=er.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[qP]=Zv,typeof location<"u"&&location.hostname&&QP.test(location.hostname)&&(o[GP]=KP),n&&(o[HP]=n),r&&(o[YP]=r),i&&(o[P_]=i),s&&(o[XP]=s),tb(e,JP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ps.set("previous_websocket_failure",!0);try{let r;nR(),this.mySock=new Od(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){er.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Od!==null&&!er.forceDisallow_}static previouslyFailed(){return Ps.isInMemoryStorage||Ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ps.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=gu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=BP(n,I5);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(S5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}er.responsesRequiredToBeHealthy=2;er.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Vo,er]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=er&&er.isAvailable();let r=n&&!er.previouslyFailed();if(e.webSocketOnly&&(n||tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[er];else{const i=this.transports_=[];for(const s of Au.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Au.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Au.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=6e4,A5=5e3,R5=10*1024,k5=100*1024,Gm="t",qI="d",P5="s",HI="r",b5="e",GI="o",KI="a",QI="n",YI="p",x5="h";class N5{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ac("c:"+this.id+":"),this.transportManager_=new Au(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Gl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>R5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Gm in e){const n=e[Gm];n===KI?this.upgradeIfSecondaryHealthy_():n===HI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===GI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ml("t",e),r=ml("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ml("t",e),r=ml("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ml(Gm,e);if(qI in e){const r=e[qI];if(n===x5){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===QI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===P5?this.onConnectionShutdown_(r):n===HI?this.onReset_(r):n===b5?k_("Server Error: "+r):n===GI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Zv!==r&&tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(C5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(A5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends lb{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dd}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=32,JI=768;class Ne{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ae(){return new Ne("")}function _e(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qi(t){return t.pieces_.length-t.pieceNum_}function Fe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ne(t.pieces_,e)}function n0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function O5(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ru(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ub(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ne(e,0)}function Qe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ne(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function Zt(t,e){const n=_e(t),r=_e(e);if(n===null)return e;if(n===r)return Zt(Fe(t),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function D5(t,e){const n=Ru(t,0),r=Ru(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=so(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function r0(t,e){if(Qi(t)!==Qi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ln(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Qi(t)>Qi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class M5{constructor(e,n){this.errorPrefix_=n,this.parts_=Ru(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ef(this.parts_[r]);cb(this)}}function L5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ef(e),cb(t)}function F5(t){const e=t.parts_.pop();t.byteLength_-=Ef(e),t.parts_.length>0&&(t.byteLength_-=1)}function cb(t){if(t.byteLength_>JI)throw new Error(t.errorPrefix_+"has a key path longer than "+JI+" bytes ("+t.byteLength_+").");if(t.parts_.length>XI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+XI+") or object contains a cycle "+ys(t))}function ys(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends lb{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new i0}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=1e3,V5=60*5*1e3,ZI=30*1e3,U5=1.3,$5=3e4,j5="server_kill",eS=3;class Gr extends ab{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Gr.nextPersistentConnectionId_++,this.log_=ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gl,this.maxReconnectDelay_=V5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!nR())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");i0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Dd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(mt(s)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new yr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Gr.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Pr(e,"w")){const r=ua(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();tn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".concat(i," at ").concat(s," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||KM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=GM(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):k_("Unrecognized action received from server: "+mt(e)+"\nAre you using the latest client?")}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$5&&(this.reconnectDelay_=gl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*U5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Gr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){Q(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Tt("getToken() completed but was canceled"):(Tt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new N5(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{tn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(j5)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&tn(d),l())}}}interrupt(e){Tt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],md(this.interruptReasons_)&&(this.reconnectDelay_=gl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Jv(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ne(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Tt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eS&&(this.reconnectDelay_=ZI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Tt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$P.replace(/\./g,"-")]=1,rv()?e["framework.cordova"]=1:tR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dd.getInstance().currentlyOnline();return md(this.interruptReasons_)&&e}}Gr.nextPersistentConnectionId_=0;Gr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ve(va,e),i=new ve(va,n);return this.compare(r,i)!==0}minPost(){return ve.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch;class hb extends qf{static get __EMPTY_NODE(){return ch}static set __EMPTY_NODE(e){ch=e}compare(e,n){return so(e.name,n.name)}isDefinedOn(e){throw xa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Gs,ch)}makePost(e,n){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,ch)}toString(){return".key"}}const Zo=new hb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Et.RED,this.left=i!=null?i:ln.EMPTY_NODE,this.right=s!=null?s:ln.EMPTY_NODE}copy(e,n,r,i,s){return new Et(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ln.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ln.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Et.RED=!0;Et.BLACK=!1;class z5{copy(e,n,r,i,s){return this}insert(e,n,r){return new Et(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ln{constructor(e,n=ln.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ln(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Et.BLACK,null,null))}remove(e){return new ln(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Et.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new hh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new hh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new hh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new hh(this.root_,null,this.comparator_,!0,e)}}ln.EMPTY_NODE=new z5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t,e){return so(t.name,e.name)}function s0(t,e){return so(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_;function W5(t){b_=t}const db=function(t){return typeof t=="number"?"number:"+WP(t):"string:"+t},fb=function(t){if(t.isLeafNode()){const e=t.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pr(e,".sv"),"Priority must be a string or number.")}else Q(t===b_||t.isEmpty(),"priority of unexpected type.");Q(t===b_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tS;class yt{constructor(e,n=yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fb(this.priorityNode_)}static set __childrenNodeConstructor(e){tS=e}static get __childrenNodeConstructor(){return tS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:_e(e)===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=_e(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Q(r!==".priority"||Qi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+db(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=WP(this.value_):e+=this.value_,this.lazyHash_=zP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yt.__childrenNodeConstructor?-1:(Q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=yt.VALUE_TYPE_ORDER.indexOf(n),s=yt.VALUE_TYPE_ORDER.indexOf(r);return Q(i>=0,"Unknown leaf type: "+n),Q(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pb,mb;function q5(t){pb=t}function H5(t){mb=t}class G5 extends qf{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?so(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Gs,new yt("[PRIORITY-POST]",mb))}makePost(e,n){const r=pb(e);return new ve(n,new yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ye=new G5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=Math.log(2);class Q5{constructor(e){const n=s=>parseInt(Math.log(s)/K5,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Md=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new Et(p,d.node,Et.BLACK,null,null);{const g=parseInt(h/2,10)+l,y=i(l,g),E=i(g+1,c);return d=t[g],p=n?n(d):d,new Et(p,d.node,Et.BLACK,y,E)}},s=function(l){let c=null,h=null,d=t.length;const p=function(y,E){const R=d-y,v=d;d-=y;const _=i(R+1,v),C=t[R],b=n?n(C):C;g(new Et(b,C.node,E,null,_))},g=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const E=l.nextBitIsOne(),R=Math.pow(2,l.count-(y+1));E?p(R,Et.BLACK):(p(R,Et.BLACK),p(R,Et.RED))}return h},o=new Q5(t.length),a=s(o);return new ln(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Km;const mo={};class qr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Q(mo&&Ye,"ChildrenNode.ts has not been loaded"),Km=Km||new qr({".priority":mo},{".priority":Ye}),Km}get(e){const n=ua(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ln?n:null}hasIndex(e){return Pr(this.indexSet_,e.toString())}addIndex(e,n){Q(e!==Zo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ve.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Md(r,e.getCompare()):a=mo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new qr(h,c)}addToIndexes(e,n){const r=gd(this.indexes_,(i,s)=>{const o=ua(this.indexSet_,s);if(Q(o,"Missing index implementation for "+s),i===mo)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ve.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Md(a,o.getCompare())}else return mo;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new ve(e.name,a))),l.insert(e,e.node)}});return new qr(r,this.indexSet_)}removeFromIndexes(e,n){const r=gd(this.indexes_,i=>{if(i===mo)return i;{const s=n.get(e.name);return s?i.remove(new ve(e.name,s)):i}});return new qr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l;class le{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&fb(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _l||(_l=new le(new ln(s0),null,qr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_l}updatePriority(e){return this.children_.isEmpty()?this:new le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_l:n}}getChild(e){const n=_e(e);return n===null?this:this.getImmediateChild(n).getChild(Fe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ve(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?_l:this.priorityNode_;return new le(i,o,s)}}updateChild(e,n){const r=_e(e);if(r===null)return n;{Q(_e(e)!==".priority"||Qi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Fe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ye,(o,a)=>{n[o]=a.val(e),r++,s&&le.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+db(this.getPriority().val())+":"),this.forEachChild(Ye,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":zP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ve(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ve.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lc?-1:0}withIndex(e){if(e===Zo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new le(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Zo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ye),i=n.getIterator(Ye);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Zo?null:this.indexMap_.get(e.toString())}}le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Y5 extends le{constructor(){super(new ln(s0),le.EMPTY_NODE,qr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return le.EMPTY_NODE}isEmpty(){return!1}}const lc=new Y5;Object.defineProperties(ve,{MIN:{value:new ve(va,le.EMPTY_NODE)},MAX:{value:new ve(Gs,lc)}});hb.__EMPTY_NODE=le.EMPTY_NODE;yt.__childrenNodeConstructor=le;W5(lc);H5(lc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=!0;function rt(t,e=null){if(t===null)return le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new yt(n,rt(e))}if(!(t instanceof Array)&&X5){const n=[];let r=!1;if(St(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=rt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ve(o,l)))}}),n.length===0)return le.EMPTY_NODE;const s=Md(n,B5,o=>o.name,s0);if(r){const o=Md(n,Ye.getCompare());return new le(s,rt(e),new qr({".priority":o},{".priority":Ye}))}else return new le(s,rt(e),qr.Default)}else{let n=le.EMPTY_NODE;return St(t,(r,i)=>{if(Pr(t,r)&&r.substring(0,1)!=="."){const s=rt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(rt(e))}}q5(rt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5 extends qf{constructor(e){super(),this.indexPath_=e,Q(!ye(e)&&_e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?so(e.name,n.name):s}makePost(e,n){const r=rt(e),i=le.EMPTY_NODE.updateChild(this.indexPath_,r);return new ve(n,i)}maxPost(){const e=le.EMPTY_NODE.updateChild(this.indexPath_,lc);return new ve(Gs,e)}toString(){return Ru(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5 extends qf{compare(e,n){const r=e.node.compareTo(n.node);return r===0?so(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const r=rt(e);return new ve(n,r)}toString(){return".value"}}const e6=new Z5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){return{type:"value",snapshotNode:t}}function wa(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ku(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Pu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function t6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){Q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ku(n,a)):Q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(wa(n,r)):o.trackChildChange(Pu(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ye,(i,s)=>{n.hasChild(i)||r.trackChildChange(ku(i,s))}),n.isLeafNode()||n.forEachChild(Ye,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Pu(i,s,o))}else r.trackChildChange(wa(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?le.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.indexedFilter_=new o0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bu.getStartPost_(e),this.endPost_=bu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ve(n,r))||(r=le.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=le.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(le.EMPTY_NODE);const s=this;return n.forEachChild(Ye,(o,a)=>{s.matches(new ve(o,a))||(i=i.updateImmediateChild(o,le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new bu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ve(n,r))||(r=le.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=le.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=le.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(le.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,g)=>d(g,p)}else o=this.index_.getCompare();const a=e;Q(a.numChildren()===this.limit_,"");const l=new ve(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=i.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);const g=p==null?1:o(p,l);if(h&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(Pu(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ku(n,d));const E=a.updateImmediateChild(n,le.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s!=null&&s.trackChildChange(wa(p.name,p.node)),E.updateImmediateChild(p.name,p.node)):E}}else return r.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(ku(c.name,c.node)),s.trackChildChange(wa(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,le.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ye}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:va}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ye}copy(){const e=new a0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function r6(t){return t.loadsAllData()?new o0(t.getIndex()):t.hasLimit()?new n6(t):new bu(t)}function nS(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ye?n="$priority":t.index_===e6?n="$value":t.index_===Zo?n="$key":(Q(t.index_ instanceof J5,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+mt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function rS(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ye&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends ab{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ac("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ld.getListenId_(e,r),a={};this.listens_[o]=a;const l=nS(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),ua(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=Ld.getListenId_(e,n);delete this.listens_[r]}get(e){const n=nS(e._queryParams),r=e._path.toString(),i=new yr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Na(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=gu(a.responseText)}catch(c){tn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&tn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.rootNode_=le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){return{value:null,children:new Map}}function Ua(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=_e(e);t.children.has(r)||t.children.set(r,Fd());const i=t.children.get(r);e=Fe(e),Ua(i,e,n)}}function x_(t,e){if(ye(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Ye,(r,i)=>{Ua(t,new Ne(r),i)}),x_(t,e)}}else if(t.children.size>0){const n=_e(e);return e=Fe(e),t.children.has(n)&&x_(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function N_(t,e,n){t.value!==null?n(e,t.value):s6(t,(r,i)=>{const s=new Ne(e.toString()+"/"+r);N_(i,s,n)})}function s6(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&St(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=10*1e3,a6=30*1e3,l6=5*60*1e3;class u6{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new o6(e);const r=iS+(a6-iS)*Math.random();Gl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;St(e,(i,s)=>{s>0&&Pr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Gl(this.reportStats_.bind(this),Math.floor(Math.random()*2*l6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nr||(nr={}));function l0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function u0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function c0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=nr.ACK_USER_WRITE,this.source=l0()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ne(e));return new Vd(Ae(),n,this.revert)}}else return Q(_e(this.path)===e,"operationForChild called for unrelated child."),new Vd(Fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.source=e,this.path=n,this.type=nr.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new xu(this.source,Ae()):new xu(this.source,Fe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=nr.OVERWRITE}operationForChild(e){return ye(this.path)?new Ks(this.source,Ae(),this.snap.getImmediateChild(e)):new Ks(this.source,Fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=nr.MERGE}operationForChild(e){if(ye(this.path)){const n=this.children.subtree(new Ne(e));return n.isEmpty()?null:n.value?new Ks(this.source,Ae(),n.value):new Ea(this.source,Ae(),n)}else return Q(_e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ea(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=_e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function h6(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(t6(o.childName,o.snapshotNode))}),yl(t,i,"child_removed",e,r,n),yl(t,i,"child_added",e,r,n),yl(t,i,"child_moved",s,r,n),yl(t,i,"child_changed",e,r,n),yl(t,i,"value",e,r,n),i}function yl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>f6(t,a,l)),o.forEach(a=>{const l=d6(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function d6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function f6(t,e,n){if(e.childName==null||n.childName==null)throw xa("Should only compare child_ events.");const r=new ve(e.childName,e.snapshotNode),i=new ve(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t,e){return{eventCache:t,serverCache:e}}function Kl(t,e,n,r){return Hf(new Yi(e,n,r),t.serverCache)}function _b(t,e,n,r){return Hf(t.eventCache,new Yi(e,n,r))}function Ud(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm;const p6=()=>(Qm||(Qm=new ln(J3)),Qm);class Ve{constructor(e,n=p6()){this.value=e,this.children=n}static fromObject(e){let n=new Ve(null);return St(e,(r,i)=>{n=n.set(new Ne(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(ye(e))return null;{const r=_e(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Fe(e),n);return s!=null?{path:Qe(new Ne(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{const n=_e(e),r=this.children.get(n);return r!==null?r.subtree(Fe(e)):new Ve(null)}}set(e,n){if(ye(e))return new Ve(n,this.children);{const r=_e(e),s=(this.children.get(r)||new Ve(null)).set(Fe(e),n),o=this.children.insert(r,s);return new Ve(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new Ve(null):new Ve(null,this.children);{const n=_e(e),r=this.children.get(n);if(r){const i=r.remove(Fe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ve(null):new Ve(this.value,s)}else return this}}get(e){if(ye(e))return this.value;{const n=_e(e),r=this.children.get(n);return r?r.get(Fe(e)):null}}setTree(e,n){if(ye(e))return n;{const r=_e(e),s=(this.children.get(r)||new Ve(null)).setTree(Fe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ve(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qe(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ye(e))return null;{const s=_e(e),o=this.children.get(s);return o?o.findOnPath_(Fe(e),Qe(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);const i=_e(e),s=this.children.get(i);return s?s.foreachOnPath_(Fe(e),Qe(n,i),r):new Ve(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.writeTree_=e}static empty(){return new or(new Ve(null))}}function Ql(t,e,n){if(ye(e))return new or(new Ve(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Zt(i,e);return s=s.updateChild(o,n),new or(t.writeTree_.set(i,s))}else{const i=new Ve(n),s=t.writeTree_.setTree(e,i);return new or(s)}}}function O_(t,e,n){let r=t;return St(n,(i,s)=>{r=Ql(r,Qe(e,i),s)}),r}function sS(t,e){if(ye(e))return or.empty();{const n=t.writeTree_.setTree(e,new Ve(null));return new or(n)}}function D_(t,e){return oo(t,e)!=null}function oo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Zt(n.path,e)):null}function oS(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ye,(r,i)=>{e.push(new ve(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ve(r,i.value))}),e}function ji(t,e){if(ye(e))return t;{const n=oo(t,e);return n!=null?new or(new Ve(n)):new or(t.writeTree_.subtree(e))}}function M_(t){return t.writeTree_.isEmpty()}function Ta(t,e){return yb(Ae(),t.writeTree_,e)}function yb(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Q(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=yb(Qe(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t,e){return Tb(e,t)}function m6(t,e,n,r,i){Q(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ql(t.visibleWrites,e,n)),t.lastWriteId=r}function g6(t,e,n,r){Q(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=O_(t.visibleWrites,e,n),t.lastWriteId=r}function _6(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function y6(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Q(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&v6(a,r.path)?i=!1:Ln(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return w6(t),!0;if(r.snap)t.visibleWrites=sS(t.visibleWrites,r.path);else{const a=r.children;St(a,l=>{t.visibleWrites=sS(t.visibleWrites,Qe(r.path,l))})}return!0}else return!1}function v6(t,e){if(t.snap)return Ln(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ln(Qe(t.path,n),e))return!0;return!1}function w6(t){t.visibleWrites=vb(t.allWrites,E6,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function E6(t){return t.visible}function vb(t,e,n){let r=or.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Ln(n,o)?(a=Zt(n,o),r=Ql(r,a,s.snap)):Ln(o,n)&&(a=Zt(o,n),r=Ql(r,Ae(),s.snap.getChild(a)));else if(s.children){if(Ln(n,o))a=Zt(n,o),r=O_(r,a,s.children);else if(Ln(o,n))if(a=Zt(o,n),ye(a))r=O_(r,Ae(),s.children);else{const l=ua(s.children,_e(a));if(l){const c=l.getChild(Fe(a));r=Ql(r,Ae(),c)}}}else throw xa("WriteRecord should have .snap or .children")}}return r}function wb(t,e,n,r,i){if(!r&&!i){const s=oo(t.visibleWrites,e);if(s!=null)return s;{const o=ji(t.visibleWrites,e);if(M_(o))return n;if(n==null&&!D_(o,Ae()))return null;{const a=n||le.EMPTY_NODE;return Ta(o,a)}}}else{const s=ji(t.visibleWrites,e);if(!i&&M_(s))return n;if(!i&&n==null&&!D_(s,Ae()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Ln(c.path,e)||Ln(e,c.path))},a=vb(t.allWrites,o,e),l=n||le.EMPTY_NODE;return Ta(a,l)}}}function T6(t,e,n){let r=le.EMPTY_NODE;const i=oo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ye,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ji(t.visibleWrites,e);return n.forEachChild(Ye,(o,a)=>{const l=Ta(ji(s,new Ne(o)),a);r=r.updateImmediateChild(o,l)}),oS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ji(t.visibleWrites,e);return oS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function I6(t,e,n,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Qe(e,n);if(D_(t.visibleWrites,s))return null;{const o=ji(t.visibleWrites,s);return M_(o)?i.getChild(n):Ta(o,i.getChild(n))}}function S6(t,e,n,r){const i=Qe(e,n),s=oo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ji(t.visibleWrites,i);return Ta(o,r.getNode().getImmediateChild(n))}else return null}function C6(t,e){return oo(t.visibleWrites,e)}function A6(t,e,n,r,i,s,o){let a;const l=ji(t.visibleWrites,e),c=oo(l,Ae());if(c!=null)a=c;else if(n!=null)a=Ta(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=p.getNext();for(;g&&h.length<i;)d(g,r)!==0&&h.push(g),g=p.getNext();return h}else return[]}function R6(){return{visibleWrites:or.empty(),allWrites:[],lastWriteId:-1}}function $d(t,e,n,r){return wb(t.writeTree,t.treePath,e,n,r)}function h0(t,e){return T6(t.writeTree,t.treePath,e)}function aS(t,e,n,r){return I6(t.writeTree,t.treePath,e,n,r)}function jd(t,e){return C6(t.writeTree,Qe(t.treePath,e))}function k6(t,e,n,r,i,s){return A6(t.writeTree,t.treePath,e,n,r,i,s)}function d0(t,e,n){return S6(t.writeTree,t.treePath,e,n)}function Eb(t,e){return Tb(Qe(t.treePath,e),t.writeTree)}function Tb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Pu(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ku(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,wa(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Pu(r,e.snapshotNode,i.oldSnap));else throw xa("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Ib=new b6;class f0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Yi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return d0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qs(this.viewCache_),s=k6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){return{filter:t}}function N6(t,e){Q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function O6(t,e,n,r,i){const s=new P6;let o,a;if(n.type===nr.OVERWRITE){const c=n;c.source.fromUser?o=L_(t,e,c.path,c.snap,r,i,s):(Q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ye(c.path),o=zd(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===nr.MERGE){const c=n;c.source.fromUser?o=M6(t,e,c.path,c.children,r,i,s):(Q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=F_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===nr.ACK_USER_WRITE){const c=n;c.revert?o=V6(t,e,c.path,r,i,s):o=L6(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===nr.LISTEN_COMPLETE)o=F6(t,e,n.path,r,s);else throw xa("Unknown operation type: "+n.type);const l=s.getChanges();return D6(e,o,l),{viewCache:o,changes:l}}function D6(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ud(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(gb(Ud(e)))}}function Sb(t,e,n,r,i,s){const o=e.eventCache;if(jd(r,n)!=null)return e;{let a,l;if(ye(n))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Qs(e),h=c instanceof le?c:le.EMPTY_NODE,d=h0(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=$d(r,Qs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=_e(n);if(c===".priority"){Q(Qi(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=aS(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Fe(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=aS(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=d0(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return Kl(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function zd(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(ye(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),g,null)}else{const g=_e(n);if(!l.isCompleteForPath(n)&&Qi(n)>1)return e;const y=Fe(n),R=l.getNode().getImmediateChild(g).updateChild(y,r);g===".priority"?c=h.updatePriority(l.getNode(),R):c=h.updateChild(l.getNode(),g,R,y,Ib,null)}const d=_b(e,c,l.isFullyInitialized()||ye(n),h.filtersNodes()),p=new f0(i,d,s);return Sb(t,d,n,i,p,a)}function L_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new f0(i,e,s);if(ye(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Kl(e,c,!0,t.filter.filtersNodes());else{const d=_e(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Kl(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=Fe(n),g=a.getNode().getImmediateChild(d);let y;if(ye(p))y=r;else{const E=h.getCompleteChild(d);E!=null?n0(p)===".priority"&&E.getChild(ub(p)).isEmpty()?y=E:y=E.updateChild(p,r):y=le.EMPTY_NODE}if(g.equals(y))l=e;else{const E=t.filter.updateChild(a.getNode(),d,y,p,h,o);l=Kl(e,E,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function lS(t,e){return t.eventCache.isCompleteForChild(e)}function M6(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=Qe(n,l);lS(e,_e(h))&&(a=L_(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=Qe(n,l);lS(e,_e(h))||(a=L_(t,a,h,c,i,s,o))}),a}function uS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function F_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ye(n)?c=r:c=new Ve(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),y=uS(t,g,p);l=zd(t,l,new Ne(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const g=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!g){const y=e.serverCache.getNode().getImmediateChild(d),E=uS(t,y,p);l=zd(t,l,new Ne(d),E,i,s,o,a)}}),l}function L6(t,e,n,r,i,s,o){if(jd(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ye(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return zd(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ye(n)){let c=new Ve(null);return l.getNode().forEachChild(Zo,(h,d)=>{c=c.set(new Ne(h),d)}),F_(t,e,n,c,i,s,a,o)}else return e}else{let c=new Ve(null);return r.foreach((h,d)=>{const p=Qe(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),F_(t,e,n,c,i,s,a,o)}}function F6(t,e,n,r,i){const s=e.serverCache,o=_b(e,s.getNode(),s.isFullyInitialized()||ye(n),s.isFiltered());return Sb(t,o,n,r,Ib,i)}function V6(t,e,n,r,i,s){let o;if(jd(r,n)!=null)return e;{const a=new f0(r,e,i),l=e.eventCache.getNode();let c;if(ye(n)||_e(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=$d(r,Qs(e));else{const d=e.serverCache.getNode();Q(d instanceof le,"serverChildren would be complete if leaf node"),h=h0(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=_e(n);let d=d0(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Fe(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,le.EMPTY_NODE,Fe(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=$d(r,Qs(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||jd(r,Ae())!=null,Kl(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new o0(r.getIndex()),s=r6(r);this.processor_=x6(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(le.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(le.EMPTY_NODE,a.getNode(),null),h=new Yi(l,o.isFullyInitialized(),i.filtersNodes()),d=new Yi(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Hf(d,h),this.eventGenerator_=new c6(this.query_)}get query(){return this.query_}}function $6(t){return t.viewCache_.serverCache.getNode()}function j6(t){return Ud(t.viewCache_)}function z6(t,e){const n=Qs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(_e(e)).isEmpty())?n.getChild(e):null}function cS(t){return t.eventRegistrations_.length===0}function B6(t,e){t.eventRegistrations_.push(e)}function hS(t,e,n){const r=[];if(n){Q(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function dS(t,e,n,r){e.type===nr.MERGE&&e.source.queryId!==null&&(Q(Qs(t.viewCache_),"We should always have a full cache before handling merges"),Q(Ud(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=O6(t.processor_,i,e,n,r);return N6(t.processor_,s.viewCache),Q(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Cb(t,s.changes,s.viewCache.eventCache.getNode(),null)}function W6(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ye,(s,o)=>{r.push(wa(s,o))}),n.isFullyInitialized()&&r.push(gb(n.getNode())),Cb(t,r,n.getNode(),e)}function Cb(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return h6(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd;class Ab{constructor(){this.views=new Map}}function q6(t){Q(!Bd,"__referenceConstructor has already been defined"),Bd=t}function H6(){return Q(Bd,"Reference.ts has not been loaded"),Bd}function G6(t){return t.views.size===0}function p0(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Q(s!=null,"SyncTree gave us an op for an invalid query."),dS(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(dS(o,e,n,r));return s}}function Rb(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=$d(n,i?r:null),l=!1;a?l=!0:r instanceof le?(a=h0(n,r),l=!1):(a=le.EMPTY_NODE,l=!1);const c=Hf(new Yi(a,l,!1),new Yi(r,i,!1));return new U6(e,c)}return o}function K6(t,e,n,r,i,s){const o=Rb(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),B6(o,n),W6(o,n)}function Q6(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Xi(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(hS(c,n,r)),cS(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(hS(l,n,r)),cS(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Xi(t)&&s.push(new(H6())(e._repo,e._path)),{removed:s,events:o}}function kb(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function zi(t,e){let n=null;for(const r of t.views.values())n=n||z6(r,e);return n}function Pb(t,e){if(e._queryParams.loadsAllData())return Kf(t);{const r=e._queryIdentifier;return t.views.get(r)}}function bb(t,e){return Pb(t,e)!=null}function Xi(t){return Kf(t)!=null}function Kf(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd;function Y6(t){Q(!Wd,"__referenceConstructor has already been defined"),Wd=t}function X6(){return Q(Wd,"Reference.ts has not been loaded"),Wd}let J6=1;class fS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=R6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xb(t,e,n,r,i){return m6(t.pendingWriteTree_,e,n,r,i),i?$a(t,new Ks(l0(),e,n)):[]}function Z6(t,e,n,r){g6(t.pendingWriteTree_,e,n,r);const i=Ve.fromObject(n);return $a(t,new Ea(l0(),e,i))}function Ri(t,e,n=!1){const r=_6(t.pendingWriteTree_,e);if(y6(t.pendingWriteTree_,e)){let s=new Ve(null);return r.snap!=null?s=s.set(Ae(),!0):St(r.children,o=>{s=s.set(new Ne(o),!0)}),$a(t,new Vd(r.path,s,n))}else return[]}function uc(t,e,n){return $a(t,new Ks(u0(),e,n))}function e9(t,e,n){const r=Ve.fromObject(n);return $a(t,new Ea(u0(),e,r))}function t9(t,e){return $a(t,new xu(u0(),e))}function n9(t,e,n){const r=g0(t,n);if(r){const i=_0(r),s=i.path,o=i.queryId,a=Zt(s,e),l=new xu(c0(o),a);return y0(t,s,l)}else return[]}function qd(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||bb(o,e))){const l=Q6(o,e,n,r);G6(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(p,g)=>Xi(g));if(h&&!d){const p=t.syncPointTree_.subtree(s);if(!p.isEmpty()){const g=s9(p);for(let y=0;y<g.length;++y){const E=g[y],R=E.query,v=Mb(t,E);t.listenProvider_.startListening(Yl(R),Nu(t,R),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(Yl(e),null):c.forEach(p=>{const g=t.queryToTagMap.get(Qf(p));t.listenProvider_.stopListening(Yl(p),g)}))}o9(t,c)}return a}function Nb(t,e,n,r){const i=g0(t,r);if(i!=null){const s=_0(i),o=s.path,a=s.queryId,l=Zt(o,e),c=new Ks(c0(a),l,n);return y0(t,o,c)}else return[]}function r9(t,e,n,r){const i=g0(t,r);if(i){const s=_0(i),o=s.path,a=s.queryId,l=Zt(o,e),c=Ve.fromObject(n),h=new Ea(c0(a),l,c);return y0(t,o,h)}else return[]}function V_(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(p,g)=>{const y=Zt(p,i);s=s||zi(g,y),o=o||Xi(g)});let a=t.syncPointTree_.get(i);a?(o=o||Xi(a),s=s||zi(a,Ae())):(a=new Ab,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=le.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,y)=>{const E=zi(y,Ae());E&&(s=s.updateImmediateChild(g,E))}));const c=bb(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=Qf(e);Q(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const g=a9();t.queryToTagMap.set(p,g),t.tagToQueryMap.set(g,p)}const h=Gf(t.pendingWriteTree_,i);let d=K6(a,e,n,h,s,l);if(!c&&!o&&!r){const p=Pb(a,e);d=d.concat(l9(t,e,p))}return d}function m0(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Zt(o,e),c=zi(a,l);if(c)return c});return wb(i,e,s,n,!0)}function i9(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=Zt(c,n);r=r||zi(h,d)});let i=t.syncPointTree_.get(n);i?r=r||zi(i,Ae()):(i=new Ab,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Yi(r,!0,!1):null,a=Gf(t.pendingWriteTree_,e._path),l=Rb(i,e,a,s?o.getNode():le.EMPTY_NODE,s);return j6(l)}function $a(t,e){return Ob(e,t.syncPointTree_,null,Gf(t.pendingWriteTree_,Ae()))}function Ob(t,e,n,r){if(ye(t.path))return Db(t,e,n,r);{const i=e.get(Ae());n==null&&i!=null&&(n=zi(i,Ae()));let s=[];const o=_e(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=Eb(r,o);s=s.concat(Ob(a,l,c,h))}return i&&(s=s.concat(p0(i,t,r,n))),s}}function Db(t,e,n,r){const i=e.get(Ae());n==null&&i!=null&&(n=zi(i,Ae()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=Eb(r,o),h=t.operationForChild(o);h&&(s=s.concat(Db(h,a,l,c)))}),i&&(s=s.concat(p0(i,t,r,n))),s}function Mb(t,e){const n=e.query,r=Nu(t,n);return{hashFn:()=>($6(e)||le.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?n9(t,n._path,r):t9(t,n._path);{const s=t5(i,n);return qd(t,n,null,s)}}}}function Nu(t,e){const n=Qf(e);return t.queryToTagMap.get(n)}function Qf(t){return t._path.toString()+"$"+t._queryIdentifier}function g0(t,e){return t.tagToQueryMap.get(e)}function _0(t){const e=t.indexOf("$");return Q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ne(t.substr(0,e))}}function y0(t,e,n){const r=t.syncPointTree_.get(e);Q(r,"Missing sync point for query tag that we're tracking");const i=Gf(t.pendingWriteTree_,e);return p0(r,n,i,null)}function s9(t){return t.fold((e,n,r)=>{if(n&&Xi(n))return[Kf(n)];{let i=[];return n&&(i=kb(n)),St(r,(s,o)=>{i=i.concat(o)}),i}})}function Yl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(X6())(t._repo,t._path):t}function o9(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=Qf(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function a9(){return J6++}function l9(t,e,n){const r=e._path,i=Nu(t,e),s=Mb(t,n),o=t.listenProvider_.startListening(Yl(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)Q(!Xi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,d)=>{if(!ye(c)&&h&&Xi(h))return[Kf(h).query];{let p=[];return h&&(p=p.concat(kb(h).map(g=>g.query))),St(d,(g,y)=>{p=p.concat(y)}),p}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(Yl(h),Nu(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new v0(n)}node(){return this.node_}}class w0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qe(this.path_,e);return new w0(this.syncTree_,n)}node(){return m0(this.syncTree_,this.path_)}}const u9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},pS=function(t,e,n){if(!t||typeof t!="object")return t;if(Q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return c9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return h9(t[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},c9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Q(!1,"Unexpected server value: "+t)}},h9=function(t,e,n){t.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);const i=e.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Lb=function(t,e,n,r){return E0(e,new w0(n,t),r)},Fb=function(t,e,n){return E0(t,new v0(e),n)};function E0(t,e,n){const r=t.getPriority().val(),i=pS(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=pS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new yt(a,rt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new yt(i))),o.forEachChild(Ye,(a,l)=>{const c=E0(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function I0(t,e){let n=e instanceof Ne?e:new Ne(e),r=t,i=_e(n);for(;i!==null;){const s=ua(r.node.children,i)||{children:{},childCount:0};r=new T0(i,r,s),n=Fe(n),i=_e(n)}return r}function ja(t){return t.node.value}function Vb(t,e){t.node.value=e,U_(t)}function Ub(t){return t.node.childCount>0}function d9(t){return ja(t)===void 0&&!Ub(t)}function Yf(t,e){St(t.node.children,(n,r)=>{e(new T0(n,t,r))})}function $b(t,e,n,r){n&&!r&&e(t),Yf(t,i=>{$b(i,e,!0,r)}),n&&r&&e(t)}function f9(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function cc(t){return new Ne(t.parent===null?t.name:cc(t.parent)+"/"+t.name)}function U_(t){t.parent!==null&&p9(t.parent,t.name,t)}function p9(t,e,n){const r=d9(n),i=Pr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,U_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,U_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=/[\[\].#$\/\u0000-\u001F\u007F]/,g9=/[\[\].#$\u0000-\u001F\u007F]/,Ym=10*1024*1024,S0=function(t){return typeof t=="string"&&t.length!==0&&!m9.test(t)},jb=function(t){return typeof t=="string"&&t.length!==0&&!g9.test(t)},_9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jb(t)},zb=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Wf(t)||t&&typeof t=="object"&&Pr(t,".sv")},$_=function(t,e,n,r){Xf(ca(t,"value"),e,n)},Xf=function(t,e,n){const r=n instanceof Ne?new M5(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ys(r));if(typeof e=="function")throw new Error(t+"contains a function "+ys(r)+" with contents = "+e.toString());if(Wf(e))throw new Error(t+"contains "+e.toString()+" "+ys(r));if(typeof e=="string"&&e.length>Ym/3&&Ef(e)>Ym)throw new Error(t+"contains a string greater than "+Ym+" utf8 bytes "+ys(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(St(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!S0(o)))throw new Error(t+" contains an invalid key ("+o+") "+ys(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');L5(r,o),Xf(t,a,r),F5(r)}),i&&s)throw new Error(t+' contains ".value" child '+ys(r)+" in addition to actual children.")}},y9=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Ru(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!S0(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}}e.sort(D5);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Ln(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Bb=function(t,e,n,r){const i=ca(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];St(e,(o,a)=>{const l=new Ne(o);if(Xf(i,a,Qe(n,l)),n0(l)===".priority"&&!zb(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),y9(i,s)},v9=function(t,e,n){if(Wf(e))throw new Error(ca(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zb(e))throw new Error(ca(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Wb=function(t,e,n,r){if(!jb(n))throw new Error(ca(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},w9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Wb(t,e,n)},Uo=function(t,e){if(_e(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},E9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!S0(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_9(n))throw new Error(ca(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jf(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!r0(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function qb(t,e,n){Jf(t,n),Hb(t,r=>r0(r,e))}function Wn(t,e,n){Jf(t,n),Hb(t,r=>Ln(r,e)||Ln(e,r))}function Hb(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(I9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function I9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Hl&&Tt("event: "+n.toString()),Va(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="repo_interrupt",C9=25;class A9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fd(),this.transactionQueueTree_=new T0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function R9(t,e,n){if(t.stats_=e0(t.repoInfo_),t.forceRestClient_||s5())t.server_=new Ld(t.repoInfo_,(r,i,s,o)=>{mS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>gS(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Gr(t.repoInfo_,e,(r,i,s,o)=>{mS(t,r,i,s,o)},r=>{gS(t,r)},r=>{P9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=c5(t.repoInfo_,()=>new u6(t.stats_,t.server_)),t.infoData_=new i6,t.infoSyncTree_=new fS({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=uc(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),C0(t,"connected",!1),t.serverSyncTree_=new fS({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Wn(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function k9(t){const n=t.infoData_.getNode(new Ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Zf(t){return u9({timestamp:k9(t)})}function mS(t,e,n,r,i){t.dataUpdateCount++;const s=new Ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=gd(n,c=>rt(c));o=r9(t.serverSyncTree_,s,l,i)}else{const l=rt(n);o=Nb(t.serverSyncTree_,s,l,i)}else if(r){const l=gd(n,c=>rt(c));o=e9(t.serverSyncTree_,s,l)}else{const l=rt(n);o=uc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ia(t,s)),Wn(t.eventQueue_,a,o)}function gS(t,e){C0(t,"connected",e),e===!1&&O9(t)}function P9(t,e){St(e,(n,r)=>{C0(t,n,r)})}function C0(t,e,n){const r=new Ne("/.info/"+e),i=rt(n);t.infoData_.updateSnapshot(r,i);const s=uc(t.infoSyncTree_,r,i);Wn(t.eventQueue_,r,s)}function A0(t){return t.nextWriteId_++}function b9(t,e,n){const r=i9(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=rt(i).withIndex(e._queryParams.getIndex());V_(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=uc(t.serverSyncTree_,e._path,s);else{const a=Nu(t.serverSyncTree_,e);o=Nb(t.serverSyncTree_,e._path,s,a)}return Wn(t.eventQueue_,e._path,o),qd(t.serverSyncTree_,e,n,null,!0),s},i=>(hc(t,"get for query "+mt(e)+" failed: "+i),Promise.reject(new Error(i))))}function x9(t,e,n,r,i){hc(t,"set",{path:e.toString(),value:n,priority:r});const s=Zf(t),o=rt(n,r),a=m0(t.serverSyncTree_,e),l=Fb(o,a,s),c=A0(t),h=xb(t.serverSyncTree_,e,l,c,!0);Jf(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,g)=>{const y=p==="ok";y||tn("set at "+e+" failed: "+p);const E=Ri(t.serverSyncTree_,c,!y);Wn(t.eventQueue_,e,E),Ji(t,i,p,g)});const d=k0(t,e);Ia(t,d),Wn(t.eventQueue_,d,[])}function N9(t,e,n,r){hc(t,"update",{path:e.toString(),value:n});let i=!0;const s=Zf(t),o={};if(St(n,(a,l)=>{i=!1,o[a]=Lb(Qe(e,a),rt(l),t.serverSyncTree_,s)}),i)Tt("update() called with empty data.  Don't do anything."),Ji(t,r,"ok",void 0);else{const a=A0(t),l=Z6(t.serverSyncTree_,e,o,a);Jf(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,h)=>{const d=c==="ok";d||tn("update at "+e+" failed: "+c);const p=Ri(t.serverSyncTree_,a,!d),g=p.length>0?Ia(t,e):e;Wn(t.eventQueue_,g,p),Ji(t,r,c,h)}),St(n,c=>{const h=k0(t,Qe(e,c));Ia(t,h)}),Wn(t.eventQueue_,e,[])}}function O9(t){hc(t,"onDisconnectEvents");const e=Zf(t),n=Fd();N_(t.onDisconnect_,Ae(),(i,s)=>{const o=Lb(i,s,t.serverSyncTree_,e);Ua(n,i,o)});let r=[];N_(n,Ae(),(i,s)=>{r=r.concat(uc(t.serverSyncTree_,i,s));const o=k0(t,i);Ia(t,o)}),t.onDisconnect_=Fd(),Wn(t.eventQueue_,Ae(),r)}function D9(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&x_(t.onDisconnect_,e),Ji(t,n,r,i)})}function _S(t,e,n,r){const i=rt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Ua(t.onDisconnect_,e,i),Ji(t,r,s,o)})}function M9(t,e,n,r,i){const s=rt(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Ua(t.onDisconnect_,e,s),Ji(t,i,o,a)})}function L9(t,e,n,r){if(md(n)){Tt("onDisconnect().update() called with empty data.  Don't do anything."),Ji(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&St(n,(o,a)=>{const l=rt(a);Ua(t.onDisconnect_,Qe(e,o),l)}),Ji(t,r,i,s)})}function F9(t,e,n){let r;_e(e._path)===".info"?r=V_(t.infoSyncTree_,e,n):r=V_(t.serverSyncTree_,e,n),qb(t.eventQueue_,e._path,r)}function yS(t,e,n){let r;_e(e._path)===".info"?r=qd(t.infoSyncTree_,e,n):r=qd(t.serverSyncTree_,e,n),qb(t.eventQueue_,e._path,r)}function V9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(S9)}function hc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Tt(n,...e)}function Ji(t,e,n,r){e&&Va(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Gb(t,e,n){return m0(t.serverSyncTree_,e,n)||le.EMPTY_NODE}function R0(t,e=t.transactionQueueTree_){if(e||ep(t,e),ja(e)){const n=Qb(t,e);Q(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&U9(t,cc(e),n)}else Ub(e)&&Yf(e,n=>{R0(t,n)})}function U9(t,e,n){const r=n.map(c=>c.currentWriteId),i=Gb(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];Q(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Zt(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{hc(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(Ri(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();ep(t,I0(t.transactionQueueTree_,e)),R0(t,t.transactionQueueTree_),Wn(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)Va(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{tn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Ia(t,e)}},o)}function Ia(t,e){const n=Kb(t,e),r=cc(n),i=Qb(t,n);return $9(t,i,r),r}function $9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Zt(n,l.path);let h=!1,d;if(Q(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(Ri(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=C9)h=!0,d="maxretry",i=i.concat(Ri(t.serverSyncTree_,l.currentWriteId,!0));else{const p=Gb(t,l.path,o);l.currentInputSnapshot=p;const g=e[a].update(p.val());if(g!==void 0){Xf("transaction failed: Data returned ",g,l.path);let y=rt(g);typeof g=="object"&&g!=null&&Pr(g,".priority")||(y=y.updatePriority(p.getPriority()));const R=l.currentWriteId,v=Zf(t),_=Fb(y,p,v);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=_,l.currentWriteId=A0(t),o.splice(o.indexOf(R),1),i=i.concat(xb(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Ri(t.serverSyncTree_,R,!0))}else h=!0,d="nodata",i=i.concat(Ri(t.serverSyncTree_,l.currentWriteId,!0))}Wn(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ep(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Va(r[a]);R0(t,t.transactionQueueTree_)}function Kb(t,e){let n,r=t.transactionQueueTree_;for(n=_e(e);n!==null&&ja(r)===void 0;)r=I0(r,n),e=Fe(e),n=_e(e);return r}function Qb(t,e){const n=[];return Yb(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Yb(t,e,n){const r=ja(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Yf(e,i=>{Yb(t,i,n)})}function ep(t,e){const n=ja(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Vb(e,n.length>0?n:void 0)}Yf(e,r=>{ep(t,r)})}function k0(t,e){const n=cc(Kb(t,e)),r=I0(t.transactionQueueTree_,e);return f9(r,i=>{Xm(t,i)}),Xm(t,r),$b(r,i=>{Xm(t,i)}),n}function Xm(t,e){const n=ja(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Q(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Q(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ri(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Vb(e,void 0):n.length=s+1,Wn(t.eventQueue_,cc(e),i);for(let o=0;o<r.length;o++)Va(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}function z9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tn("Invalid query segment '".concat(n,"' in query '").concat(t,"'"))}return e}const vS=function(t,e){const n=B9(t),r=n.namespace;n.domain==="firebase.com"&&ti(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ti("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Y3();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new eb(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ne(n.pathString)}},B9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=j9(t.substring(h,d)));const p=z9(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class Jb{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new yr;return D9(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Uo("OnDisconnect.remove",this._path);const e=new yr;return _S(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Uo("OnDisconnect.set",this._path),$_("OnDisconnect.set",e,this._path);const n=new yr;return _S(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Uo("OnDisconnect.setWithPriority",this._path),$_("OnDisconnect.setWithPriority",e,this._path),v9("OnDisconnect.setWithPriority",n);const r=new yr;return M9(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Uo("OnDisconnect.update",this._path),Bb("OnDisconnect.update",e,this._path);const n=new yr;return L9(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:n0(this._path)}get ref(){return new br(this._repo,this._path)}get _queryIdentifier(){const e=rS(this._queryParams),n=Jv(e);return n==="{}"?"default":n}get _queryObject(){return rS(this._queryParams)}isEqual(e){if(e=Me(e),!(e instanceof P0))return!1;const n=this._repo===e._repo,r=r0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+O5(this._path)}}class br extends P0{constructor(e,n){super(e,n,new a0,!1)}get parent(){const e=ub(this._path);return e===null?null:new br(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Sa{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ne(e),r=Hd(this.ref,e);return new Sa(this._node.getChild(n),r,Ye)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Sa(i,Hd(this.ref,r),Ye)))}hasChild(e){const n=new Ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mi(t,e){return t=Me(t),t._checkNotDeleted("ref"),e!==void 0?Hd(t._root,e):t._root}function Hd(t,e){return t=Me(t),_e(t._path)===null?w9("child","path",e):Wb("child","path",e),new br(t._repo,Qe(t._path,e))}function wS(t){return t=Me(t),new W9(t._repo,t._path)}function q9(t){return Uo("remove",t._path),j_(t,null)}function j_(t,e){t=Me(t),Uo("set",t._path),$_("set",e,t._path);const n=new yr;return x9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function H9(t,e){Bb("update",e,t._path);const n=new yr;return N9(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function ex(t){t=Me(t);const e=new Zb(()=>{}),n=new tp(e);return b9(t._repo,t,n).then(r=>new Sa(r,new br(t._repo,t._path),t._queryParams.getIndex()))}class tp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Xb("value",this,new Sa(e.snapshotNode,new br(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Jb(this,e,n):null}matches(e){return e instanceof tp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class b0{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Jb(this,e,n):null}createEvent(e,n){Q(e.childName!=null,"Child events should have a childName.");const r=Hd(new br(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Xb(e.type,this,new Sa(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof b0?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function tx(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(h,d)=>{yS(t._repo,t,a),l(h,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new Zb(n,s||void 0),a=e==="value"?new tp(o):new b0(e,o);return F9(t._repo,t,a),()=>yS(t._repo,t,a)}function G9(t,e,n,r){return tx(t,"value",e,n,r)}function K9(t,e,n,r){return tx(t,"child_removed",e,n,r)}q6(br);Y6(br);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="FIREBASE_DATABASE_EMULATOR_HOST",z_={};let Y9=!1;function X9(t,e,n,r){t.repoInfo_=new eb("".concat(e,":").concat(n),!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function J9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ti("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tt("Using default host for project ",t.options.projectId),s="".concat(t.options.projectId,"-default-rtdb.firebaseio.com"));let o=vS(s,i),a=o.repoInfo,l;typeof process<"u"&&UI&&(l=UI[Q9]),l?(s="http://".concat(l,"?ns=").concat(a.namespace),o=vS(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new a5(t.name,t.options,e);E9("Invalid Firebase Database URL",o),ye(o.path)||ti("Database URL must point to the root of a Firebase Database (not including a child path).");const h=ej(a,t,c,new o5(t.name,n));return new tj(h,t)}function Z9(t,e){const n=z_[e];(!n||n[t.key]!==t)&&ti("Database ".concat(e,"(").concat(t.repoInfo_,") has already been deleted.")),V9(t),delete n[t.key]}function ej(t,e,n,r){let i=z_[e.name];i||(i={},z_[e.name]=i);let s=i[t.toURLString()];return s&&ti("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new A9(t,Y9,n,r),i[t.toURLString()]=s,s}class tj{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(R9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new br(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Z9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ti("Cannot call "+e+" on a deleted database.")}}function nj(t=Tf(),e){const n=ss(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=YA("database");r&&rj(n,...r)}return n}function rj(t,e,n,r={}){t=Me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ti("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ti('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Fh(Fh.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ZA(r.mockUserToken,t.app.options.projectId);s=new Fh(o)}X9(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){W3(to),lr(new Bn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return J9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),dn($I,jI,t),dn($I,jI,"esm2017")}Gr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ij();const sj={apiKey:"AIzaSyAAx9xed3OJ12gkLhqDgkAw2f0TKzutIW4",authDomain:"chess-8426e.firebaseapp.com",projectId:"chess-8426e",storageBucket:"chess-8426e.appspot.com",messagingSenderId:"607251598004",appId:"1:607251598004:web:dd52ca4b826bbbcbbbe5e1",measurementId:"G-CR431E5BGW",databaseURL:{VITE_BASE_PATH:"/Chess/",VITE_ASSET_PATH:"/Chess/",VITE_FIREBASE_API_KEY:"AIzaSyAAx9xed3OJ12gkLhqDgkAw2f0TKzutIW4",VITE_FIREBASE_AUTH_DOMAIN:"chess-8426e.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"chess-8426e",VITE_FIREBASE_STORAGE_BUCKET:"chess-8426e.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"607251598004",VITE_FIREBASE_APP_ID:"1:607251598004:web:dd52ca4b826bbbcbbbe5e1",VITE_FIREBASE_MEASUREMENT_ID:"G-CR431E5BGW",VITE_FIREBASE_AUTH_DONAIN:"chess-8426e.firebaseapp.com",BASE_URL:"/Chess/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}.VITE_REAL_TIME_DB_URL},np=uR(sj);M4(np);const nx=cV(np),Zn=S3(np),gi=nj(np);/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}var ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ki||(ki={}));const ES="popstate";function oj(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ao(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),B_("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:rx(s))}function r(i,s){x0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return lj(e,n,r,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function aj(){return Math.random().toString(36).substr(2,8)}function TS(t,e){return{usr:t.state,key:t.key,idx:e}}function B_(t,e,n,r){return n===void 0&&(n=null),Ou({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||r||aj()})}function rx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lj(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ki.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ou({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=ki.Pop;let R=h(),v=R==null?null:R-c;c=R,l&&l({action:a,location:E.location,delta:v})}function p(R,v){a=ki.Push;let _=B_(E.location,R,v);n&&n(_,R),c=h()+1;let C=TS(_,c),b=E.createHref(_);try{o.pushState(C,"",b)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(b)}s&&l&&l({action:a,location:E.location,delta:1})}function g(R,v){a=ki.Replace;let _=B_(E.location,R,v);n&&n(_,R),c=h();let C=TS(_,c),b=E.createHref(_);o.replaceState(C,"",b),s&&l&&l({action:a,location:E.location,delta:0})}function y(R){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof R=="string"?R:rx(R);return _=_.replace(/ $/,"%20"),dt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let E={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ES,d),l=R,()=>{i.removeEventListener(ES,d),l=null}},createHref(R){return e(i,R)},createURL:y,encodeLocation(R){let v=y(R);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(R){return o.go(R)}};return E}var IS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(IS||(IS={}));function uj(t,e,n){return n===void 0&&(n="/"),cj(t,e,n,!1)}function cj(t,e,n,r){let i=typeof e=="string"?ao(e):e,s=ox(i.pathname||"/",n);if(s==null)return null;let o=ix(t);hj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Tj(s);a=wj(o[l],c,r)}return a}function ix(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(dt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ds([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(dt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ix(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yj(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of sx(s.path))i(s,o,l)}),e}function sx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function hj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dj=/^:[\w-]+$/,fj=3,pj=2,mj=1,gj=10,_j=-2,SS=t=>t==="*";function yj(t,e){let n=t.split("/"),r=n.length;return n.some(SS)&&(r+=_j),e&&(r+=pj),n.filter(i=>!SS(i)).reduce((i,s)=>i+(dj.test(s)?fj:s===""?mj:gj),r)}function vj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wj(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=CS({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=CS({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ds([s,d.pathname]),pathnameBase:Aj(Ds([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=Ds([s,d.pathnameBase]))}return o}function CS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ej(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let E=a[d]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Ej(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),x0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Tj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ox(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ij(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ao(t):t;return{pathname:n?n.startsWith("/")?n:Sj(n,e):e,search:Rj(r),hash:kj(i)}}function Sj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Cj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ax(t,e){let n=Cj(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lx(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ao(t):(i=Ou({},t),dt(!i.pathname||!i.pathname.includes("?"),Jm("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),Jm("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),Jm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=Ij(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ds=t=>t.join("/").replace(/\/\/+/g,"/"),Aj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Rj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ux=["post","put","patch","delete"];new Set(ux);const bj=["get",...ux];new Set(bj);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}const N0=N.createContext(null),xj=N.createContext(null),dc=N.createContext(null),rp=N.createContext(null),si=N.createContext({outlet:null,matches:[],isDataRoute:!1}),cx=N.createContext(null);function fc(){return N.useContext(rp)!=null}function O0(){return fc()||dt(!1),N.useContext(rp).location}function hx(t){N.useContext(dc).static||N.useLayoutEffect(t)}function D0(){let{isDataRoute:t}=N.useContext(si);return t?Gj():Nj()}function Nj(){fc()||dt(!1);let t=N.useContext(N0),{basename:e,future:n,navigator:r}=N.useContext(dc),{matches:i}=N.useContext(si),{pathname:s}=O0(),o=JSON.stringify(ax(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return hx(()=>{a.current=!0}),N.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=lx(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ds([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const Oj=N.createContext(null);function Dj(t){let e=N.useContext(si).outlet;return e&&N.createElement(Oj.Provider,{value:t},e)}function Mj(){let{matches:t}=N.useContext(si),e=t[t.length-1];return e?e.params:{}}function Lj(t,e){return Fj(t,e)}function Fj(t,e,n,r){fc()||dt(!1);let{navigator:i}=N.useContext(dc),{matches:s}=N.useContext(si),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=O0(),h;if(e){var d;let R=typeof e=="string"?ao(e):e;l==="/"||(d=R.pathname)!=null&&d.startsWith(l)||dt(!1),h=R}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let R=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let y=uj(t,{pathname:g}),E=zj(y&&y.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:Ds([l,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:Ds([l,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&E?N.createElement(rp.Provider,{value:{location:Du({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ki.Pop}},E):E}function Vj(){let t=Hj(),e=Pj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const Uj=N.createElement(Vj,null);class $j extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(si.Provider,{value:this.props.routeContext},N.createElement(cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jj(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(N0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(si.Provider,{value:e},r)}function zj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||dt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,E=null,R=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||Uj,l&&(c<0&&p===0?(y=!0,R=null):c===p&&(y=!0,R=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),_=()=>{let C;return g?C=E:y?C=R:d.route.Component?C=N.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=h,N.createElement(jj,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?N.createElement($j,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var dx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dx||{}),Gd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gd||{});function Bj(t){let e=N.useContext(N0);return e||dt(!1),e}function Wj(t){let e=N.useContext(xj);return e||dt(!1),e}function qj(t){let e=N.useContext(si);return e||dt(!1),e}function fx(t){let e=qj(),n=e.matches[e.matches.length-1];return n.route.id||dt(!1),n.route.id}function Hj(){var t;let e=N.useContext(cx),n=Wj(Gd.UseRouteError),r=fx(Gd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Gj(){let{router:t}=Bj(dx.UseNavigateStable),e=fx(Gd.UseNavigateStable),n=N.useRef(!1);return hx(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Du({fromRouteId:e},s)))},[t,e])}function AS(t){let{to:e,replace:n,state:r,relative:i}=t;fc()||dt(!1);let{future:s,static:o}=N.useContext(dc),{matches:a}=N.useContext(si),{pathname:l}=O0(),c=D0(),h=lx(e,ax(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return N.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function RS(t){return Dj(t.context)}function Ti(t){dt(!1)}function Kj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ki.Pop,navigator:s,static:o=!1,future:a}=t;fc()&&dt(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Du({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ao(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,E=N.useMemo(()=>{let R=ox(h,l);return R==null?null:{location:{pathname:R,search:d,hash:p,state:g,key:y},navigationType:i}},[l,h,d,p,g,y,i]);return E==null?null:N.createElement(dc.Provider,{value:c},N.createElement(rp.Provider,{children:n,value:E}))}function Qj(t){let{children:e,location:n}=t;return Lj(W_(e),n)}new Promise(()=>{});function W_(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,W_(r.props.children,s));return}r.type!==Ti&&dt(!1),!r.props.index||!r.props.children||dt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=W_(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Yj="6";try{window.__reactRouterVersion=Yj}catch(t){}const Xj="startTransition",kS=Jl[Xj];function Jj(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=oj({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=N.useCallback(d=>{c&&kS?kS(()=>l(d)):l(d)},[l,c]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.createElement(Kj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var PS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(PS||(PS={}));var bS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bS||(bS={}));function px({board:t,selectedPiece:e,setSelectedPiece:n,turn:r,userTurn:i}){return t.map((s,o)=>{const a=o+1,l=s.split("");let c=l[0]==="w";if(s&&s!=="h"&&l.length>0&&l.length<3)return Y.jsx("div",{onClick:()=>{r===c&&r===i&&n({piece:s,position:a})},className:"".concat(s," square-").concat(a," piece ").concat(e.piece===s&&e.position===a?"selected-piece":"")},a);if(s==="h")return Y.jsx("div",{className:"square-".concat(a," possible-move")},a);if(l[2]==="c"){let h="".concat(l[0]).concat(l[1]);return Y.jsx("div",{className:"".concat(h," square-").concat(a," piece capturable ").concat(e.piece===h&&e.position===a?"selected-piece":"")},a)}else return null})}var mx={exports:{}},gx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=N;function Zj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ez=typeof Object.is=="function"?Object.is:Zj,tz=pc.useSyncExternalStore,nz=pc.useRef,rz=pc.useEffect,iz=pc.useMemo,sz=pc.useDebugValue;gx.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=nz(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=iz(function(){function l(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var y=o.value;if(i(y,g))return d=y}return d=g}if(y=d,ez(h,g))return y;var E=r(g);return i!==void 0&&i(y,E)?y:(h=g,d=E)}var c=!1,h,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=tz(t,s[0],s[1]);return rz(function(){o.hasValue=!0,o.value=a},[a]),sz(a),a};mx.exports=gx;var oz=mx.exports,En="default"in Jl?Ts:Jl,xS=Symbol.for("react-redux-context"),NS=typeof globalThis<"u"?globalThis:{};function az(){var n;if(!En.createContext)return{};const t=(n=NS[xS])!=null?n:NS[xS]=new Map;let e=t.get(En.createContext);return e||(e=En.createContext(null),t.set(En.createContext,e)),e}var Zi=az(),lz=()=>{throw new Error("uSES not initialized!")};function M0(t=Zi){return function(){return En.useContext(t)}}var _x=M0(),yx=lz,uz=t=>{yx=t},cz=(t,e)=>t===e;function hz(t=Zi){const e=t===Zi?_x:M0(t),n=(r,i={})=>{const{equalityFn:s=cz,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:c,stabilityCheck:h,identityFunctionCheck:d}=e();En.useRef(!0);const p=En.useCallback({[r.name](y){return r(y)}}[r.name],[r,h,o.stabilityCheck]),g=yx(l.addNestedSub,a.getState,c||a.getState,p,s);return En.useDebugValue(g),g};return Object.assign(n,{withTypes:()=>n}),n}var ip=hz();function dz(t){t()}function fz(){let t=null,e=null;return{clear(){t=null,e=null},notify(){dz(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var OS={notify(){},get:()=>[]};function pz(t,e){let n,r=OS,i=0,s=!1;function o(E){h();const R=r.subscribe(E);let v=!1;return()=>{v||(v=!0,R(),d())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return s}function h(){i++,n||(n=t.subscribe(l),r=fz())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=OS)}function p(){s||(s=!0,h())}function g(){s&&(s=!1,d())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return y}var mz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gz=typeof navigator<"u"&&navigator.product==="ReactNative",_z=mz||gz?En.useLayoutEffect:En.useEffect;function yz({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=En.useMemo(()=>{const c=pz(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=En.useMemo(()=>t.getState(),[t]);_z(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Zi;return En.createElement(l.Provider,{value:o},n)}var vz=yz;function vx(t=Zi){const e=t===Zi?_x:M0(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var wz=vx();function Ez(t=Zi){const e=t===Zi?wz:vx(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var L0=Ez();uz(oz.useSyncExternalStoreWithSelector);const Tz=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],as="/Chess/",Iz=new Audio(as+"assets/audio/capture.mp3");new Audio(as+"assets/audio/castle.mp3");const Sz=new Audio(as+"assets/audio/check.mp3"),Cz=new Audio(as+"assets/audio/checkMate.mp3");new Audio(as+"assets/audio/gameOver.mp3");const Az=new Audio(as+"assets/audio/gameStart.mp3"),Rz=new Audio(as+"assets/audio/move.mp3"),kz=new Audio(as+"assets/audio/stalemate.mp3");function wx({customMoveHistory:t,muted:e,className:n}){const r={piece:"",position:""},[i,s]=N.useState(r),[o,a]=N.useState(Tz),[l,c]=N.useState(!0),[h,d]=N.useState([]),[p,g]=N.useState(!1),[y,E]=N.useState([]),[R,v]=N.useState(""),[_,C]=N.useState(null);L0(),N.useEffect(()=>{if(Array.isArray(t)){const I=Array.from(t);d(I)}},[t]);const b=I=>{const K=parseInt(I.split("-")[1]),z=K-1;if(i.piece.charAt(1)==="p"&&!_){if(i.piece.charAt(0)==="w"&&z>=0&&z<8){C({piece:i.piece,from:i.position-1,to:z}),v("w".concat(K.toString().charAt(K.toString().length-1)));return}else if(i.piece.charAt(0)==="b"&&z>=56&&z<64){C({piece:i.piece,from:i.position-1,to:z}),v("b".concat((K-6).toString().charAt(K.toString().length-1)));return}}d(G=>[...G,{piece:i.piece,from:i.position-1,to:z,captured:o[z]!==""&&o[z]!=="h"?o[z].split("")[0]+o[z].split("")[1]:""}]),s(r)},D=I=>{console.log("promotionSquareInfo: ",_),console.log("promoteTo received: ",I),_&&I&&(d(K=>[...K,{piece:_.piece,from:_.from,to:_.to,captured:o[_.to]!==""&&o[_.to]!=="h"?o[_.to].split("")[0]+o[_.to].split("")[1]:"",promotedTo:I}]),C(null),v(""))},L=I=>{e||I.play()};N.useEffect(()=>{L(Az)},[]);const S=(I,K,z,G)=>{const de=G+1;let F=[],J=[],ee=[],$=[];if(K==="w"){if(z==="p"){G>=48&&G<=55?(ee=[G-8,G-16],$=[G-7,G-9]):(ee=[G-8],$=[G-7,G-9]),G%8===0&&($=$.filter(U=>U!==G-9)),G%8===1&&($=$.filter(U=>U!==G-7));let V=!1;ee.forEach(U=>{U>=0&&I[U]===""&&!V?J.push(U):V=!0}),$.forEach(U=>{U>=0&&I[U]!==""&&I[U].charAt(0)!==K&&F.push(U)})}}else if(z==="p"){const V=de-1;V>=8&&V<=15?(ee=[V+8,V+16],$=[V+7,V+9]):(ee=[V+8],$=[V+7,V+9]),V%8===0&&($=$.filter(B=>B!==V+7)),V%8===1&&($=$.filter(B=>B!==V+9));let U=!1;ee.forEach(B=>{B>=0&&I[B]===""&&!U?J.push(B):U=!0}),$.forEach(B=>{B>=0&&B<=63&&I[B]!==""&&I[B].charAt(0)!==K&&F.push(B)})}if(z==="r"||z==="q"){let V=G,U=!1;for(let re=V+8;re<64&&!U;re+=8)I[re]!=""?(U=!0,I[re].charAt(0)!==K&&F.push(re)):F.push(re);let B=!1;for(let re=V-8;re>=0&&!B;re-=8)I[re]!=""?(B=!0,I[re].charAt(0)!==K&&F.push(re)):F.push(re);let ge=!1;for(let re=V+1;re%8!==0&&!ge;re+=1)I[re]!=""?(ge=!0,I[re].charAt(0)!==K&&F.push(re)):F.push(re);let H=!1;for(let re=V-1;re%8!==7&&re>=0&&!H;re-=1)I[re]!=""?(H=!0,I[re].charAt(0)!==K&&F.push(re)):F.push(re)}if(z==="b"||z==="q"){let V=!1;for(let H=G+9;H<64&&H%8!==0&&!V;H+=9)I[H]!==""?(V=!0,I[H].charAt(0)!==K&&F.push(H)):F.push(H);let U=!1;for(let H=G-9;H>=0&&H%8!==7&&!U;H-=9)I[H]!==""?(U=!0,I[H].charAt(0)!==K&&F.push(H)):F.push(H);let B=!1;for(let H=G+7;H<64&&H%8!==7&&!B;H+=7)I[H]!==""?(B=!0,I[H].charAt(0)!==K&&F.push(H)):F.push(H);let ge=!1;for(let H=G-7;H>=0&&H%8!==0&&!ge;H-=7)I[H]!==""?(ge=!0,I[H].charAt(0)!==K&&F.push(H)):F.push(H)}if(z==="k"){let V=[G+7,G-7,G+8,G-8,G+9,G-9,G+1,G-1];G%8===7?V=V.filter(U=>U!==G+1&&U!==G-7&&U!==G+9):G%8===0&&(V=V.filter(U=>U!==G-1&&U!==G+7&&U!==G-9)),V.forEach(U=>{U>=0&&U<64&&(I[U]===""||I[U].charAt(0)!==K)&&F.push(U)})}if(z==="n"){const V=G-15,U=G-17,B=G+17,ge=G+15,H=G-10,re=G+6,At=G-6,je=G+10,oe=((de%8?de%8:8)-8)*-1,ue=(de%8?de%8:8)-1,be=Math.floor(de/8),Ft=Math.floor((64-de)/8),ae=me=>{me>=0&&me<64&&(I[me]===""||I[me].charAt(0)!==K)&&F.push(me)};oe>0&&be>1&&ae(V),oe>1&&be>0&&ae(At),oe>1&&Ft>0&&ae(je),Ft>1&&oe>0&&ae(B),Ft>1&&ue>0&&ae(ge),ue>1&&Ft>0&&ae(re),ue>1&&be>0&&ae(H),be>1&&ue>0&&ae(U)}return[F.filter(V=>V>=0&&V<64),J.filter(V=>V>=0&&V<64)]},w=I=>{let K=o;I.forEach(z=>{if(!(z>=0&&z<64))return;let G=l?"b":"w";K[z]!==""?K[z].charAt(0)===G&&(K[z]="".concat(K[z],"c")):K[z]="h";let de=Array.from(K);a(de)})},A=I=>{const K=l?"b":"w",z=l?"w":"b",G=I.findIndex(F=>(F==null?void 0:F.charAt(0))===z&&F.charAt(1)==="k");let de=!1;return I.forEach((F,J)=>{if(!(F===""||de))if(F.charAt(0)===K){const ee=F.charAt(1);let[$]=S(I,K,ee,J);if($.includes(G)){de=!0;return}}else return}),de},k=(I,K)=>{let z=[...o];z=z.map(F=>{if(F==="")return F;const J=F.split("");return J.includes("h")?"":J.includes("c")?"".concat(J[0]).concat(J[1]):F});let G=z[I];return z[I]="",z[K]=G,A(z)},P=()=>{const I=l?"w":"b";let K=[];return o.forEach((z,G)=>{if(z!=="")if(z.charAt(0)===I){const de=z.charAt(1);let[F,J]=S(o,I,de,G);[...F,...J].forEach($=>{if(!($>=0&&$<64))return;k(G,$)||K.push({moveIndex:$,piece:z,index:G})})}else return}),K};N.useEffect(()=>{const I=A(o);g(I);const K=P();E(K),!(K.length>0)&&I===!0?L(Cz):!(K.length>0)&&I===!1?L(kz):K.length>0&&I===!0?L(Sz):K.length>0&&I===!1&&h.length>0&&(h[h.length-1].captured?L(Iz):L(Rz))},[l]),N.useEffect(()=>{if(i.piece&&i.position){const I=K=>{const z=Array.from(K.target.classList);K.target.classList.contains("possible-move")?b(z[0]):K.target.classList.contains("capturable")?b(z[1]):(s(r),a(G=>G.map(de=>{const F=de.split("");return F.includes("h")?"":F.includes("c")?"".concat(F[0]).concat(F[1]):de})))};return document.getElementById("board-grid").addEventListener("click",I),()=>{document.getElementById("board-grid").removeEventListener("click",I)}}else a(I=>I.map(K=>{const z=K.split("");return z.includes("h")?"":z.includes("c")?"".concat(z[0]).concat(z[1]):K}))},[i]),N.useEffect(()=>{if(i.piece&&i.position){const[I,K]=i.piece.split(""),z=i.position;let[G,de]=S(o,I,K,z-1),F=[...G,...de].filter(J=>y.filter(ee=>ee.piece===i.piece&&ee.index===z-1&&ee.moveIndex===J).length>0);w(F)}},[i]);const x=I=>{let K=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],z=[];return I.length>0?(I.forEach(G=>{K[G.from]="",K[G.to]=G.promotedTo||G.piece,G.captured&&z.push(G.captured)}),{boardToSend:K,capturedPieces:z}):{boardToSend:K,capturedPieces:z}};return N.useEffect(()=>{const I=K=>{K.ctrlKey&&K.key=="z"&&(K.stopPropagation(),h.length>0&&d(z=>z.slice(0,-1)))};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}},[h]),N.useEffect(()=>{if(!(h.length>0)){a(["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"]),c(!0);return}const{boardToSend:I,capturedPieces:K}=x(h),z=Array.from(I);a(z),c(G=>!G)},[h]),Y.jsxs("div",{className:"board "+(p?"check-"+(l?"w":"b")+"k":"")+(n?" "+n:""),children:[" ",Y.jsxs("div",{className:"board-grid",id:"board-grid",children:[Y.jsx(px,{board:o,selectedPiece:i,setSelectedPiece:s,turn:l,userTurn:l}),Y.jsxs("div",{className:"promote-".concat(R.charAt(0),"p square-").concat(R.slice(1)," promote"),children:[Y.jsx("div",{className:"".concat(R.charAt(0),"q"),onClick:()=>{D("".concat(R.charAt(0),"q"))}}),Y.jsx("div",{className:"".concat(R.charAt(0),"n"),onClick:()=>{D("".concat(R.charAt(0),"n"))}}),Y.jsx("div",{className:"".concat(R.charAt(0),"r"),onClick:()=>{D("".concat(R.charAt(0),"r"))}}),Y.jsx("div",{className:"".concat(R.charAt(0),"b"),onClick:()=>{D("".concat(R.charAt(0),"b"))}}),Y.jsx("div",{className:"promotion-close-btn",onClick:()=>{v(""),C(null)},children:"x"})]})]})]})}const Pz=()=>{const t=async()=>{const n=new Vr;try{const i=(await vF(nx,n)).user;e(i)}catch(r){console.error("Error signing in with Google: ",r)}},e=async n=>{const r=Fr(Zn,"users",n.uid);await U3(r,{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL},{merge:!0})};return Y.jsx("div",{children:Y.jsx("button",{onClick:t,children:"Sign in with Google"})})};function bz(){const t={scholarsMate:[{piece:"wp",from:52,to:36,captured:""},{piece:"bp",from:12,to:28,captured:""},{piece:"wb",from:61,to:34,captured:""},{piece:"bn",from:1,to:18,captured:""},{piece:"wq",from:59,to:31,captured:""},{piece:"bn",from:6,to:21,captured:""},{piece:"wq",from:31,to:13,captured:"bp"}]},[e,n]=N.useState([]),[r,i]=N.useState(0),[s,o]=N.useState(0),a=D0(),l=Object.keys(t);return N.useEffect(()=>{const c=setInterval(()=>{r<t[l[s]].length?i(h=>h+1):(n([]),i(0),o(Math.floor(Math.random()*l.length)))},1e3);return()=>clearInterval(c)},[r]),N.useEffect(()=>{r<t[l[s]].length?n(c=>[...c,t[l[s]][r]]):n(c=>[])},[r]),Y.jsxs("div",{className:"row homepageOuterDiv",style:{width:"100%",height:"100%"},children:[Y.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 d-flex align-items-center justify-content-center boardOuterDiv",children:[Y.jsx("div",{className:"noClickOverlay noMediaQuery",style:{position:"absolute",zIndex:"1"}}),Y.jsx(wx,{className:"noMediaQuery",customMoveHistory:e,muted:!0})]}),Y.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 homepageMenu",children:[Y.jsxs("h1",{style:{color:"white"},children:["Play ",Y.jsx("span",{style:{color:"#739552"},children:"Chess"})]}),Y.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"80%"},children:[Y.jsx("button",{onClick:()=>a("/queue"),className:"hompageButton playOnline",children:"Play Online"}),Y.jsx("button",{onClick:()=>a("/offline"),className:"hompageButton playOffline",children:"2-Player Offline"})]})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $o=function(){return $o=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$o.apply(this,arguments)},Ex=function(t){return{loading:t==null,value:t}},xz=function(){return function(t,e){switch(e.type){case"error":return $o($o({},t),{error:e.error,loading:!1,value:void 0});case"reset":return Ex(e.defaultValue);case"value":return $o($o({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Nz=function(t){var e=void 0,n=N.useReducer(xz(),Ex(e)),r=n[0],i=n[1],s=N.useCallback(function(){var l=void 0;i({type:"reset",defaultValue:l})},[t]),o=N.useCallback(function(l){i({type:"error",error:l})},[]),a=N.useCallback(function(l){i({type:"value",value:l})},[]);return N.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},Oz=function(t,e,n){var r=N.useRef(t);return N.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},Dz=function(t,e){var n=!t&&!e,r=!!t&&!!e&&T3(t,e);return n||r},Mz=function(t,e){return Oz(t,Dz,e)},Lz=function(t,e){var n=Nz(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,l=n.value,c=Mz(t,s);return N.useEffect(function(){if(!c.current){a(void 0);return}var h=z3(c.current,a,o);return function(){h()}},[c.current]),[l,i,r]},Fz=function(t,e){var n=Lz(t),r=n[0],i=n[1],s=n[2],o=Vz(r,void 0,void 0);return[o,i,s,r]},Vz=function(t,e,n){return N.useMemo(function(){var r;return(r=t==null?void 0:t.data(e))!==null&&r!==void 0?r:n},[t,e,n])};function kt(t){return"Minified Redux error #".concat(t,"; visit https://redux.js.org/Errors?code=").concat(t," for the full message or use the non-minified dev environment for full errors. ")}var Uz=typeof Symbol=="function"&&Symbol.observable||"@@observable",DS=Uz,Zm=()=>Math.random().toString(36).substring(7).split("").join("."),$z={INIT:"@@redux/INIT".concat(Zm()),REPLACE:"@@redux/REPLACE".concat(Zm()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Zm())},Kd=$z;function F0(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Tx(t,e,n){if(typeof t!="function")throw new Error(kt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(kt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(kt(1));return n(Tx)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((R,v)=>{o.set(v,R)}))}function h(){if(l)throw new Error(kt(3));return i}function d(R){if(typeof R!="function")throw new Error(kt(4));if(l)throw new Error(kt(5));let v=!0;c();const _=a++;return o.set(_,R),function(){if(v){if(l)throw new Error(kt(6));v=!1,c(),o.delete(_),s=null}}}function p(R){if(!F0(R))throw new Error(kt(7));if(typeof R.type>"u")throw new Error(kt(8));if(typeof R.type!="string")throw new Error(kt(17));if(l)throw new Error(kt(9));try{l=!0,i=r(i,R)}finally{l=!1}return(s=o).forEach(_=>{_()}),R}function g(R){if(typeof R!="function")throw new Error(kt(10));r=R,p({type:Kd.REPLACE})}function y(){const R=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(kt(11));function _(){const b=v;b.next&&b.next(h())}return _(),{unsubscribe:R(_)}},[DS](){return this}}}return p({type:Kd.INIT}),{dispatch:p,subscribe:d,getState:h,replaceReducer:g,[DS]:y}}function jz(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Kd.INIT})>"u")throw new Error(kt(12));if(typeof n(void 0,{type:Kd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kt(13))})}function zz(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{jz(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let h=0;h<r.length;h++){const d=r[h],p=n[d],g=o[d],y=p(g,a);if(typeof y>"u")throw a&&a.type,new Error(kt(14));c[d]=y,l=l||y!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Qd(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Bz(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(kt(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=Qd(...a)(i.dispatch),{...i,dispatch:s}}}function Wz(t){return F0(t)&&"type"in t&&typeof t.type=="string"}var Ix=Symbol.for("immer-nothing"),MS=Symbol.for("immer-draftable"),An=Symbol.for("immer-state");function tr(t,...e){throw new Error("[Immer] minified error nr: ".concat(t,". Full error at: https://bit.ly/3cXEKWf"))}var Ca=Object.getPrototypeOf;function es(t){return!!t&&!!t[An]}function ni(t){var e;return t?Sx(t)||Array.isArray(t)||!!t[MS]||!!((e=t.constructor)!=null&&e[MS])||op(t)||ap(t):!1}var qz=Object.prototype.constructor.toString();function Sx(t){if(!t||typeof t!="object")return!1;const e=Ca(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===qz}function Yd(t,e){sp(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function sp(t){const e=t[An];return e?e.type_:Array.isArray(t)?1:op(t)?2:ap(t)?3:0}function q_(t,e){return sp(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Cx(t,e,n){const r=sp(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Hz(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function op(t){return t instanceof Map}function ap(t){return t instanceof Set}function vs(t){return t.copy_||t.base_}function H_(t,e){if(op(t))return new Map(t);if(ap(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Sx(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[An];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Ca(t),r)}else{const r=Ca(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function V0(t,e=!1){return lp(t)||es(t)||!ni(t)||(sp(t)>1&&(t.set=t.add=t.clear=t.delete=Gz),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>V0(r,!0))),t}function Gz(){tr(2)}function lp(t){return Object.isFrozen(t)}var Kz={};function Ys(t){const e=Kz[t];return e||tr(0,t),e}var Mu;function Ax(){return Mu}function Qz(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LS(t,e){e&&(Ys("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function G_(t){K_(t),t.drafts_.forEach(Yz),t.drafts_=null}function K_(t){t===Mu&&(Mu=t.parent_)}function FS(t){return Mu=Qz(Mu,t)}function Yz(t){const e=t[An];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function VS(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[An].modified_&&(G_(e),tr(4)),ni(t)&&(t=Xd(e,t),e.parent_||Jd(e,t)),e.patches_&&Ys("Patches").generateReplacementPatches_(n[An].base_,t,e.patches_,e.inversePatches_)):t=Xd(e,n,[]),G_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Ix?t:void 0}function Xd(t,e,n){if(lp(e))return e;const r=e[An];if(!r)return Yd(e,(i,s)=>US(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Jd(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Yd(s,(a,l)=>US(t,r,i,a,l,n,o)),Jd(t,i,!1),n&&t.patches_&&Ys("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function US(t,e,n,r,i,s,o){if(es(i)){const a=s&&e&&e.type_!==3&&!q_(e.assigned_,r)?s.concat(r):void 0,l=Xd(t,i,a);if(Cx(n,r,l),es(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ni(i)&&!lp(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Xd(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Jd(t,i)}}function Jd(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&V0(e,n)}function Xz(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Ax(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=U0;n&&(i=[r],s=Lu);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var U0={get(t,e){if(e===An)return t;const n=vs(t);if(!q_(n,e))return Jz(t,n,e);const r=n[e];return t.finalized_||!ni(r)?r:r===eg(t.base_,e)?(tg(t),t.copy_[e]=Y_(r,t)):r},has(t,e){return e in vs(t)},ownKeys(t){return Reflect.ownKeys(vs(t))},set(t,e,n){const r=Rx(vs(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=eg(vs(t),e),s=i==null?void 0:i[An];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Hz(n,i)&&(n!==void 0||q_(t.base_,e)))return!0;tg(t),Q_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return eg(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,tg(t),Q_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=vs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){tr(11)},getPrototypeOf(t){return Ca(t.base_)},setPrototypeOf(){tr(12)}},Lu={};Yd(U0,(t,e)=>{Lu[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Lu.deleteProperty=function(t,e){return Lu.set.call(this,t,e,void 0)};Lu.set=function(t,e,n){return U0.set.call(this,t[0],e,n,t[0])};function eg(t,e){const n=t[An];return(n?vs(n):t)[e]}function Jz(t,e,n){var i;const r=Rx(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Rx(t,e){if(!(e in t))return;let n=Ca(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ca(n)}}function Q_(t){t.modified_||(t.modified_=!0,t.parent_&&Q_(t.parent_))}function tg(t){t.copy_||(t.copy_=H_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Zz=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,h=>n.call(this,h,...c))}}typeof n!="function"&&tr(6),r!==void 0&&typeof r!="function"&&tr(7);let i;if(ni(e)){const s=FS(this),o=Y_(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?G_(s):K_(s)}return LS(s,r),VS(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Ix&&(i=void 0),this.autoFreeze_&&V0(i,!0),r){const s=[],o=[];Ys("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else tr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ni(t)||tr(8),es(t)&&(t=kx(t));const e=FS(this),n=Y_(t,void 0);return n[An].isManual_=!0,K_(e),n}finishDraft(t,e){const n=t&&t[An];(!n||!n.isManual_)&&tr(9);const{scope_:r}=n;return LS(r,e),VS(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Ys("Patches").applyPatches_;return es(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Y_(t,e){const n=op(t)?Ys("MapSet").proxyMap_(t,e):ap(t)?Ys("MapSet").proxySet_(t,e):Xz(t,e);return(e?e.scope_:Ax()).drafts_.push(n),n}function kx(t){return es(t)||tr(10,t),Px(t)}function Px(t){if(!ni(t)||lp(t))return t;const e=t[An];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=H_(t,e.scope_.immer_.useStrictShallowCopy_)}else n=H_(t,!0);return Yd(n,(r,i)=>{Cx(n,r,Px(i))}),e&&(e.finalized_=!1),n}var Rn=new Zz,bx=Rn.produce;Rn.produceWithPatches.bind(Rn);Rn.setAutoFreeze.bind(Rn);Rn.setUseStrictShallowCopy.bind(Rn);Rn.applyPatches.bind(Rn);Rn.createDraft.bind(Rn);Rn.finishDraft.bind(Rn);function eB(t,e="expected a function, instead received ".concat(typeof t)){if(typeof t!="function")throw new TypeError(e)}function tB(t,e="expected an object, instead received ".concat(typeof t)){if(typeof t!="object")throw new TypeError(e)}function nB(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?"function ".concat(r.name||"unnamed","()"):typeof r).join(", ");throw new TypeError("".concat(e,"[").concat(n,"]"))}}var $S=t=>Array.isArray(t)?t:[t];function rB(t){const e=Array.isArray(t[0])?t[0]:t;return nB(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function iB(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var sB=class{constructor(t){this.value=t}deref(){return this.value}},oB=typeof WeakRef<"u"?WeakRef:sB,aB=0,jS=1;function dh(){return{s:aB,v:void 0,o:null,p:null}}function $0(t,e={}){let n=dh();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d,p;let a=n;const{length:l}=arguments;for(let g=0,y=l;g<y;g++){const E=arguments[g];if(typeof E=="function"||typeof E=="object"&&E!==null){let R=a.o;R===null&&(a.o=R=new WeakMap);const v=R.get(E);v===void 0?(a=dh(),R.set(E,a)):a=v}else{let R=a.p;R===null&&(a.p=R=new Map);const v=R.get(E);v===void 0?(a=dh(),R.set(E,a)):a=v}}const c=a;let h;if(a.s===jS)h=a.v;else if(h=t.apply(null,arguments),s++,r){const g=(p=(d=i==null?void 0:i.deref)==null?void 0:d.call(i))!=null?p:i;g!=null&&r(g,h)&&(h=g,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new oB(h):h}return c.s=jS,c.v=h,h}return o.clearCache=()=>{n=dh(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function xx(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),eB(c,"createSelector expects an output function after the inputs, but received: [".concat(typeof c,"]"));const h={...n,...l},{memoize:d,memoizeOptions:p=[],argsMemoize:g=$0,argsMemoizeOptions:y=[],devModeChecks:E={}}=h,R=$S(p),v=$S(y),_=rB(i),C=d(function(){return s++,c.apply(null,arguments)},...R),b=g(function(){o++;const L=iB(_,arguments);return a=C.apply(null,L),a},...v);return Object.assign(b,{resultFunc:c,memoizedResultFunc:C,dependencies:_,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var lB=xx($0),uB=Object.assign((t,e=lB)=>{tB(t,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof t));const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>uB});function Nx(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var cB=Nx(),hB=Nx,dB=(...t)=>{const e=xx(...t),n=Object.assign((...r)=>{const i=e(...r),s=(o,...a)=>i(es(o)?kx(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};dB($0);var fB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qd:Qd.apply(null,arguments)};function Aa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(fn(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>"".concat(t),n.type=t,n.match=r=>Wz(r)&&r.type===t,n}var Ox=class Pl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Pl.prototype)}static get[Symbol.species](){return Pl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Pl(...e[0].concat(this)):new Pl(...e.concat(this))}};function zS(t){return ni(t)?bx(t,()=>{}):t}function BS(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(fn(10));const r=n.insert(e,t);return t.set(e,r),r}function pB(t){return typeof t=="boolean"}var mB=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e!=null?e:{};let o=new Ox;return n&&(pB(n)?o.push(cB):o.push(hB(n.extraArgument))),o},gB="RTK_autoBatch",Dx=t=>e=>{setTimeout(e,t)},_B=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Dx(10),yB=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?_B:t.type==="callback"?t.queueNotification:Dx(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const d=()=>i&&h(),p=r.subscribe(d);return a.add(h),()=>{p(),a.delete(h)}},dispatch(h){var d;try{return i=!((d=h==null?void 0:h.meta)!=null&&d[gB]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(h)}finally{i=!0}}})},vB=t=>function(n){const{autoBatch:r=!0}=n!=null?n:{};let i=new Ox(t);return r&&i.push(yB(typeof r=="object"?r:void 0)),i},wB=!0;function EB(t){const e=mB(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(F0(n))a=zz(n);else throw new Error(fn(1));let l;typeof r=="function"?l=r(e):l=e();let c=Qd;i&&(c=fB({trace:!wB,...typeof i=="object"&&i}));const h=Bz(...l),d=vB(h);let p=typeof o=="function"?o(d):d();const g=c(...p);return Tx(a,s,g)}function Mx(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(fn(28));if(a in e)throw new Error(fn(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function TB(t){return typeof t=="function"}function IB(t,e){let[n,r,i]=Mx(e),s;if(TB(t))s=()=>zS(t());else{const a=zS(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[i]),c.reduce((h,d)=>{if(d)if(es(h)){const g=d(h,l);return g===void 0?h:g}else{if(ni(h))return bx(h,p=>d(p,l));{const p=d(h,l);if(p===void 0){if(h===null)return h;throw new Error(fn(9))}return p}}return h},a)}return o.getInitialState=s,o}var SB="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",CB=(t=21)=>{let e="",n=t;for(;n--;)e+=SB[Math.random()*64|0];return e},AB=Symbol.for("rtk-slice-createasyncthunk");function RB(t,e){return"".concat(t,"/").concat(e)}function kB({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[AB];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(fn(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(xB()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,b){const D=typeof C=="string"?C:C.type;if(!D)throw new Error(fn(12));if(D in c.sliceCaseReducersByType)throw new Error(fn(13));return c.sliceCaseReducersByType[D]=b,h},addMatcher(C,b){return c.sliceMatchers.push({matcher:C,reducer:b}),h},exposeAction(C,b){return c.actionCreators[C]=b,h},exposeCaseReducer(C,b){return c.sliceCaseReducersByName[C]=b,h}};l.forEach(C=>{const b=a[C],D={reducerName:C,type:RB(s,C),createNotation:typeof i.reducers=="function"};OB(b)?MB(D,b,h,e):NB(D,b,h)});function d(){const[C={},b=[],D=void 0]=typeof i.extraReducers=="function"?Mx(i.extraReducers):[i.extraReducers],L={...C,...c.sliceCaseReducersByType};return IB(i.initialState,S=>{for(let w in L)S.addCase(w,L[w]);for(let w of c.sliceMatchers)S.addMatcher(w.matcher,w.reducer);for(let w of b)S.addMatcher(w.matcher,w.reducer);D&&S.addDefaultCase(D)})}const p=C=>C,g=new Map;let y;function E(C,b){return y||(y=d()),y(C,b)}function R(){return y||(y=d()),y.getInitialState()}function v(C,b=!1){function D(S){let w=S[C];return typeof w>"u"&&b&&(w=R()),w}function L(S=p){const w=BS(g,b,{insert:()=>new WeakMap});return BS(w,S,{insert:()=>{var k;const A={};for(const[P,x]of Object.entries((k=i.selectors)!=null?k:{}))A[P]=PB(x,S,R,b);return A}})}return{reducerPath:C,getSelectors:L,get selectors(){return L(D)},selectSlice:D}}const _={name:s,reducer:E,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:R,...v(o),injectInto(C,{reducerPath:b,...D}={}){const L=b!=null?b:o;return C.inject({reducerPath:L,reducer:E},D),{..._,...v(L,!0)}}};return _}}function PB(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var bB=kB();function xB(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function NB({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!DB(r))throw new Error(fn(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Aa(t,o):Aa(t))}function OB(t){return t._reducerDefinitionType==="asyncThunk"}function DB(t){return t._reducerDefinitionType==="reducerWithPrepare"}function MB({type:t,reducerName:e},n,r,i){if(!i)throw new Error(fn(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:h}=n,d=i(t,s,h);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:o||fh,pending:a||fh,rejected:l||fh,settled:c||fh})}function fh(){}var LB=(t,e)=>{if(typeof t!="function")throw new Error(fn(32))},j0="listenerMiddleware",FB=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Aa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fn(21));return LB(s),{predicate:i,type:e,effect:s}},VB=Object.assign(t=>{const{type:e,predicate:n,effect:r}=FB(t);return{id:CB(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fn(22))}}},{withTypes:()=>VB}),UB=Object.assign(Aa("".concat(j0,"/add")),{withTypes:()=>UB});Aa("".concat(j0,"/removeAll"));var $B=Object.assign(Aa("".concat(j0,"/remove")),{withTypes:()=>$B});function fn(t){return"Minified Redux Toolkit error #".concat(t,"; visit https://redux-toolkit.js.org/Errors?code=").concat(t," for the full message or use the non-minified dev environment for full errors. ")}const jB={loading:!1,error:null,popup:!1,uesr:null,gameData:null},Lx=bB({name:"userSlice",initialState:jB,reducers:{setError:(t,e)=>{t.error=e.payload},setPopup:(t,e)=>{t.popup=!!e.payload},setUser:(t,e)=>{t.user=e.payload},showPopup:(t,e)=>{t.error=e.payload,t.popup=!0},setReduxGameData:(t,e)=>{t.gameData=e.payload}},extraReducers:t=>{}}),{setError:zB,setPopup:BB,showPopup:Fx,setUser:WB,setReduxGameData:VH}=Lx.actions,qB=Lx.reducer;function HB(){const{user:t}=ip(_=>_.user),e=L0(),[n,r]=N.useState([]),[i,s]=N.useState(""),[o,a]=N.useState(""),l=mi(gi,"queue/".concat(t.uid)),c=mi(gi,"queue/"),h=mi(gi,"games/");A_(Zn,"games");const[d,p]=N.useState([]),[g,y]=N.useState(5),E=D0();N.useEffect(()=>{ex(c).then(_=>{_.exists&&r(Object.values(_.val()||{}))}).catch(_=>{console.error("error while getting queue data: ",_)}),G9(h,_=>{_.exists()?p([_.val()]):p([])},_=>{console.log(_)})},[]),N.useEffect(()=>{(async()=>{if(console.log("queueData: ",n),!(n.filter(k=>k.uid===t.uid).length>0))return;const b=n.filter(k=>k.uid!==t.uid);if(console.log("filtered: ",b),!(b.length>0))return;const D=n.findIndex(k=>k.uid===t.uid),L=n.findIndex(k=>k.uid===b[0].uid);let S;D<L?(t.uid+""+b[0].uid,S={player1:t.uid,player2:b[0].uid,status:"waiting",moveHistory:[],createdAt:new Date().toISOString()}):(b[0].uid+""+t.uid,S={player1:b[0].uid,player2:t.uid,status:"waiting",moveHistory:[],createdAt:new Date().toISOString()});const w=A_(Zn,"games"),A=await j3(w,S);await j_(mi(gi,"games/".concat(A.id)),S)})()},[n]),N.useEffect(()=>{if(d&&d.length>0&&!i){console.log("gamesData: ",d);const _=d.find(C=>{const b=Object.values(C)[0];return b.status==="waiting"&&(b.player1===t.uid||b.player2===t.uid)});if(console.log("filtered game data: ",_),_&&Object.values(_).length>0){const C=Object.values(_)[0],b=Object.keys(_)[0];console.log("game: ",C),v(),a(b),s(C.player1===t.uid?C.player1:C.player2),wS(mi(gi,"games/".concat(b))).remove().then(()=>{console.log("onDisconnect setup for game")}).catch(D=>{console.error("Error setting up onDisconnect:",D)}),K9(mi(gi,"games/".concat(b)),()=>{s(""),a(""),E("/"),e(Fx("Opponent disconnected"))},D=>{console.log(D)})}}},[o,d]),N.useEffect(()=>{if(o){const _=setInterval(()=>{y(b=>b>0?b-1:(clearInterval(_),b))},1e3),C=setTimeout(()=>{console.log("NAVIGATING"),E("/online/".concat(o))},5e3);return()=>{clearInterval(_),clearTimeout(C)}}},[o,i]);const R=async()=>{try{await j_(l,{uid:t.uid}),wS(l).remove().then(()=>{console.log("onDisconnect setup for user")}).catch(_=>{console.error("Error setting up onDisconnect:",_)}),console.log("User added to queue")}catch(_){console.error("Error adding user to queue:",_)}},v=async()=>{try{await q9(l).then(()=>{console.log("removed")}).catch(_=>{console.error("error removing user from queue: ",_)})}catch(_){console.error("error while removing user from queue: ",_)}};return N.useEffect(()=>{if(!o)return console.log("adding"),R(),()=>{console.log("removing"),v()}},[]),Y.jsx("div",{style:{color:"white"},children:i?"Match Found ".concat(g):"waiting in queue. . ."})}const GB=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],ls="/Chess/",KB=new Audio(ls+"assets/audio/capture.mp3");new Audio(ls+"assets/audio/castle.mp3");const QB=new Audio(ls+"assets/audio/check.mp3"),YB=new Audio(ls+"assets/audio/checkMate.mp3");new Audio(ls+"assets/audio/gameOver.mp3");const XB=new Audio(ls+"assets/audio/gameStart.mp3"),JB=new Audio(ls+"assets/audio/move.mp3"),ZB=new Audio(ls+"assets/audio/stalemate.mp3");function e8({customMoveHistory:t,muted:e,className:n}){const{ID:r}=Mj(),{user:i}=ip($=>$.user),[s,o]=N.useState(null);N.useEffect(()=>{s&&s.status==="waiting"&&(console.log("gameData: ",s),H9(mi(gi,"games/".concat(r)),{...s,status:"ongoing"}),pl(Fr(Zn,"games",r),{...s,status:"ongoing"},{merge:!0}))},[s]),N.useEffect(()=>{if(!r){navigate("/");return}ex(mi(gi,"games/".concat(r))).then($=>{if($.exists)o($.val());else{o(null),Fx("Invalid Game ID"),navigate("/");return}}).catch($=>{console.error($)})},[r]);const a={piece:"",position:""},l=(s==null?void 0:s.player1)===i.uid,[c,h]=N.useState(a),[d,p]=N.useState(GB),[g,y]=N.useState(!0),[E,R]=N.useState([]),[v,_]=N.useState(!1),[C,b]=N.useState([]),[D,L]=N.useState(""),[S,w]=N.useState(null),[A,k,P]=Fz(Fr(Zn,"games",r));N.useEffect(()=>{A&&!k&&(console.log("dbGameData: ",A),R((A==null?void 0:A.moveHistory)||[]))},[A]),N.useEffect(()=>{if(Array.isArray(t)){const $=Array.from(t);R($)}},[t]);const x=$=>{const V=parseInt($.split("-")[1]),U=V-1;if(c.piece.charAt(1)==="p"&&!S){if(c.piece.charAt(0)==="w"&&U>=0&&U<8){w({piece:c.piece,from:c.position-1,to:U}),L("w".concat(V.toString().charAt(V.toString().length-1)));return}else if(c.piece.charAt(0)==="b"&&U>=56&&U<64){w({piece:c.piece,from:c.position-1,to:U}),L("b".concat((V-6).toString().charAt(V.toString().length-1)));return}}pl(Fr(Zn,"games",r),{...s,moveHistory:[...E,{piece:c.piece,from:c.position-1,to:U,captured:d[U]!==""&&d[U]!=="h"?d[U].split("")[0]+d[U].split("")[1]:""}]},{merge:!0}),h(a)},I=$=>{S&&$&&(pl(Fr(Zn,"games",r),{...s,moveHistory:[...E,{piece:S.piece,from:S.from,to:S.to,captured:d[S.to]!==""&&d[S.to]!=="h"?d[S.to].split("")[0]+d[S.to].split("")[1]:"",promotedTo:$}]},{merge:!0}),w(null),L(""))},K=$=>{e||$.play()};N.useEffect(()=>{K(XB)},[]);const z=($,V,U,B)=>{const ge=B+1;let H=[],re=[],At=[],je=[];if(V==="w"){if(U==="p"){B>=48&&B<=55?(At=[B-8,B-16],je=[B-7,B-9]):(At=[B-8],je=[B-7,B-9]),B%8===0&&(je=je.filter(ue=>ue!==B-9)),B%8===1&&(je=je.filter(ue=>ue!==B-7));let oe=!1;At.forEach(ue=>{ue>=0&&$[ue]===""&&!oe?re.push(ue):oe=!0}),je.forEach(ue=>{ue>=0&&$[ue]!==""&&$[ue].charAt(0)!==V&&H.push(ue)})}}else if(U==="p"){const oe=ge-1;oe>=8&&oe<=15?(At=[oe+8,oe+16],je=[oe+7,oe+9]):(At=[oe+8],je=[oe+7,oe+9]),oe%8===0&&(je=je.filter(be=>be!==oe+7)),oe%8===1&&(je=je.filter(be=>be!==oe+9));let ue=!1;At.forEach(be=>{be>=0&&$[be]===""&&!ue?re.push(be):ue=!0}),je.forEach(be=>{be>=0&&$[be]!==""&&$[be].charAt(0)!==V&&H.push(be)})}if(U==="r"||U==="q"){let oe=B,ue=!1;for(let me=oe+8;me<64&&!ue;me+=8)$[me]!=""?(ue=!0,$[me].charAt(0)!==V&&H.push(me)):H.push(me);let be=!1;for(let me=oe-8;me>=0&&!be;me-=8)$[me]!=""?(be=!0,$[me].charAt(0)!==V&&H.push(me)):H.push(me);let Ft=!1;for(let me=oe+1;me%8!==0&&!Ft;me+=1)$[me]!=""?(Ft=!0,$[me].charAt(0)!==V&&H.push(me)):H.push(me);let ae=!1;for(let me=oe-1;me%8!==7&&me>=0&&!ae;me-=1)$[me]!=""?(ae=!0,$[me].charAt(0)!==V&&H.push(me)):H.push(me)}if(U==="b"||U==="q"){let oe=!1;for(let ae=B+9;ae<64&&ae%8!==0&&!oe;ae+=9)$[ae]!==""?(oe=!0,$[ae].charAt(0)!==V&&H.push(ae)):H.push(ae);let ue=!1;for(let ae=B-9;ae>=0&&ae%8!==7&&!ue;ae-=9)$[ae]!==""?(ue=!0,$[ae].charAt(0)!==V&&H.push(ae)):H.push(ae);let be=!1;for(let ae=B+7;ae<64&&ae%8!==7&&!be;ae+=7)$[ae]!==""?(be=!0,$[ae].charAt(0)!==V&&H.push(ae)):H.push(ae);let Ft=!1;for(let ae=B-7;ae>=0&&ae%8!==0&&!Ft;ae-=7)$[ae]!==""?(Ft=!0,$[ae].charAt(0)!==V&&H.push(ae)):H.push(ae)}if(U==="k"){let oe=[B+7,B-7,B+8,B-8,B+9,B-9,B+1,B-1];B%8===7?oe=oe.filter(ue=>ue!==B+1&&ue!==B-7&&ue!==B+9):B%8===0&&(oe=oe.filter(ue=>ue!==B-1&&ue!==B+7&&ue!==B-9)),oe.forEach(ue=>{ue>=0&&ue<64&&($[ue]===""||$[ue].charAt(0)!==V)&&H.push(ue)})}if(U==="n"){const oe=B-15,ue=B-17,be=B+17,Ft=B+15,ae=B-10,me=B+6,Ec=B-6,jp=B+10,lo=((ge%8?ge%8:8)-8)*-1,us=(ge%8?ge%8:8)-1,ai=Math.floor(ge/8),cs=Math.floor((64-ge)/8),hr=xr=>{xr>=0&&xr<64&&($[xr]===""||$[xr].charAt(0)!==V)&&H.push(xr)};lo>0&&ai>1&&hr(oe),lo>1&&ai>0&&hr(Ec),lo>1&&cs>0&&hr(jp),cs>1&&lo>0&&hr(be),cs>1&&us>0&&hr(Ft),us>1&&cs>0&&hr(me),us>1&&ai>0&&hr(ae),ai>1&&us>0&&hr(ue)}return[H.filter(oe=>oe>=0&&oe<64),re.filter(oe=>oe>=0&&oe<64)]},G=$=>{let V=d;$.forEach(U=>{if(!(U>=0&&U<64))return;let B=g?"b":"w";V[U]!==""?V[U].charAt(0)===B&&(V[U]="".concat(V[U],"c")):V[U]="h";let ge=Array.from(V);p(ge)})},de=$=>{const V=g?"b":"w",U=g?"w":"b",B=$.findIndex(H=>(H==null?void 0:H.charAt(0))===U&&H.charAt(1)==="k");let ge=!1;return $.forEach((H,re)=>{if(!(H===""||ge))if(H.charAt(0)===V){const At=H.charAt(1);let[je]=z($,V,At,re);if(je.includes(B)){ge=!0;return}}else return}),ge},F=($,V)=>{let U=[...d];U=U.map(H=>{if(H==="")return H;const re=H.split("");return re.includes("h")?"":re.includes("c")?"".concat(re[0]).concat(re[1]):H});let B=U[$];return U[$]="",U[V]=B,de(U)},J=()=>{const $=g?"w":"b";let V=[];return d.forEach((U,B)=>{if(U!=="")if(U.charAt(0)===$){const ge=U.charAt(1);let[H,re]=z(d,$,ge,B);[...H,...re].forEach(je=>{if(!(je>=0&&je<64))return;F(B,je)||V.push({moveIndex:je,piece:U,index:B})})}else return}),V};N.useEffect(()=>{const $=de(d);_($);const V=J();b(V),!(V.length>0)&&$===!0?(pl(Fr(Zn,"games",r),{...s,status:"ended"},{merge:!0}),K(YB)):!(V.length>0)&&$===!1?(pl(Fr(Zn,"games",r),{...s,status:"ended"},{merge:!0}),K(ZB)):V.length>0&&$===!0?K(QB):V.length>0&&$===!1&&E.length>0&&(E[E.length-1].captured?K(KB):K(JB))},[g]),N.useEffect(()=>{if(c.piece&&c.position){const $=V=>{const U=Array.from(V.target.classList);V.target.classList.contains("possible-move")?x(U[0]):V.target.classList.contains("capturable")?x(U[1]):(h(a),p(B=>B.map(ge=>{const H=ge.split("");return H.includes("h")?"":H.includes("c")?"".concat(H[0]).concat(H[1]):ge})))};return document.getElementById("board-grid").addEventListener("click",$),()=>{document.getElementById("board-grid").removeEventListener("click",$)}}else p($=>$.map(V=>{const U=V.split("");return U.includes("h")?"":U.includes("c")?"".concat(U[0]).concat(U[1]):V}))},[c]),N.useEffect(()=>{if(c.piece&&c.position){const[$,V]=c.piece.split(""),U=c.position;let[B,ge]=z(d,$,V,U-1),H=[...B,...ge].filter(re=>C.filter(At=>At.piece===c.piece&&At.index===U-1&&At.moveIndex===re).length>0);G(H)}},[c]);const ee=$=>{let V=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],U=[];return $.length>0?($.forEach(B=>{V[B.from]="",V[B.to]=B.promotedTo||B.piece,B.captured&&U.push(B.captured)}),{boardToSend:V,capturedPieces:U}):{boardToSend:V,capturedPieces:U}};return N.useEffect(()=>{if(!(E.length>0)){p(["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"]),y(!0);return}const{boardToSend:$,capturedPieces:V}=ee(E),U=Array.from($);p(U),y(B=>!B)},[E]),Y.jsxs("div",{className:"board "+(l?"":"rotate ")+(v?"check-"+(g?"w":"b")+"k":"")+(n?" "+n:""),children:[" ",Y.jsxs("div",{className:"board-grid",id:"board-grid",children:[Y.jsx(px,{board:d,selectedPiece:c,setSelectedPiece:h,turn:g,userTurn:l}),Y.jsxs("div",{className:"promote-".concat(D.charAt(0),"p square-").concat(D.slice(1)," promote"),children:[Y.jsx("div",{className:"".concat(D.charAt(0),"q"),onClick:()=>{I("".concat(D.charAt(0),"q"))}}),Y.jsx("div",{className:"".concat(D.charAt(0),"n"),onClick:()=>{I("".concat(D.charAt(0),"n"))}}),Y.jsx("div",{className:"".concat(D.charAt(0),"r"),onClick:()=>{I("".concat(D.charAt(0),"r"))}}),Y.jsx("div",{className:"".concat(D.charAt(0),"b"),onClick:()=>{I("".concat(D.charAt(0),"b"))}}),Y.jsx("div",{className:"promotion-close-btn",onClick:()=>{L(""),w(null)},children:"x"})]})]})]})}const Vx=[{path:"login",component:Y.jsx(Pz,{}),type:"Public"},{path:"queue",component:Y.jsx(HB,{}),type:"Private",exact:!0},{path:"online/:ID",component:Y.jsx(e8,{}),type:"Private"}],t8=()=>Vx.filter(e=>e.type==="Private"),n8=()=>Vx.filter(e=>e.type=="Public"),WS=t=>Array.isArray(t)&&t.length>0?t.map((e,n)=>e.default?Y.jsx(Ti,{index:!0,element:e.component},n):Y.jsx(Ti,{path:e.path,element:e.component},n)):Y.jsx(Y.Fragment,{}),r8=()=>{const[t,e]=N.useState({top:0,left:0});return N.useEffect(()=>{const n=r=>{e({top:r.pageY,left:r.pageX})};return document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}},[]),Y.jsxs("div",{className:"Container",children:[Y.jsxs("div",{className:"text",children:[Y.jsx("h1",{children:"404"}),Y.jsx("h2",{children:"Uh, Ohh"}),Y.jsx("h3",{children:"Sorry we can't find what you are looking for 'cuz it's so dark in here"})]}),Y.jsx("div",{className:"torch",style:{position:"absolute",top:"".concat(t.top,"px"),left:"".concat(t.left,"px")}})]})};function i8(){const{user:t}=ip(r=>r.user),e=()=>t?Y.jsx(AS,{to:"/"}):Y.jsx(RS,{}),n=()=>t?Y.jsx(RS,{}):Y.jsx(AS,{to:"/login"});return Y.jsx(Jj,{children:Y.jsxs(Qj,{children:[Y.jsx(Ti,{path:"/",element:Y.jsx(e,{}),children:WS(n8())}),Y.jsx(Ti,{path:"/",element:Y.jsx(n,{}),children:WS(t8())}),Y.jsx(Ti,{index:!0,element:Y.jsx(bz,{})}),Y.jsx(Ti,{path:"/offline",element:Y.jsx(wx,{})}),Y.jsx(Ti,{path:"*",element:Y.jsx(r8,{})})]})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function s8(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function o8(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jo=function(){return jo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jo.apply(this,arguments)},Ux=function(t){return{loading:t==null,value:t}},a8=function(){return function(t,e){switch(e.type){case"error":return jo(jo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return Ux(e.defaultValue);case"value":return jo(jo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},l8=function(t){var e=t?t():void 0,n=N.useReducer(a8(),Ux(e)),r=n[0],i=n[1],s=N.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=N.useCallback(function(l){i({type:"error",error:l})},[]),a=N.useCallback(function(l){i({type:"value",value:l})},[]);return N.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},u8=function(t,e){var n=l8(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return N.useEffect(function(){var l=JL(t,function(c){return s8(void 0,void 0,void 0,function(){var h;return o8(this,function(d){switch(d.label){case 0:return[3,4];case 1:return d.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return d.sent(),[3,4];case 3:return h=d.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};function pn(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ie.apply(null,arguments)}function z0(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}function c8(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function B0(...t){return N.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{c8(n,e)})},t)}function h8(t){return typeof t=="string"}function d8(t,e,n){return t===void 0||h8(t)?e:ie({},e,{ownerState:ie({},e.ownerState,n)})}function $x(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=$x(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Zd(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=$x(t))&&(r&&(r+=" "),r+=e);return r}function X_(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function qS(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function f8(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const g=Zd(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),y=ie({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),E=ie({},n,i,r);return g.length>0&&(E.className=g),Object.keys(y).length>0&&(E.style=y),{props:E,internalRef:void 0}}const o=X_(ie({},i,r)),a=qS(r),l=qS(i),c=e(o),h=Zd(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=ie({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),p=ie({},c,n,l,a);return h.length>0&&(p.className=h),Object.keys(d).length>0&&(p.style=d),{props:p,internalRef:c.ref}}function p8(t,e,n){return typeof t=="function"?t(e,n):t}const m8=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function g8(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=pn(t,m8),a=s?{}:p8(r,i),{props:l,internalRef:c}=f8(ie({},o,{externalSlotProps:a})),h=B0(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return d8(n,ie({},l,{ref:h}),i)}function Ii(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function jx(t){if(!Ii(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=jx(t[n])}),e}function Cr(t,e,n={clone:!0}){const r=n.clone?ie({},t):t;return Ii(t)&&Ii(e)&&Object.keys(e).forEach(i=>{Ii(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Ii(t[i])?r[i]=Cr(t[i],e[i],n):n.clone?r[i]=Ii(e[i])?jx(e[i]):e[i]:r[i]=e[i]}),r}const _8=Object.freeze(Object.defineProperty({__proto__:null,default:Cr,isPlainObject:Ii},Symbol.toStringTag,{value:"Module"}));function Fu(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const y8=Object.freeze(Object.defineProperty({__proto__:null,default:Fu},Symbol.toStringTag,{value:"Module"}));var zx={exports:{}},Oe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=Symbol.for("react.element"),q0=Symbol.for("react.portal"),up=Symbol.for("react.fragment"),cp=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),dp=Symbol.for("react.provider"),fp=Symbol.for("react.context"),v8=Symbol.for("react.server_context"),pp=Symbol.for("react.forward_ref"),mp=Symbol.for("react.suspense"),gp=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),yp=Symbol.for("react.lazy"),w8=Symbol.for("react.offscreen"),Bx;Bx=Symbol.for("react.module.reference");function Hn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case W0:switch(t=t.type,t){case up:case hp:case cp:case mp:case gp:return t;default:switch(t=t&&t.$$typeof,t){case v8:case fp:case pp:case yp:case _p:case dp:return t;default:return e}}case q0:return e}}}Oe.ContextConsumer=fp;Oe.ContextProvider=dp;Oe.Element=W0;Oe.ForwardRef=pp;Oe.Fragment=up;Oe.Lazy=yp;Oe.Memo=_p;Oe.Portal=q0;Oe.Profiler=hp;Oe.StrictMode=cp;Oe.Suspense=mp;Oe.SuspenseList=gp;Oe.isAsyncMode=function(){return!1};Oe.isConcurrentMode=function(){return!1};Oe.isContextConsumer=function(t){return Hn(t)===fp};Oe.isContextProvider=function(t){return Hn(t)===dp};Oe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===W0};Oe.isForwardRef=function(t){return Hn(t)===pp};Oe.isFragment=function(t){return Hn(t)===up};Oe.isLazy=function(t){return Hn(t)===yp};Oe.isMemo=function(t){return Hn(t)===_p};Oe.isPortal=function(t){return Hn(t)===q0};Oe.isProfiler=function(t){return Hn(t)===hp};Oe.isStrictMode=function(t){return Hn(t)===cp};Oe.isSuspense=function(t){return Hn(t)===mp};Oe.isSuspenseList=function(t){return Hn(t)===gp};Oe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===up||t===hp||t===cp||t===mp||t===gp||t===w8||typeof t=="object"&&t!==null&&(t.$$typeof===yp||t.$$typeof===_p||t.$$typeof===dp||t.$$typeof===fp||t.$$typeof===pp||t.$$typeof===Bx||t.getModuleId!==void 0)};Oe.typeOf=Hn;zx.exports=Oe;var HS=zx.exports;const E8=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Wx(t){const e="".concat(t).match(E8);return e&&e[1]||""}function qx(t,e=""){return t.displayName||t.name||Wx(t)||e}function GS(t,e,n){const r=qx(e);return t.displayName||(r!==""?"".concat(n,"(").concat(r,")"):n)}function T8(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return qx(t,"Component");if(typeof t=="object")switch(t.$$typeof){case HS.ForwardRef:return GS(t,t.render,"ForwardRef");case HS.Memo:return GS(t,t.type,"memo");default:return}}}const I8=Object.freeze(Object.defineProperty({__proto__:null,default:T8,getFunctionName:Wx},Symbol.toStringTag,{value:"Module"}));function Xs(t){if(typeof t!="string")throw new Error(Fu(7));return t.charAt(0).toUpperCase()+t.slice(1)}const S8=Object.freeze(Object.defineProperty({__proto__:null,default:Xs},Symbol.toStringTag,{value:"Module"}));function ng(t){return t&&t.ownerDocument||document}const C8=typeof window<"u"?N.useLayoutEffect:N.useEffect;function J_(t){const e=N.useRef(t);return C8(()=>{e.current=t}),N.useRef((...n)=>(0,e.current)(...n)).current}const KS={};function A8(t,e){const n=N.useRef(KS);return n.current===KS&&(n.current=t(e)),n}const R8=[];function k8(t){N.useEffect(t,R8)}class H0{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new H0}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Hx(){const t=A8(H0.create).current;return k8(t.disposeEffect),t}function Z_(t,e){const n=ie({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=ie({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=ie({},s),Object.keys(i).forEach(o=>{n[r][o]=Z_(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}const QS=t=>t,P8=()=>{let t=QS;return{configure(e){t=e},generate(e){return t(e)},reset(){t=QS}}},b8=P8(),x8={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vp(t,e,n="Mui"){const r=x8[e];return r?"".concat(n,"-").concat(r):"".concat(b8.generate(t),"-").concat(e)}function G0(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=vp(t,i,n)}),r}function N8(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const O8=Object.freeze(Object.defineProperty({__proto__:null,default:N8},Symbol.toStringTag,{value:"Module"}));function D8(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:s}=t,o=Hx();N.useEffect(()=>{if(!i)return;function v(_){_.defaultPrevented||(_.key==="Escape"||_.key==="Esc")&&(r==null||r(_,"escapeKeyDown"))}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[i,r]);const a=J_((v,_)=>{r==null||r(v,_)}),l=J_(v=>{!r||v==null||o.start(v,()=>{a(null,"timeout")})});N.useEffect(()=>(i&&l(e),o.clear),[i,e,l,o]);const c=v=>{r==null||r(v,"clickaway")},h=o.clear,d=N.useCallback(()=>{e!=null&&l(s!=null?s:e*.5)},[e,s,l]),p=v=>_=>{const C=v.onBlur;C==null||C(_),d()},g=v=>_=>{const C=v.onFocus;C==null||C(_),h()},y=v=>_=>{const C=v.onMouseEnter;C==null||C(_),h()},E=v=>_=>{const C=v.onMouseLeave;C==null||C(_),d()};return N.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",d),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",h)}},[n,i,d,h]),{getRootProps:(v={})=>{const _=ie({},X_(t),X_(v));return ie({role:"presentation"},v,_,{onBlur:p(_),onFocus:g(_),onMouseEnter:y(_),onMouseLeave:E(_)})},onClickAway:c}}function YS(t){return t.substring(2).toLowerCase()}function M8(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function L8(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,o=N.useRef(!1),a=N.useRef(null),l=N.useRef(!1),c=N.useRef(!1);N.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const h=B0(e.ref,a),d=J_(y=>{const E=c.current;c.current=!1;const R=ng(a.current);if(!l.current||!a.current||"clientX"in y&&M8(y,R))return;if(o.current){o.current=!1;return}let v;y.composedPath?v=y.composedPath().indexOf(a.current)>-1:v=!R.documentElement.contains(y.target)||a.current.contains(y.target),!v&&(n||!E)&&i(y)}),p=y=>E=>{c.current=!0;const R=e.props[y];R&&R(E)},g={ref:h};return s!==!1&&(g[s]=p(s)),N.useEffect(()=>{if(s!==!1){const y=YS(s),E=ng(a.current),R=()=>{o.current=!0};return E.addEventListener(y,d),E.addEventListener("touchmove",R),()=>{E.removeEventListener(y,d),E.removeEventListener("touchmove",R)}}},[d,s]),r!==!1&&(g[r]=p(r)),N.useEffect(()=>{if(r!==!1){const y=YS(r),E=ng(a.current);return E.addEventListener(y,d),()=>{E.removeEventListener(y,d)}}},[d,r]),Y.jsx(N.Fragment,{children:N.cloneElement(e,g)})}const Gx="$$material";function Kx(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var F8=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,V8=Kx(function(t){return F8.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),U8=!1;function $8(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function j8(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var z8=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!U8:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(j8(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=$8(i);try{s.insertRule(r,s.cssRules.length)}catch(o){}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Wt="-ms-",ef="-moz-",Re="-webkit-",Qx="comm",K0="rule",Q0="decl",B8="@import",Yx="@keyframes",W8="@layer",q8=Math.abs,wp=String.fromCharCode,H8=Object.assign;function G8(t,e){return bt(t,0)^45?(((e<<2^bt(t,0))<<2^bt(t,1))<<2^bt(t,2))<<2^bt(t,3):0}function Xx(t){return t.trim()}function K8(t,e){return(t=e.exec(t))?t[0]:t}function ke(t,e,n){return t.replace(e,n)}function ey(t,e){return t.indexOf(e)}function bt(t,e){return t.charCodeAt(e)|0}function Vu(t,e,n){return t.slice(e,n)}function mr(t){return t.length}function Y0(t){return t.length}function ph(t,e){return e.push(t),t}function Q8(t,e){return t.map(e).join("")}var Ep=1,Ra=1,Jx=0,mn=0,ut=0,za="";function Tp(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Ep,column:Ra,length:o,return:""}}function vl(t,e){return H8(Tp("",null,null,"",null,null,0),t,{length:-t.length},e)}function Y8(){return ut}function X8(){return ut=mn>0?bt(za,--mn):0,Ra--,ut===10&&(Ra=1,Ep--),ut}function Sn(){return ut=mn<Jx?bt(za,mn++):0,Ra++,ut===10&&(Ra=1,Ep++),ut}function Ar(){return bt(za,mn)}function Vh(){return mn}function mc(t,e){return Vu(za,t,e)}function Uu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zx(t){return Ep=Ra=1,Jx=mr(za=t),mn=0,[]}function eN(t){return za="",t}function Uh(t){return Xx(mc(mn-1,ty(t===91?t+2:t===40?t+1:t)))}function J8(t){for(;(ut=Ar())&&ut<33;)Sn();return Uu(t)>2||Uu(ut)>3?"":" "}function Z8(t,e){for(;--e&&Sn()&&!(ut<48||ut>102||ut>57&&ut<65||ut>70&&ut<97););return mc(t,Vh()+(e<6&&Ar()==32&&Sn()==32))}function ty(t){for(;Sn();)switch(ut){case t:return mn;case 34:case 39:t!==34&&t!==39&&ty(ut);break;case 40:t===41&&ty(t);break;case 92:Sn();break}return mn}function eW(t,e){for(;Sn()&&t+ut!==57;)if(t+ut===84&&Ar()===47)break;return"/*"+mc(e,mn-1)+"*"+wp(t===47?t:Sn())}function tW(t){for(;!Uu(Ar());)Sn();return mc(t,mn)}function nW(t){return eN($h("",null,null,null,[""],t=Zx(t),0,[0],t))}function $h(t,e,n,r,i,s,o,a,l){for(var c=0,h=0,d=o,p=0,g=0,y=0,E=1,R=1,v=1,_=0,C="",b=i,D=s,L=r,S=C;R;)switch(y=_,_=Sn()){case 40:if(y!=108&&bt(S,d-1)==58){ey(S+=ke(Uh(_),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:S+=Uh(_);break;case 9:case 10:case 13:case 32:S+=J8(y);break;case 92:S+=Z8(Vh()-1,7);continue;case 47:switch(Ar()){case 42:case 47:ph(rW(eW(Sn(),Vh()),e,n),l);break;default:S+="/"}break;case 123*E:a[c++]=mr(S)*v;case 125*E:case 59:case 0:switch(_){case 0:case 125:R=0;case 59+h:v==-1&&(S=ke(S,/\f/g,"")),g>0&&mr(S)-d&&ph(g>32?JS(S+";",r,n,d-1):JS(ke(S," ","")+";",r,n,d-2),l);break;case 59:S+=";";default:if(ph(L=XS(S,e,n,c,h,i,a,C,b=[],D=[],d),s),_===123)if(h===0)$h(S,e,L,L,b,s,d,a,D);else switch(p===99&&bt(S,3)===110?100:p){case 100:case 108:case 109:case 115:$h(t,L,L,r&&ph(XS(t,L,L,0,0,i,a,C,i,b=[],d),D),i,D,d,a,r?b:D);break;default:$h(S,L,L,L,[""],D,0,a,D)}}c=h=g=0,E=v=1,C=S="",d=o;break;case 58:d=1+mr(S),g=y;default:if(E<1){if(_==123)--E;else if(_==125&&E++==0&&X8()==125)continue}switch(S+=wp(_),_*E){case 38:v=h>0?1:(S+="\f",-1);break;case 44:a[c++]=(mr(S)-1)*v,v=1;break;case 64:Ar()===45&&(S+=Uh(Sn())),p=Ar(),h=d=mr(C=S+=tW(Vh())),_++;break;case 45:y===45&&mr(S)==2&&(E=0)}}return s}function XS(t,e,n,r,i,s,o,a,l,c,h){for(var d=i-1,p=i===0?s:[""],g=Y0(p),y=0,E=0,R=0;y<r;++y)for(var v=0,_=Vu(t,d+1,d=q8(E=o[y])),C=t;v<g;++v)(C=Xx(E>0?p[v]+" "+_:ke(_,/&\f/g,p[v])))&&(l[R++]=C);return Tp(t,e,n,i===0?K0:a,l,c,h)}function rW(t,e,n){return Tp(t,e,n,Qx,wp(Y8()),Vu(t,2,-2),0)}function JS(t,e,n,r){return Tp(t,e,n,Q0,Vu(t,0,r),Vu(t,r+1,-1),r)}function ea(t,e){for(var n="",r=Y0(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function iW(t,e,n,r){switch(t.type){case W8:if(t.children.length)break;case B8:case Q0:return t.return=t.return||t.value;case Qx:return"";case Yx:return t.return=t.value+"{"+ea(t.children,r)+"}";case K0:t.value=t.props.join(",")}return mr(n=ea(t.children,r))?t.return=t.value+"{"+n+"}":""}function sW(t){var e=Y0(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function oW(t){return function(e){e.root||(e=e.return)&&t(e)}}var aW=function(e,n,r){for(var i=0,s=0;i=s,s=Ar(),i===38&&s===12&&(n[r]=1),!Uu(s);)Sn();return mc(e,mn)},lW=function(e,n){var r=-1,i=44;do switch(Uu(i)){case 0:i===38&&Ar()===12&&(n[r]=1),e[r]+=aW(mn-1,n,r);break;case 2:e[r]+=Uh(i);break;case 4:if(i===44){e[++r]=Ar()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=wp(i)}while(i=Sn());return e},uW=function(e,n){return eN(lW(Zx(e),n))},ZS=new WeakMap,cW=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!ZS.get(r))&&!i){ZS.set(e,!0);for(var s=[],o=uW(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var h=0;h<a.length;h++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},hW=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function tN(t,e){switch(G8(t,e)){case 5103:return Re+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Re+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Re+t+ef+t+Wt+t+t;case 6828:case 4268:return Re+t+Wt+t+t;case 6165:return Re+t+Wt+"flex-"+t+t;case 5187:return Re+t+ke(t,/(\w+).+(:[^]+)/,Re+"box-$1$2"+Wt+"flex-$1$2")+t;case 5443:return Re+t+Wt+"flex-item-"+ke(t,/flex-|-self/,"")+t;case 4675:return Re+t+Wt+"flex-line-pack"+ke(t,/align-content|flex-|-self/,"")+t;case 5548:return Re+t+Wt+ke(t,"shrink","negative")+t;case 5292:return Re+t+Wt+ke(t,"basis","preferred-size")+t;case 6060:return Re+"box-"+ke(t,"-grow","")+Re+t+Wt+ke(t,"grow","positive")+t;case 4554:return Re+ke(t,/([^-])(transform)/g,"$1"+Re+"$2")+t;case 6187:return ke(ke(ke(t,/(zoom-|grab)/,Re+"$1"),/(image-set)/,Re+"$1"),t,"")+t;case 5495:case 3959:return ke(t,/(image-set\([^]*)/,Re+"$1$`$1");case 4968:return ke(ke(t,/(.+:)(flex-)?(.*)/,Re+"box-pack:$3"+Wt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Re+t+t;case 4095:case 3583:case 4068:case 2532:return ke(t,/(.+)-inline(.+)/,Re+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(mr(t)-1-e>6)switch(bt(t,e+1)){case 109:if(bt(t,e+4)!==45)break;case 102:return ke(t,/(.+:)(.+)-([^]+)/,"$1"+Re+"$2-$3$1"+ef+(bt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~ey(t,"stretch")?tN(ke(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(bt(t,e+1)!==115)break;case 6444:switch(bt(t,mr(t)-3-(~ey(t,"!important")&&10))){case 107:return ke(t,":",":"+Re)+t;case 101:return ke(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Re+(bt(t,14)===45?"inline-":"")+"box$3$1"+Re+"$2$3$1"+Wt+"$2box$3")+t}break;case 5936:switch(bt(t,e+11)){case 114:return Re+t+Wt+ke(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Re+t+Wt+ke(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Re+t+Wt+ke(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Re+t+Wt+t+t}return t}var dW=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Q0:e.return=tN(e.value,e.length);break;case Yx:return ea([vl(e,{value:ke(e.value,"@","@"+Re)})],i);case K0:if(e.length)return Q8(e.props,function(s){switch(K8(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ea([vl(e,{props:[ke(s,/:(read-\w+)/,":"+ef+"$1")]})],i);case"::placeholder":return ea([vl(e,{props:[ke(s,/:(plac\w+)/,":"+Re+"input-$1")]}),vl(e,{props:[ke(s,/:(plac\w+)/,":"+ef+"$1")]}),vl(e,{props:[ke(s,/:(plac\w+)/,Wt+"input-$1")]})],i)}return""})}},fW=[dW],nN=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(E){var R=E.getAttribute("data-emotion");R.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var i=e.stylisPlugins||fW,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(E){for(var R=E.getAttribute("data-emotion").split(" "),v=1;v<R.length;v++)s[R[v]]=!0;a.push(E)});var l,c=[cW,hW];{var h,d=[iW,oW(function(E){h.insert(E)})],p=sW(c.concat(i,d)),g=function(R){return ea(nW(R),p)};l=function(R,v,_,C){h=_,g(R?R+"{"+v.styles+"}":v.styles),C&&(y.inserted[v.name]=!0)}}var y={key:n,sheet:new z8({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return y.sheet.hydrate(a),y},rN={exports:{}},De={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=typeof Symbol=="function"&&Symbol.for,X0=Ct?Symbol.for("react.element"):60103,J0=Ct?Symbol.for("react.portal"):60106,Ip=Ct?Symbol.for("react.fragment"):60107,Sp=Ct?Symbol.for("react.strict_mode"):60108,Cp=Ct?Symbol.for("react.profiler"):60114,Ap=Ct?Symbol.for("react.provider"):60109,Rp=Ct?Symbol.for("react.context"):60110,Z0=Ct?Symbol.for("react.async_mode"):60111,kp=Ct?Symbol.for("react.concurrent_mode"):60111,Pp=Ct?Symbol.for("react.forward_ref"):60112,bp=Ct?Symbol.for("react.suspense"):60113,pW=Ct?Symbol.for("react.suspense_list"):60120,xp=Ct?Symbol.for("react.memo"):60115,Np=Ct?Symbol.for("react.lazy"):60116,mW=Ct?Symbol.for("react.block"):60121,gW=Ct?Symbol.for("react.fundamental"):60117,_W=Ct?Symbol.for("react.responder"):60118,yW=Ct?Symbol.for("react.scope"):60119;function bn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case X0:switch(t=t.type,t){case Z0:case kp:case Ip:case Cp:case Sp:case bp:return t;default:switch(t=t&&t.$$typeof,t){case Rp:case Pp:case Np:case xp:case Ap:return t;default:return e}}case J0:return e}}}function iN(t){return bn(t)===kp}De.AsyncMode=Z0;De.ConcurrentMode=kp;De.ContextConsumer=Rp;De.ContextProvider=Ap;De.Element=X0;De.ForwardRef=Pp;De.Fragment=Ip;De.Lazy=Np;De.Memo=xp;De.Portal=J0;De.Profiler=Cp;De.StrictMode=Sp;De.Suspense=bp;De.isAsyncMode=function(t){return iN(t)||bn(t)===Z0};De.isConcurrentMode=iN;De.isContextConsumer=function(t){return bn(t)===Rp};De.isContextProvider=function(t){return bn(t)===Ap};De.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===X0};De.isForwardRef=function(t){return bn(t)===Pp};De.isFragment=function(t){return bn(t)===Ip};De.isLazy=function(t){return bn(t)===Np};De.isMemo=function(t){return bn(t)===xp};De.isPortal=function(t){return bn(t)===J0};De.isProfiler=function(t){return bn(t)===Cp};De.isStrictMode=function(t){return bn(t)===Sp};De.isSuspense=function(t){return bn(t)===bp};De.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ip||t===kp||t===Cp||t===Sp||t===bp||t===pW||typeof t=="object"&&t!==null&&(t.$$typeof===Np||t.$$typeof===xp||t.$$typeof===Ap||t.$$typeof===Rp||t.$$typeof===Pp||t.$$typeof===gW||t.$$typeof===_W||t.$$typeof===yW||t.$$typeof===mW)};De.typeOf=bn;rN.exports=De;var vW=rN.exports,sN=vW,wW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EW={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oN={};oN[sN.ForwardRef]=wW;oN[sN.Memo]=EW;var TW=!0;function IW(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var aN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||TW===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},lN=function(e,n,r){aN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function SW(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var CW={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},AW=!1,RW=/[A-Z]|^ms/g,kW=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uN=function(e){return e.charCodeAt(1)===45},e1=function(e){return e!=null&&typeof e!="boolean"},rg=Kx(function(t){return uN(t)?t:t.replace(RW,"-$&").toLowerCase()}),t1=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(kW,function(r,i,s){return gr={name:i,styles:s,next:gr},i})}return CW[e]!==1&&!uN(e)&&typeof n=="number"&&n!==0?n+"px":n},PW="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function $u(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return gr={name:i.name,styles:i.styles,next:gr},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)gr={name:o.name,styles:o.styles,next:gr},o=o.next;var a=s.styles+";";return a}return bW(t,e,n)}case"function":{if(t!==void 0){var l=gr,c=n(t);return gr=l,$u(t,e,c)}break}}var h=n;if(e==null)return h;var d=e[h];return d!==void 0?d:h}function bW(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=$u(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":e1(a)&&(r+=rg(s)+":"+t1(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&AW)throw new Error(PW);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)e1(o[l])&&(r+=rg(s)+":"+t1(s,o[l])+";");else{var c=$u(t,e,o);switch(s){case"animation":case"animationName":{r+=rg(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}}return r}var n1=/label:\s*([^\s;\n{]+)\s*(;|$)/g,gr;function ew(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";gr=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=$u(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=$u(n,e,t[a]),r){var l=s;i+=l[a]}n1.lastIndex=0;for(var c="",h;(h=n1.exec(i))!==null;)c+="-"+h[1];var d=SW(i)+c;return{name:d,styles:i,next:gr}}var xW=function(e){return e()},cN=Jl.useInsertionEffect?Jl.useInsertionEffect:!1,NW=cN||xW,r1=cN||N.useLayoutEffect,hN=N.createContext(typeof HTMLElement<"u"?nN({key:"css"}):null),OW=hN.Provider,dN=function(e){return N.forwardRef(function(n,r){var i=N.useContext(hN);return e(n,i,r)})},Op=N.createContext({}),ig={exports:{}},i1;function fN(){return i1||(i1=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(ig)),ig.exports}fN();var DW=dN(function(t,e){var n=t.styles,r=ew([n],void 0,N.useContext(Op)),i=N.useRef();return r1(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),r1(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&lN(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function pN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ew(e)}var MW=function(){var e=pN.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},LW=V8,FW=function(e){return e!=="theme"},s1=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?LW:FW},o1=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},VW=!1,UW=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return aN(n,r,i),NW(function(){return lN(n,r,i)}),null},$W=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=o1(e,n,r),l=a||s1(i),c=!l("as");return function(){var h=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)d.push.apply(d,h);else{d.push(h[0][0]);for(var p=h.length,g=1;g<p;g++)d.push(h[g],h[0][g])}var y=dN(function(E,R,v){var _=c&&E.as||i,C="",b=[],D=E;if(E.theme==null){D={};for(var L in E)D[L]=E[L];D.theme=N.useContext(Op)}typeof E.className=="string"?C=IW(R.registered,b,E.className):E.className!=null&&(C=E.className+" ");var S=ew(d.concat(b),R.registered,D);C+=R.key+"-"+S.name,o!==void 0&&(C+=" "+o);var w=c&&a===void 0?s1(_):l,A={};for(var k in E)c&&k==="as"||w(k)&&(A[k]=E[k]);return A.className=C,v&&(A.ref=v),N.createElement(N.Fragment,null,N.createElement(UW,{cache:R,serialized:S,isStringTag:typeof _=="string"}),N.createElement(_,A))});return y.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",y.defaultProps=e.defaultProps,y.__emotion_real=y,y.__emotion_base=i,y.__emotion_styles=d,y.__emotion_forwardProp=a,Object.defineProperty(y,"toString",{value:function(){return o===void 0&&VW?"NO_COMPONENT_SELECTOR":"."+o}}),y.withComponent=function(E,R){return t(E,ie({},n,R,{shouldForwardProp:o1(y,R,!0)})).apply(void 0,d)},y}},jW=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ny=$W.bind();jW.forEach(function(t){ny[t]=ny(t)});let ry;typeof document=="object"&&(ry=nN({key:"css",prepend:!0}));function zW(t){const{injectFirst:e,children:n}=t;return e&&ry?Y.jsx(OW,{value:ry,children:n}):n}function BW(t){return t==null||Object.keys(t).length===0}function WW(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(BW(i)?n:i):e;return Y.jsx(DW,{styles:r})}function qW(t,e){return ny(t,e)}const HW=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},GW=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:WW,StyledEngineProvider:zW,ThemeContext:Op,css:pN,default:qW,internal_processStyles:HW,keyframes:MW},Symbol.toStringTag,{value:"Module"})),KW=["values","unit","step"],QW=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>ie({},n,{[r.key]:r.val}),{})};function mN(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=pn(t,KW),s=QW(e),o=Object.keys(s);function a(p){const g=typeof e[p]=="number"?e[p]:p;return"@media (min-width:".concat(g).concat(n,")")}function l(p){const g=typeof e[p]=="number"?e[p]:p;return"@media (max-width:".concat(g-r/100).concat(n,")")}function c(p,g){const y=o.indexOf(g);return"@media (min-width:".concat(typeof e[p]=="number"?e[p]:p).concat(n,") and ")+"(max-width:".concat((y!==-1&&typeof e[o[y]]=="number"?e[o[y]]:g)-r/100).concat(n,")")}function h(p){return o.indexOf(p)+1<o.length?c(p,o[o.indexOf(p)+1]):a(p)}function d(p){const g=o.indexOf(p);return g===0?a(o[1]):g===o.length-1?l(o[g]):c(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return ie({keys:o,values:s,up:a,down:l,between:c,only:h,not:d,unit:n},i)}const YW={borderRadius:4};function Xl(t,e){return e?Cr(t,e,{clone:!1}):t}const tw={xs:0,sm:600,md:900,lg:1200,xl:1536},a1={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(tw[t],"px)")};function ri(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||a1;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||a1;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||tw).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function XW(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function JW(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Dp(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r="vars.".concat(e).split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function tf(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Dp(t,n)||r,e&&(i=e(i,r,t)),i}function st(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=Dp(l,r)||{};return ri(o,a,d=>{let p=tf(c,i,d);return d===p&&typeof d=="string"&&(p=tf(c,i,"".concat(e).concat(d==="default"?"":Xs(d)),d)),n===!1?p:{[n]:p}})};return s.propTypes={},s.filterProps=[e],s}function ZW(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const e7={m:"margin",p:"padding"},t7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l1={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},n7=ZW(t=>{if(t.length>2)if(l1[t])t=l1[t];else return[t];const[e,n]=t.split(""),r=e7[e],i=t7[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),nw=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],rw=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nw,...rw];function gc(t,e,n,r){var i;const s=(i=Dp(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function gN(t){return gc(t,"spacing",8)}function _c(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:"-".concat(r)}function r7(t,e){return n=>t.reduce((r,i)=>(r[i]=_c(e,n),r),{})}function i7(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=n7(n),s=r7(i,r),o=t[n];return ri(t,o,s)}function _N(t,e){const n=gN(t.theme);return Object.keys(t).map(r=>i7(t,e,r,n)).reduce(Xl,{})}function et(t){return _N(t,nw)}et.propTypes={};et.filterProps=nw;function tt(t){return _N(t,rw)}tt.propTypes={};tt.filterProps=rw;function s7(t=8){if(t.mui)return t;const e=gN({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?"".concat(o,"px"):o}).join(" ");return n.mui=!0,n}function Mp(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?Xl(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Dn(t){return typeof t!="number"?t:"".concat(t,"px solid")}function Gn(t,e){return st({prop:t,themeKey:"borders",transform:e})}const o7=Gn("border",Dn),a7=Gn("borderTop",Dn),l7=Gn("borderRight",Dn),u7=Gn("borderBottom",Dn),c7=Gn("borderLeft",Dn),h7=Gn("borderColor"),d7=Gn("borderTopColor"),f7=Gn("borderRightColor"),p7=Gn("borderBottomColor"),m7=Gn("borderLeftColor"),g7=Gn("outline",Dn),_7=Gn("outlineColor"),Lp=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=gc(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:_c(e,r)});return ri(t,t.borderRadius,n)}return null};Lp.propTypes={};Lp.filterProps=["borderRadius"];Mp(o7,a7,l7,u7,c7,h7,d7,f7,p7,m7,Lp,g7,_7);const Fp=t=>{if(t.gap!==void 0&&t.gap!==null){const e=gc(t.theme,"spacing",8),n=r=>({gap:_c(e,r)});return ri(t,t.gap,n)}return null};Fp.propTypes={};Fp.filterProps=["gap"];const Vp=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=gc(t.theme,"spacing",8),n=r=>({columnGap:_c(e,r)});return ri(t,t.columnGap,n)}return null};Vp.propTypes={};Vp.filterProps=["columnGap"];const Up=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=gc(t.theme,"spacing",8),n=r=>({rowGap:_c(e,r)});return ri(t,t.rowGap,n)}return null};Up.propTypes={};Up.filterProps=["rowGap"];const y7=st({prop:"gridColumn"}),v7=st({prop:"gridRow"}),w7=st({prop:"gridAutoFlow"}),E7=st({prop:"gridAutoColumns"}),T7=st({prop:"gridAutoRows"}),I7=st({prop:"gridTemplateColumns"}),S7=st({prop:"gridTemplateRows"}),C7=st({prop:"gridTemplateAreas"}),A7=st({prop:"gridArea"});Mp(Fp,Vp,Up,y7,v7,w7,E7,T7,I7,S7,C7,A7);function ta(t,e){return e==="grey"?e:t}const R7=st({prop:"color",themeKey:"palette",transform:ta}),k7=st({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ta}),P7=st({prop:"backgroundColor",themeKey:"palette",transform:ta});Mp(R7,k7,P7);function yn(t){return t<=1&&t!==0?"".concat(t*100,"%"):t}const b7=st({prop:"width",transform:yn}),iw=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||tw[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:"".concat(s).concat(t.theme.breakpoints.unit)}:{maxWidth:s}:{maxWidth:yn(n)}};return ri(t,t.maxWidth,e)}return null};iw.filterProps=["maxWidth"];const x7=st({prop:"minWidth",transform:yn}),N7=st({prop:"height",transform:yn}),O7=st({prop:"maxHeight",transform:yn}),D7=st({prop:"minHeight",transform:yn});st({prop:"size",cssProperty:"width",transform:yn});st({prop:"size",cssProperty:"height",transform:yn});const M7=st({prop:"boxSizing"});Mp(b7,iw,x7,N7,O7,D7,M7);const yc={border:{themeKey:"borders",transform:Dn},borderTop:{themeKey:"borders",transform:Dn},borderRight:{themeKey:"borders",transform:Dn},borderBottom:{themeKey:"borders",transform:Dn},borderLeft:{themeKey:"borders",transform:Dn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Dn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Lp},color:{themeKey:"palette",transform:ta},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ta},backgroundColor:{themeKey:"palette",transform:ta},p:{style:tt},pt:{style:tt},pr:{style:tt},pb:{style:tt},pl:{style:tt},px:{style:tt},py:{style:tt},padding:{style:tt},paddingTop:{style:tt},paddingRight:{style:tt},paddingBottom:{style:tt},paddingLeft:{style:tt},paddingX:{style:tt},paddingY:{style:tt},paddingInline:{style:tt},paddingInlineStart:{style:tt},paddingInlineEnd:{style:tt},paddingBlock:{style:tt},paddingBlockStart:{style:tt},paddingBlockEnd:{style:tt},m:{style:et},mt:{style:et},mr:{style:et},mb:{style:et},ml:{style:et},mx:{style:et},my:{style:et},margin:{style:et},marginTop:{style:et},marginRight:{style:et},marginBottom:{style:et},marginLeft:{style:et},marginX:{style:et},marginY:{style:et},marginInline:{style:et},marginInlineStart:{style:et},marginInlineEnd:{style:et},marginBlock:{style:et},marginBlockStart:{style:et},marginBlockEnd:{style:et},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Fp},rowGap:{style:Up},columnGap:{style:Vp},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yn},maxWidth:{style:iw},minWidth:{transform:yn},height:{transform:yn},maxHeight:{transform:yn},minHeight:{transform:yn},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function L7(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function F7(t,e){return typeof t=="function"?t(e):t}function yN(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:h,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=Dp(i,c)||{};return d?d(o):ri(o,r,y=>{let E=tf(p,h,y);return y===E&&typeof y=="string"&&(E=tf(p,h,"".concat(n).concat(y==="default"?"":Xs(y)),y)),l===!1?E:{[l]:E}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:yc;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const h=XW(s.breakpoints),d=Object.keys(h);let p=h;return Object.keys(c).forEach(g=>{const y=F7(c[g],s);if(y!=null)if(typeof y=="object")if(o[g])p=Xl(p,t(g,y,s,o));else{const E=ri({theme:s},y,R=>({[g]:R}));L7(E,y)?p[g]=e({sx:y,theme:s}):p=Xl(p,E)}else p=Xl(p,t(g,y,s,o))}),JW(d,p)}return Array.isArray(i)?i.map(a):a(i)}return e}const $p=yN();$p.filterProps=["sx"];function vN(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const V7=["breakpoints","palette","spacing","shape"];function sw(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=pn(t,V7),a=mN(n),l=s7(i);let c=Cr({breakpoints:a,direction:"ltr",components:{},palette:ie({mode:"light"},r),spacing:l,shape:ie({},YW,s)},o);return c.applyStyles=vN,c=e.reduce((h,d)=>Cr(h,d),c),c.unstable_sxConfig=ie({},yc,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return $p({sx:d,theme:this})},c}const U7=Object.freeze(Object.defineProperty({__proto__:null,default:sw,private_createBreakpoints:mN,unstable_applyStyles:vN},Symbol.toStringTag,{value:"Module"}));function $7(t){return Object.keys(t).length===0}function j7(t=null){const e=N.useContext(Op);return!e||$7(e)?t:e}const z7=sw();function B7(t=z7){return j7(t)}const W7=["sx"],q7=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:yc;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function H7(t){const{sx:e}=t,n=pn(t,W7),{systemProps:r,otherProps:i}=q7(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Ii(a)?ie({},r,a):r}:s=ie({},r,e),ie({},i,{sx:s})}const G7=Object.freeze(Object.defineProperty({__proto__:null,default:$p,extendSxProp:H7,unstable_createStyleFunctionSx:yN,unstable_defaultSxConfig:yc},Symbol.toStringTag,{value:"Module"})),K7=N.createContext(void 0);function Q7(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?Z_(i.defaultProps,r):!i.styleOverrides&&!i.variants?Z_(i,r):r}function Y7({props:t,name:e}){const n=N.useContext(K7);return Q7({props:t,name:e,theme:{components:n}})}function X7(t,e){return ie({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var ot={},wN={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(wN);var EN=wN.exports;const J7=ts(y8),Z7=ts(O8);var TN=EN;Object.defineProperty(ot,"__esModule",{value:!0});var u1=ot.alpha=AN;ot.blend=fq;ot.colorChannel=void 0;var eq=ot.darken=aw;ot.decomposeColor=qn;var tq=ot.emphasize=RN,nq=ot.getContrastRatio=lq;ot.getLuminance=nf;ot.hexToRgb=IN;ot.hslToRgb=CN;var rq=ot.lighten=lw;ot.private_safeAlpha=uq;ot.private_safeColorChannel=void 0;ot.private_safeDarken=cq;ot.private_safeEmphasize=dq;ot.private_safeLighten=hq;ot.recomposeColor=Ba;ot.rgbToHex=aq;var c1=TN(J7),iq=TN(Z7);function ow(t,e=0,n=1){return(0,iq.default)(t,e,n)}function IN(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?"rgb".concat(n.length===4?"a":"","(").concat(n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", "),")"):""}function sq(t){const e=t.toString(16);return e.length===1?"0".concat(e):e}function qn(t){if(t.type)return t;if(t.charAt(0)==="#")return qn(IN(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,c1.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,c1.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const SN=t=>{const e=qn(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?"".concat(n,"%"):n).join(" ")};ot.colorChannel=SN;const oq=(t,e)=>{try{return SN(t)}catch(n){return t}};ot.private_safeColorChannel=oq;function Ba(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),e.indexOf("color")!==-1?r="".concat(n," ").concat(r.join(" ")):r="".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function aq(t){if(t.indexOf("#")===0)return t;const{values:e}=qn(t);return"#".concat(e.map((n,r)=>sq(r===3?Math.round(255*n):n)).join(""))}function CN(t){t=qn(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,h=(c+n/30)%12)=>i-s*Math.max(Math.min(h-3,9-h,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Ba({type:a,values:l})}function nf(t){t=qn(t);let e=t.type==="hsl"||t.type==="hsla"?qn(CN(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function lq(t,e){const n=nf(t),r=nf(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function AN(t,e){return t=qn(t),e=ow(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]="/".concat(e):t.values[3]=e,Ba(t)}function uq(t,e,n){try{return AN(t,e)}catch(r){return t}}function aw(t,e){if(t=qn(t),e=ow(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Ba(t)}function cq(t,e,n){try{return aw(t,e)}catch(r){return t}}function lw(t,e){if(t=qn(t),e=ow(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Ba(t)}function hq(t,e,n){try{return lw(t,e)}catch(r){return t}}function RN(t,e=.15){return nf(t)>.5?aw(t,e):lw(t,e)}function dq(t,e,n){try{return RN(t,e)}catch(r){return t}}function fq(t,e,n,r=1){const i=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),s=qn(t),o=qn(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return Ba({type:"rgb",values:a})}const ju={black:"#000",white:"#fff"},pq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},go={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},_o={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},wl={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},yo={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},vo={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},wo={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},mq=["mode","contrastThreshold","tonalOffset"],h1={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ju.white,default:ju.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},sg={text:{primary:ju.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ju.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function d1(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=rq(t.main,i):e==="dark"&&(t.dark=eq(t.main,s)))}function gq(t="light"){return t==="dark"?{main:yo[200],light:yo[50],dark:yo[400]}:{main:yo[700],light:yo[400],dark:yo[800]}}function _q(t="light"){return t==="dark"?{main:go[200],light:go[50],dark:go[400]}:{main:go[500],light:go[300],dark:go[700]}}function yq(t="light"){return t==="dark"?{main:_o[500],light:_o[300],dark:_o[700]}:{main:_o[700],light:_o[400],dark:_o[800]}}function vq(t="light"){return t==="dark"?{main:vo[400],light:vo[300],dark:vo[700]}:{main:vo[700],light:vo[500],dark:vo[900]}}function wq(t="light"){return t==="dark"?{main:wo[400],light:wo[300],dark:wo[700]}:{main:wo[800],light:wo[500],dark:wo[900]}}function Eq(t="light"){return t==="dark"?{main:wl[400],light:wl[300],dark:wl[700]}:{main:"#ed6c02",light:wl[500],dark:wl[900]}}function Tq(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=pn(t,mq),s=t.primary||gq(e),o=t.secondary||_q(e),a=t.error||yq(e),l=t.info||vq(e),c=t.success||wq(e),h=t.warning||Eq(e);function d(E){return nq(E,sg.text.primary)>=n?sg.text.primary:h1.text.primary}const p=({color:E,name:R,mainShade:v=500,lightShade:_=300,darkShade:C=700})=>{if(E=ie({},E),!E.main&&E[v]&&(E.main=E[v]),!E.hasOwnProperty("main"))throw new Error(Fu(11,R?" (".concat(R,")"):"",v));if(typeof E.main!="string")throw new Error(Fu(12,R?" (".concat(R,")"):"",JSON.stringify(E.main)));return d1(E,"light",_,r),d1(E,"dark",C,r),E.contrastText||(E.contrastText=d(E.main)),E},g={dark:sg,light:h1};return Cr(ie({common:ie({},ju),mode:e,primary:p({color:s,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:h,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:pq,contrastThreshold:n,getContrastText:d,augmentColor:p,tonalOffset:r},g[e]),i)}const Iq=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Sq(t){return Math.round(t*1e5)/1e5}const f1={textTransform:"uppercase"},p1='"Roboto", "Helvetica", "Arial", sans-serif';function Cq(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=p1,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:d}=n,p=pn(n,Iq),g=i/14,y=d||(v=>"".concat(v/c*g,"rem")),E=(v,_,C,b,D)=>ie({fontFamily:r,fontWeight:v,fontSize:y(_),lineHeight:C},r===p1?{letterSpacing:"".concat(Sq(b/_),"em")}:{},D,h),R={h1:E(s,96,1.167,-1.5),h2:E(s,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(a,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(a,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(a,14,1.75,.4,f1),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,f1),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Cr(ie({htmlFontSize:c,pxToRem:y,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},R),p,{clone:!1})}const Aq=.2,Rq=.14,kq=.12;function He(...t){return["".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(t[3],"px rgba(0,0,0,").concat(Aq,")"),"".concat(t[4],"px ").concat(t[5],"px ").concat(t[6],"px ").concat(t[7],"px rgba(0,0,0,").concat(Rq,")"),"".concat(t[8],"px ").concat(t[9],"px ").concat(t[10],"px ").concat(t[11],"px rgba(0,0,0,").concat(kq,")")].join(",")}const Pq=["none",He(0,2,1,-1,0,1,1,0,0,1,3,0),He(0,3,1,-2,0,2,2,0,0,1,5,0),He(0,3,3,-2,0,3,4,0,0,1,8,0),He(0,2,4,-1,0,4,5,0,0,1,10,0),He(0,3,5,-1,0,5,8,0,0,1,14,0),He(0,3,5,-1,0,6,10,0,0,1,18,0),He(0,4,5,-2,0,7,10,1,0,2,16,1),He(0,5,5,-3,0,8,10,1,0,3,14,2),He(0,5,6,-3,0,9,12,1,0,3,16,2),He(0,6,6,-3,0,10,14,1,0,4,18,3),He(0,6,7,-4,0,11,15,1,0,4,20,3),He(0,7,8,-4,0,12,17,2,0,5,22,4),He(0,7,8,-4,0,13,19,2,0,5,24,4),He(0,7,9,-4,0,14,21,2,0,5,26,4),He(0,8,9,-5,0,15,22,2,0,6,28,5),He(0,8,10,-5,0,16,24,2,0,6,30,5),He(0,8,11,-5,0,17,26,2,0,6,32,5),He(0,9,11,-5,0,18,28,2,0,7,34,6),He(0,9,12,-6,0,19,29,2,0,7,36,6),He(0,10,13,-6,0,20,31,3,0,8,38,7),He(0,10,13,-6,0,21,33,3,0,8,40,7),He(0,10,14,-6,0,22,35,3,0,8,42,7),He(0,11,14,-7,0,23,36,3,0,9,44,8),He(0,11,15,-7,0,24,38,3,0,9,46,8)],bq=["duration","easing","delay"],xq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Nq={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function m1(t){return"".concat(Math.round(t),"ms")}function Oq(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function Dq(t){const e=ie({},xq,t.easing),n=ie({},Nq,t.duration);return ie({getAutoHeightDuration:Oq,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return pn(s,bq),(Array.isArray(i)?i:[i]).map(c=>"".concat(c," ").concat(typeof o=="string"?o:m1(o)," ").concat(a," ").concat(typeof l=="string"?l:m1(l))).join(",")}},t,{easing:e,duration:n})}const Mq={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Lq=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Fq(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=pn(t,Lq);if(t.vars)throw new Error(Fu(18));const a=Tq(r),l=sw(t);let c=Cr(l,{mixins:X7(l.breakpoints,n),palette:a,shadows:Pq.slice(),typography:Cq(a,s),transitions:Dq(i),zIndex:ie({},Mq)});return c=Cr(c,o),c=e.reduce((h,d)=>Cr(h,d),c),c.unstable_sxConfig=ie({},yc,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return $p({sx:d,theme:this})},c}const kN=Fq();function PN(){const t=B7(kN);return t[Gx]||t}var vc={},og={exports:{}},g1;function Vq(){return g1||(g1=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.includes(s))continue;i[s]=n[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(og)),og.exports}const Uq=ts(GW),$q=ts(_8),jq=ts(S8),zq=ts(I8),Bq=ts(U7),Wq=ts(G7);var Wa=EN;Object.defineProperty(vc,"__esModule",{value:!0});var qq=vc.default=iH;vc.shouldForwardProp=jh;vc.systemDefaultTheme=void 0;var xn=Wa(fN()),iy=Wa(Vq()),_1=Jq(Uq),Hq=$q;Wa(jq);Wa(zq);var Gq=Wa(Bq),Kq=Wa(Wq);const Qq=["ownerState"],Yq=["variants"],Xq=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function bN(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(bN=function(r){return r?n:e})(t)}function Jq(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=bN(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Zq(t){return Object.keys(t).length===0}function eH(t){return typeof t=="string"&&t.charCodeAt(0)>96}function jh(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const tH=vc.systemDefaultTheme=(0,Gq.default)(),nH=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function mh({defaultTheme:t,theme:e,themeId:n}){return Zq(e)?t:e[n]||e}function rH(t){return t?(e,n)=>n[t]:null}function zh(t,e){let{ownerState:n}=e,r=(0,iy.default)(e,Qq);const i=typeof t=="function"?t((0,xn.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>zh(s,(0,xn.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,iy.default)(i,Yq);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,xn.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(h=>{(n==null?void 0:n[h])!==l.props[h]&&r[h]!==l.props[h]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,xn.default)({ownerState:n},r,n)):l.style))}),a}return i}function iH(t={}){const{themeId:e,defaultTheme:n=tH,rootShouldForwardProp:r=jh,slotShouldForwardProp:i=jh}=t,s=o=>(0,Kq.default)((0,xn.default)({},o,{theme:mh((0,xn.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,_1.internal_processStyles)(o,D=>D.filter(L=>!(L!=null&&L.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:h,skipSx:d,overridesResolver:p=rH(nH(c))}=a,g=(0,iy.default)(a,Xq),y=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,E=d||!1;let R,v=jh;c==="Root"||c==="root"?v=r:c?v=i:eH(o)&&(v=void 0);const _=(0,_1.default)(o,(0,xn.default)({shouldForwardProp:v,label:R},g)),C=D=>typeof D=="function"&&D.__emotion_real!==D||(0,Hq.isPlainObject)(D)?L=>zh(D,(0,xn.default)({},L,{theme:mh({theme:L.theme,defaultTheme:n,themeId:e})})):D,b=(D,...L)=>{let S=C(D);const w=L?L.map(C):[];l&&p&&w.push(P=>{const x=mh((0,xn.default)({},P,{defaultTheme:n,themeId:e}));if(!x.components||!x.components[l]||!x.components[l].styleOverrides)return null;const I=x.components[l].styleOverrides,K={};return Object.entries(I).forEach(([z,G])=>{K[z]=zh(G,(0,xn.default)({},P,{theme:x}))}),p(P,K)}),l&&!y&&w.push(P=>{var x;const I=mh((0,xn.default)({},P,{defaultTheme:n,themeId:e})),K=I==null||(x=I.components)==null||(x=x[l])==null?void 0:x.variants;return zh({variants:K},(0,xn.default)({},P,{theme:I}))}),E||w.push(s);const A=w.length-L.length;if(Array.isArray(D)&&A>0){const P=new Array(A).fill("");S=[...D,...P],S.raw=[...D.raw,...P]}const k=_(S,...w);return o.muiName&&(k.muiName=o.muiName),k};return _.withConfig&&(b.withConfig=_.withConfig),b}}function sH(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const oH=t=>sH(t)&&t!=="classes",wc=qq({themeId:Gx,defaultTheme:kN,rootShouldForwardProp:oH}),y1=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function uw(t){return Y7(t)}function sy(t,e){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},sy(t,e)}function aH(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,sy(t,e)}const v1={disabled:!1},xN=Ts.createContext(null);var lH=function(e){return e.scrollTop},bl="unmounted",ws="exited",Es="entering",Co="entered",oy="exiting",oi=function(t){aH(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=ws,s.appearStatus=Es):l=Co:r.unmountOnExit||r.mountOnEnter?l=bl:l=ws,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===bl?{status:ws}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Es&&o!==Co&&(s=Es):(o===Es||o===Co)&&(s=oy)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Es){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:eh.findDOMNode(this);o&&lH(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ws&&this.setState({status:bl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[eh.findDOMNode(this),a],c=l[0],h=l[1],d=this.getTimeouts(),p=a?d.appear:d.enter;if(!i&&!o||v1.disabled){this.safeSetState({status:Co},function(){s.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:Es},function(){s.props.onEntering(c,h),s.onTransitionEnd(p,function(){s.safeSetState({status:Co},function(){s.props.onEntered(c,h)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:eh.findDOMNode(this);if(!s||v1.disabled){this.safeSetState({status:ws},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:oy},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ws},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:eh.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===bl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=pn(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ts.createElement(xN.Provider,{value:null},typeof o=="function"?o(i,a):Ts.cloneElement(Ts.Children.only(o),a))},e}(Ts.Component);oi.contextType=xN;oi.propTypes={};function Eo(){}oi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Eo,onEntering:Eo,onEntered:Eo,onExit:Eo,onExiting:Eo,onExited:Eo};oi.UNMOUNTED=bl;oi.EXITED=ws;oi.ENTERING=Es;oi.ENTERED=Co;oi.EXITING=oy;const uH=t=>t.scrollTop;function w1(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}const cH=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ay(t){return"scale(".concat(t,", ").concat(t**2,")")}const hH={entering:{opacity:1,transform:ay(1)},entered:{opacity:1,transform:"none"}},ag=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),NN=N.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:h,onExit:d,onExited:p,onExiting:g,style:y,timeout:E="auto",TransitionComponent:R=oi}=e,v=pn(e,cH),_=Hx(),C=N.useRef(),b=PN(),D=N.useRef(null),L=B0(D,s.ref,n),S=z=>G=>{if(z){const de=D.current;G===void 0?z(de):z(de,G)}},w=S(h),A=S((z,G)=>{uH(z);const{duration:de,delay:F,easing:J}=w1({style:y,timeout:E,easing:o},{mode:"enter"});let ee;E==="auto"?(ee=b.transitions.getAutoHeightDuration(z.clientHeight),C.current=ee):ee=de,z.style.transition=[b.transitions.create("opacity",{duration:ee,delay:F}),b.transitions.create("transform",{duration:ag?ee:ee*.666,delay:F,easing:J})].join(","),l&&l(z,G)}),k=S(c),P=S(g),x=S(z=>{const{duration:G,delay:de,easing:F}=w1({style:y,timeout:E,easing:o},{mode:"exit"});let J;E==="auto"?(J=b.transitions.getAutoHeightDuration(z.clientHeight),C.current=J):J=G,z.style.transition=[b.transitions.create("opacity",{duration:J,delay:de}),b.transitions.create("transform",{duration:ag?J:J*.666,delay:ag?de:de||J*.333,easing:F})].join(","),z.style.opacity=0,z.style.transform=ay(.75),d&&d(z)}),I=S(p),K=z=>{E==="auto"&&_.start(C.current||0,z),r&&r(D.current,z)};return Y.jsx(R,ie({appear:i,in:a,nodeRef:D,onEnter:A,onEntered:k,onEntering:w,onExit:x,onExited:I,onExiting:P,addEndListener:K,timeout:E==="auto"?null:E},v,{children:(z,G)=>N.cloneElement(s,ie({style:ie({opacity:0,transform:ay(.75),visibility:z==="exited"&&!a?"hidden":void 0},hH[z],y,s.props.style),ref:L},G))}))});NN.muiSupportAuto=!0;function dH(t){return vp("MuiPaper",t)}G0("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const fH=["className","component","elevation","square","variant"],pH=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&"elevation".concat(n)]};return z0(s,dH,i)},mH=wc("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e["elevation".concat(n.elevation)]]}})(({theme:t,ownerState:e})=>{var n;return ie({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:"1px solid ".concat((t.vars||t).palette.divider)},e.variant==="elevation"&&ie({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:"linear-gradient(".concat(u1("#fff",y1(e.elevation)),", ").concat(u1("#fff",y1(e.elevation)),")")},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),gH=N.forwardRef(function(e,n){const r=uw({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=pn(r,fH),h=ie({},r,{component:s,elevation:o,square:a,variant:l}),d=pH(h);return Y.jsx(mH,ie({as:s,ownerState:h,className:Zd(d.root,i),ref:n},c))});function _H(t){return vp("MuiSnackbarContent",t)}G0("MuiSnackbarContent",["root","message","action"]);const yH=["action","className","message","role"],vH=t=>{const{classes:e}=t;return z0({root:["root"],action:["action"],message:["message"]},_H,e)},wH=wc(gH,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=tq(t.palette.background.default,e);return ie({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),EH=wc("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),TH=wc("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),IH=N.forwardRef(function(e,n){const r=uw({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:o,role:a="alert"}=r,l=pn(r,yH),c=r,h=vH(c);return Y.jsxs(wH,ie({role:a,square:!0,elevation:6,className:Zd(h.root,s),ownerState:c,ref:n},l,{children:[Y.jsx(EH,{className:h.message,ownerState:c,children:o}),i?Y.jsx(TH,{className:h.action,ownerState:c,children:i}):null]}))});function SH(t){return vp("MuiSnackbar",t)}G0("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const CH=["onEnter","onExited"],AH=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],RH=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root","anchorOrigin".concat(Xs(n.vertical)).concat(Xs(n.horizontal))]};return z0(r,SH,e)},E1=wc("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["anchorOrigin".concat(Xs(n.anchorOrigin.vertical)).concat(Xs(n.anchorOrigin.horizontal))]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return ie({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:ie({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),kH=N.forwardRef(function(e,n){const r=uw({props:e,name:"MuiSnackbar"}),i=PN(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:h,className:d,ClickAwayListenerProps:p,ContentProps:g,disableWindowBlurListener:y=!1,message:E,open:R,TransitionComponent:v=NN,transitionDuration:_=s,TransitionProps:{onEnter:C,onExited:b}={}}=r,D=pn(r.TransitionProps,CH),L=pn(r,AH),S=ie({},r,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:c,disableWindowBlurListener:y,TransitionComponent:v,transitionDuration:_}),w=RH(S),{getRootProps:A,onClickAway:k}=D8(ie({},S)),[P,x]=N.useState(!0),I=g8({elementType:E1,getSlotProps:A,externalForwardedProps:L,ownerState:S,additionalProps:{ref:n},className:[w.root,d]}),K=G=>{x(!0),b&&b(G)},z=(G,de)=>{x(!1),C&&C(G,de)};return!R&&P?null:Y.jsx(L8,ie({onClickAway:k},p,{children:Y.jsx(E1,ie({},I,{children:Y.jsx(v,ie({appear:!0,in:R,timeout:_,direction:a==="top"?"down":"up",onEnter:z,onExited:K},D,{children:h||Y.jsx(IH,ie({message:E,action:o},g))}))}))}))});function PH(){const t=L0(),[e]=u8(nx),{user:n,loading:r,error:i,popup:s}=ip(o=>o.user);return N.useEffect(()=>{if(e){const o={uid:e.uid,displayName:e.displayName,email:e.email,photoUrl:e.photoURL};console.log("dataToSet: ",e),t(WB(o))}},[e,t]),N.useEffect(()=>{if(!n)return;(async()=>{(await V3(A_(Zn,"games"),D3(M3(LI(uh("player1","==",n.uid),uh("player2","==",n.uid)),LI(uh("status","==","waiting"),uh("status","==","ongoing")))))).forEach(l=>{$3(Fr(Zn,"games",l.id))})})()},[n]),Y.jsxs(Y.Fragment,{children:[Y.jsx(kH,{open:s,autoHideDuration:6e3,onAnimationEnd:()=>t(zB("")),onClose:()=>t(BB(!1)),message:i}),Y.jsx("div",{className:"wrapper",children:Y.jsx(i8,{})})]})}const bH=EB({reducer:{user:qB},devTools:!0});lg.createRoot(document.getElementById("root")).render(Y.jsx(vz,{store:bH,children:Y.jsx(PH,{})}));export{NH as __vite_legacy_guard};
