System.register([],(function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");function t(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}e.textContent='.wrapper{width:100%;height:100vh;display:flex;align-items:center;justify-content:center}:root{--board-width: 90%;--board-height: 90%}.rotate{transform:rotate(180deg)}.noClickOverlay{height:var(--board-height);aspect-ratio:1;border-radius:10px}.board{height:var(--board-height);background-image:url(https://assets-themes.chess.com/image/9rdwe/200.png);object-fit:scale-down;background-size:100%;background-repeat:no-repeat;position:relative;aspect-ratio:1;box-shadow:inset 0 0 10px rgba(0,0,0,.5),0 0 15px rgba(0,0,0,.5);border-radius:10px}@media (max-width: 880px){.board:not(.noMediaQuery){height:unset;width:var(--board-width)}.noClickOverlay:not(.noMediaQuery){height:unset;width:var(--board-width)}}.board-grid{position:absolute;top:0;bottom:0;right:0;left:0;display:flex;flex-wrap:wrap}.piece{background-size:100%;width:12.5%;height:12.5%;cursor:pointer;position:absolute;left:0;top:0;transition:all .5s ease}.possible-move{background-color:rgba(0,0,255,.31);background-size:100%;width:12.5%;height:12.5%;cursor:pointer;position:absolute;left:0;top:0;transition:all .5s ease}.capturable{background-color:rgba(255,0,0,.31);background-size:100%;width:12.5%;height:12.5%;cursor:pointer;position:absolute;left:0;top:0;transition:all .5s ease}.br{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/br.png)}.bb{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/bb.png)}.bn{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/bn.png)}.bk{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/bk.png)}.bq{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/bq.png)}.bp{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/bp.png)}.wr{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/wr.png)}.wb{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/wb.png)}.wn{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/wn.png)}.wk{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/wk.png)}.wq{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/wq.png)}.wp{background-image:url(https://assets-themes.chess.com/image/ejgfv/150/wp.png)}.selected-piece{transition:all .5s ease;background-color:rgba(255,255,0,.294)}.square-64{transform:translate(700%,700%)}.rotate .square-64{transform:translate(700%,700%) rotate(180deg)}.square-63{transform:translate(600%,700%)}.rotate .square-63{transform:translate(600%,700%) rotate(180deg)}.square-62{transform:translate(500%,700%)}.rotate .square-62{transform:translate(500%,700%) rotate(180deg)}.square-61{transform:translate(400%,700%)}.rotate .square-61{transform:translate(400%,700%) rotate(180deg)}.square-60{transform:translate(300%,700%)}.rotate .square-60{transform:translate(300%,700%) rotate(180deg)}.square-59{transform:translate(200%,700%)}.rotate .square-59{transform:translate(200%,700%) rotate(180deg)}.square-58{transform:translate(100%,700%)}.rotate .square-58{transform:translate(100%,700%) rotate(180deg)}.square-57{transform:translateY(700%)}.rotate .square-57{transform:translateY(700%) rotate(180deg)}.square-56{transform:translate(700%,600%)}.rotate .square-56{transform:translate(700%,600%) rotate(180deg)}.square-55{transform:translate(600%,600%)}.rotate .square-55{transform:translate(600%,600%) rotate(180deg)}.square-54{transform:translate(500%,600%)}.rotate .square-54{transform:translate(500%,600%) rotate(180deg)}.square-53{transform:translate(400%,600%)}.rotate .square-53{transform:translate(400%,600%) rotate(180deg)}.square-52{transform:translate(300%,600%)}.rotate .square-52{transform:translate(300%,600%) rotate(180deg)}.square-51{transform:translate(200%,600%)}.rotate .square-51{transform:translate(200%,600%) rotate(180deg)}.square-50{transform:translate(100%,600%)}.rotate .square-50{transform:translate(100%,600%) rotate(180deg)}.square-49{transform:translateY(600%)}.rotate .square-49{transform:translateY(600%) rotate(180deg)}.square-48{transform:translate(700%,500%)}.rotate .square-48{transform:translate(700%,500%) rotate(180deg)}.square-47{transform:translate(600%,500%)}.rotate .square-47{transform:translate(600%,500%) rotate(180deg)}.square-46{transform:translate(500%,500%)}.rotate .square-46{transform:translate(500%,500%) rotate(180deg)}.square-45{transform:translate(400%,500%)}.rotate .square-45{transform:translate(400%,500%) rotate(180deg)}.square-44{transform:translate(300%,500%)}.rotate .square-44{transform:translate(300%,500%) rotate(180deg)}.square-43{transform:translate(200%,500%)}.rotate .square-43{transform:translate(200%,500%) rotate(180deg)}.square-42{transform:translate(100%,500%)}.rotate .square-42{transform:translate(100%,500%) rotate(180deg)}.square-41{transform:translateY(500%)}.rotate .square-41{transform:translateY(500%) rotate(180deg)}.square-40{transform:translate(700%,400%)}.rotate .square-40{transform:translate(700%,400%) rotate(180deg)}.square-39{transform:translate(600%,400%)}.rotate .square-39{transform:translate(600%,400%) rotate(180deg)}.square-38{transform:translate(500%,400%)}.rotate .square-38{transform:translate(500%,400%) rotate(180deg)}.square-37{transform:translate(400%,400%)}.rotate .square-37{transform:translate(400%,400%) rotate(180deg)}.square-36{transform:translate(300%,400%)}.rotate .square-36{transform:translate(300%,400%) rotate(180deg)}.square-35{transform:translate(200%,400%)}.rotate .square-35{transform:translate(200%,400%) rotate(180deg)}.square-34{transform:translate(100%,400%)}.rotate .square-34{transform:translate(100%,400%) rotate(180deg)}.square-33{transform:translateY(400%)}.rotate .square-33{transform:translateY(400%) rotate(180deg)}.square-32{transform:translate(700%,300%)}.rotate .square-32{transform:translate(700%,300%) rotate(180deg)}.square-31{transform:translate(600%,300%)}.rotate .square-31{transform:translate(600%,300%) rotate(180deg)}.square-30{transform:translate(500%,300%)}.rotate .square-30{transform:translate(500%,300%) rotate(180deg)}.square-29{transform:translate(400%,300%)}.rotate .square-29{transform:translate(400%,300%) rotate(180deg)}.square-28{transform:translate(300%,300%)}.rotate .square-28{transform:translate(300%,300%) rotate(180deg)}.square-27{transform:translate(200%,300%)}.rotate .square-27{transform:translate(200%,300%) rotate(180deg)}.square-26{transform:translate(100%,300%)}.rotate .square-26{transform:translate(100%,300%) rotate(180deg)}.square-25{transform:translateY(300%)}.rotate .square-25{transform:translateY(300%) rotate(180deg)}.square-24{transform:translate(700%,200%)}.rotate .square-24{transform:translate(700%,200%) rotate(180deg)}.square-23{transform:translate(600%,200%)}.rotate .square-23{transform:translate(600%,200%) rotate(180deg)}.square-22{transform:translate(500%,200%)}.rotate .square-22{transform:translate(500%,200%) rotate(180deg)}.square-21{transform:translate(400%,200%)}.rotate .square-21{transform:translate(400%,200%) rotate(180deg)}.square-20{transform:translate(300%,200%)}.rotate .square-20{transform:translate(300%,200%) rotate(180deg)}.square-19{transform:translate(200%,200%)}.rotate .square-19{transform:translate(200%,200%) rotate(180deg)}.square-18{transform:translate(100%,200%)}.rotate .square-18{transform:translate(100%,200%) rotate(180deg)}.square-17{transform:translateY(200%)}.rotate .square-17{transform:translateY(200%) rotate(180deg)}.square-16{transform:translate(700%,100%)}.rotate .square-16{transform:translate(700%,100%) rotate(180deg)}.square-15{transform:translate(600%,100%)}.rotate .square-15{transform:translate(600%,100%) rotate(180deg)}.square-14{transform:translate(500%,100%)}.rotate .square-14{transform:translate(500%,100%) rotate(180deg)}.square-13{transform:translate(400%,100%)}.rotate .square-13{transform:translate(400%,100%) rotate(180deg)}.square-12{transform:translate(300%,100%)}.rotate .square-12{transform:translate(300%,100%) rotate(180deg)}.square-11{transform:translate(200%,100%)}.rotate .square-11{transform:translate(200%,100%) rotate(180deg)}.square-10{transform:translate(100%,100%)}.rotate .square-10{transform:translate(100%,100%) rotate(180deg)}.square-9{transform:translateY(100%)}.rotate .square-9{transform:translateY(100%) rotate(180deg)}.square-8{transform:translate(700%)}.rotate .square-8{transform:translate(700%) rotate(180deg)}.square-7{transform:translate(600%)}.rotate .square-7{transform:translate(600%) rotate(180deg)}.square-6{transform:translate(500%)}.rotate .square-6{transform:translate(500%) rotate(180deg)}.square-5{transform:translate(400%)}.rotate .square-5{transform:translate(400%) rotate(180deg)}.square-4{transform:translate(300%)}.rotate .square-4{transform:translate(300%) rotate(180deg)}.square-3{transform:translate(200%)}.rotate .square-3{transform:translate(200%) rotate(180deg)}.square-2{transform:translate(100%)}.rotate .square-2{transform:translate(100%) rotate(180deg)}.square-1{transform:translate(0)}.rotate .square-1{transform:translate(0) rotate(180deg)}.check-wk .piece.wk,.check-bk .piece.bk{background-color:rgba(255,0,0,.608)}.promote>div{width:100%;height:25.42%;background-size:100%;left:0;top:0;cursor:pointer;display:flex}.promote{width:0;height:0;opacity:0;transition:opacity .25s ease;position:absolute;box-shadow:inset 0 0 10px rgba(0,0,0,0),0 0 15px rgba(0,0,0,.5);background-color:#fff;z-index:1;top:0;display:flex;flex-direction:column;flex:0 0 auto;flex-wrap:nowrap}.promote-bp{opacity:1;height:55%;top:45%;width:12.5%;flex-direction:column-reverse}.rotate .promote-bp{flex-direction:column}.rotate .promote-wp{flex-direction:column-reverse}.promote-wp{opacity:1;height:55%;top:0;width:12.5%}.promotion-close-btn{height:10%!important;width:100%;background-color:#d5d5d5;color:gray;display:flex;justify-content:center;align-items:center}.hompageButton{border:none;border-radius:.5rem;padding:20px;font-size:20px;font-weight:700;margin-bottom:10px;width:100%;min-width:200px;max-width:350px;transition:all .5s ease;white-space:nowrap}.playOnline{background-color:#556e3d}.homepageMenu{display:flex;justify-content:center;align-items:center;flex-direction:column}.homepageMenu h1{font-size:5em;margin-bottom:25px;text-align:center;white-space:nowrap}.playOnline:hover{background-color:#739552}.playOffline:hover{background-color:#8b8b8b}.homepageOuterDiv{display:flex;justify-content:center;align-items:center;flex-wrap:wrap-reverse!important}.boardOuterDiv{height:50%;position:relative;transition:all .5s ease}@media (max-width: 576px){.homepageMenu h1{font-size:3rem;margin-bottom:15px}.hompageButton{font-size:14px}.boardOuterDiv{height:38%}.homepageOuterDiv{flex-direction:column-reverse}}.Container{height:100vh;background:url(https://wallpapercave.com/wp/6SLzBEY.jpg) no-repeat left top;background-size:cover;overflow:hidden;display:flex;flex-flow:column wrap;justify-content:center;align-items:center}.text h1{color:#011718;margin-top:-200px;font-size:15em;text-align:center;text-shadow:-5px 5px 0px rgba(0,0,0,.7),-10px 10px 0px rgba(0,0,0,.4),-15px 15px 0px rgba(0,0,0,.2);font-family:monospace;font-weight:700}.text h2{color:#000;font-size:5em;text-shadow:-5px 5px 0px rgba(0,0,0,.7);text-align:center;margin-top:-75px;font-family:monospace;font-weight:700}.text h3{color:#fff;margin-left:30px;font-size:2em;text-shadow:-5px 5px 0px rgba(0,0,0,.7);margin-top:-10px;font-family:monospace;font-weight:700}.torch{margin:-150px 0 0 -150px;width:200px;height:200px;box-shadow:0 0 0 9999em rgba(0,0,0,.97);opacity:1;border-radius:50%;position:fixed;background:rgba(0,0,0,.3)}.torch:after{content:"";display:block;border-radius:50%;width:100%;height:100%;top:0;left:0;box-shadow:inset 0 0 40px 2px #000,0 0 20px 4px rgba(13,13,10,.2)}:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:rgba(255,255,255,.87);background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#root{background-color:#242424}\n',document.head.appendChild(e);var i={exports:{}},s={},o={exports:{}},a={},l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator,w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function E(e,t,n){this.props=e,this.context=t,this.refs=S,this.updater=n||w}function k(){}function C(e,t,n){this.props=e,this.context=t,this.refs=S,this.updater=n||w}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=E.prototype;var T=C.prototype=new k;T.constructor=C,b(T,E.prototype),T.isPureReactComponent=!0;var I=Array.isArray,x=Object.prototype.hasOwnProperty,N={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,i={},s=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&!P.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:l,type:e,key:s,ref:o,props:i,_owner:N.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var O=/\/+/g;function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var o=!1;if(null===e)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case l:case u:o=!0}}if(o)return i=i(o=e),e=""===r?"."+D(o,0):r,I(i)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),M(i,t,n,"",(function(e){return e}))):null!=i&&(R(i)&&(i=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",I(e))for(var a=0;a<e.length;a++){var c=r+D(s=e[a],a);o+=M(s,t,n,c,i)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),a=0;!(s=e.next()).done;)o+=M(s=s.value,t,n,c=r+D(s,a++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function L(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},U={transition:null},q={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:U,ReactCurrentOwner:N};function z(){throw Error("act(...) is not supported in production builds of React.")}a.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},a.Component=E,a.Fragment=c,a.Profiler=d,a.PureComponent=C,a.StrictMode=h,a.Suspense=g,a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,a.act=z,a.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=b({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)x.call(t,u)&&!P.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==a?a[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:l,type:e.type,key:i,ref:s,props:r,_owner:o}},a.createContext=function(e){return(e={$$typeof:p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},a.createElement=A,a.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},a.createRef=function(){return{current:null}},a.forwardRef=function(e){return{$$typeof:m,render:e}},a.isValidElement=R,a.lazy=function(e){return{$$typeof:v,_payload:{_status:-1,_result:e},_init:F}},a.memo=function(e,t){return{$$typeof:y,type:e,compare:void 0===t?null:t}},a.startTransition=function(e){var t=U.transition;U.transition={};try{e()}finally{U.transition=t}},a.unstable_act=z,a.useCallback=function(e,t){return j.current.useCallback(e,t)},a.useContext=function(e){return j.current.useContext(e)},a.useDebugValue=function(){},a.useDeferredValue=function(e){return j.current.useDeferredValue(e)},a.useEffect=function(e,t){return j.current.useEffect(e,t)},a.useId=function(){return j.current.useId()},a.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},a.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},a.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},a.useMemo=function(e,t){return j.current.useMemo(e,t)},a.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},a.useRef=function(e){return j.current.useRef(e)},a.useState=function(e){return j.current.useState(e)},a.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},a.useTransition=function(){return j.current.useTransition()},a.version="18.3.1",o.exports=a;var $=o.exports;const V=n($),B=t({__proto__:null,default:V},[$]);
/**
       * @license React
       * react-jsx-runtime.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */
var W=$,H=Symbol.for("react.element"),K=Symbol.for("react.fragment"),G=Object.prototype.hasOwnProperty,Q=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,n){var r,i={},s=null,o=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)G.call(t,r)&&!Y.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:H,type:e,key:s,ref:o,props:i,_owner:Q.current}}s.Fragment=K,s.jsx=X,s.jsxs=X,i.exports=s;var J=i.exports,Z={},ee={exports:{}},te={},ne={exports:{}},re={};
/**
       * @license React
       * scheduler.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>i(l,n))u<s&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<s&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else{if(!(i.startTime<=e))break;r(u),i.sortIndex=i.expirationTime,t(l,i)}i=n(u)}}function w(e){if(m=!1,_(e),!p)if(null!==n(l))p=!0,R(b);else{var t=n(u);null!==t&&O(w,t.startTime-e)}}function b(t,i){p=!1,m&&(m=!1,y(C),C=-1),f=!0;var s=d;try{for(_(i),h=n(l);null!==h&&(!(h.expirationTime>i)||t&&!x());){var o=h.callback;if("function"==typeof o){h.callback=null,d=h.priorityLevel;var a=o(h.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?h.callback=a:h===n(l)&&r(l),_(i)}else r(l);h=n(l)}if(null!==h)var c=!0;else{var g=n(u);null!==g&&O(w,g.startTime-i),c=!1}return c}finally{h=null,d=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,C=-1,T=5,I=-1;function x(){return!(e.unstable_now()-I<T)}function N(){if(null!==k){var t=e.unstable_now();I=t;var n=!0;try{n=k(!0,t)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"==typeof v)S=function(){v(N)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=N,S=function(){A.postMessage(null)}}else S=function(){g(N,0)};function R(e){k=e,E||(E=!0,S())}function O(t,n){C=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,R(b))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(r.sortIndex=s,t(u,r),null===n(l)&&r===n(u)&&(m?(y(C),C=-1):m=!0,O(w,s-o))):(r.sortIndex=a,t(l,r),p||f||(p=!0,R(b))),r},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(re),ne.exports=re;var ie=ne.exports,se=$,oe=ie;
/**
       * @license React
       * react-dom.production.min.js
       *
       * Copyright (c) Facebook, Inc. and its affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var le=new Set,ue={};function ce(e,t){he(e,t),he(e+"Capture",t)}function he(e,t){for(ue[e]=t,e=0;e<t.length;e++)le.add(t[e])}var de=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),fe=Object.prototype.hasOwnProperty,pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,me={},ge={};function ye(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ve[e]=new ye(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ve[t]=new ye(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ve[e]=new ye(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ve[e]=new ye(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ve[e]=new ye(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ve[e]=new ye(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){ve[e]=new ye(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){ve[e]=new ye(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){ve[e]=new ye(e,5,!1,e.toLowerCase(),null,!1,!1)}));var _e=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function be(e,t,n,r){var i=ve.hasOwnProperty(t)?ve[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!fe.call(ge,e)||!fe.call(me,e)&&(pe.test(e)?ge[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(_e,we);ve[t]=new ye(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(_e,we);ve[t]=new ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(_e,we);ve[t]=new ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){ve[e]=new ye(e,1,!1,e.toLowerCase(),null,!1,!1)})),ve.xlinkHref=new ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){ve[e]=new ye(e,1,!1,e.toLowerCase(),null,!0,!0)}));var Se=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),ke=Symbol.for("react.portal"),Ce=Symbol.for("react.fragment"),Te=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Me=Symbol.for("react.offscreen"),Le=Symbol.iterator;function Fe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Le&&e[Le]||e["@@iterator"])?e:null}var je,Ue=Object.assign;function qe(e){if(void 0===je)try{throw Error()}catch(yj){var t=yj.stack.trim().match(/\n( *(at )?)/);je=t&&t[1]||""}return"\n"+je+e}var ze=!1;function $e(e,t){if(!e||ze)return"";ze=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(kj){var r=kj}Reflect.construct(e,[],t)}else{try{t.call()}catch(kj){r=kj}e.call(t.prototype)}else{try{throw Error()}catch(kj){r=kj}e()}}catch(kj){if(kj&&r&&"string"==typeof kj.stack){for(var i=kj.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{ze=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qe(e):""}function Ve(e){switch(e.tag){case 5:return qe(e.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return e=$e(e.type,!1);case 11:return e=$e(e.type.render,!1);case 1:return e=$e(e.type,!0);default:return""}}function Be(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ce:return"Fragment";case ke:return"Portal";case Ie:return"Profiler";case Te:return"StrictMode";case Ae:return"Suspense";case Re:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ne:return(e.displayName||"Context")+".Consumer";case xe:return(e._context.displayName||"Context")+".Provider";case Pe:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Oe:return null!==(t=e.displayName||null)?t:Be(e.type)||"Memo";case De:t=e._payload,e=e._init;try{return Be(e(t))}catch(yj){}}return null}function We(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(t);case 8:return t===Te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function He(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ge(e){e._valueTracker||(e._valueTracker=function(e){var t=Ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Qe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ye(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(gj){return e.body}}function Xe(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Je(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=He(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ze(e,t){null!=(t=t.checked)&&be(e,"checked",t,!1)}function et(e,t){Ze(e,t);var n=He(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?nt(e,t.type,n):t.hasOwnProperty("defaultValue")&&nt(e,t.type,He(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function tt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function nt(e,t,n){"number"===t&&Ye(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rt=Array.isArray;function it(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+He(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function st(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ae(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ot(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ae(92));if(rt(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:He(n)}}function at(e,t){var n=He(t.value),r=He(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function lt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ut(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ut(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ht,dt,ft=(dt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ht.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return dt(e,t)}))}:dt);function pt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];function yt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||mt.hasOwnProperty(e)&&mt[e]?(""+t).trim():t+"px"}function vt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=yt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(mt).forEach((function(e){gt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mt[t]=mt[e]}))}));var _t=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wt(e,t){if(t){if(_t[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ae(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ae(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ae(62))}}function bt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function Et(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Ct=null,Tt=null;function It(e){if(e=bs(e)){if("function"!=typeof kt)throw Error(ae(280));var t=e.stateNode;t&&(t=Es(t),kt(e.stateNode,e.type,t))}}function xt(e){Ct?Tt?Tt.push(e):Tt=[e]:Ct=e}function Nt(){if(Ct){var e=Ct,t=Tt;if(Tt=Ct=null,It(e),t)for(e=0;e<t.length;e++)It(t[e])}}function Pt(e,t){return e(t)}function At(){}var Rt=!1;function Ot(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return Pt(e,t,n)}finally{Rt=!1,(null!==Ct||null!==Tt)&&(At(),Nt())}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=Es(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ae(231,t,typeof n));return n}var Mt=!1;if(de)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Mt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(dt){Mt=!1}function Ft(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(Cj){this.onError(Cj)}}var jt=!1,Ut=null,qt=!1,zt=null,$t={onError:function(e){jt=!0,Ut=e}};function Vt(e,t,n,r,i,s,o,a,l){jt=!1,Ut=null,Ft.apply($t,arguments)}function Bt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Wt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ht(e){if(Bt(e)!==e)throw Error(ae(188))}function Kt(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Bt(e)))throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ht(i),e;if(s===r)return Ht(i),t;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(3!==n.tag)throw Error(ae(188));return n.stateNode.current===n?e:t}(e),null!==e?Gt(e):null}function Gt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Gt(e);if(null!==t)return t;e=e.sibling}return null}var Qt=oe.unstable_scheduleCallback,Yt=oe.unstable_cancelCallback,Xt=oe.unstable_shouldYield,Jt=oe.unstable_requestPaint,Zt=oe.unstable_now,en=oe.unstable_getCurrentPriorityLevel,tn=oe.unstable_ImmediatePriority,nn=oe.unstable_UserBlockingPriority,rn=oe.unstable_NormalPriority,sn=oe.unstable_LowPriority,on=oe.unstable_IdlePriority,an=null,ln=null,un=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(cn(e)/hn|0)|0},cn=Math.log,hn=Math.LN2,dn=64,fn=4194304;function pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=pn(a):0!=(s&=o)&&(r=pn(s))}else 0!=(o=n&~i)?r=pn(o):0!==s&&(r=pn(s));if(0===r)return 0;if(0!==t&&t!==r&&!(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-un(t)),r|=e[n],t&=~i;return r}function gn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function yn(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vn(){var e=dn;return!(4194240&(dn<<=1))&&(dn=64),e}function _n(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-un(t)]=n}function bn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-un(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Sn=0;function En(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var kn,Cn,Tn,In,xn,Nn=!1,Pn=[],An=null,Rn=null,On=null,Dn=new Map,Mn=new Map,Ln=[],Fn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jn(e,t){switch(e){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(t.pointerId)}}function Un(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=bs(t))&&Cn(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function qn(e){var t=ws(e.target);if(null!==t){var n=Bt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Wt(n)))return e.blockedOn=t,void xn(e.priority,(function(){Tn(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Cn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);St=r,n.target.dispatchEvent(r),St=null,t.shift()}return!0}function $n(e,t,n){zn(e)&&n.delete(t)}function Vn(){Nn=!1,null!==An&&zn(An)&&(An=null),null!==Rn&&zn(Rn)&&(Rn=null),null!==On&&zn(On)&&(On=null),Dn.forEach($n),Mn.forEach($n)}function Bn(e,t){e.blockedOn===t&&(e.blockedOn=null,Nn||(Nn=!0,oe.unstable_scheduleCallback(oe.unstable_NormalPriority,Vn)))}function Wn(e){function t(t){return Bn(t,e)}if(0<Pn.length){Bn(Pn[0],e);for(var n=1;n<Pn.length;n++){var r=Pn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==An&&Bn(An,e),null!==Rn&&Bn(Rn,e),null!==On&&Bn(On,e),Dn.forEach(t),Mn.forEach(t),n=0;n<Ln.length;n++)(r=Ln[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&null===(n=Ln[0]).blockedOn;)qn(n),null===n.blockedOn&&Ln.shift()}var Hn=Se.ReactCurrentBatchConfig,Kn=!0;function Gn(e,t,n,r){var i=Sn,s=Hn.transition;Hn.transition=null;try{Sn=1,Yn(e,t,n,r)}finally{Sn=i,Hn.transition=s}}function Qn(e,t,n,r){var i=Sn,s=Hn.transition;Hn.transition=null;try{Sn=4,Yn(e,t,n,r)}finally{Sn=i,Hn.transition=s}}function Yn(e,t,n,r){if(Kn){var i=Jn(e,t,n,r);if(null===i)Hi(e,t,r,Xn,n),jn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return An=Un(An,e,t,n,r,i),!0;case"dragenter":return Rn=Un(Rn,e,t,n,r,i),!0;case"mouseover":return On=Un(On,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dn.set(s,Un(Dn.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mn.set(s,Un(Mn.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jn(e,r),4&t&&-1<Fn.indexOf(e)){for(;null!==i;){var s=bs(i);if(null!==s&&kn(s),null===(s=Jn(e,t,n,r))&&Hi(e,t,r,Xn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hi(e,t,r,null,n)}}var Xn=null;function Jn(e,t,n,r){if(Xn=null,null!==(e=ws(e=Et(r))))if(null===(t=Bt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Wt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xn=e,null}function Zn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(en()){case tn:return 1;case nn:return 4;case rn:case sn:return 16;case on:return 536870912;default:return 16}default:return 16}}var er=null,tr=null,nr=null;function rr(){if(nr)return nr;var e,t,n=tr,r=n.length,i="value"in er?er.value:er.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return nr=i.slice(e,1<t?1-t:void 0)}function ir(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sr(){return!0}function or(){return!1}function ar(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sr:or,this.isPropagationStopped=or,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),t}var lr,ur,cr,hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=ar(hr),fr=Ue({},hr,{view:0,detail:0}),pr=ar(fr),mr=Ue({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&"mousemove"===e.type?(lr=e.screenX-cr.screenX,ur=e.screenY-cr.screenY):ur=lr=0,cr=e),lr)},movementY:function(e){return"movementY"in e?e.movementY:ur}}),gr=ar(mr),yr=ar(Ue({},mr,{dataTransfer:0})),vr=ar(Ue({},fr,{relatedTarget:0})),_r=ar(Ue({},hr,{animationName:0,elapsedTime:0,pseudoElement:0})),wr=Ue({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=ar(wr),Sr=ar(Ue({},hr,{data:0})),Er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Ir(){return Tr}var xr=Ue({},fr,{key:function(e){if(e.key){var t=Er[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ir(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?ir(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ir(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nr=ar(xr),Pr=ar(Ue({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=ar(Ue({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir})),Rr=ar(Ue({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=Ue({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=ar(Or),Mr=[9,13,27,32],Lr=de&&"CompositionEvent"in window,Fr=null;de&&"documentMode"in document&&(Fr=document.documentMode);var jr=de&&"TextEvent"in window&&!Fr,Ur=de&&(!Lr||Fr&&8<Fr&&11>=Fr),qr=String.fromCharCode(32),zr=!1;function $r(e,t){switch(e){case"keyup":return-1!==Mr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1,Wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wr[e.type]:"textarea"===t}function Kr(e,t,n,r){xt(r),0<(t=Gi(t,"onChange")).length&&(n=new dr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gr=null,Qr=null;function Yr(e){qi(e,0)}function Xr(e){if(Qe(Ss(e)))return e}function Jr(e,t){if("change"===e)return t}var Zr=!1;if(de){var ei;if(de){var ti="oninput"in document;if(!ti){var ni=document.createElement("div");ni.setAttribute("oninput","return;"),ti="function"==typeof ni.oninput}ei=ti}else ei=!1;Zr=ei&&(!document.documentMode||9<document.documentMode)}function ri(){Gr&&(Gr.detachEvent("onpropertychange",ii),Qr=Gr=null)}function ii(e){if("value"===e.propertyName&&Xr(Qr)){var t=[];Kr(t,Qr,e,Et(e)),Ot(Yr,t)}}function si(e,t,n){"focusin"===e?(ri(),Qr=n,(Gr=t).attachEvent("onpropertychange",ii)):"focusout"===e&&ri()}function oi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Qr)}function ai(e,t){if("click"===e)return Xr(t)}function li(e,t){if("input"===e||"change"===e)return Xr(t)}var ui="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ci(e,t){if(ui(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fe.call(t,i)||!ui(e[i],t[i]))return!1}return!0}function hi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var n,r=hi(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hi(r)}}function fi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pi(){for(var e=window,t=Ye();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(vj){n=!1}if(!n)break;t=Ye((e=t.contentWindow).document)}return t}function mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gi(e){var t=pi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fi(n.ownerDocument.documentElement,n)){if(null!==r&&mi(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=di(n,s);var o=di(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yi=de&&"documentMode"in document&&11>=document.documentMode,vi=null,_i=null,wi=null,bi=!1;function Si(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==vi||vi!==Ye(r)||(r="selectionStart"in(r=vi)&&mi(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wi&&ci(wi,r)||(wi=r,0<(r=Gi(_i,"onSelect")).length&&(t=new dr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vi)))}function Ei(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},Ci={},Ti={};function Ii(e){if(Ci[e])return Ci[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ti)return Ci[e]=n[t];return e}de&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var xi=Ii("animationend"),Ni=Ii("animationiteration"),Pi=Ii("animationstart"),Ai=Ii("transitionend"),Ri=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){Ri.set(e,t),ce(t,[e])}for(var Mi=0;Mi<Oi.length;Mi++){var Li=Oi[Mi];Di(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Di(xi,"onAnimationEnd"),Di(Ni,"onAnimationIteration"),Di(Pi,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Ai,"onTransitionEnd"),he("onMouseEnter",["mouseout","mouseover"]),he("onMouseLeave",["mouseout","mouseover"]),he("onPointerEnter",["pointerout","pointerover"]),he("onPointerLeave",["pointerout","pointerover"]),ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fi));function Ui(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,a,l){if(Vt.apply(this,arguments),jt){if(!jt)throw Error(ae(198));var u=Ut;jt=!1,Ut=null,qt||(qt=!0,zt=u)}}(r,t,void 0,e),e.currentTarget=null}function qi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ui(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ui(i,a,u),s=l}}}if(qt)throw e=zt,qt=!1,zt=null,e}function zi(e,t){var n=t[ys];void 0===n&&(n=t[ys]=new Set);var r=e+"__bubble";n.has(r)||(Wi(t,e,2,!1),n.add(r))}function $i(e,t,n){var r=0;t&&(r|=4),Wi(n,e,r,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[Vi]){e[Vi]=!0,le.forEach((function(t){"selectionchange"!==t&&(ji.has(t)||$i(t,!1,e),$i(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,$i("selectionchange",!1,t))}}function Wi(e,t,n,r){switch(Zn(t)){case 1:var i=Gn;break;case 4:i=Qn;break;default:i=Yn}n=i.bind(null,t,n,e),i=void 0,!Mt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hi(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ws(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ot((function(){var r=s,i=Et(n),o=[];e:{var a=Ri.get(e);if(void 0!==a){var l=dr,u=e;switch(e){case"keypress":if(0===ir(n))break e;case"keydown":case"keyup":l=Nr;break;case"focusin":u="focus",l=vr;break;case"focusout":u="blur",l=vr;break;case"beforeblur":case"afterblur":l=vr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ar;break;case xi:case Ni:case Pi:l=_r;break;case Ai:l=Rr;break;case"scroll":l=pr;break;case"wheel":l=Dr;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pr}var c=!!(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Dt(p,d))&&c.push(Ki(p,m,f))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===St||!(u=n.relatedTarget||n.fromElement)||!ws(u)&&!u[gs])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ws(u):null)&&(u!==(h=Bt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Pr,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:Ss(l),f=null==u?a:Ss(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ws(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Qi(f))p++;for(f=0,m=d;m;m=Qi(m))f++;for(;0<p-f;)c=Qi(c),p--;for(;0<f-p;)d=Qi(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Qi(c),d=Qi(d)}c=null}else c=null;null!==l&&Yi(o,a,l,c,!1),null!==u&&null!==h&&Yi(o,h,u,c,!0)}if("select"===(l=(a=r?Ss(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jr;else if(Hr(a))if(Zr)g=li;else{g=oi;var y=si}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ai);switch(g&&(g=g(e,r))?Kr(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&nt(a,"number",a.value)),y=r?Ss(r):window,e){case"focusin":(Hr(y)||"true"===y.contentEditable)&&(vi=y,_i=r,wi=null);break;case"focusout":wi=_i=vi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,Si(o,n,i);break;case"selectionchange":if(yi)break;case"keydown":case"keyup":Si(o,n,i)}var v;if(Lr)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Br?$r(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Ur&&"ko"!==n.locale&&(Br||"onCompositionStart"!==_?"onCompositionEnd"===_&&Br&&(v=rr()):(tr="value"in(er=i)?er.value:er.textContent,Br=!0)),0<(y=Gi(r,_)).length&&(_=new Sr(_,e,null,n,i),o.push({event:_,listeners:y}),(v||null!==(v=Vr(n)))&&(_.data=v))),(v=jr?function(e,t){switch(e){case"compositionend":return Vr(t);case"keypress":return 32!==t.which?null:(zr=!0,qr);case"textInput":return(e=t.data)===qr&&zr?null:e;default:return null}}(e,n):function(e,t){if(Br)return"compositionend"===e||!Lr&&$r(e,t)?(e=rr(),nr=tr=er=null,Br=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ur&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Gi(r,"onBeforeInput")).length&&(i=new Sr("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}qi(o,t)}))}function Ki(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Dt(e,n))&&r.unshift(Ki(e,s,i)),null!=(s=Dt(e,t))&&r.push(Ki(e,s,i))),e=e.return}return r}function Qi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Dt(n,s))&&o.unshift(Ki(n,l,a)):i||null!=(l=Dt(n,s))&&o.push(Ki(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xi=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function Zi(e){return("string"==typeof e?e:""+e).replace(Xi,"\n").replace(Ji,"")}function es(e,t,n){if(t=Zi(t),Zi(e)!==t&&n)throw Error(ae(425))}function ts(){}var ns=null,rs=null;function is(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ss="function"==typeof setTimeout?setTimeout:void 0,os="function"==typeof clearTimeout?clearTimeout:void 0,as="function"==typeof Promise?Promise:void 0,ls="function"==typeof queueMicrotask?queueMicrotask:void 0!==as?function(e){return as.resolve(null).then(e).catch(us)}:ss;function us(e){setTimeout((function(){throw e}))}function cs(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wn(t)}function hs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),ps="__reactFiber$"+fs,ms="__reactProps$"+fs,gs="__reactContainer$"+fs,ys="__reactEvents$"+fs,vs="__reactListeners$"+fs,_s="__reactHandles$"+fs;function ws(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gs]||n[ps]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[ps])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[ps]||e[gs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ss(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ae(33))}function Es(e){return e[ms]||null}var ks=[],Cs=-1;function Ts(e){return{current:e}}function Is(e){0>Cs||(e.current=ks[Cs],ks[Cs]=null,Cs--)}function xs(e,t){Cs++,ks[Cs]=e.current,e.current=t}var Ns={},Ps=Ts(Ns),As=Ts(!1),Rs=Ns;function Os(e,t){var n=e.type.contextTypes;if(!n)return Ns;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ds(e){return null!=(e=e.childContextTypes)}function Ms(){Is(As),Is(Ps)}function Ls(e,t,n){if(Ps.current!==Ns)throw Error(ae(168));xs(Ps,t),xs(As,n)}function Fs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(ae(108,We(e)||"Unknown",i));return Ue({},n,r)}function js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ns,Rs=Ps.current,xs(Ps,e),xs(As,As.current),!0}function Us(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=Fs(e,t,Rs),r.__reactInternalMemoizedMergedChildContext=e,Is(As),Is(Ps),xs(Ps,e)):Is(As),xs(As,n)}var qs=null,zs=!1,$s=!1;function Vs(e){null===qs?qs=[e]:qs.push(e)}function Bs(){if(!$s&&null!==qs){$s=!0;var e=0,t=Sn;try{var n=qs;for(Sn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qs=null,zs=!1}catch(_j){throw null!==qs&&(qs=qs.slice(e+1)),Qt(tn,Bs),_j}finally{Sn=t,$s=!1}}return null}var Ws=[],Hs=0,Ks=null,Gs=0,Qs=[],Ys=0,Xs=null,Js=1,Zs="";function eo(e,t){Ws[Hs++]=Gs,Ws[Hs++]=Ks,Ks=e,Gs=t}function to(e,t,n){Qs[Ys++]=Js,Qs[Ys++]=Zs,Qs[Ys++]=Xs,Xs=e;var r=Js;e=Zs;var i=32-un(r)-1;r&=~(1<<i),n+=1;var s=32-un(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Js=1<<32-un(t)+i|n<<i|r,Zs=s+e}else Js=1<<s|n<<i|r,Zs=e}function no(e){null!==e.return&&(eo(e,1),to(e,1,0))}function ro(e){for(;e===Ks;)Ks=Ws[--Hs],Ws[Hs]=null,Gs=Ws[--Hs],Ws[Hs]=null;for(;e===Xs;)Xs=Qs[--Ys],Qs[Ys]=null,Zs=Qs[--Ys],Qs[Ys]=null,Js=Qs[--Ys],Qs[Ys]=null}var io=null,so=null,oo=!1,ao=null;function lo(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,io=e,so=hs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,io=e,so=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Js,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,io=e,so=null,!0);default:return!1}}function co(e){return!(!(1&e.mode)||128&e.flags)}function ho(e){if(oo){var t=so;if(t){var n=t;if(!uo(e,t)){if(co(e))throw Error(ae(418));t=hs(n.nextSibling);var r=io;t&&uo(e,t)?lo(r,n):(e.flags=-4097&e.flags|2,oo=!1,io=e)}}else{if(co(e))throw Error(ae(418));e.flags=-4097&e.flags|2,oo=!1,io=e}}}function fo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;io=e}function po(e){if(e!==io)return!1;if(!oo)return fo(e),oo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!is(e.type,e.memoizedProps)),t&&(t=so)){if(co(e))throw mo(),Error(ae(418));for(;t;)lo(e,t),t=hs(t.nextSibling)}if(fo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){so=hs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}so=null}}else so=io?hs(e.stateNode.nextSibling):null;return!0}function mo(){for(var e=so;e;)e=hs(e.nextSibling)}function go(){so=io=null,oo=!1}function yo(e){null===ao?ao=[e]:ao.push(e)}var vo=Se.ReactCurrentBatchConfig;function _o(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function So(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===Ce?c(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===De&&bo(s)===t.type)?((r=i(t,n.props)).ref=_o(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=_o(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,s){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ee:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=_o(e,null,t),n.return=e,n;case ke:return(t=qc(t,e.mode,n)).return=e,t;case De:return h(e,(0,t._init)(t._payload),n)}if(rt(t)||Fe(t))return(t=Fc(t,e.mode,n,null)).return=e,t;wo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ee:return n.key===i?l(e,t,n,r):null;case ke:return n.key===i?u(e,t,n,r):null;case De:return d(e,t,(i=n._init)(n._payload),r)}if(rt(n)||Fe(n))return null!==i?null:c(e,t,n,r,null);wo(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ee:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case ke:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case De:return f(e,t,n,(0,r._init)(r._payload),i)}if(rt(r)||Fe(r))return c(t,e=e.get(n)||null,r,i,null);wo(t,r)}return null}function p(i,o,a,l){for(var u=null,c=null,p=o,m=o=0,g=null;null!==p&&m<a.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,a[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===a.length)return n(i,p),oo&&eo(i,m),u;if(null===p){for(;m<a.length;m++)null!==(p=h(i,a[m],l))&&(o=s(p,o,m),null===c?u=p:c.sibling=p,c=p);return oo&&eo(i,m),u}for(p=r(i,p);m<a.length;m++)null!==(g=f(p,i,m,a[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),oo&&eo(i,m),u}function m(i,o,a,l){var u=Fe(a);if("function"!=typeof u)throw Error(ae(150));if(null==(a=u.call(a)))throw Error(ae(151));for(var c=u=null,p=o,m=o=0,g=null,y=a.next();null!==p&&!y.done;m++,y=a.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),o=s(v,o,m),null===c?u=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),oo&&eo(i,m),u;if(null===p){for(;!y.done;m++,y=a.next())null!==(y=h(i,y.value,l))&&(o=s(y,o,m),null===c?u=y:c.sibling=y,c=y);return oo&&eo(i,m),u}for(p=r(i,p);!y.done;m++,y=a.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),oo&&eo(i,m),u}return function e(r,s,a,l){if("object"==typeof a&&null!==a&&a.type===Ce&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case Ee:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===Ce){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===De&&bo(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=_o(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===Ce?((s=Fc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=_o(r,s,a),l.return=r,r=l)}return o(r);case ke:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qc(a,r.mode,l)).return=r,r=s}return o(r);case De:return e(r,s,(c=a._init)(a._payload),l)}if(rt(a))return p(r,s,a,l);if(Fe(a))return m(r,s,a,l);wo(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Uc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Eo=So(!0),ko=So(!1),Co=Ts(null),To=null,Io=null,xo=null;function No(){xo=Io=To=null}function Po(e){var t=Co.current;Is(Co),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){To=e,xo=Io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(bl=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===Io){if(null===To)throw Error(ae(308));Io=e,To.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Do=null;function Mo(e){null===Do?Do=[e]:Do.push(e)}function Lo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Mo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Fo(e,r)}function Fo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $o(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Pu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Fo(e,n)}return null===(i=r.interleaved)?(t.next=t,Mo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Fo(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bn(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;jo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=Ue({},h,d);break e;case 2:jo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=h}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ae(191,i));i.call(r)}}}var Ko={},Go=Ts(Ko),Qo=Ts(Ko),Yo=Ts(Ko);function Xo(e){if(e===Ko)throw Error(ae(174));return e}function Jo(e,t){switch(xs(Yo,t),xs(Qo,e),xs(Go,Ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ct(null,"");break;default:t=ct(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Is(Go),xs(Go,t)}function Zo(){Is(Go),Is(Qo),Is(Yo)}function ea(e){Xo(Yo.current);var t=Xo(Go.current),n=ct(t,e.type);t!==n&&(xs(Qo,e),xs(Go,n))}function ta(e){Qo.current===e&&(Is(Go),Is(Qo))}var na=Ts(0);function ra(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function sa(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var oa=Se.ReactCurrentDispatcher,aa=Se.ReactCurrentBatchConfig,la=0,ua=null,ca=null,ha=null,da=!1,fa=!1,pa=0,ma=0;function ga(){throw Error(ae(321))}function ya(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ui(e[n],t[n]))return!1;return!0}function va(e,t,n,r,i,s){if(la=s,ua=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?tl:nl,e=n(r,i),fa){s=0;do{if(fa=!1,pa=0,25<=s)throw Error(ae(301));s+=1,ha=ca=null,t.updateQueue=null,oa.current=rl,e=n(r,i)}while(fa)}if(oa.current=el,t=null!==ca&&null!==ca.next,la=0,ha=ca=ua=null,da=!1,t)throw Error(ae(300));return e}function _a(){var e=0!==pa;return pa=0,e}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ha?ua.memoizedState=ha=e:ha=ha.next=e,ha}function ba(){if(null===ca){var e=ua.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===ha?ua.memoizedState:ha.next;if(null!==t)ha=t,ca=e;else{if(null===e)throw Error(ae(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===ha?ua.memoizedState=ha=e:ha=ha.next=e}return ha}function Sa(e,t){return"function"==typeof t?t(e):t}function Ea(e){var t=ba(),n=t.queue;if(null===n)throw Error(ae(311));n.lastRenderedReducer=e;var r=ca,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((la&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(a=l=h,o=r):l=l.next=h,ua.lanes|=c,ju|=c}u=u.next}while(null!==u&&u!==s);null===l?o=r:l.next=a,ui(r,t.memoizedState)||(bl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ua.lanes|=s,ju|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=ba(),n=t.queue;if(null===n)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);ui(s,t.memoizedState)||(bl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ca(){}function Ta(e,t){var n=ua,r=ba(),i=t(),s=!ui(r.memoizedState,i);if(s&&(r.memoizedState=i,bl=!0),r=r.queue,ja(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ha&&1&ha.memoizedState.tag){if(n.flags|=2048,Oa(9,xa.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(ae(349));30&la||Ia(n,t,i)}return i}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xa(e,t,n,r){t.value=n,t.getSnapshot=r,Pa(t)&&Aa(e)}function Na(e,t,n){return n((function(){Pa(t)&&Aa(e)}))}function Pa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ui(e,n)}catch(vj){return!0}}function Aa(e){var t=Fo(e,1);null!==t&&ic(t,e,1,-1)}function Ra(e){var t=wa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,ua,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ua.updateQueue)?(t={lastEffect:null,stores:null},ua.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Da(){return ba().memoizedState}function Ma(e,t,n,r){var i=wa();ua.flags|=e,i.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var i=ba();r=void 0===r?null:r;var s=void 0;if(null!==ca){var o=ca.memoizedState;if(s=o.destroy,null!==r&&ya(r,o.deps))return void(i.memoizedState=Oa(t,n,s,r))}ua.flags|=e,i.memoizedState=Oa(1|t,n,s,r)}function Fa(e,t){return Ma(8390656,8,e,t)}function ja(e,t){return La(2048,8,e,t)}function Ua(e,t){return La(4,2,e,t)}function qa(e,t){return La(4,4,e,t)}function za(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $a(e,t,n){return n=null!=n?n.concat([e]):null,La(4,4,za.bind(null,t,e),n)}function Va(){}function Ba(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ya(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ya(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 21&la?(ui(n,t)||(n=vn(),ua.lanes|=n,ju|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=n)}function Ka(e,t){var n=Sn;Sn=0!==n&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{Sn=n,aa.transition=r}}function Ga(){return ba().memoizedState}function Qa(e,t,n){var r=rc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e)?Ja(t,n):null!==(n=Lo(e,t,n,r))&&(ic(n,e,r,nc()),Za(n,t,r))}function Ya(e,t,n){var r=rc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ja(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ui(a,o)){var l=t.interleaved;return null===l?(i.next=i,Mo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(kj){}null!==(n=Lo(e,t,i,r))&&(ic(n,e,r,i=nc()),Za(n,t,r))}}function Xa(e){var t=e.alternate;return e===ua||null!==t&&t===ua}function Ja(e,t){fa=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Za(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bn(e,n)}}var el={readContext:Oo,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useInsertionEffect:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useSyncExternalStore:ga,useId:ga,unstable_isNewReconciler:!1},tl={readContext:Oo,useCallback:function(e,t){return wa().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Fa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ma(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=wa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,ua,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wa().memoizedState=e},useState:Ra,useDebugValue:Va,useDeferredValue:function(e){return wa().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ka.bind(null,e[1]),wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ua,i=wa();if(oo){if(void 0===n)throw Error(ae(407));n=n()}else{if(n=t(),null===Au)throw Error(ae(349));30&la||Ia(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Fa(Na.bind(null,r,s,e),[e]),r.flags|=2048,Oa(9,xa.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=wa(),t=Au.identifierPrefix;if(oo){var n=Zs;t=":"+t+"R"+(n=(Js&~(1<<32-un(Js)-1)).toString(32)+n),0<(n=pa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ma++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nl={readContext:Oo,useCallback:Ba,useContext:Oo,useEffect:ja,useImperativeHandle:$a,useInsertionEffect:Ua,useLayoutEffect:qa,useMemo:Wa,useReducer:Ea,useRef:Da,useState:function(){return Ea(Sa)},useDebugValue:Va,useDeferredValue:function(e){return Ha(ba(),ca.memoizedState,e)},useTransition:function(){return[Ea(Sa)[0],ba().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Ta,useId:Ga,unstable_isNewReconciler:!1},rl={readContext:Oo,useCallback:Ba,useContext:Oo,useEffect:ja,useImperativeHandle:$a,useInsertionEffect:Ua,useLayoutEffect:qa,useMemo:Wa,useReducer:ka,useRef:Da,useState:function(){return ka(Sa)},useDebugValue:Va,useDeferredValue:function(e){var t=ba();return null===ca?t.memoizedState=e:Ha(t,ca.memoizedState,e)},useTransition:function(){return[ka(Sa)[0],ba().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Ta,useId:Ga,unstable_isNewReconciler:!1};function il(e,t){if(e&&e.defaultProps){for(var n in t=Ue({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Ue({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ol={isMounted:function(e){return!!(e=e._reactInternals)&&Bt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=zo(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=$o(e,s,i))&&(ic(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),i=rc(e),s=zo(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=$o(e,s,i))&&(ic(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),i=zo(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=$o(e,i,r))&&(ic(t,e,r,n),Vo(t,e,r))}};function al(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&ci(n,r)&&ci(i,s))}function ll(e,t,n){var r=!1,i=Ns,s=t.contextType;return"object"==typeof s&&null!==s?s=Oo(s):(i=Ds(t)?Rs:Ps.current,s=(r=null!=(r=t.contextTypes))?Os(e,i):Ns),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ol,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ul(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ol.enqueueReplaceState(t,t.state,null)}function cl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Uo(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Oo(s):(s=Ds(t)?Rs:Ps.current,i.context=Os(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(sl(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ol.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function hl(e,t){try{var n="",r=t;do{n+=Ve(r),r=r.return}while(r);var i=n}catch(wj){i="\nError generating stack: "+wj.message+"\n"+wj.stack}return{value:e,source:t,stack:i,digest:null}}function dl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fl(e,t){try{console.error(t.value)}catch(yj){setTimeout((function(){throw yj}))}}var pl="function"==typeof WeakMap?WeakMap:Map;function ml(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),fl(0,t)},n}function gl(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fl(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){fl(0,t),"function"!=typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _l(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,$o(n,t,1))),n.lanes|=1),e)}var wl=Se.ReactCurrentOwner,bl=!1;function Sl(e,t,n,r){t.child=null===e?ko(t,null,n,r):Eo(t,e.child,n,r)}function El(e,t,n,r,i){n=n.render;var s=t.ref;return Ro(t,i),r=va(e,t,n,r,s,i),n=_a(),null===e||bl?(oo&&n&&no(t),t.flags|=1,Sl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function kl(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Cl(e,t,s,r,i))}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ci)(o,r)&&e.ref===t.ref)return Hl(e,t,i)}return t.flags|=1,(e=Mc(s,r)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ci(s,r)&&e.ref===t.ref){if(bl=!1,t.pendingProps=r=s,!(e.lanes&i))return t.lanes=e.lanes,Hl(e,t,i);131072&e.flags&&(bl=!0)}}return xl(e,t,n,r,i)}function Tl(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xs(Mu,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,xs(Mu,Du),Du|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xs(Mu,Du),Du|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,xs(Mu,Du),Du|=r;return Sl(e,t,i,n),t.child}function Il(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xl(e,t,n,r,i){var s=Ds(n)?Rs:Ps.current;return s=Os(t,s),Ro(t,i),n=va(e,t,n,r,s,i),r=_a(),null===e||bl?(oo&&r&&no(t),t.flags|=1,Sl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hl(e,t,i))}function Nl(e,t,n,r,i){if(Ds(n)){var s=!0;js(t)}else s=!1;if(Ro(t,i),null===t.stateNode)Wl(e,t),ll(t,n,r),cl(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?Oo(u):Os(t,u=Ds(n)?Rs:Ps.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&ul(t,o,r,u),jo=!1;var d=t.memoizedState;o.state=d,Wo(t,r,o,i),l=t.memoizedState,a!==r||d!==l||As.current||jo?("function"==typeof c&&(sl(t,n,c,r),l=t.memoizedState),(a=jo||al(t,n,a,r,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,qo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:il(t.type,a),o.props=u,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Oo(l):Os(t,l=Ds(n)?Rs:Ps.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ul(t,o,r,l),jo=!1,d=t.memoizedState,o.state=d,Wo(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||As.current||jo?("function"==typeof f&&(sl(t,n,f,r),p=t.memoizedState),(u=jo||al(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,s,i)}function Pl(e,t,n,r,i,s){Il(e,t);var o=!!(128&t.flags);if(!r&&!o)return i&&Us(t,n,!1),Hl(e,t,s);r=t.stateNode,wl.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Eo(t,e.child,null,s),t.child=Eo(t,null,a,s)):Sl(e,t,a,s),t.memoizedState=r.state,i&&Us(t,n,!0),t.child}function Al(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Jo(e,t.containerInfo)}function Rl(e,t,n,r,i){return go(),yo(i),t.flags|=256,Sl(e,t,n,r),t.child}var Ol,Dl,Ml,Ll,Fl={dehydrated:null,treeContext:null,retryLane:0};function jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ul(e,t,n){var r,i=t.pendingProps,s=na.current,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),xs(na,1&s),null===e)return ho(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},1&i||null===o?o=jc(a,i,0,null):(o.childLanes=0,o.pendingProps=a),e=Fc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jl(n),t.memoizedState=Fl,e):ql(t,a));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,zl(e,t,o,r=dl(Error(ae(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(s=Fc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&Eo(t,e.child,null,o),t.child.memoizedState=jl(o),t.memoizedState=Fl,s);if(!(1&t.mode))return zl(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var a=r.dgst;return r=a,zl(e,t,o,r=dl(s=Error(ae(419)),r,void 0))}if(a=!!(o&e.childLanes),bl||a){if(null!==(r=Au)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(r.suspendedLanes|o)?0:i)&&i!==s.retryLane&&(s.retryLane=i,Fo(e,i),ic(r,e,i,-1))}return yc(),zl(e,t,o,r=dl(Error(ae(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,so=hs(i.nextSibling),io=t,oo=!0,ao=null,null!==e&&(Qs[Ys++]=Js,Qs[Ys++]=Zs,Qs[Ys++]=Xs,Js=e.id,Zs=e.overflow,Xs=t),(t=ql(t,r.children)).flags|=4096,t)}(e,t,a,i,r,s,n);if(o){o=i.fallback,a=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||t.child===s?(i=Mc(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?o=Mc(r,o):(o=Fc(o,a,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=null===(a=e.child.memoizedState)?jl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Fl,i}return e=(o=e.child).sibling,i=Mc(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ql(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zl(e,t,n,r){return null!==r&&yo(r),Eo(t,e.child,null,n),(e=ql(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $l(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function Vl(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Sl(e,t,r.children,n),2&(r=na.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$l(e,n,t);else if(19===e.tag)$l(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xs(na,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ra(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vl(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ra(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vl(t,!0,n,null,s);break;case"together":Vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Wl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ae(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Kl(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ql(e,t,n){var r=t.pendingProps;switch(ro(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gl(t),null;case 1:case 17:return Ds(t.type)&&Ms(),Gl(t),null;case 3:return r=t.stateNode,Zo(),Is(As),Is(Ps),sa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ao&&(lc(ao),ao=null))),Dl(e,t),Gl(t),null;case 5:ta(t);var i=Xo(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ml(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ae(166));return Gl(t),null}if(e=Xo(Go.current),po(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ps]=t,r[ms]=s,e=!!(1&t.mode),n){case"dialog":zi("cancel",r),zi("close",r);break;case"iframe":case"object":case"embed":zi("load",r);break;case"video":case"audio":for(i=0;i<Fi.length;i++)zi(Fi[i],r);break;case"source":zi("error",r);break;case"img":case"image":case"link":zi("error",r),zi("load",r);break;case"details":zi("toggle",r);break;case"input":Je(r,s),zi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zi("invalid",r);break;case"textarea":ot(r,s),zi("invalid",r)}for(var o in wt(n,s),i=null,s)if(s.hasOwnProperty(o)){var a=s[o];"children"===o?"string"==typeof a?r.textContent!==a&&(!0!==s.suppressHydrationWarning&&es(r.textContent,a,e),i=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(!0!==s.suppressHydrationWarning&&es(r.textContent,a,e),i=["children",""+a]):ue.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&zi("scroll",r)}switch(n){case"input":Ge(r),tt(r,s,!0);break;case"textarea":Ge(r),lt(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=ts)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ut(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ps]=t,e[ms]=r,Ol(e,t,!1,!1),t.stateNode=e;e:{switch(o=bt(n,r),n){case"dialog":zi("cancel",e),zi("close",e),i=r;break;case"iframe":case"object":case"embed":zi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fi.length;i++)zi(Fi[i],e);i=r;break;case"source":zi("error",e),i=r;break;case"img":case"image":case"link":zi("error",e),zi("load",e),i=r;break;case"details":zi("toggle",e),i=r;break;case"input":Je(e,r),i=Xe(e,r),zi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),zi("invalid",e);break;case"textarea":ot(e,r),i=st(e,r),zi("invalid",e)}for(s in wt(n,i),a=i)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?vt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ft(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&pt(e,l):"number"==typeof l&&pt(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(ue.hasOwnProperty(s)?null!=l&&"onScroll"===s&&zi("scroll",e):null!=l&&be(e,s,l,o))}switch(n){case"input":Ge(e),tt(e,r,!1);break;case"textarea":Ge(e),lt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+He(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?it(e,!!r.multiple,s,!1):null!=r.defaultValue&&it(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gl(t),null;case 6:if(e&&null!=t.stateNode)Ll(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ae(166));if(n=Xo(Yo.current),Xo(Go.current),po(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(s=r.nodeValue!==n)&&null!==(e=io))switch(e.tag){case 3:es(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&es(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ps]=t,t.stateNode=r}return Gl(t),null;case 13:if(Is(na),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oo&&null!==so&&1&t.mode&&!(128&t.flags))mo(),go(),t.flags|=98560,s=!1;else if(s=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(ae(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(ae(317));s[ps]=t}else go(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gl(t),s=!1}else null!==ao&&(lc(ao),ao=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&na.current?0===Lu&&(Lu=3):yc())),null!==t.updateQueue&&(t.flags|=4),Gl(t),null);case 4:return Zo(),Dl(e,t),null===e&&Bi(t.stateNode.containerInfo),Gl(t),null;case 10:return Po(t.type._context),Gl(t),null;case 19:if(Is(na),null===(s=t.memoizedState))return Gl(t),null;if(r=!!(128&t.flags),null===(o=s.rendering))if(r)Kl(s,!1);else{if(0!==Lu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ra(e))){for(t.flags|=128,Kl(s,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xs(na,1&na.current|2),t.child}e=e.sibling}null!==s.tail&&Zt()>Bu&&(t.flags|=128,r=!0,Kl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ra(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Kl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!oo)return Gl(t),null}else 2*Zt()-s.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,Kl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=s.last)?n.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Zt(),t.sibling=null,n=na.current,xs(na,r?1&n|2:1&n),t):(Gl(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Du)&&(Gl(t),6&t.subtreeFlags&&(t.flags|=8192)):Gl(t),null;case 24:case 25:return null}throw Error(ae(156,t.tag))}function Yl(e,t){switch(ro(t),t.tag){case 1:return Ds(t.type)&&Ms(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zo(),Is(As),Is(Ps),sa(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ta(t),null;case 13:if(Is(na),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ae(340));go()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Is(na),null;case 4:return Zo(),null;case 10:return Po(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ol=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Dl=function(){},Ml=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xo(Go.current);var s,o=null;switch(n){case"input":i=Xe(e,i),r=Xe(e,r),o=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),o=[];break;case"textarea":i=st(e,i),r=st(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=ts)}for(u in wt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(ue.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(null!=l||null!=a))if("style"===u)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(ue.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&zi("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ll=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xl=!1,Jl=!1,Zl="function"==typeof WeakSet?WeakSet:Set,eu=null;function tu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(vj){Tc(e,t,vj)}else n.current=null}function nu(e,t,n){try{n()}catch(vj){Tc(e,t,vj)}}var ru=!1;function iu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&nu(t,n,s)}i=i.next}while(i!==r)}}function su(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[ps],delete t[ms],delete t[ys],delete t[vs],delete t[_s]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lu(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ts));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function hu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hu(e,t,n),e=e.sibling;null!==e;)hu(e,t,n),e=e.sibling}var du=null,fu=!1;function pu(e,t,n){for(n=n.child;null!==n;)mu(e,t,n),n=n.sibling}function mu(e,t,n){if(ln&&"function"==typeof ln.onCommitFiberUnmount)try{ln.onCommitFiberUnmount(an,n)}catch(Sj){}switch(n.tag){case 5:Jl||tu(n,t);case 6:var r=du,i=fu;du=null,pu(e,t,n),fu=i,null!==(du=r)&&(fu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(fu?(e=du,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),Wn(e)):cs(du,n.stateNode));break;case 4:r=du,i=fu,du=n.stateNode.containerInfo,fu=!0,pu(e,t,n),du=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Jl&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&nu(n,t,o),i=i.next}while(i!==r)}pu(e,t,n);break;case 1:if(!Jl&&(tu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Sj){Tc(n,t,Sj)}pu(e,t,n);break;case 21:pu(e,t,n);break;case 22:1&n.mode?(Jl=(r=Jl)||null!==n.memoizedState,pu(e,t,n),Jl=r):pu(e,t,n);break;default:pu(e,t,n)}}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zl),t.forEach((function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:du=a.stateNode,fu=!1;break e;case 3:case 4:du=a.stateNode.containerInfo,fu=!0;break e}a=a.return}if(null===du)throw Error(ae(160));mu(s,o,i),du=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(kj){Tc(i,t,kj)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),_u(e),4&r){try{iu(3,e,e.return),su(3,e)}catch(Pj){Tc(e,e.return,Pj)}try{iu(5,e,e.return)}catch(Pj){Tc(e,e.return,Pj)}}break;case 1:yu(t,e),_u(e),512&r&&null!==n&&tu(n,n.return);break;case 5:if(yu(t,e),_u(e),512&r&&null!==n&&tu(n,n.return),32&e.flags){var i=e.stateNode;try{pt(i,"")}catch(Pj){Tc(e,e.return,Pj)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===s.type&&null!=s.name&&Ze(i,s),bt(a,o);var u=bt(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];"style"===c?vt(i,h):"dangerouslySetInnerHTML"===c?ft(i,h):"children"===c?pt(i,h):be(i,c,h,u)}switch(a){case"input":et(i,s);break;case"textarea":at(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?it(i,!!s.multiple,f,!1):d!==!!s.multiple&&(null!=s.defaultValue?it(i,!!s.multiple,s.defaultValue,!0):it(i,!!s.multiple,s.multiple?[]:"",!1))}i[ms]=s}catch(Pj){Tc(e,e.return,Pj)}}break;case 6:if(yu(t,e),_u(e),4&r){if(null===e.stateNode)throw Error(ae(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(Pj){Tc(e,e.return,Pj)}}break;case 3:if(yu(t,e),_u(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(Pj){Tc(e,e.return,Pj)}break;case 4:default:yu(t,e),_u(e);break;case 13:yu(t,e),_u(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=Zt())),4&r&&gu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Jl=(u=Jl)||c,yu(t,e),Jl=u):yu(t,e),_u(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&1&e.mode)for(eu=e,c=e.child;null!==c;){for(h=eu=c;null!==eu;){switch(f=(d=eu).child,d.tag){case 0:case 11:case 14:case 15:iu(4,d,d.return);break;case 1:tu(d,d.return);var p=d.stateNode;if("function"==typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(Pj){Tc(r,n,Pj)}}break;case 5:tu(d,d.return);break;case 22:if(null!==d.memoizedState){Eu(h);continue}}null!==f?(f.return=d,eu=f):Eu(h)}c=c.sibling}e:for(c=null,h=e;;){if(5===h.tag){if(null===c){c=h;try{i=h.stateNode,u?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(a=h.stateNode,o=null!=(l=h.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=yt("display",o))}catch(Pj){Tc(e,e.return,Pj)}}}else if(6===h.tag){if(null===c)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(Pj){Tc(e,e.return,Pj)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yu(t,e),_u(e),4&r&&gu(e);case 21:}}function _u(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(lu(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),hu(e,uu(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cu(e,uu(e),s);break;default:throw Error(ae(161))}}catch(Ej){Tc(e,e.return,Ej)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wu(e,t,n){eu=e,bu(e)}function bu(e,t,n){for(var r=!!(1&e.mode);null!==eu;){var i=eu,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xl;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Jl;a=Xl;var u=Jl;if(Xl=o,(Jl=l)&&!u)for(eu=i;null!==eu;)l=(o=eu).child,22===o.tag&&null!==o.memoizedState?ku(i):null!==l?(l.return=o,eu=l):ku(i);for(;null!==s;)eu=s,bu(s),s=s.sibling;eu=i,Xl=a,Jl=u}Su(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,eu=s):Su(e)}}function Su(e){for(;null!==eu;){var t=eu;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Jl||su(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:il(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,o,n)}break;case 5:var a=t.stateNode;if(null===n&&4&t.flags){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&Wn(h)}}}break;default:throw Error(ae(163))}Jl||512&t.flags&&ou(t)}catch(Nj){Tc(t,t.return,Nj)}}if(t===e){eu=null;break}if(null!==(n=t.sibling)){n.return=t.return,eu=n;break}eu=t.return}}function Eu(e){for(;null!==eu;){var t=eu;if(t===e){eu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,eu=n;break}eu=t.return}}function ku(e){for(;null!==eu;){var t=eu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{su(4,t)}catch(Ej){Tc(t,n,Ej)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Ej){Tc(t,i,Ej)}}var s=t.return;try{ou(t)}catch(Ej){Tc(t,s,Ej)}break;case 5:var o=t.return;try{ou(t)}catch(Ej){Tc(t,o,Ej)}}}catch(Ej){Tc(t,t.return,Ej)}if(t===e){eu=null;break}var a=t.sibling;if(null!==a){a.return=t.return,eu=a;break}eu=t.return}}var Cu,Tu=Math.ceil,Iu=Se.ReactCurrentDispatcher,xu=Se.ReactCurrentOwner,Nu=Se.ReactCurrentBatchConfig,Pu=0,Au=null,Ru=null,Ou=0,Du=0,Mu=Ts(0),Lu=0,Fu=null,ju=0,Uu=0,qu=0,zu=null,$u=null,Vu=0,Bu=1/0,Wu=null,Hu=!1,Ku=null,Gu=null,Qu=!1,Yu=null,Xu=0,Ju=0,Zu=null,ec=-1,tc=0;function nc(){return 6&Pu?Zt():-1!==ec?ec:ec=Zt()}function rc(e){return 1&e.mode?2&Pu&&0!==Ou?Ou&-Ou:null!==vo.transition?(0===tc&&(tc=vn()),tc):0!==(e=Sn)?e:e=void 0===(e=window.event)?16:Zn(e.type):1}function ic(e,t,n,r){if(50<Ju)throw Ju=0,Zu=null,Error(ae(185));wn(e,n,r),2&Pu&&e===Au||(e===Au&&(!(2&Pu)&&(Uu|=n),4===Lu&&uc(e,Ou)),sc(e,r),1===n&&0===Pu&&!(1&t.mode)&&(Bu=Zt()+500,zs&&Bs()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-un(s),a=1<<o,l=i[o];-1===l?a&n&&!(a&r)||(i[o]=gn(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=mn(e,e===Au?Ou:0);if(0===r)null!==n&&Yt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Yt(n),1===t)0===e.tag?function(e){zs=!0,Vs(e)}(cc.bind(null,e)):Vs(cc.bind(null,e)),ls((function(){!(6&Pu)&&Bs()})),n=null;else{switch(En(r)){case 1:n=tn;break;case 4:n=nn;break;case 16:default:n=rn;break;case 536870912:n=on}n=Ac(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(ec=-1,tc=0,6&Pu)throw Error(ae(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=mn(e,e===Au?Ou:0);if(0===r)return null;if(30&r||r&e.expiredLanes||t)t=vc(e,r);else{t=r;var i=Pu;Pu|=2;var s=gc();for(Au===e&&Ou===t||(Wu=null,Bu=Zt()+500,pc(e,t));;)try{wc();break}catch(Sj){mc(e,Sj)}No(),Iu.current=s,Pu=i,null!==Ru?t=0:(Au=null,Ou=0,t=Lu)}if(0!==t){if(2===t&&0!==(i=yn(e))&&(r=i,t=ac(e,i)),1===t)throw n=Fu,pc(e,0),uc(e,r),sc(e,Zt()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ui(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=vc(e,r),2===t&&(s=yn(e),0!==s&&(r=s,t=ac(e,s))),1!==t)))throw n=Fu,pc(e,0),uc(e,r),sc(e,Zt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:case 5:Ec(e,$u,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Vu+500-Zt())){if(0!==mn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ss(Ec.bind(null,e,$u,Wu),t);break}Ec(e,$u,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-un(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Zt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ss(Ec.bind(null,e,$u,Wu),r);break}Ec(e,$u,Wu);break;default:throw Error(ae(329))}}}return sc(e,Zt()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=$u,$u=n,null!==t&&lc(t)),e}function lc(e){null===$u?$u=e:$u.push.apply($u,e)}function uc(e,t){for(t&=~qu,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-un(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(6&Pu)throw Error(ae(327));kc();var t=mn(e,0);if(!(1&t))return sc(e,Zt()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=yn(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Fu,pc(e,0),uc(e,t),sc(e,Zt()),n;if(6===n)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,$u,Wu),sc(e,Zt()),null}function hc(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Bu=Zt()+500,zs&&Bs())}}function dc(e){null!==Yu&&0===Yu.tag&&!(6&Pu)&&kc();var t=Pu;Pu|=1;var n=Nu.transition,r=Sn;try{if(Nu.transition=null,Sn=1,e)return e()}finally{Sn=r,Nu.transition=n,!(6&(Pu=t))&&Bs()}}function fc(){Du=Mu.current,Is(Mu)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,os(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ro(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ms();break;case 3:Zo(),Is(As),Is(Ps),sa();break;case 5:ta(r);break;case 4:Zo();break;case 13:case 19:Is(na);break;case 10:Po(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Au=e,Ru=e=Mc(e.current,null),Ou=Du=t,Lu=0,Fu=null,qu=Uu=ju=0,$u=zu=null,null!==Do){for(t=0;t<Do.length;t++)if(null!==(r=(n=Do[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Do=null}return e}function mc(e,t){for(;;){var n=Ru;try{if(No(),oa.current=el,da){for(var r=ua.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(la=0,ha=ca=ua=null,fa=!1,pa=0,xu.current=null,null===n||null===n.return){Lu=1,Fu=t,Ru=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Ou,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=a,h=c.tag;if(!(1&c.mode||0!==h&&11!==h&&15!==h)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=vl(o);if(null!==f){f.flags&=-257,_l(f,o,a,0,t),1&f.mode&&yl(s,u,t),l=u;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){yl(s,u,t),yc();break e}l=Error(ae(426))}else if(oo&&1&a.mode){var g=vl(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),_l(g,o,a,0,t),yo(hl(l,a));break e}}s=l=hl(l,a),4!==Lu&&(Lu=2),null===zu?zu=[s]:zu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,ml(0,l,t));break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Gu&&Gu.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,gl(s,a,t));break e}}s=s.return}while(null!==s)}Sc(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function gc(){var e=Iu.current;return Iu.current=el,null===e?el:e}function yc(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Au||!(268435455&ju)&&!(268435455&Uu)||uc(Au,Ou)}function vc(e,t){var n=Pu;Pu|=2;var r=gc();for(Au===e&&Ou===t||(Wu=null,pc(e,t));;)try{_c();break}catch(_j){mc(e,_j)}if(No(),Pu=n,Iu.current=r,null!==Ru)throw Error(ae(261));return Au=null,Ou=0,Lu}function _c(){for(;null!==Ru;)bc(Ru)}function wc(){for(;null!==Ru&&!Xt();)bc(Ru)}function bc(e){var t=Cu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?Sc(e):Ru=t,xu.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Yl(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Lu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ql(n,t,Du)))return void(Ru=n);if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function Ec(e,t,n){var r=Sn,i=Nu.transition;try{Nu.transition=null,Sn=1,function(e,t,n,r){do{kc()}while(null!==Yu);if(6&Pu)throw Error(ae(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-un(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===Au&&(Ru=Au=null,Ou=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Qu||(Qu=!0,Ac(rn,(function(){return kc(),null}))),s=!!(15990&n.flags),15990&n.subtreeFlags||s){s=Nu.transition,Nu.transition=null;var o=Sn;Sn=1;var a=Pu;Pu|=4,xu.current=null,function(e,t){if(ns=Kn,mi(e=pi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(r_){n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=e,d=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(a=o+i),h!==s||0!==r&&3!==h.nodeType||(l=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)d=h,h=f;for(;;){if(h===e)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),null!==(f=h.nextSibling))break;d=(h=d).parentNode}h=f}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rs={focusedElem:e,selectionRange:n},Kn=!1,eu=t;null!==eu;)if(e=(t=eu).child,1028&t.subtreeFlags&&null!==e)e.return=t,eu=e;else for(;null!==eu;){t=eu;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:il(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(ae(163))}}catch(r_){Tc(t,t.return,r_)}if(null!==(e=t.sibling)){e.return=t.return,eu=e;break}eu=t.return}p=ru,ru=!1}(e,n),vu(n,e),gi(rs),Kn=!!ns,rs=ns=null,e.current=n,wu(n),Jt(),Pu=a,Sn=o,Nu.transition=s}else e.current=n;if(Qu&&(Qu=!1,Yu=e,Xu=i),0===(s=e.pendingLanes)&&(Gu=null),function(e){if(ln&&"function"==typeof ln.onCommitFiberRoot)try{ln.onCommitFiberRoot(an,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),sc(e,Zt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;!!(1&Xu)&&0!==e.tag&&kc(),1&(s=e.pendingLanes)?e===Zu?Ju++:(Ju=0,Zu=e):Ju=0,Bs()}(e,t,n,r)}finally{Nu.transition=i,Sn=r}return null}function kc(){if(null!==Yu){var e=En(Xu),t=Nu.transition,n=Sn;try{if(Nu.transition=null,Sn=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Xu=0,6&Pu)throw Error(ae(331));var i=Pu;for(Pu|=4,eu=e.current;null!==eu;){var s=eu,o=s.child;if(16&eu.flags){var a=s.deletions;if(null!==a){for(var l=0;l<a.length;l++){var u=a[l];for(eu=u;null!==eu;){var c=eu;switch(c.tag){case 0:case 11:case 15:iu(8,c,s)}var h=c.child;if(null!==h)h.return=c,eu=h;else for(;null!==eu;){var d=(c=eu).sibling,f=c.return;if(au(c),c===u){eu=null;break}if(null!==d){d.return=f,eu=d;break}eu=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}eu=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,eu=o;else e:for(;null!==eu;){if(2048&(s=eu).flags)switch(s.tag){case 0:case 11:case 15:iu(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,eu=y;break e}eu=s.return}}var v=e.current;for(eu=v;null!==eu;){var _=(o=eu).child;if(2064&o.subtreeFlags&&null!==_)_.return=o,eu=_;else e:for(o=v;null!==eu;){if(2048&(a=eu).flags)try{switch(a.tag){case 0:case 11:case 15:su(9,a)}}catch(b){Tc(a,a.return,b)}if(a===o){eu=null;break e}var w=a.sibling;if(null!==w){w.return=a.return,eu=w;break e}eu=a.return}}if(Pu=i,Bs(),ln&&"function"==typeof ln.onPostCommitFiberRoot)try{ln.onPostCommitFiberRoot(an,e)}catch(b){}r=!0}return r}finally{Sn=n,Nu.transition=t}}return!1}function Cc(e,t,n){e=$o(e,t=ml(0,t=hl(n,t),1),1),t=nc(),null!==e&&(wn(e,1,t),sc(e,t))}function Tc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=$o(t,e=gl(t,e=hl(n,e),1),1),e=nc(),null!==t&&(wn(t,1,e),sc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Ou&n)===n&&(4===Lu||3===Lu&&(130023424&Ou)===Ou&&500>Zt()-Vu?pc(e,0):qu|=n),sc(e,t)}function xc(e,t){0===t&&(1&e.mode?(t=fn,!(130023424&(fn<<=1))&&(fn=4194304)):t=1);var n=nc();null!==(e=Fo(e,t))&&(wn(e,t,n),sc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}null!==r&&r.delete(t),xc(e,n)}function Ac(e,t){return Qt(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Dc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case Ce:return Fc(n.children,i,s,t);case Te:o=8,i|=8;break;case Ie:return(e=Oc(12,n,t,2|i)).elementType=Ie,e.lanes=s,e;case Ae:return(e=Oc(13,n,t,i)).elementType=Ae,e.lanes=s,e;case Re:return(e=Oc(19,n,t,i)).elementType=Re,e.lanes=s,e;case Me:return jc(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case xe:o=10;break e;case Ne:o=9;break e;case Pe:o=11;break e;case Oe:o=14;break e;case De:o=16,r=null;break e}throw Error(ae(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Fc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=Me,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_n(0),this.expirationTimes=_n(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uo(s),e}function Vc(e){if(!e)return Ns;e:{if(Bt(e=e._reactInternals)!==e||1!==e.tag)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ae(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Fs(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=$c(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=zo(r=nc(),i=rc(n))).callback=null!=t?t:null,$o(n,s,i),e.current.lanes=i,wn(e,i,r),sc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=nc(),o=rc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$o(i,t,o))&&(ic(e,i,o,s),Vo(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Cu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||As.current)bl=!0;else{if(!(e.lanes&n||128&t.flags))return bl=!1,function(e,t,n){switch(t.tag){case 3:Al(t),go();break;case 5:ea(t);break;case 1:Ds(t.type)&&js(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xs(Co,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xs(na,1&na.current),t.flags|=128,null):n&t.child.childLanes?Ul(e,t,n):(xs(na,1&na.current),null!==(e=Hl(e,t,n))?e.sibling:null);xs(na,1&na.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return Bl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xs(na,na.current),r)break;return null;case 22:case 23:return t.lanes=0,Tl(e,t,n)}return Hl(e,t,n)}(e,t,n);bl=!!(131072&e.flags)}else bl=!1,oo&&1048576&t.flags&&to(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var i=Os(t,Ps.current);Ro(t,n),i=va(null,t,r,e,i,n);var s=_a();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(r)?(s=!0,js(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Uo(t),i.updater=ol,t.stateNode=i,i._reactInternals=t,cl(t,r,e,n),t=Pl(null,t,r,!0,s,n)):(t.tag=0,oo&&s&&no(t),Sl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Dc(e)?1:0;if(null!=e){if((e=e.$$typeof)===Pe)return 11;if(e===Oe)return 14}return 2}(r),e=il(r,e),i){case 0:t=xl(null,t,r,e,n);break e;case 1:t=Nl(null,t,r,e,n);break e;case 11:t=El(null,t,r,e,n);break e;case 14:t=kl(null,t,r,il(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xl(e,t,r,i=t.elementType===r?i:il(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nl(e,t,r,i=t.elementType===r?i:il(r,i),n);case 3:e:{if(Al(t),null===e)throw Error(ae(387));r=t.pendingProps,i=(s=t.memoizedState).element,qo(e,t),Wo(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Rl(e,t,r,n,i=hl(Error(ae(423)),t));break e}if(r!==i){t=Rl(e,t,r,n,i=hl(Error(ae(424)),t));break e}for(so=hs(t.stateNode.containerInfo.firstChild),io=t,oo=!0,ao=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(go(),r===i){t=Hl(e,t,n);break e}Sl(e,t,r,n)}t=t.child}return t;case 5:return ea(t),null===e&&ho(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,is(r,i)?o=null:null!==s&&is(r,s)&&(t.flags|=32),Il(e,t),Sl(e,t,o,n),t.child;case 6:return null===e&&ho(t),null;case 13:return Ul(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Eo(t,null,r,n):Sl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,El(e,t,r,i=t.elementType===r?i:il(r,i),n);case 7:return Sl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,xs(Co,r._currentValue),r._currentValue=o,null!==s)if(ui(s.value,o)){if(s.children===i.children&&!As.current){t=Hl(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var a=s.dependencies;if(null!==a){o=s.child;for(var l=a.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=zo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ao(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(ae(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ao(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Sl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Oo(i)),t.flags|=1,Sl(e,t,r,n),t.child;case 14:return i=il(r=t.type,t.pendingProps),kl(e,t,r,i=il(r.type,i),n);case 15:return Cl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:il(r,i),Wl(e,t),t.tag=1,Ds(r)?(e=!0,js(t)):e=!1,Ro(t,n),ll(t,r,i),cl(t,r,i,n),Pl(null,t,r,!0,e,n);case 19:return Bl(e,t,n);case 22:return Tl(e,t,n)}throw Error(ae(156,t.tag))};var Qc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eh(){}function th(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",eh);return e._reactRootContainer=o,e[gs]=o.current,Bi(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",eh);return e._reactRootContainer=l,e[gs]=l.current,Bi(8===e.nodeType?e.parentNode:e),dc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ae(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Wc(null,e,null,null)})),t[gs]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=In();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&0!==t&&t<Ln[n].priority;n++);Ln.splice(n,0,e),0===n&&qn(e)}},kn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pn(t.pendingLanes);0!==n&&(bn(t,1|n),sc(t,Zt()),!(6&Pu)&&(Bu=Zt()+500,Bs()))}break;case 13:dc((function(){var t=Fo(e,1);if(null!==t){var n=nc();ic(t,e,1,n)}})),Gc(e,1)}},Cn=function(e){if(13===e.tag){var t=Fo(e,134217728);null!==t&&ic(t,e,134217728,nc()),Gc(e,134217728)}},Tn=function(e){if(13===e.tag){var t=rc(e),n=Fo(e,t);null!==n&&ic(n,e,t,nc()),Gc(e,t)}},In=function(){return Sn},xn=function(e,t){var n=Sn;try{return Sn=e,t()}finally{Sn=n}},kt=function(e,t,n){switch(t){case"input":if(et(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Es(r);if(!i)throw Error(ae(90));Qe(r),et(r,i)}}}break;case"textarea":at(e,n);break;case"select":null!=(t=n.value)&&it(e,!!n.multiple,t,!1)}},Pt=hc,At=dc;var nh={usingClientEntryPoint:!1,Events:[bs,Ss,Es,xt,Nt,hc]},rh={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ih={bundleType:rh.bundleType,version:rh.version,rendererPackageName:rh.rendererPackageName,rendererConfig:rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Se.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Kt(e))?null:e.stateNode},findFiberByHostInstance:rh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{an=sh.inject(ih),ln=sh}catch(dt){}}te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nh,te.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(ae(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ke,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},te.createRoot=function(e,t){if(!Jc(e))throw Error(ae(299));var n=!1,r="",i=Qc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,i),e[gs]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Yc(t)},te.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ae(188));throw e=Object.keys(e).join(","),Error(ae(268,e))}return e=null===(e=Kt(t))?null:e.stateNode},te.flushSync=function(e){return dc(e)},te.hydrate=function(e,t,n){if(!Zc(t))throw Error(ae(200));return th(null,e,t,!0,n)},te.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(ae(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Qc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,s,o),e[gs]=t.current,Bi(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},te.render=function(e,t,n){if(!Zc(t))throw Error(ae(200));return th(null,e,t,!1,n)},te.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(ae(40));return!!e._reactRootContainer&&(dc((function(){th(null,null,e,!1,(function(){e._reactRootContainer=null,e[gs]=null}))})),!0)},te.unstable_batchedUpdates=hc,te.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(ae(200));if(null==e||void 0===e._reactInternals)throw Error(ae(38));return th(e,t,n,!1,r)},te.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),ee.exports=te;var oh=ee.exports;const ah=n(oh);var lh=oh;Z.createRoot=lh.createRoot,Z.hydrateRoot=lh.hydrateRoot;var uh={};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const ch=!1,hh="${JSCORE_VERSION}",dh=function(e,t){if(!e)throw fh(t)},fh=function(e){return new Error("Firebase Database ("+hh+") INTERNAL ASSERT FAILED: "+e)},ph=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ph(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new gh;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class gh extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yh=function(e){const t=ph(e);return mh.encodeByteArray(t,!0)},vh=function(e){return yh(e).replace(/\./g,"")},_h=function(e){try{return mh.decodeString(e,!0)}catch(_j){console.error("base64Decode failed: ",_j)}return null};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function wh(e){return bh(void 0,e)}function bh(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=bh(e[n],t[n]));return e}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Sh=()=>
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Eh=()=>{try{return Sh()||(()=>{if("undefined"==typeof process||void 0===uh)return;const e=uh.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(_j){return}const t=e&&_h(e[1]);return t&&JSON.parse(t)})()}catch(_j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${_j}`)}},kh=e=>{var t,n;return null===(n=null===(t=Eh())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ch=e=>{const t=kh(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Th=()=>{var e;return null===(e=Eh())||void 0===e?void 0:e.config},Ih=e=>{var t;return null===(t=Eh())||void 0===t?void 0:t[`_${e}`]};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class xh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Nh(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[vh(JSON.stringify({alg:"none",type:"JWT"})),vh(JSON.stringify(s)),""].join(".")}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Ph(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ah(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ph())}function Rh(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Oh(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dh(){return!0===ch}function Mh(){return!function(){var e;const t=null===(e=Eh())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(_j){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lh(){try{return"object"==typeof indexedDB}catch(_j){return!1}}function Fh(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(vT){t(vT)}}))}class jh extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,jh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uh.prototype.create)}}class Uh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(qh,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new jh(r,o,n)}}const qh=/\{\$([^}]+)}/g;
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function zh(e){return JSON.parse(e)}function $h(e){return JSON.stringify(e)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Vh=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=zh(_h(s[0])||""),n=zh(_h(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(_j){}return{header:t,claims:n,data:r,signature:i}};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Bh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wh(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Hh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Kh(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Gh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Qh(n)&&Qh(s)){if(!Gh(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qh(e){return null!==e&&"object"==typeof e}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Yh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Xh{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let c=0;c<16;c++)n[c]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let c=0;c<16;c++)n[c]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let c=16;c<80;c++){const e=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):c<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+u+i+n[c]&4294967295;u=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Jh{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Zh),void 0===r.error&&(r.error=Zh),void 0===r.complete&&(r.complete=Zh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(_j){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(_j){"undefined"!=typeof console&&console.error&&console.error(_j)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Zh(){}function ed(e,t){return`${e} failed: ${t} argument `}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const td=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},nd=1e3,rd=2,id=144e5,sd=.5;function od(e,t=nd,n=rd){const r=t*Math.pow(n,e),i=Math.round(sd*r*(Math.random()-.5)*2);return Math.min(id,r+i)}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function ad(e){return e&&e._delegate?e._delegate:e}class ld{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const ud="[DEFAULT]";
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let cd=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new xh;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(_j){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(_j){if(r)return null;throw _j}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e))try{this.getOrInitializeService({instanceIdentifier:ud})}catch(_j){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(_j){}}}}clearInstance(e=ud){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=ud){return this.instances.has(e)}getOptions(e=ud){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:hd(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}return n||null}normalizeInstanceIdentifier(e=ud){return this.component?this.component.multipleInstances?e:ud:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}};function hd(e){return e===ud?void 0:e}class dd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cd(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var fd;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(fd||(fd={}));const pd={debug:fd.DEBUG,verbose:fd.VERBOSE,info:fd.INFO,warn:fd.WARN,error:fd.ERROR,silent:fd.SILENT},md=fd.INFO,gd={[fd.DEBUG]:"log",[fd.VERBOSE]:"log",[fd.INFO]:"info",[fd.WARN]:"warn",[fd.ERROR]:"error"},yd=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=gd[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class vd{constructor(e){this.name=e,this._logLevel=md,this._logHandler=yd,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fd))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?pd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fd.DEBUG,...e),this._logHandler(this,fd.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fd.VERBOSE,...e),this._logHandler(this,fd.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fd.INFO,...e),this._logHandler(this,fd.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fd.WARN,...e),this._logHandler(this,fd.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fd.ERROR,...e),this._logHandler(this,fd.ERROR,...e)}}const _d=(e,t)=>t.some((t=>e instanceof t));let wd,bd;const Sd=new WeakMap,Ed=new WeakMap,kd=new WeakMap,Cd=new WeakMap,Td=new WeakMap;let Id={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ed.get(e);if("objectStoreNames"===t)return e.objectStoreNames||kd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pd(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function xd(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bd||(bd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Ad(this),t),Pd(Sd.get(this))}:function(...t){return Pd(e.apply(Ad(this),t))}:function(t,...n){const r=e.call(Ad(this),t,...n);return kd.set(r,t.sort?t.sort():[t]),Pd(r)}}function Nd(e){return"function"==typeof e?xd(e):(e instanceof IDBTransaction&&function(e){if(Ed.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Ed.set(e,t)}(e),_d(e,wd||(wd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Id):e)}function Pd(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Pd(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Sd.set(t,e)})).catch((()=>{})),Td.set(t,e),t}(e);if(Cd.has(e))return Cd.get(e);const t=Nd(e);return t!==e&&(Cd.set(e,t),Td.set(t,e)),t}const Ad=e=>Td.get(e);function Rd(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Pd(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Pd(o.result),e.oldVersion,e.newVersion,Pd(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Od=["get","getKey","getAll","getAllKeys","count"],Dd=["put","add","delete","clear"],Md=new Map;function Ld(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Md.get(t))return Md.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Dd.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Od.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return Md.set(t,s),s}var Fd;Fd=Id,Id={...Fd,get:(e,t,n)=>Ld(e,t)||Fd.get(e,t,n),has:(e,t)=>!!Ld(e,t)||Fd.has(e,t)};
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class jd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Ud="@firebase/app",qd="0.10.7",zd=new vd("@firebase/app"),$d="@firebase/app-compat",Vd="@firebase/analytics-compat",Bd="@firebase/analytics",Wd="@firebase/app-check-compat",Hd="@firebase/app-check",Kd="@firebase/auth",Gd="@firebase/auth-compat",Qd="@firebase/database",Yd="@firebase/database-compat",Xd="@firebase/functions",Jd="@firebase/functions-compat",Zd="@firebase/installations",ef="@firebase/installations-compat",tf="@firebase/messaging",nf="@firebase/messaging-compat",rf="@firebase/performance",sf="@firebase/performance-compat",of="@firebase/remote-config",af="@firebase/remote-config-compat",lf="@firebase/storage",uf="@firebase/storage-compat",cf="@firebase/firestore",hf="@firebase/vertexai-preview",df="@firebase/firestore-compat",ff="firebase",pf="[DEFAULT]",mf={[Ud]:"fire-core",[$d]:"fire-core-compat",[Bd]:"fire-analytics",[Vd]:"fire-analytics-compat",[Hd]:"fire-app-check",[Wd]:"fire-app-check-compat",[Kd]:"fire-auth",[Gd]:"fire-auth-compat",[Qd]:"fire-rtdb",[Yd]:"fire-rtdb-compat",[Xd]:"fire-fn",[Jd]:"fire-fn-compat",[Zd]:"fire-iid",[ef]:"fire-iid-compat",[tf]:"fire-fcm",[nf]:"fire-fcm-compat",[rf]:"fire-perf",[sf]:"fire-perf-compat",[of]:"fire-rc",[af]:"fire-rc-compat",[lf]:"fire-gcs",[uf]:"fire-gcs-compat",[cf]:"fire-fst",[df]:"fire-fst-compat",[hf]:"fire-vertex","fire-js":"fire-js",[ff]:"fire-js-all"},gf=new Map,yf=new Map,vf=new Map;function _f(e,t){try{e.container.addComponent(t)}catch(_j){zd.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,_j)}}function wf(e){const t=e.name;if(vf.has(t))return zd.debug(`There were multiple attempts to register component ${t}.`),!1;vf.set(t,e);for(const n of gf.values())_f(n,e);for(const n of yf.values())_f(n,e);return!0}function bf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sf(e){return void 0!==e.settings}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Ef=new Uh("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class kf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ld("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ef.create("app-deleted",{appName:this._name})}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Cf="10.12.4";function Tf(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:pf,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Ef.create("bad-app-name",{appName:String(i)});if(n||(n=Th()),!n)throw Ef.create("no-options");const s=gf.get(i);if(s){if(Gh(n,s.options)&&Gh(r,s.config))return s;throw Ef.create("duplicate-app",{appName:i})}const o=new dd(i);for(const l of vf.values())o.addComponent(l);const a=new kf(n,r,o);return gf.set(i,a),a}function If(e=pf){const t=gf.get(e);if(!t&&e===pf&&Th())return Tf();if(!t)throw Ef.create("no-app",{appName:e});return t}function xf(e,t,n){var r;let i=null!==(r=mf[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void zd.warn(e.join(" "))}wf(new ld(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Nf="firebase-heartbeat-database",Pf=1,Af="firebase-heartbeat-store";let Rf=null;function Of(){return Rf||(Rf=Rd(Nf,Pf,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Af)}catch(_j){console.warn(_j)}}}).catch((e=>{throw Ef.create("idb-open",{originalErrorMessage:e.message})}))),Rf}async function Df(e,t){try{const n=(await Of()).transaction(Af,"readwrite"),r=n.objectStore(Af);await r.put(t,Mf(e)),await n.done}catch(_j){if(_j instanceof jh)zd.warn(_j.message);else{const t=Ef.create("idb-set",{originalErrorMessage:null==_j?void 0:_j.message});zd.warn(t.message)}}}function Mf(e){return`${e.name}!${e.options.appId}`}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Lf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jf(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ff();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ff(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Uf(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Uf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=vh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ff(){return(new Date).toISOString().substring(0,10)}class jf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Lh()&&Fh().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Of()).transaction(Af),n=await t.objectStore(Af).get(Mf(e));return await t.done,n}catch(_j){if(_j instanceof jh)zd.warn(_j.message);else{const t=Ef.create("idb-get",{originalErrorMessage:null==_j?void 0:_j.message});zd.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Df(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Df(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Uf(e){return vh(JSON.stringify({version:2,heartbeats:e})).length}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var qf;function zf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function $f(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}qf="",wf(new ld("platform-logger",(e=>new jd(e)),"PRIVATE")),wf(new ld("heartbeat",(e=>new Lf(e)),"PRIVATE")),xf(Ud,qd,qf),xf(Ud,qd,"esm2017"),xf("fire-js",""),
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
xf("firebase","10.12.4","app"),"function"==typeof SuppressedError&&SuppressedError;const Vf=$f,Bf=new Uh("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wf=new vd("@firebase/auth");function Hf(e,...t){Wf.logLevel<=fd.ERROR&&Wf.error(`Auth (${Cf}): ${e}`,...t)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Kf(e,...t){throw Xf(e,...t)}function Gf(e,...t){return Xf(e,...t)}function Qf(e,t,n){const r=Object.assign(Object.assign({},Vf()),{[t]:n});return new Uh("auth","Firebase",r).create(t,{appName:e.name})}function Yf(e){return Qf(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xf(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Bf.create(e,...t)}function Jf(e,t,...n){if(!e)throw Xf(t,...n)}function Zf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hf(t),new Error(t)}function ep(e,t){e||Zf(t)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function tp(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function np(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function rp(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==np()&&"https:"!==np()&&!Rh()&&!("connection"in navigator)||navigator.onLine}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class ip{constructor(e,t){this.shortDelay=e,this.longDelay=t,ep(t>e,"Short delay should be less than long delay!"),this.isMobile=Ah()||Oh()}get(){return rp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function sp(e,t){ep(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class op{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Zf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Zf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Zf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const ap={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lp=new ip(3e4,6e4);
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function up(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function cp(e,t,n,r,i={}){return hp(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Yh(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),op.fetch()(dp(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function hp(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ap),t);try{const t=new fp(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw pp(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw pp(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw pp(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw pp(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Qf(e,a,o);Kf(e,a)}}catch(_j){if(_j instanceof jh)throw _j;Kf(e,"network-request-failed",{message:String(_j)})}}function dp(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?sp(e.config,i):`${e.config.apiScheme}://${i}`}class fp{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Gf(this.auth,"network-request-failed"))),lp.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function pp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gf(e,t,r);return i.customData._tokenResponse=n,i}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */async function mp(e,t){return cp(e,"POST","/v1/accounts:lookup",t)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function gp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(_j){}}function yp(e){return 1e3*Number(e)}function vp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{const e=_h(n);return e?JSON.parse(e):(Hf("Failed to decode base64 JWT payload"),null)}catch(_j){return Hf("Caught error parsing JWT payload as JSON",null==_j?void 0:_j.toString()),null}}function _p(e){const t=vp(e);return Jf(t,"internal-error"),Jf(void 0!==t.exp,"internal-error"),Jf(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */async function wp(e,t,n=!1){if(n)return t;try{return await t}catch(_j){throw _j instanceof jh&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(_j)&&e.auth.currentUser===e&&await e.auth.signOut(),_j}}class bp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(_j){return void("auth/network-request-failed"===(null==_j?void 0:_j.code)&&this.schedule(!0))}this.schedule()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Sp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gp(this.lastLoginAt),this.creationTime=gp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */async function Ep(e){var t;const n=e.auth,r=await e.getIdToken(),i=await wp(e,mp(n,{idToken:r}));Jf(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?kp(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c=!!l&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sp(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,h)}function kp(e){return e.map((e=>{var{providerId:t}=e,n=zf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class Cp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Jf(e.idToken,"internal-error"),Jf(void 0!==e.idToken,"internal-error"),Jf(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):_p(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Jf(0!==e.length,"internal-error");const t=_p(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Jf(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await hp(e,{},(async()=>{const n=Yh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=dp(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",op.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Cp;return n&&(Jf("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Jf("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Jf("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cp,this.toJSON())}_performRefresh(){return Zf("not implemented")}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Tp(e,t){Jf("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Ip{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=zf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Sp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await wp(this,this.stsTokenManager.getToken(this.auth,e));return Jf(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=ad(e),r=await n.getIdToken(t),i=vp(r);Jf(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gp(yp(i.auth_time)),issuedAtTime:gp(yp(i.iat)),expirationTime:gp(yp(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ad(e);await Ep(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Jf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ip(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Jf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ep(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sf(this.auth.app))return Promise.reject(Yf(this.auth));const e=await this.getIdToken();return await wp(this,async function(e,t){return cp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:S}=t;Jf(v&&S,e,"internal-error");const E=Cp.fromJSON(this.name,S);Jf("string"==typeof v,e,"internal-error"),Tp(c,e.name),Tp(h,e.name),Jf("boolean"==typeof _,e,"internal-error"),Jf("boolean"==typeof w,e,"internal-error"),Tp(d,e.name),Tp(f,e.name),Tp(p,e.name),Tp(m,e.name),Tp(g,e.name),Tp(y,e.name);const k=new Ip({uid:v,auth:e,email:h,emailVerified:_,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(k.providerData=b.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new Cp;r.updateFromServerResponse(t);const i=new Ip({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ep(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Jf(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?kp(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Cp;o.updateFromIdToken(n);const a=new Ip({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Sp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,l),a}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const xp=new Map;function Np(e){ep(e instanceof Function,"Expected a class definition");let t=xp.get(e);return t?(ep(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xp.set(e,t),t)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Pp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pp.type="NONE";const Ap=Pp;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Rp(e,t,n){return`firebase:${e}:${t}:${n}`}class Op{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Rp(this.userKey,r.apiKey,i),this.fullPersistenceKey=Rp("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ip._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Op(Np(Ap),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Np(Ap);const s=Rp(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Ip._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Op(i,e,n)):new Op(i,e,n)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Dp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qp(t))return"Blackberry";if(zp(t))return"Webos";if(Lp(t))return"Safari";if((t.includes("chrome/")||Fp(t))&&!t.includes("edge/"))return"Chrome";if(Up(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Mp(e=Ph()){return/firefox\//i.test(e)}function Lp(e=Ph()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Fp(e=Ph()){return/crios\//i.test(e)}function jp(e=Ph()){return/iemobile/i.test(e)}function Up(e=Ph()){return/android/i.test(e)}function qp(e=Ph()){return/blackberry/i.test(e)}function zp(e=Ph()){return/webos/i.test(e)}function $p(e=Ph()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vp(){return function(){const e=Ph();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bp(e=Ph()){return $p(e)||Up(e)||zp(e)||qp(e)||/windows phone/i.test(e)||jp(e)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Wp(e,t=[]){let n;switch(e){case"Browser":n=Dp(Ph());break;case"Worker":n=`${Dp(Ph())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cf}/${r}`}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Hp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(_j){r(_j)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(_j){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==_j?void 0:_j.message})}}}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Kp{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Gp{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yp(this),this.idTokenSubscription=new Yp(this),this.beforeStateQueue=new Hp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Np(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Op.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(_j){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await mp(this,{idToken:e}),n=await Ip._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Sf(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(_j){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(_j)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Jf(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(_j){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ep(e)}catch(_j){if("auth/network-request-failed"!==(null==_j?void 0:_j.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sf(this.app))return Promise.reject(Yf(this));const t=e?ad(e):null;return t&&Jf(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Jf(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Sf(this.app)?Promise.reject(Yf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sf(this.app)?Promise.reject(Yf(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Np(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return cp(e,"GET","/v2/passwordPolicy",up(e,t))}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(this),t=new Kp(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Uh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return cp(e,"POST","/v2/accounts:revokeToken",up(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Np(e)||this._popupRedirectResolver;Jf(t,this,"argument-error"),this.redirectPersistenceManager=await Op.create(this,[Np(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jf(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Jf(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Wf.logLevel<=fd.WARN&&Wf.warn(`Auth (${Cf}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Qp(e){return ad(e)}class Yp{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Jh(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Jf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let Xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jp(e,t,n){const r=Qp(e);Jf(r._canInitEmulator,r,"emulator-config-failed"),Jf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=Zp(t),{host:s,port:o}=function(e){const t=Zp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:em(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:em(t)}}}(t),a=null===o?"":`:${o}`;r.config.emulator={url:`${i}//${s}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */()}function Zp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function em(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class tm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zf("not implemented")}_getIdTokenResponse(e){return Zf("not implemented")}_linkToIdToken(e,t){return Zf("not implemented")}_getReauthenticationResolver(e){return Zf("not implemented")}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */async function nm(e,t){return async function(e,t,n,r,i={}){const s=await cp(e,t,n,r,i);return"mfaPendingCredential"in s&&Kf(e,"multi-factor-auth-required",{_serverResponse:s}),s}(e,"POST","/v1/accounts:signInWithIdp",up(e,t))}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class rm extends tm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=zf(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new rm(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return nm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nm(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yh(t)}return e}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class im{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class sm extends im{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class om extends sm{constructor(){super("facebook.com")}static credential(e){return rm._fromParams({providerId:om.PROVIDER_ID,signInMethod:om.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return om.credentialFromTaggedObject(e)}static credentialFromError(e){return om.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return om.credential(e.oauthAccessToken)}catch(t){return null}}}om.FACEBOOK_SIGN_IN_METHOD="facebook.com",om.PROVIDER_ID="facebook.com";
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class am extends sm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rm._fromParams({providerId:am.PROVIDER_ID,signInMethod:am.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return am.credentialFromTaggedObject(e)}static credentialFromError(e){return am.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return am.credential(t,n)}catch(r){return null}}}am.GOOGLE_SIGN_IN_METHOD="google.com",am.PROVIDER_ID="google.com";
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class lm extends sm{constructor(){super("github.com")}static credential(e){return rm._fromParams({providerId:lm.PROVIDER_ID,signInMethod:lm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lm.credentialFromTaggedObject(e)}static credentialFromError(e){return lm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return lm.credential(e.oauthAccessToken)}catch(t){return null}}}lm.GITHUB_SIGN_IN_METHOD="github.com",lm.PROVIDER_ID="github.com";
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class um extends sm{constructor(){super("twitter.com")}static credential(e,t){return rm._fromParams({providerId:um.PROVIDER_ID,signInMethod:um.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return um.credentialFromTaggedObject(e)}static credentialFromError(e){return um.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return um.credential(t,n)}catch(r){return null}}}um.TWITTER_SIGN_IN_METHOD="twitter.com",um.PROVIDER_ID="twitter.com";
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class cm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Ip._fromIdTokenResponse(e,n,r),s=hm(n);return new cm({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hm(n);return new cm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class dm extends jh{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,dm.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new dm(e,t,n,r)}}function fm(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw dm._fromErrorAndOperation(e,n,t,r);throw n}))}const pm="__sak";
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class mm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pm,"1"),this.storage.removeItem(pm),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class gm extends mm{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ph();return Lp(e)||$p(e)}()&&function(){try{return!(!window||window===window.top)}catch(_j){return!1}}(),this.fallbackToPolling=Bp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Vp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gm.type="LOCAL";const ym=gm;
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class vm extends mm{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vm.type="SESSION";const _m=vm;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new wm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function bm(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */wm.receivers=[];class Sm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=bm("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Em(){return window}
/**
       * @license
       * Copyright 2020 Google LLC.
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function km(){return void 0!==Em().WorkerGlobalScope&&"function"==typeof Em().importScripts}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Cm="firebaseLocalStorageDb",Tm="firebaseLocalStorage",Im="fbase_key";class xm{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Nm(e,t){return e.transaction([Tm],t?"readwrite":"readonly").objectStore(Tm)}function Pm(){const e=indexedDB.open(Cm,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Tm,{keyPath:Im})}catch(_j){n(_j)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Tm)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Cm);return new xm(e).toPromise()}(),t(await Pm()))}))}))}async function Am(e,t,n){const r=Nm(e,!0).put({[Im]:t,value:n});return new xm(r).toPromise()}function Rm(e,t){const n=Nm(e,!0).delete(t);return new xm(n).toPromise()}class Om{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Pm()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(_j){if(t++>3)throw _j;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return km()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(km()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Sm(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await Am(e,pm,"1"),await Rm(e,pm),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Am(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Nm(e,!1).get(t),r=await new xm(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Rm(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Nm(e,!1).getAll();return new xm(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Om.type="LOCAL";const Dm=Om;
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Mm(e,t){return t?Np(t):(Jf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */new ip(3e4,6e4);class Lm extends tm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Fm(e){
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */return async function(e,t,n=!1){if(Sf(e.app))return Promise.reject(Yf(e));const r="signIn",i=await fm(e,r,t),s=await cm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new Lm(e),e.bypassAuthState)}function jm(e){const{auth:t,user:n}=e;return Jf(n,t,"internal-error"),
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
async function(e,t,n=!1){const{auth:r}=e;if(Sf(r.app))return Promise.reject(Yf(r));const i="reauthenticate";try{const s=await wp(e,fm(r,i,t,e),n);Jf(s.idToken,r,"internal-error");const o=vp(s.idToken);Jf(o,r,"internal-error");const{sub:a}=o;return Jf(e.uid===a,r,"user-mismatch"),cm._forOperation(e,i,s)}catch(_j){throw"auth/user-not-found"===(null==_j?void 0:_j.code)&&Kf(r,"user-mismatch"),_j}}(n,new Lm(e),e.bypassAuthState)}async function Um(e){const{auth:t,user:n}=e;return Jf(n,t,"internal-error"),async function(e,t,n=!1){const r=await wp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cm._forOperation(e,"link",r)}(n,new Lm(e),e.bypassAuthState)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class qm{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(_j){this.reject(_j)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(_j){this.reject(_j)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fm;case"linkViaPopup":case"linkViaRedirect":return Um;case"reauthViaPopup":case"reauthViaRedirect":return jm;default:Kf(this.auth,"internal-error")}}resolve(e){ep(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ep(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const zm=new ip(2e3,1e4);async function $m(e,t,n){if(Sf(e.app))return Promise.reject(Gf(e,"operation-not-supported-in-this-environment"));const r=Qp(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Kf(e,"argument-error"),Qf(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,im);const i=Mm(r,n);return new Vm(r,"signInViaPopup",t,i).executeNotNull()}class Vm extends qm{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Vm.currentPopupAction&&Vm.currentPopupAction.cancel(),Vm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Jf(e,this.auth,"internal-error"),e}async onExecution(){ep(1===this.filter.length,"Popup operations only handle one event");const e=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Gf(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Gf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Gf(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,zm.get())};e()}}Vm.currentPopupAction=null;
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Bm="pendingRedirect",Wm=new Map;class Hm extends qm{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Wm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Rp(Bm,e.config.apiKey,e.name)}(t),r=function(e){return Np(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(_j){e=()=>Promise.reject(_j)}Wm.set(this.auth._key(),e)}return this.bypassAuthState||Wm.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Km(e,t){Wm.set(e._key(),t)}async function Gm(e,t,n=!1){if(Sf(e.app))return Promise.reject(Yf(e));const r=Qp(e),i=Mm(r,t),s=new Hm(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Qm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xm(e);default:return!1}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Xm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gf(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ym(e))}saveEventToCache(e){this.cachedEventUids.add(Ym(e)),this.lastProcessedEventTime=Date.now()}}function Ym(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Xm({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Jm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zm=/^https?/;async function eg(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return cp(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(tg(r))return}catch(n){}Kf(e,"unauthorized-domain")}function tg(e){const t=tp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Zm.test(n))return!1;if(Jm.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
       * @license
       * Copyright 2020 Google LLC.
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const ng=new ip(3e4,6e4);function rg(){const e=Em().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ig(e){return new Promise(((t,n)=>{var r,i,s,o;function a(){rg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rg(),n(Gf(e,"network-request-failed"))},timeout:ng.get()})}if(null===(i=null===(r=Em().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Em().gapi)||void 0===s?void 0:s.load)){const t=function(e){return`__${e}${Math.floor(1e6*Math.random())}`}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */("iframefcb");return Em()[t]=()=>{gapi.load?a():n(Gf(e,"network-request-failed"))},(o=`${Xp.gapiScript}?onload=${t}`,Xp.loadJS(o)).catch((e=>n(e)))}a()}})).catch((e=>{throw sg=null,e}))}let sg=null;
/**
       * @license
       * Copyright 2020 Google LLC.
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const og=new ip(5e3,15e3),ag="__/auth/iframe",lg="emulator/auth/iframe",ug={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hg(e){const t=e.config;Jf(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sp(t,lg):`https://${e.config.authDomain}/${ag}`,r={apiKey:t.apiKey,appName:e.name,v:Cf},i=cg.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Yh(r).slice(1)}`}async function dg(e){const t=await function(e){return sg=sg||ig(e),sg}(e),n=Em().gapi;return Jf(n,e,"internal-error"),t.open({where:document.body,url:hg(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ug,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Gf(e,"network-request-failed"),s=Em().setTimeout((()=>{r(i)}),og.get());function o(){Em().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}
/**
       * @license
       * Copyright 2020 Google LLC.
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const fg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_j){}}}function mg(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fg),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ph().toLowerCase();n&&(a=Fp(u)?"_blank":n),Mp(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Ph()){var t;return $p(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(t||"",a),new pg(null);const h=window.open(t||"",a,c);Jf(h,e,"popup-blocked");try{h.focus()}catch(_j){}return new pg(h)}const gg="__/auth/handler",yg="emulator/auth/handler",vg=encodeURIComponent("fac");async function _g(e,t,n,r,i,s){Jf(e.config.authDomain,e,"auth-domain-config-required"),Jf(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Cf,eventId:i};if(t instanceof im){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Hh(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof sm){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${vg}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?sp(e,yg):`https://${e.authDomain}/${gg}`}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e)}?${Yh(a).slice(1)}${u}`}const wg="webStorageSupport",bg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_m,this._completeRedirectFn=Gm,this._overrideRedirectResult=Km}async _openPopup(e,t,n,r){var i;return ep(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),mg(e,await _g(e,t,n,tp(),r),bm())}async _openRedirect(e,t,n,r){return await this._originValidation(e),function(e){Em().location.href=e}(await _g(e,t,n,tp(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ep(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await dg(e),n=new Qm(e);return t.register("authEvent",(t=>(Jf(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wg,{type:wg},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[wg];void 0!==i&&t(!!i),Kf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=eg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bp()||Lp()||$p()}};var Sg="@firebase/auth",Eg="1.7.5";
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class kg{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Jf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Cg=Ih("authIdTokenMaxAge")||300;let Tg=null;var Ig;!function(e){Xp=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Gf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ig="Browser",wf(new ld("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Jf(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Ig,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wp(Ig)},l=new Gp(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Np);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),wf(new ld("auth-internal",(e=>(e=>new kg(e))(Qp(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),xf(Sg,Eg,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ig)),xf(Sg,Eg,"esm2017");
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */
const xg={};
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */function Ng(e){return Object.isFrozen(e)&&Object.isFrozen(e.raw)}function Pg(e){return-1===e.toString().indexOf("`")}Pg((e=>e``))||Pg((e=>e`\0`))||Pg((e=>e`\n`))||Pg((e=>e`\u0000`)),Ng``&&Ng`\0`&&Ng`\n`&&Ng`\u0000`
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */;let Ag,Rg="google#safe";function Og(){var e;return""!==Rg&&null!==(e=function(){if("undefined"!=typeof window)return window.trustedTypes}())&&void 0!==e?e:null}
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */
class Dg{constructor(e,t){this.privateDoNotAccessOrElseWrappedResourceUrl=e}toString(){return this.privateDoNotAccessOrElseWrappedResourceUrl.toString()}}function Mg(e){var t;const n=e,r=null===(t=function(){var e,t;if(void 0===Ag)try{Ag=null!==(t=null===(e=Og())||void 0===e?void 0:e.createPolicy(Rg,{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e}))&&void 0!==t?t:null}catch(n){Ag=null}return Ag}())||void 0===t?void 0:t.createScriptURL(n);return null!=r?r:new Dg(n,xg)}
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */
function Lg(e,...t){if(0===t.length)return Mg(e[0]);e[0].toLowerCase();let n=e[0];for(let r=0;r<t.length;r++)n+=encodeURIComponent(t[r])+e[r+1];return Mg(n)}
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */function Fg(e,t,n){e.src=function(e){var t;if(null===(t=Og())||void 0===t?void 0:t.isScriptURL(e))return e;if(e instanceof Dg)return e.privateDoNotAccessOrElseWrappedResourceUrl;throw new Error("")}(t),
/**
       * @license
       * SPDX-License-Identifier: Apache-2.0
       */function(e){const t=function(e,t){var n;const r=t.document,i=null===(n=r.querySelector)||void 0===n?void 0:n.call(r,`${e}[nonce]`);return i&&(i.nonce||i.getAttribute("nonce"))||""}("script",e.ownerDocument&&e.ownerDocument.defaultView||window);t&&e.setAttribute("nonce",t)}(e)}const jg="@firebase/installations",Ug="0.6.8",qg=1e4,zg=`w:${Ug}`,$g="FIS_v2",Vg="https://firebaseinstallations.googleapis.com/v1",Bg=36e5,Wg=new Uh("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Hg(e){return e instanceof jh&&e.code.includes("request-failed")}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Kg({projectId:e}){return`${Vg}/projects/${e}/installations`}function Gg(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Qg(e,t){const n=(await t.json()).error;return Wg.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Yg({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Xg(e,{refreshToken:t}){const n=Yg(e);return n.append("Authorization",function(e){return`${$g} ${e}`}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(t)),n}async function Jg(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Zg(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const ey=/^[cdef][\w-]{21}$/,ty="";function ny(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e);return ey.test(t)?t:ty}catch(e){return ty}}function ry(e){return`${e.appName}!${e.appId}`}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const iy=new Map;function sy(e,t){const n=ry(e);oy(n,t),function(e,t){const n=(!ay&&"BroadcastChannel"in self&&(ay=new BroadcastChannel("[Firebase] FID Change"),ay.onmessage=e=>{oy(e.data.key,e.data.fid)}),ay);n&&n.postMessage({key:e,fid:t}),0===iy.size&&ay&&(ay.close(),ay=null)}(n,t)}function oy(e,t){const n=iy.get(e);if(n)for(const r of n)r(t)}let ay=null;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const ly="firebase-installations-database",uy=1,cy="firebase-installations-store";let hy=null;function dy(){return hy||(hy=Rd(ly,uy,{upgrade:(e,t)=>{0===t&&e.createObjectStore(cy)}})),hy}async function fy(e,t){const n=ry(e),r=(await dy()).transaction(cy,"readwrite"),i=r.objectStore(cy),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||sy(e,t.fid),t}async function py(e){const t=ry(e),n=(await dy()).transaction(cy,"readwrite");await n.objectStore(cy).delete(t),await n.done}async function my(e,t){const n=ry(e),r=(await dy()).transaction(cy,"readwrite"),i=r.objectStore(cy),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||sy(e,o.fid),o}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */async function gy(e){let t;const n=await my(e.appConfig,(n=>{const r=function(e){const t=e||{fid:ny(),registrationStatus:0};return _y(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Wg.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Kg(e),i=Yg(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:$g,appId:e.appId,sdkVersion:zg},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Jg((()=>fetch(r,a)));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Gg(e.authToken)}}throw await Qg("Create Installation",l)}(e,t);return fy(e.appConfig,n)}catch(_j){throw Hg(_j)&&409===_j.customData.serverCode?await py(e.appConfig):await fy(e.appConfig,{fid:t.fid,registrationStatus:0}),_j}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:yy(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===ty?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function yy(e){let t=await vy(e.appConfig);for(;1===t.registrationStatus;)await Zg(100),t=await vy(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await gy(e);return n||t}return t}function vy(e){return my(e,(e=>{if(!e)throw Wg.create("installation-not-found");return _y(e)}))}function _y(e){return 1===(t=e).registrationStatus&&t.registrationTime+qg<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}async function wy({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${Kg(e)}/${t}/authTokens:generate`}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e,n),i=Xg(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:zg,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Jg((()=>fetch(r,a)));if(l.ok)return Gg(await l.json());throw await Qg("Generate Auth Token",l)}async function by(e,t=!1){let n;const r=await my(e.appConfig,(r=>{if(!Ey(r))throw Wg.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Bg}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await Sy(e.appConfig);for(;1===n.authToken.requestStatus;)await Zg(100),n=await Sy(e.appConfig);const r=n.authToken;return 0===r.requestStatus?by(e,t):r}(e,t),r;{if(!navigator.onLine)throw Wg.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await wy(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await fy(e.appConfig,r),n}catch(_j){if(!Hg(_j)||401!==_j.customData.serverCode&&404!==_j.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await fy(e.appConfig,n)}else await py(e.appConfig);throw _j}}(e,t),t}}));return n?await n:r.authToken}function Sy(e){return my(e,(e=>{if(!Ey(e))throw Wg.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+qg<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n;
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}))}function Ey(e){return void 0!==e&&2===e.registrationStatus}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
async function ky(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await gy(e);t&&await t}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(n),(await by(n,t)).token}function Cy(e){return Wg.create("missing-app-config-values",{valueName:e})}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Ty="installations",Iy=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Cy("App Configuration");if(!e.name)throw Cy("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Cy(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:bf(t,"heartbeat"),_delete:()=>Promise.resolve()}},xy=e=>{const t=bf(e.getProvider("app").getImmediate(),Ty).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await gy(t);return r?r.catch(console.error):by(t).catch(console.error),n.fid}(t),getToken:e=>ky(t,e)}};wf(new ld(Ty,Iy,"PUBLIC")),wf(new ld("installations-internal",xy,"PRIVATE")),xf(jg,Ug),xf(jg,Ug,"esm2017");
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Ny="analytics",Py="firebase_id",Ay="origin",Ry=6e4,Oy="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dy="https://www.googletagmanager.com/gtag/js",My=new vd("@firebase/analytics");
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Ly(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Fy(e,t){const n=document.createElement("script");Fg(n,Lg`https://www.googletagmanager.com/gtag/js?l=${e}&id=${t}`),n.async=!0,document.head.appendChild(n)}function jy(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Ly(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(_j){My.error(_j)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Ly(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(_j){My.error(_j)}e("config",i,s)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(_j){My.error(_j)}}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Uy=new Uh("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."}),qy=30,zy=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function $y(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Vy(e,t=zy,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Uy.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Uy.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Wy;return setTimeout((async()=>{a.abort()}),Ry),By({appId:r,apiKey:i,measurementId:s},o,a,t)}async function By(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=zy){var s;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Uy.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(_j){if(a)return My.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==_j?void 0:_j.message}]`),{appId:o,measurementId:a};throw _j}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:$y(r)},s=Oy.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Uy.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(o),t}catch(_j){const l=_j;if(!function(e){if(!(e instanceof jh&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(i.deleteThrottleMetadata(o),a)return My.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw _j}const u=503===Number(null===(s=null==l?void 0:l.customData)||void 0===s?void 0:s.httpStatus)?od(n,i.intervalMillis,qy):od(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,c),My.debug(`Calling attemptFetch again in ${u} millis`),By(e,c,r,i)}}class Wy{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}async function Hy(e,t,n,r,i,s,o){var a;const l=Vy(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&My.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>My.error(e))),t.push(l);const u=
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
async function(){if(!Lh())return My.warn(Uy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Fh()}catch(_j){return My.warn(Uy.create("indexeddb-unavailable",{errorInfo:null==_j?void 0:_j.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Dy)&&n.src.includes(e))return n;return null})(s)||Fy(s,c.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d[Ay]="firebase",d.update=!0,null!=h&&(d[Py]=h),i("config",c.measurementId,d),c.measurementId}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Ky{constructor(e){this.app=e}_delete(){return delete Gy[this.app.options.appId],Promise.resolve()}}let Gy={},Qy=[];const Yy={};let Xy,Jy,Zy="dataLayer",ev="gtag",tv=!1;function nv(){const e=[];if(Rh()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Uy.create("invalid-analytics-context",{errorInfo:t});My.warn(n.message)}}function rv(e,t,n){nv();const r=e.options.appId;if(!r)throw Uy.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Uy.create("no-api-key");My.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gy[r])throw Uy.create("already-exists",{id:r});if(!tv){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Zy);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=jy(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Gy,Qy,Yy,Zy,ev);Jy=e,Xy=t,tv=!0}return Gy[r]=Hy(e,Qy,Yy,t,Xy,Zy,n),new Ky(e)}function iv(e,t,n,r){e=ad(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Jy,Gy[e.app.options.appId],t,n,r).catch((e=>My.error(e)))}const sv="@firebase/analytics",ov="0.10.6";wf(new ld(Ny,((e,{options:t})=>rv(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),wf(new ld("analytics-internal",(function(e){try{const t=e.getProvider(Ny).getImmediate();return{logEvent:(e,n,r)=>iv(t,e,n,r)}}catch(_j){throw Uy.create("interop-component-reg-failed",{reason:_j})}}),"PRIVATE")),xf(sv,ov),xf(sv,ov,"esm2017");var av,lv,uv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
      Copyright The Closure Library Authors.
      SPDX-License-Identifier: Apache-2.0
      */(function(){var e;
/** @license

       Copyright The Closure Library Authors.
       SPDX-License-Identifier: Apache-2.0
      */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,lv=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},av=r}).apply(void 0!==uv?uv:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var cv,hv,dv,fv,pv,mv,gv,yv,vv,_v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
      Copyright The Closure Library Authors.
      SPDX-License-Identifier: Apache-2.0
      */(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof _v&&_v];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));
/** @license

       Copyright The Closure Library Authors.
       SPDX-License-Identifier: Apache-2.0
      */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function k(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);I=()=>{e.then(A)}};var A=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(yj){E(yj)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(yj){}return e}();function M(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(wj){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,O);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=V(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),W={};function H(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=Z(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=X(e);if(l||(e[B]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function K(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=V(s=e.g[t],n,r,i))&&(q(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,i)),(n=-1<e?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?($(n,e),0==n.h&&(n.src=null,t[B]=null)):q(e)}}}function Q(e){return e in W?W[e]:W[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function X(e){return(e=e[B])instanceof z?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;b(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ne(o,r,!0,t)&&i}if(i=ne(o=t.g=e,r,!0,t)&&i,i=ne(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(o=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&$(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re((()=>{e.g=null,e.i&&(e.i=!1,ie(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,R),ee.prototype[F]=!0,ee.prototype.removeEventListener=function(e,t,n,r){K(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)q(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){R.call(this),this.h=e,this.g={}}h(oe,R);var ae=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&G(e)}),e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),le(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=i.JSON.stringify,ce=i.JSON.parse,he=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){O.call(this,"d")}function ye(){O.call(this,"c")}h(ge,O),h(ye,O);var ve={},_e=null;function we(){return _e=_e||new ee}function be(e){O.call(this,ve.La,e)}function Se(e){const t=we();te(t,new be(t))}function Ee(e,t){O.call(this,ve.STAT_EVENT,e),this.stat=t}function ke(e){const t=we();te(t,new Ee(t,e))}function Ce(e,t){O.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function xe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ue(n)}catch(Cj){return t}}(e,n)+(r?" "+r:"")}))}ve.La="serverreachability",h(be,O),ve.STAT_EVENT="statevent",h(Ee,O),ve.Ma="timingevent",h(Ce,O),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ne,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}h(Re,de),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ne=new Re;var Me={},Le={};function Fe(e,t,n){e.L=1,e.v=ut(it(t)),e.m=n,e.P=!0,je(e,null)}function je(e,t){e.F=Date.now(),ze(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ae[0]=i.toString()),i=ae);for(var s=0;s<i.length;s++){var o=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(u(e.ba,e),t)}function Ve(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Be(e){0==e.j.G||e.J||on(e.j,e)}function We(e){Ve(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function He(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(kj){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Gt(n)}tn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(u(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(kj){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ve(a),ze(a)),r.g=o}else en(r);0<n.i.length&&Yt(n)}else"stop"!=u[0]&&"close"!=u[0]||ln(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ln(n,7):Kt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Se()}catch(kj){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Vt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const d=Vt(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Bt(this.g)))){this.J||4!=d||7==t||Se(),Ve(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=Bt(this.g);e="";var s=r.length,o=4==Vt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){We(this),Be(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,ke(12),We(this),Be(this);break e}xe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,He(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==Le){4==d&&(this.s=4,ke(14),n=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),xe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}xe(this.i,this.l,e,null),He(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),nn(h),h.M=!0,ke(11))}}else xe(this.i,this.l,a,"[Invalid Chunked Response]"),We(this),Be(this)}else xe(this.i,this.l,a,null),He(this,a);4==d&&We(this),this.o&&!this.J&&(4==d?on(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=Vt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),We(this),Be(this)}}}catch(Rj){}},Oe.prototype.cancel=function(){this.J=!0,We(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),ke(17)),We(this),this.s=2,Be(this)):$e(this,this.S-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,e=i.PerformanceNavigationTiming?0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=ct(t[2]||""),this.g=ct(t[3]||"",!0),ot(this,t[4]),this.l=ct(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ct(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?ct(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(bt(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,yt)),e.i=new _t(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ut(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ct(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,vt)),e.join("")};var pt=/[#\/\?@]/g,mt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function bt(e,t){wt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return wt(e),t=kt(e,t),e.g.has(t)}function Et(e,t,n){bt(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(wj){}}function Tt(){this.g=new he}function It(e,t,n){const r=n||"";try{tt(e,(function(e,n){let i=e;o(e)&&(i=ue(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(_j){throw t.push(r+"type="+encodeURIComponent("_badmap")),_j}}function xt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Mt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){wt(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"==typeof e)St(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,St(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(xt,de),xt.prototype.g=function(){return new Nt(this.l,this.j)},xt.prototype.i=function(e){return function(){return e}}({}),h(Nt,ee),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):Rt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Qa=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ee);var Lt=/^https?$/i,Ft=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),zt(e)}function Ut(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function qt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Vt(e)||2!=e.Z()))if(e.u&&4==Vt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==Vt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(nt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Lt.test(o?o.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<Vt(e)?e.g.statusText:""}catch(Cj){a=""}e.l=a+" ["+e.Z()+"]",Ut(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(_j){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Vt(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(gj){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ht(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Qt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Jt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=ut(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(vj){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}un(e)}function Gt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Qt(e){Gt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||P(),x||(I(),x=!0),N.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Fe(n,r,t)}function Jt(e,t){e.H&&v(e.H,(function(e,n){lt(t,n,e)})),e.l&&tt({},(function(e,n){lt(t,n,e)}))}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{It(a,e,"req"+n+"_")}catch(Rj){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||P(),x||(I(),x=!0),N.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=Te(u(e.Fa,e),an(e,e.v)),e.v++,0))}function nn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(it(t)),n.m=null,n.P=!0,je(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=we(),new Ce(r,n)),Yt(e)}else en(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(u(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ut(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=c(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),un(e),Qt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new rt(null);r&&st(o,r),t&&(o.g=t),s&&ot(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Jt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new xt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function dn(){}function fn(){}function pn(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new yn(this)}function mn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?fe(this.o):fe(Ne),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(wj){return void jt(this,wj)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(wj){jt(this,wj)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Vt(this)?this.g.status:-1}catch(dt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(dt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ce(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Ht.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Jt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&Dt(n,this.m,s)),Je(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Qe(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Gt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),tn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=dn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new pn(e,t)},h(pn,ee),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Kt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.G&&Yt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,pn.aa.N.call(this)},h(mn,ge),h(gn,ye),h(yn,dn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new mn(e))},yn.prototype.sa=function(e){te(this.g,new gn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,vv=function(){return new fn},yv=function(){return we()},gv=ve,mv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,pv=Pe,Ae.COMPLETE="complete",fv=Ae,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,dv=pe,hv=xt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,cv=Mt}).apply(void 0!==_v?_v:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const wv="@firebase/firestore";
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class bv{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bv.UNAUTHENTICATED=new bv(null),bv.GOOGLE_CREDENTIALS=new bv("google-credentials-uid"),bv.FIRST_PARTY=new bv("first-party-uid"),bv.MOCK_USER=new bv("mock-user");
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
let Sv="10.12.3";
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Ev=new vd("@firebase/firestore");function kv(){return Ev.logLevel}function Cv(e,...t){if(Ev.logLevel<=fd.DEBUG){const n=t.map(xv);Ev.debug(`Firestore (${Sv}): ${e}`,...n)}}function Tv(e,...t){if(Ev.logLevel<=fd.ERROR){const n=t.map(xv);Ev.error(`Firestore (${Sv}): ${e}`,...n)}}function Iv(e,...t){if(Ev.logLevel<=fd.WARN){const n=t.map(xv);Ev.warn(`Firestore (${Sv}): ${e}`,...n)}}function xv(e){if("string"==typeof e)return e;try{
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */return function(e){return JSON.stringify(e)}(e)}catch(Pj){return e}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Nv(e="Unexpected state"){const t=`FIRESTORE (${Sv}) INTERNAL ASSERTION FAILED: `+e;throw Tv(t),new Error(t)}function Pv(e,t){e||Nv()}function Av(e,t){return e}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Rv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ov extends jh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Dv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Mv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bv.UNAUTHENTICATED)))}shutdown(){}}class Fv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jv{constructor(e){this.t=e,this.currentUser=bv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Dv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dv,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Cv("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Cv("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dv)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Cv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pv("string"==typeof t.accessToken),new Mv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pv(null===e||"string"==typeof e),new bv(e)}}class Uv{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=bv.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qv{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Uv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(bv.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $v{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Cv("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Cv("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Cv("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Cv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Pv("string"==typeof e.token),this.R=e.token,new zv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Vv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Bv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Vv(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Wv(e,t){return e<t?-1:e>t?1:0}function Hv(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Kv{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ov(Rv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ov(Rv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ov(Rv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ov(Rv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kv.fromMillis(Date.now())}static fromDate(e){return Kv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Kv(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wv(this.nanoseconds,e.nanoseconds):Wv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Gv{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gv(e)}static min(){return new Gv(new Kv(0,0))}static max(){return new Gv(new Kv(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Qv{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nv(),void 0===n?n=e.length-t:n>e.length-t&&Nv(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Qv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qv?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yv extends Qv{construct(e,t,n){return new Yv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ov(Rv.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Yv(t)}static emptyPath(){return new Yv([])}}const Xv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jv extends Qv{construct(e,t,n){return new Jv(e,t,n)}static isValidIdentifier(e){return Xv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jv(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ov(Rv.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ov(Rv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ov(Rv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ov(Rv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jv(t)}static emptyPath(){return new Jv([])}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Zv{constructor(e){this.path=e}static fromPath(e){return new Zv(Yv.fromString(e))}static fromName(e){return new Zv(Yv.fromString(e).popFirst(5))}static empty(){return new Zv(Yv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zv(new Yv(e.slice()))}}function e_(e){return new t_(e.readTime,e.key,-1)}class t_{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new t_(Gv.min(),Zv.empty(),-1)}static max(){return new t_(Gv.max(),Zv.empty(),-1)}}function n_(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Zv.comparator(e.documentKey,t.documentKey),0!==n?n:Wv(e.largestBatchId,t.largestBatchId)
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */)}const r_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */async function s_(e){if(e.code!==Rv.FAILED_PRECONDITION||e.message!==r_)throw e;Cv("LocalStore","Unexpectedly lost primary lease")}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class o_{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new o_(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof o_?t:o_.resolve(t)}catch(e){return o_.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):o_.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):o_.reject(t)}static resolve(e){return new o_(((t,n)=>{t(e)}))}static reject(e){return new o_(((t,n)=>{n(e)}))}static waitFor(e){return new o_(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=o_.resolve(!1);for(const n of e)t=t.next((e=>e?o_.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new o_(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new o_(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function a_(e){return"IndexedDbTransactionError"===e.name}
/**
       * @license
       * Copyright 2018 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class l_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function u_(e){return null==e}function c_(e){return 0===e&&1/e==-1/0}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function h_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function d_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function f_(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */l_.oe=-1;let p_=class e{constructor(e,t){this.comparator=e,this.root=t||g_.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,g_.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,g_.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new m_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new m_(this.root,e,this.comparator,!1)}getReverseIterator(){return new m_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new m_(this.root,e,this.comparator,!0)}},m_=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},g_=class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=s?s:e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nv();if(this.right.isRed())throw Nv();const e=this.left.check();if(e!==this.right.check())throw Nv();return e+(this.isRed()?0:1)}};g_.EMPTY=null,g_.RED=!0,g_.BLACK=!1,g_.EMPTY=new class{constructor(){this.size=0}get key(){throw Nv()}get value(){throw Nv()}get color(){throw Nv()}get left(){throw Nv()}get right(){throw Nv()}copy(e,t,n,r,i){return this}insert(e,t,n){return new g_(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class y_{constructor(e){this.comparator=e,this.data=new p_(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v_(this.data.getIterator())}getIteratorFrom(e){return new v_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof y_))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new y_(this.comparator);return t.data=e,t}}class v_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class __{constructor(e){this.fields=e,e.sort(Jv.comparator)}static empty(){return new __([])}unionWith(e){let t=new y_(Jv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new __(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hv(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class w_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class b_{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new w_("Invalid base64 string: "+e):e}}(e);return new b_(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new b_(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}b_.EMPTY_BYTE_STRING=new b_("");const S_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function E_(e){if(Pv(!!e),"string"==typeof e){let t=0;const n=S_.exec(e);if(Pv(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:k_(e.seconds),nanos:k_(e.nanos)}}function k_(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function C_(e){return"string"==typeof e?b_.fromBase64String(e):b_.fromUint8Array(e)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function T_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function I_(e){const t=e.mapValue.fields.__previous_value__;return T_(t)?I_(t):t}function x_(e){const t=E_(e.mapValue.fields.__local_write_time__.timestampValue);return new Kv(t.seconds,t.nanos)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class N_{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class P_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new P_("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof P_&&e.projectId===this.projectId&&e.database===this.database}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const A_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function R_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?T_(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e)?9007199254740991:10:Nv()}function O_(e,t){if(e===t)return!0;const n=R_(e);if(n!==R_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return x_(e).isEqual(x_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=E_(e.timestampValue),r=E_(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return C_(e.bytesValue).isEqual(C_(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return k_(e.geoPointValue.latitude)===k_(t.geoPointValue.latitude)&&k_(e.geoPointValue.longitude)===k_(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return k_(e.integerValue)===k_(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=k_(e.doubleValue),r=k_(t.doubleValue);return n===r?c_(n)===c_(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hv(e.arrayValue.values||[],t.arrayValue.values||[],O_);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(h_(n)!==h_(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!O_(n[i],r[i])))return!1;return!0}(e,t);default:return Nv()}}function D_(e,t){return void 0!==(e.values||[]).find((e=>O_(e,t)))}function M_(e,t){if(e===t)return 0;const n=R_(e),r=R_(t);if(n!==r)return Wv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wv(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=k_(e.integerValue||e.doubleValue),r=k_(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return L_(e.timestampValue,t.timestampValue);case 4:return L_(x_(e),x_(t));case 5:return Wv(e.stringValue,t.stringValue);case 6:return function(e,t){const n=C_(e),r=C_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Wv(n[i],r[i]);if(0!==e)return e}return Wv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wv(k_(e.latitude),k_(t.latitude));return 0!==n?n:Wv(k_(e.longitude),k_(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=M_(n[i],r[i]);if(e)return e}return Wv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===A_.mapValue&&t===A_.mapValue)return 0;if(e===A_.mapValue)return 1;if(t===A_.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Wv(r[o],s[o]);if(0!==e)return e;const t=M_(n[r[o]],i[s[o]]);if(0!==t)return t}return Wv(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Nv()}}function L_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wv(e,t);const n=E_(e),r=E_(t),i=Wv(n.seconds,r.seconds);return 0!==i?i:Wv(n.nanos,r.nanos)}function F_(e){return j_(e)}function j_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=E_(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return C_(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Zv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=j_(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${j_(e.fields[i])}`;return n+"}"}(e.mapValue):Nv()}function U_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function q_(e){return!!e&&"integerValue"in e}function z_(e){return!!e&&"arrayValue"in e}function $_(e){return!!e&&"nullValue"in e}function V_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function B_(e){return!!e&&"mapValue"in e}function W_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return d_(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=W_(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=W_(e.arrayValue.values[n]);return t}return Object.assign({},e)}class H_{constructor(e){this.value=e}static empty(){return new H_({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!B_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=W_(t)}setAll(e){let t=Jv.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=W_(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());B_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return O_(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];B_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){d_(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new H_(W_(this.value))}}function K_(e){const t=[];return d_(e.fields,((e,n)=>{const r=new Jv([e]);if(B_(n)){const e=K_(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new __(t)
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}class G_{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new G_(e,0,Gv.min(),Gv.min(),Gv.min(),H_.empty(),0)}static newFoundDocument(e,t,n,r){return new G_(e,1,t,Gv.min(),n,r,0)}static newNoDocument(e,t){return new G_(e,2,t,Gv.min(),Gv.min(),H_.empty(),0)}static newUnknownDocument(e,t){return new G_(e,3,t,Gv.min(),Gv.min(),H_.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=H_.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=H_.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof G_&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new G_(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Q_{constructor(e,t){this.position=e,this.inclusive=t}}function Y_(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Zv.comparator(Zv.fromName(o.referenceValue),n.key):M_(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function X_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!O_(e.position[n],t.position[n]))return!1;return!0}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class J_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z_(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class ew{}class tw extends ew{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new lw(e,t,n):"array-contains"===t?new dw(e,n):"in"===t?new fw(e,n):"not-in"===t?new pw(e,n):"array-contains-any"===t?new mw(e,n):new tw(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new uw(e,n):new cw(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(M_(t,this.value)):null!==t&&R_(this.value)===R_(t)&&this.matchesComparison(M_(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nv()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nw extends ew{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new nw(e,t)}matches(e){return rw(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rw(e){return"and"===e.op}function iw(e){return function(e){for(const t of e.filters)if(t instanceof nw)return!1;return!0}(e)&&rw(e)}function sw(e){if(e instanceof tw)return e.field.canonicalString()+e.op.toString()+F_(e.value);if(iw(e))return e.filters.map((e=>sw(e))).join(",");{const t=e.filters.map((e=>sw(e))).join(",");return`${e.op}(${t})`}}function ow(e,t){return e instanceof tw?function(e,t){return t instanceof tw&&e.op===t.op&&e.field.isEqual(t.field)&&O_(e.value,t.value)}(e,t):e instanceof nw?function(e,t){return t instanceof nw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ow(n,t.filters[r])),!0)}(e,t):void Nv()}function aw(e){return e instanceof tw?function(e){return`${e.field.canonicalString()} ${e.op} ${F_(e.value)}`}(e):e instanceof nw?function(e){return e.op.toString()+" {"+e.getFilters().map(aw).join(" ,")+"}"}(e):"Filter"}class lw extends tw{constructor(e,t,n){super(e,t,n),this.key=Zv.fromName(n.referenceValue)}matches(e){const t=Zv.comparator(e.key,this.key);return this.matchesComparison(t)}}class uw extends tw{constructor(e,t){super(e,"in",t),this.keys=hw(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cw extends tw{constructor(e,t){super(e,"not-in",t),this.keys=hw(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Zv.fromName(e.referenceValue)))}class dw extends tw{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return z_(t)&&D_(t.arrayValue,this.value)}}class fw extends tw{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&D_(this.value.arrayValue,t)}}class pw extends tw{constructor(e,t){super(e,"not-in",t)}matches(e){if(D_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!D_(this.value.arrayValue,t)}}class mw extends tw{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!z_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>D_(this.value.arrayValue,e)))}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class gw{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function yw(e,t=null,n=[],r=[],i=null,s=null,o=null){return new gw(e,t,n,r,i,s,o)}function vw(e){const t=Av(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>sw(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),u_(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>F_(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>F_(e))).join(",")),t.ue=e}return t.ue}function _w(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Z_(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ow(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!X_(e.startAt,t.startAt)&&X_(e.endAt,t.endAt)}function ww(e){return Zv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class bw{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Sw(e){return new bw(e)}function Ew(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kw(e){return null!==e.collectionGroup}function Cw(e){const t=Av(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new y_(Jv.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new J_(r,n))})),e.has(Jv.keyField().canonicalString())||t.ce.push(new J_(Jv.keyField(),n))}return t.ce}function Tw(e){const t=Av(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return yw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new J_(e.field,t)}));const n=e.endAt?new Q_(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Q_(e.startAt.position,e.startAt.inclusive):null;return yw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Cw(e))),t.le}function Iw(e,t){const n=e.filters.concat([t]);return new bw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xw(e,t,n){return new bw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nw(e,t){return _w(Tw(e),Tw(t))&&e.limitType===t.limitType}function Pw(e){return`${vw(Tw(e))}|lt:${e.limitType}`}function Aw(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>aw(e))).join(", ")}]`),u_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>F_(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>F_(e))).join(",")),`Target(${t})`}(Tw(e))}; limitType=${e.limitType})`}function Rw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Zv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Cw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Y_(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Cw(e),t)||e.endAt&&!function(e,t,n){const r=Y_(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Cw(e),t))}(e,t)}function Ow(e){return(t,n)=>{let r=!1;for(const i of Cw(e)){const e=Dw(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Dw(e,t,n){const r=e.field.isKeyField()?Zv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?M_(r,i):Nv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nv()}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Mw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){d_(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const Lw=new p_(Zv.comparator);function Fw(){return Lw}const jw=new p_(Zv.comparator);function Uw(...e){let t=jw;for(const n of e)t=t.insert(n.key,n);return t}function qw(e){let t=jw;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function zw(){return Vw()}function $w(){return Vw()}function Vw(){return new Mw((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Bw=new p_(Zv.comparator),Ww=new y_(Zv.comparator);function Hw(...e){let t=Ww;for(const n of e)t=t.add(n);return t}const Kw=new y_(Wv);
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function Gw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:c_(t)?"-0":t}}function Qw(e){return{integerValue:""+e}}function Yw(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!c_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Qw(t):Gw(e,t)}
/**
       * @license
       * Copyright 2018 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Xw{constructor(){this._=void 0}}function Jw(e,t,n){return e instanceof tb?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&T_(t)&&(t=I_(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nb?rb(e,t):e instanceof ib?sb(e,t):function(e,t){const n=eb(e,t),r=ab(n)+ab(e.Pe);return q_(n)&&q_(e.Pe)?Qw(r):Gw(e.serializer,r)}(e,t)}function Zw(e,t,n){return e instanceof nb?rb(e,t):e instanceof ib?sb(e,t):n}function eb(e,t){return e instanceof ob?function(e){return q_(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class tb extends Xw{}class nb extends Xw{constructor(e){super(),this.elements=e}}function rb(e,t){const n=lb(t);for(const r of e.elements)n.some((e=>O_(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ib extends Xw{constructor(e){super(),this.elements=e}}function sb(e,t){let n=lb(t);for(const r of e.elements)n=n.filter((e=>!O_(e,r)));return{arrayValue:{values:n}}}class ob extends Xw{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ab(e){return k_(e.integerValue||e.doubleValue)}function lb(e){return z_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ub{constructor(e,t){this.version=e,this.transformResults=t}}class cb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cb}static exists(e){return new cb(void 0,e)}static updateTime(e){return new cb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class db{}function fb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Eb(e.key,cb.none()):new vb(e.key,e.data,cb.none());{const n=e.data,r=H_.empty();let i=new y_(Jv.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new _b(e.key,r,new __(i.toArray()),cb.none())}}function pb(e,t,n){e instanceof vb?function(e,t,n){const r=e.value.clone(),i=bb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _b?function(e,t,n){if(!hb(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=bb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(wb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mb(e,t,n,r){return e instanceof vb?function(e,t,n,r){if(!hb(e.precondition,t))return n;const i=e.value.clone(),s=Sb(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof _b?function(e,t,n,r){if(!hb(e.precondition,t))return n;const i=Sb(e.fieldTransforms,r,t),s=t.data;return s.setAll(wb(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return hb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gb(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=eb(r.transform,e||null);null!=i&&(null===n&&(n=H_.empty()),n.set(r.field,i))}return n||null}function yb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hv(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nb&&t instanceof nb||e instanceof ib&&t instanceof ib?Hv(e.elements,t.elements,O_):e instanceof ob&&t instanceof ob?O_(e.Pe,t.Pe):e instanceof tb&&t instanceof tb}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vb extends db{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _b extends db{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function bb(e,t,n){const r=new Map;Pv(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Zw(o,a,n[i]))}return r}function Sb(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Jw(e,s,t))}return r}class Eb extends db{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kb extends db{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Cb{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&pb(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=mb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=mb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$w();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=fb(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Gv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Hw())}isEqual(e){return this.batchId===e.batchId&&Hv(this.mutations,e.mutations,((e,t)=>yb(e,t)))&&Hv(this.baseMutations,e.baseMutations,((e,t)=>yb(e,t)))}}class Tb{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pv(e.mutations.length===n.length);let r=Bw;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Tb(e,t,n,r)}}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Ib{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class xb{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Nb,Pb;function Ab(e){if(void 0===e)return Tv("GRPC error has no .code"),Rv.UNKNOWN;switch(e){case Nb.OK:return Rv.OK;case Nb.CANCELLED:return Rv.CANCELLED;case Nb.UNKNOWN:return Rv.UNKNOWN;case Nb.DEADLINE_EXCEEDED:return Rv.DEADLINE_EXCEEDED;case Nb.RESOURCE_EXHAUSTED:return Rv.RESOURCE_EXHAUSTED;case Nb.INTERNAL:return Rv.INTERNAL;case Nb.UNAVAILABLE:return Rv.UNAVAILABLE;case Nb.UNAUTHENTICATED:return Rv.UNAUTHENTICATED;case Nb.INVALID_ARGUMENT:return Rv.INVALID_ARGUMENT;case Nb.NOT_FOUND:return Rv.NOT_FOUND;case Nb.ALREADY_EXISTS:return Rv.ALREADY_EXISTS;case Nb.PERMISSION_DENIED:return Rv.PERMISSION_DENIED;case Nb.FAILED_PRECONDITION:return Rv.FAILED_PRECONDITION;case Nb.ABORTED:return Rv.ABORTED;case Nb.OUT_OF_RANGE:return Rv.OUT_OF_RANGE;case Nb.UNIMPLEMENTED:return Rv.UNIMPLEMENTED;case Nb.DATA_LOSS:return Rv.DATA_LOSS;default:return Nv()}}(Pb=Nb||(Nb={}))[Pb.OK=0]="OK",Pb[Pb.CANCELLED=1]="CANCELLED",Pb[Pb.UNKNOWN=2]="UNKNOWN",Pb[Pb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pb[Pb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pb[Pb.NOT_FOUND=5]="NOT_FOUND",Pb[Pb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pb[Pb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pb[Pb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pb[Pb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pb[Pb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pb[Pb.ABORTED=10]="ABORTED",Pb[Pb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pb[Pb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pb[Pb.INTERNAL=13]="INTERNAL",Pb[Pb.UNAVAILABLE=14]="UNAVAILABLE",Pb[Pb.DATA_LOSS=15]="DATA_LOSS";
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const Rb=new av([4294967295,4294967295],0);function Ob(e){const t=(new TextEncoder).encode(e),n=new lv;return n.update(t),new Uint8Array(n.digest())}function Db(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new av([n,r],0),new av([i,s],0)]}class Mb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lb(`Invalid padding: ${t}`);if(n<0)throw new Lb(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Lb(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Lb(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=av.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(av.fromNumber(n)));return 1===r.compare(Rb)&&(r=new av([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Ob(e),[n,r]=Db(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Mb(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Ob(e),[n,r]=Db(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Fb{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,jb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Fb(Gv.min(),r,new p_(Wv),Fw(),Hw())}}class jb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jb(n,t,Hw(),Hw(),Hw())}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Ub{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class qb{constructor(e,t){this.targetId=e,this.me=t}}class zb{constructor(e,t,n=b_.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class $b{constructor(){this.fe=0,this.ge=Wb(),this.pe=b_.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Hw(),t=Hw(),n=Hw();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nv()}})),new jb(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Wb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pv(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Vb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fw(),this.qe=Bb(),this.Qe=new p_(Wv)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Nv()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(ww(i))if(0===n){const e=new Zv(i.path);this.Ue(t,e,G_.newNoDocument(e,Gv.min()))}else Pv(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=C_(n).toUint8Array()}catch(e){if(e instanceof w_)return Iv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Mb(s,r,i)}catch(e){return Iv(e instanceof Lb?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&ww(i.target)){const t=new Zv(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,G_.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Hw();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Fb(e,t,this.Qe,this.ke,n);return this.ke=Fw(),this.qe=Bb(),this.Qe=new p_(Wv),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new $b,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new y_(Wv),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Cv("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $b),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Bb(){return new p_(Zv.comparator)}function Wb(){return new p_(Zv.comparator)}const Hb={asc:"ASCENDING",desc:"DESCENDING"},Kb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gb={and:"AND",or:"OR"};class Qb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yb(e,t){return e.useProto3Json||u_(t)?t:{value:t}}function Xb(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zb(e,t){return Xb(e,t.toTimestamp())}function eS(e){return Pv(!!e),Gv.fromTimestamp(function(e){const t=E_(e);return new Kv(t.seconds,t.nanos)}(e))}function tS(e,t){return nS(e,t).canonicalString()}function nS(e,t){const n=function(e){return new Yv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function rS(e){const t=Yv.fromString(e);return Pv(bS(t)),t}function iS(e,t){return tS(e.databaseId,t.path)}function sS(e,t){const n=rS(t);if(n.get(1)!==e.databaseId.projectId)throw new Ov(Rv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ov(Rv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Zv(lS(n))}function oS(e,t){return tS(e.databaseId,t)}function aS(e){return new Yv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lS(e){return Pv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function uS(e,t,n){return{name:iS(e,t),fields:n.value.mapValue.fields}}function cS(e,t){return{documents:[oS(e,t.path)]}}function hS(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oS(e,i);const s=function(e){if(0!==e.length)return _S(nw.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:yS(e.field),direction:pS(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yb(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function dS(e){let t=function(e){const t=rS(e);return 4===t.length?Yv.emptyPath():lS(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pv(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=fS(e);return t instanceof nw&&iw(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new J_(vS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,u_(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Q_(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Q_(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new bw(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,u)}function fS(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=vS(e.unaryFilter.field);return tw.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=vS(e.unaryFilter.field);return tw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=vS(e.unaryFilter.field);return tw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=vS(e.unaryFilter.field);return tw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nv()}}(e):void 0!==e.fieldFilter?function(e){return tw.create(vS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return nw.create(e.compositeFilter.filters.map((e=>fS(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nv()}}(e.compositeFilter.op))}(e):Nv()}function pS(e){return Hb[e]}function mS(e){return Kb[e]}function gS(e){return Gb[e]}function yS(e){return{fieldPath:e.canonicalString()}}function vS(e){return Jv.fromServerFormat(e.fieldPath)}function _S(e){return e instanceof tw?function(e){if("=="===e.op){if(V_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NAN"}};if($_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(V_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NOT_NAN"}};if($_(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yS(e.field),op:mS(e.op),value:e.value}}}(e):e instanceof nw?function(e){const t=e.getFilters().map((e=>_S(e)));return 1===t.length?t[0]:{compositeFilter:{op:gS(e.op),filters:t}}}(e):Nv()}function wS(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function bS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class SS{constructor(e,t,n,r,i=Gv.min(),s=Gv.min(),o=b_.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new SS(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new SS(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new SS(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new SS(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class ES{constructor(e){this.ct=e}}function kS(e){const t=dS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xw(t,t.limit,"L"):t}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class CS{constructor(){this._n=new TS}addToCollectionParentIndex(e,t){return this._n.add(t),o_.resolve()}getCollectionParents(e,t){return o_.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return o_.resolve()}deleteFieldIndex(e,t){return o_.resolve()}deleteAllFieldIndexes(e){return o_.resolve()}createTargetIndexes(e,t){return o_.resolve()}getDocumentsMatchingTarget(e,t){return o_.resolve(null)}getIndexType(e,t){return o_.resolve(0)}getFieldIndexes(e,t){return o_.resolve([])}getNextCollectionGroupToUpdate(e){return o_.resolve(null)}getMinOffset(e,t){return o_.resolve(t_.min())}getMinOffsetFromCollectionGroup(e,t){return o_.resolve(t_.min())}updateCollectionGroup(e,t,n){return o_.resolve()}updateIndexEntries(e,t){return o_.resolve()}}class TS{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new y_(Yv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new y_(Yv.comparator)).toArray()}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class IS{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new IS(0)}static Ln(){return new IS(-1)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class xS{constructor(){this.changes=new Mw((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,G_.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?o_.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class NS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class PS{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&mb(n.mutation,e,__.empty(),Kv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Hw()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Hw()){const r=zw();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Uw();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=zw();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Hw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Fw();const s=Vw(),o=Vw();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof _b)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),mb(o.mutation,t,o.mutation.getFieldMask(),Kv.now())):s.set(t.key,__.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new NS(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Vw();let r=new p_(((e,t)=>e-t)),i=Hw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||__.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Hw()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=$w();l.forEach((e=>{if(!i.has(e)){const r=fb(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return o_.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Zv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):o_.resolve(zw());let o=-1,a=i;return s.next((t=>o_.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?o_.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Hw()))).next((e=>({batchId:o,changes:qw(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Zv(t)).next((e=>{let t=Uw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Uw();return this.indexManager.getCollectionParents(e,i).next((o=>o_.forEach(o,(o=>{const a=function(e,t){return new bw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,G_.newInvalidDocument(r)))}));let n=Uw();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&mb(s.mutation,r,__.empty(),Kv.now()),Rw(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class AS{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return o_.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:eS(e.createTime)}}(t)),o_.resolve()}getNamedQuery(e,t){return o_.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:kS(e.bundledQuery),readTime:eS(e.readTime)}}(t)),o_.resolve()}}
/**
       * @license
       * Copyright 2022 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class RS{constructor(){this.overlays=new p_(Zv.comparator),this.hr=new Map}getOverlay(e,t){return o_.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zw();return o_.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),o_.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),o_.resolve()}getOverlaysForCollection(e,t,n){const r=zw(),i=t.length+1,s=new Zv(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return o_.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new p_(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=zw(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=zw(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return o_.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ib(t,n));let i=this.hr.get(t);void 0===i&&(i=Hw(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class OS{constructor(){this.Pr=new y_(DS.Ir),this.Tr=new y_(DS.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new DS(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new DS(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Zv(new Yv([])),n=new DS(t,e),r=new DS(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Zv(new Yv([])),n=new DS(t,e),r=new DS(t,e+1);let i=Hw();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new DS(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class DS{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Zv.comparator(e.key,t.key)||Wv(e.pr,t.pr)}static Er(e,t){return Wv(e.pr,t.pr)||Zv.comparator(e.key,t.key)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class MS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new y_(DS.Ir)}checkEmpty(e){return o_.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Cb(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new DS(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return o_.resolve(s)}lookupMutationBatch(e,t){return o_.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return o_.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return o_.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return o_.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new DS(t,0),r=new DS(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),o_.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new y_(Wv);return t.forEach((e=>{const t=new DS(e,0),r=new DS(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),o_.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Zv.isDocumentKey(i)||(i=i.child(""));const s=new DS(new Zv(i),0);let o=new y_(Wv);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),o_.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Pv(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return o_.forEach(t.mutations,(r=>{const i=new DS(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new DS(t,0),r=this.wr.firstAfterOrEqual(n);return o_.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,o_.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class LS{constructor(e){this.vr=e,this.docs=new p_(Zv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return o_.resolve(n?n.document.mutableCopy():G_.newInvalidDocument(t))}getEntries(e,t){let n=Fw();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():G_.newInvalidDocument(e))})),o_.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Fw();const s=t.path,o=new Zv(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||n_(e_(o),n)<=0||(r.has(o.key)||Rw(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return o_.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Nv()}Fr(e,t){return o_.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new FS(this)}getSize(e){return o_.resolve(this.size)}}class FS extends xS{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),o_.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class jS{constructor(e){this.persistence=e,this.Mr=new Mw((e=>vw(e)),_w),this.lastRemoteSnapshotVersion=Gv.min(),this.highestTargetId=0,this.Or=0,this.Nr=new OS,this.targetCount=0,this.Lr=IS.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),o_.resolve()}getLastRemoteSnapshotVersion(e){return o_.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return o_.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),o_.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),o_.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new IS(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,o_.resolve()}updateTargetData(e,t){return this.qn(t),o_.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,o_.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),o_.waitFor(i).next((()=>r))}getTargetCount(e){return o_.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return o_.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),o_.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),o_.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),o_.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return o_.resolve(n)}containsKey(e,t){return o_.resolve(this.Nr.containsKey(t))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class US{constructor(e,t){this.Br={},this.overlays={},this.kr=new l_(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new jS(this),this.indexManager=new CS,this.remoteDocumentCache=function(e){return new LS(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new ES(t),this.$r=new AS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new MS(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Cv("MemoryPersistence","Starting transaction:",e);const r=new qS(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return o_.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class qS extends i_{constructor(e){super(),this.currentSequenceNumber=e}}class zS{constructor(e){this.persistence=e,this.zr=new OS,this.jr=null}static Hr(e){return new zS(e)}get Jr(){if(this.jr)return this.jr;throw Nv()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),o_.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),o_.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),o_.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return o_.forEach(this.Jr,(n=>{const r=Zv.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Gv.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return o_.or([()=>o_.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class $S{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Hw(),r=Hw();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $S(e,t.fromCache,n,r)}}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class VS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class BS{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Mh()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Ph())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new VS;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(kv()<=fd.DEBUG&&Cv("QueryEngine","SDK will not create cache indexes for query:",Aw(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),o_.resolve()):(kv()<=fd.DEBUG&&Cv("QueryEngine","Query:",Aw(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(kv()<=fd.DEBUG&&Cv("QueryEngine","The SDK decides to create cache indexes for query:",Aw(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tw(t))):o_.resolve())}ji(e,t){if(Ew(t))return o_.resolve(null);let n=Tw(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=xw(t,null,"F"),n=Tw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Hw(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,xw(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Ew(t)||r.isEqual(Gv.min())?o_.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?o_.resolve(null):(kv()<=fd.DEBUG&&Cv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Aw(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Gv.fromTimestamp(1e9===r?new Kv(n+1,0):new Kv(n,r));return new t_(i,Zv.empty(),t)}(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new y_(Ow(e));return t.forEach(((t,r)=>{Rw(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return kv()<=fd.DEBUG&&Cv("QueryEngine","Using full collection scan to execute query:",Aw(t)),this.zi.getDocumentsMatchingQuery(e,t,t_.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class WS{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new p_(Wv),this.rs=new Mw((e=>vw(e)),_w),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PS(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function HS(e,t){const n=Av(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Hw();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function KS(e){const t=Av(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function GS(e,t){const n=Av(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(b_.EMPTY_BYTE_STRING,Gv.min()).withLastLimboFreeSnapshotVersion(Gv.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=Fw(),l=Hw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=Hw(),i=Hw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Fw();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Gv.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Cv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Gv.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return o_.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}function QS(e,t){const n=Av(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function YS(e,t,n){const r=Av(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!a_(e))throw e;Cv("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function XS(e,t,n){const r=Av(e);let i=Gv.min(),s=Hw();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Av(e),i=r.rs.get(n);return void 0!==i?o_.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Tw(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Gv.min(),n?s:Hw()))).next((e=>(function(e,t,n){let r=e.ss.get(t)||Gv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:s})))))}class JS{constructor(){this.activeTargetIds=Kw}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZS{constructor(){this.no=new JS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new JS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class eE{io(e){}shutdown(){}}
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class tE{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Cv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Cv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let nE=null;function rE(){return null===nE?nE=268435456+Math.round(2147483648*Math.random()):nE++,"0x"+nE.toString(16)
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}const iE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class sE{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const oE="WebChannelConnection";class aE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So=`projects/${n}/databases/${r}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Do(){return!1}Co(e,t,n,r,i){const s=rE(),o=this.vo(e,t.toUriEncodedString());Cv("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(Cv("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Iv("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=iE[e];return`${this.wo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=rE();return new Promise(((s,o)=>{const a=new cv;a.setWithCredentials(!0),a.listenOnce(fv.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case pv.NO_ERROR:const t=a.getResponseJson();Cv(oE,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case pv.TIMEOUT:Cv(oE,`RPC '${e}' ${i} timed out`),o(new Ov(Rv.DEADLINE_EXCEEDED,"Request time out"));break;case pv.HTTP_ERROR:const n=a.getStatus();if(Cv(oE,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Rv).indexOf(t)>=0?t:Rv.UNKNOWN}(t.status);o(new Ov(e,t.message))}else o(new Ov(Rv.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ov(Rv.UNAVAILABLE,"Connection failed."));break;default:Nv()}}finally{Cv(oE,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Cv(oE,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=rE(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vv(),o=yv(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new hv({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Cv(oE,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new sE({lo:t=>{d?Cv(oE,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Cv(oE,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),Cv(oE,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,dv.EventType.OPEN,(()=>{d||(Cv(oE,`RPC '${e}' stream ${r} transport opened.`),f.mo())})),p(c,dv.EventType.CLOSE,(()=>{d||(d=!0,Cv(oE,`RPC '${e}' stream ${r} transport closed`),f.po())})),p(c,dv.EventType.ERROR,(t=>{d||(d=!0,Iv(oE,`RPC '${e}' stream ${r} transport errored:`,t),f.po(new Ov(Rv.UNAVAILABLE,"The operation could not be completed")))})),p(c,dv.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Pv(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Cv(oE,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Nb[e];if(void 0!==t)return Ab(t)}(t),i=o.message;void 0===n&&(n=Rv.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new Ov(n,i)),c.close()}else Cv(oE,`RPC '${e}' stream ${r} received:`,i),f.yo(i)}})),p(o,gv.STAT_EVENT,(t=>{t.stat===mv.PROXY?Cv(oE,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===mv.NOPROXY&&Cv(oE,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function lE(){return"undefined"!=typeof document?document:null}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function uE(e){return new Qb(e,!0)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class cE{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Cv("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class hE{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new cE(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Rv.RESOURCE_EXHAUSTED?(Tv(t.toString()),Tv("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Rv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.jo===t&&this.u_(e,n)}),(t=>{e((()=>{const e=new Ov(Rv.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Cv("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Cv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dE extends hE{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pv(void 0===t||"string"==typeof t),b_.fromBase64String(t||"")):(Pv(void 0===t||t instanceof Buffer||t instanceof Uint8Array),b_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Rv.UNKNOWN:Ab(e.code);return new Ov(t,e.message||"")}(o);n=new zb(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=sS(e,r.document.name),s=eS(r.document.updateTime),o=r.document.createTime?eS(r.document.createTime):Gv.min(),a=new H_({mapValue:{fields:r.document.fields}}),l=G_.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Ub(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=sS(e,r.document),s=r.readTime?eS(r.readTime):Gv.min(),o=G_.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ub([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=sS(e,r.document),s=r.removedTargetIds||[];n=new Ub([],s,i,null)}else{if(!("filter"in t))return Nv();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new xb(r,i),o=e.targetId;n=new qb(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Gv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Gv.min():t.readTime?eS(t.readTime):Gv.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=aS(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ww(r)?{documents:cS(e,r)}:{query:hS(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jb(e,t.resumeToken);const r=Yb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Gv.min())>0){n.readTime=Xb(e,t.snapshotVersion.toTimestamp());const r=Yb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=aS(this.serializer),t.removeTarget=e,this.i_(t)}}class fE extends hE{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Pv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Pv(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?eS(e.updateTime):eS(t);return n.isEqual(Gv.min())&&(n=eS(t)),new ub(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=eS(e.commitTime);return this.listener.A_(n,t)}return Pv(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=aS(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof vb)n={update:uS(e,t.key,t.value)};else if(t instanceof Eb)n={delete:iS(e,t.key)};else if(t instanceof _b)n={update:uS(e,t.key,t.data),updateMask:wS(t.fieldMask)};else{if(!(t instanceof kb))return Nv();n={verify:iS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof tb)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ib)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ob)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Nv()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nv()}(e,t.precondition)),n}(this.serializer,e)))};this.i_(t)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class pE extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Ov(Rv.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Co(e,nS(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ov(Rv.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.xo(e,nS(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ov(Rv.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class mE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Tv(t),this.y_=!1):Cv("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class gE{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{CE(this)&&(Cv("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Av(e);t.M_.add(4),await vE(t),t.N_.set("Unknown"),t.M_.delete(4),await yE(t)}(this))}))})),this.N_=new mE(n,r)}}async function yE(e){if(CE(e))for(const t of e.x_)await t(!0)}async function vE(e){for(const t of e.x_)await t(!1)}function _E(e,t){const n=Av(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),kE(n)?EE(n):VE(n).Xo()&&bE(n,t))}function wE(e,t){const n=Av(e),r=VE(n);n.F_.delete(t),r.Xo()&&SE(n,t),0===n.F_.size&&(r.Xo()?r.n_():CE(n)&&n.N_.set("Unknown"))}function bE(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}VE(e).P_(t)}function SE(e,t){e.L_.xe(t),VE(e).I_(t)}function EE(e){e.L_=new Vb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),VE(e).start(),e.N_.w_()}function kE(e){return CE(e)&&!VE(e).Zo()&&e.F_.size>0}function CE(e){return 0===Av(e).M_.size}function TE(e){e.L_=void 0}async function IE(e){e.N_.set("Online")}async function xE(e){e.F_.forEach(((t,n)=>{bE(e,t)}))}async function NE(e,t){TE(e),kE(e)?(e.N_.D_(t),EE(e)):e.N_.set("Unknown")}async function PE(e,t,n){if(e.N_.set("Online"),t instanceof zb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Cv("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await AE(e,n)}else if(t instanceof Ub?e.L_.Ke(t):t instanceof qb?e.L_.He(t):e.L_.We(t),!n.isEqual(Gv.min()))try{const t=await KS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(b_.EMPTY_BYTE_STRING,r.snapshotVersion)),SE(e,t);const i=new SS(r.target,t,n,r.sequenceNumber);bE(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Cv("RemoteStore","Failed to raise snapshot:",t),await AE(e,t)}}async function AE(e,t,n){if(!a_(t))throw t;e.M_.add(1),await vE(e),e.N_.set("Offline"),n||(n=()=>KS(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Cv("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await yE(e)}))}function RE(e,t){return t().catch((n=>AE(e,n,t)))}async function OE(e){const t=Av(e),n=BE(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;DE(t);)try{const e=await QS(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,ME(t,e)}catch(e){await AE(t,e)}LE(t)&&FE(t)}function DE(e){return CE(e)&&e.v_.length<10}function ME(e,t){e.v_.push(t);const n=BE(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function LE(e){return CE(e)&&!BE(e).Zo()&&e.v_.length>0}function FE(e){BE(e).start()}async function jE(e){BE(e).V_()}async function UE(e){const t=BE(e);for(const n of e.v_)t.d_(n.mutations)}async function qE(e,t,n){const r=e.v_.shift(),i=Tb.from(r,t,n);await RE(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await OE(e)}async function zE(e,t){t&&BE(e).E_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Nv();case Rv.CANCELLED:case Rv.UNKNOWN:case Rv.DEADLINE_EXCEEDED:case Rv.RESOURCE_EXHAUSTED:case Rv.INTERNAL:case Rv.UNAVAILABLE:case Rv.UNAUTHENTICATED:return!1;case Rv.INVALID_ARGUMENT:case Rv.NOT_FOUND:case Rv.ALREADY_EXISTS:case Rv.PERMISSION_DENIED:case Rv.FAILED_PRECONDITION:case Rv.ABORTED:case Rv.OUT_OF_RANGE:case Rv.UNIMPLEMENTED:case Rv.DATA_LOSS:return!0}}(e)&&e!==Rv.ABORTED}(t.code)){const n=e.v_.shift();BE(e).t_(),await RE(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await OE(e)}}(e,t),LE(e)&&FE(e)}async function $E(e,t){const n=Av(e);n.asyncQueue.verifyOperationInProgress(),Cv("RemoteStore","RemoteStore received new credentials");const r=CE(n);n.M_.add(3),await vE(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await yE(n)}function VE(e){return e.B_||(e.B_=function(e,t,n){const r=Av(e);return r.f_(),new dE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
       * @license
       * Copyright 2018 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}(e.datastore,e.asyncQueue,{Po:IE.bind(null,e),To:xE.bind(null,e),Ao:NE.bind(null,e),h_:PE.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),kE(e)?EE(e):e.N_.set("Unknown")):(await e.B_.stop(),TE(e))}))),e.B_}function BE(e){return e.k_||(e.k_=function(e,t,n){const r=Av(e);return r.f_(),new fE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:jE.bind(null,e),Ao:zE.bind(null,e),R_:UE.bind(null,e),A_:qE.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await OE(e)):(await e.k_.stop(),e.v_.length>0&&(Cv("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}class WE{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Dv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new WE(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ov(Rv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function HE(e,t){if(Tv("AsyncQueue",`${t}: ${e}`),a_(e))return new Ov(Rv.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class KE{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Zv.comparator(t.key,n.key):(e,t)=>Zv.comparator(e.key,t.key),this.keyedMap=Uw(),this.sortedSet=new p_(this.comparator)}static emptySet(e){return new KE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof KE))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new KE;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class GE{constructor(){this.q_=new p_(Zv.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Nv():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class QE{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new QE(e,t,KE.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class YE{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class XE{constructor(){this.queries=new Mw((e=>Pw(e)),Nw),this.onlineState="Unknown",this.z_=new Set}}async function JE(e,t){const n=Av(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new YE,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=HE(e,`Initialization of query '${Aw(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&nk(n)}async function ZE(e,t){const n=Av(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ek(e,t){const n=Av(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&nk(n)}function tk(e,t,n){const r=Av(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function nk(e){e.z_.forEach((e=>{e.next()}))}var rk,ik;(ik=rk||(rk={})).J_="default",ik.Cache="cache";class sk{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new QE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=QE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==rk.Cache}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class ok{constructor(e){this.key=e}}class ak{constructor(e){this.key=e}}class lk{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Hw(),this.mutatedKeys=Hw(),this.Ia=Ow(e),this.Ta=new KE(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new GE,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Rw(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ra(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Ia(c,a)>0||l&&this.Ia(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nv()}};return n(e)-n(t)}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new QE(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new GE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Hw(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new ak(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new ok(n))})),t}pa(e){this.la=e.hs,this.Pa=Hw();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return QE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class uk{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ck{constructor(e){this.key=e,this.wa=!1}}class hk{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Mw((e=>Pw(e)),Nw),this.Da=new Map,this.Ca=new Set,this.va=new p_(Zv.comparator),this.Fa=new Map,this.Ma=new OS,this.xa={},this.Oa=new Map,this.Na=IS.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function dk(e,t,n=!0){const r=Ok(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await pk(r,t,n,!0),i}async function fk(e,t){const n=Ok(e);await pk(n,t,!0,!1)}async function pk(e,t,n,r){const i=await function(e,t){const n=Av(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,o_.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new SS(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}(e.localStore,Tw(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await async function(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await XS(e.localStore,t.query,!1).then((({documents:e})=>t.view.da(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ik(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await XS(e.localStore,t,!0),o=new lk(t,s.hs),a=o.da(s.documents),l=jb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Ik(e,n,u.fa);const c=new uk(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&_E(e.remoteStore,i),a}async function mk(e,t,n){const r=Av(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Nw(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await YS(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wE(r.remoteStore,i.targetId),Ck(r,i.targetId)})).catch(s_)):(Ck(r,i.targetId),await YS(r.localStore,i.targetId,!0))}async function gk(e,t){const n=Av(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wE(n.remoteStore,r.targetId))}async function yk(e,t,n){const r=function(e){const t=Av(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sk.bind(null,t),t}(e);try{const e=await function(e,t){const n=Av(e),r=Kv.now(),i=t.reduce(((e,t)=>e.add(t.key)),Hw());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Fw(),l=Hw();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=gb(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new _b(e.key,t,K_(t.value.mapValue),cb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:qw(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new p_(Wv)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Pk(r,e.changes),await OE(r.remoteStore)}catch(e){const t=HE(e,"Failed to persist write");n.reject(t)}}async function vk(e,t){const n=Av(e);try{const e=await GS(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Pv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Pv(r.wa):e.removedDocuments.size>0&&(Pv(r.wa),r.wa=!1))})),await Pk(n,e,t)}catch(e){await s_(e)}}function _k(e,t,n){const r=Av(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Av(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&nk(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wk(e,t,n){const r=Av(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new p_(Zv.comparator);e=e.insert(s,G_.newNoDocument(s,Gv.min()));const n=Hw().add(s),i=new Fb(Gv.min(),new Map,new p_(Wv),e,n);await vk(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Nk(r)}else await YS(r.localStore,t,!1).then((()=>Ck(r,t,n))).catch(s_)}async function bk(e,t){const n=Av(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Av(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=o_.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Pv(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Hw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);kk(n,r,null),Ek(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Pk(n,e)}catch(e){await s_(e)}}async function Sk(e,t,n){const r=Av(e);try{const e=await function(e,t){const n=Av(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Pv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);kk(r,t,n),Ek(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Pk(r,e)}catch(n){await s_(n)}}function Ek(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function kk(e,t,n){const r=Av(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Ck(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Tk(e,t)}))}function Tk(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(wE(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Nk(e))}function Ik(e,t,n){for(const r of n)r instanceof ok?(e.Ma.addReference(r.key,t),xk(e,r)):r instanceof ak?(Cv("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Tk(e,r.key)):Nv()}function xk(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Cv("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Nk(e))}function Nk(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Zv(Yv.fromString(t)),r=e.Na.next();e.Fa.set(r,new ck(n)),e.va=e.va.insert(n,r),_E(e.remoteStore,new SS(Tw(Sw(n.path)),r,"TargetPurposeLimboResolution",l_.oe))}}async function Pk(e,t,n){const r=Av(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=$S.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Av(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>o_.forEach(t,(t=>o_.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>o_.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!a_(e))throw e;Cv("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Ak(e,t){const n=Av(e);if(!n.currentUser.isEqual(t)){Cv("SyncEngine","User change. New user:",t.toKey());const e=await HS(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Ov(Rv.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Pk(n,e.us)}}function Rk(e,t){const n=Av(e),r=n.Fa.get(t);if(r&&r.wa)return Hw().add(r.key);{let e=Hw();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function Ok(e){const t=Av(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wk.bind(null,t),t.Sa.h_=ek.bind(null,t.eventManager),t.Sa.ka=tk.bind(null,t.eventManager),t}class Dk{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=uE(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new WS(e,t,n,r)}(this.persistence,new BS,e.initialUser,this.serializer)}createPersistence(e){return new US(zS.Hr,this.serializer)}createSharedClientState(e){return new ZS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mk{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>_k(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ak.bind(null,this.syncEngine),await async function(e,t){const n=Av(e);t?(n.M_.delete(2),await yE(n)):t||(n.M_.add(2),await vE(n),n.N_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new XE}createDatastore(e){const t=uE(e.databaseInfo.databaseId),n=function(e){return new aE(e)}(e.databaseInfo);return function(e,t,n,r){return new pE(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new gE(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>_k(this.syncEngine,e,0)),tE.D()?new tE:new eE)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new hk(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Av(e);Cv("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await vE(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Lk{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Tv("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Fk{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=bv.UNAUTHENTICATED,this.clientId=Bv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Cv("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Cv("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ov(Rv.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Pj){const n=HE(Pj,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function jk(e,t){e.asyncQueue.verifyOperationInProgress(),Cv("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await HS(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Uk(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Cv("FirestoreClient","Using user provided OfflineComponentProvider");try{await jk(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===Rv.FAILED_PRECONDITION||e.code===Rv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;Iv("Error using user provided cache. Falling back to memory cache: "+r),await jk(e,new Dk)}}else Cv("FirestoreClient","Using default OfflineComponentProvider"),await jk(e,new Dk);return e._offlineComponents}(e);Cv("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>$E(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>$E(t.remoteStore,n))),e._onlineComponents=t}async function qk(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Cv("FirestoreClient","Using user provided OnlineComponentProvider"),await Uk(e,e._uninitializedComponentsProvider._online)):(Cv("FirestoreClient","Using default OnlineComponentProvider"),await Uk(e,new Mk))),e._onlineComponents}async function zk(e){const t=await qk(e),n=t.eventManager;return n.onListen=dk.bind(null,t.syncEngine),n.onUnlisten=mk.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=fk.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=gk.bind(null,t.syncEngine),n}
/**
       * @license
       * Copyright 2023 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function $k(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}const Vk=new Map;
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Bk(e,t,n){if(!n)throw new Ov(Rv.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Wk(e){if(!Zv.isDocumentKey(e))throw new Ov(Rv.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Hk(e){if(Zv.isDocumentKey(e))throw new Ov(Rv.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Kk(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Nv()}function Gk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ov(Rv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kk(e);throw new Ov(Rv.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Qk{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ov(Rv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ov(Rv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ov(Rv.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$k(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ov(Rv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ov(Rv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ov(Rv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yk{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ov(Rv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ov(Rv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qk(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lv;switch(e.type){case"firstParty":return new qv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ov(Rv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Vk.get(e);t&&(Cv("ComponentProvider","Removing Datastore"),Vk.delete(e),t.terminate())}(this),Promise.resolve()}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class Xk{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xk(this.firestore,e,this._query)}}class Jk{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jk(this.firestore,e,this._key)}}class Zk extends Xk{constructor(e,t,n){super(e,t,Sw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jk(this.firestore,null,new Zv(e))}withConverter(e){return new Zk(this.firestore,e,this._path)}}function eC(e,t,...n){if(e=ad(e),Bk("collection","path",t),e instanceof Yk){const r=Yv.fromString(t,...n);return Hk(r),new Zk(e,null,r)}{if(!(e instanceof Jk||e instanceof Zk))throw new Ov(Rv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Yv.fromString(t,...n));return Hk(r),new Zk(e.firestore,null,r)}}function tC(e,t,...n){if(e=ad(e),1===arguments.length&&(t=Bv.newId()),Bk("doc","path",t),e instanceof Yk){const r=Yv.fromString(t,...n);return Wk(r),new Jk(e,null,new Zv(r))}{if(!(e instanceof Jk||e instanceof Zk))throw new Ov(Rv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Yv.fromString(t,...n));return Wk(r),new Jk(e.firestore,e instanceof Zk?e.converter:null,new Zv(r))}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class nC{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new cE(this,"async_queue_retry"),this.hu=()=>{const e=lE();e&&Cv("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=lE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=lE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Dv;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(_j){if(!a_(_j))throw _j;Cv("AsyncQueue","Operation failed with retryable error: "+_j)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e);throw Tv("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=WE.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Nv()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function rC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e,["next","error","complete"])}class iC extends Yk{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new nC,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||oC(this),this._firestoreClient.terminate()}}function sC(e){return e._firestoreClient||oC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function oC(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new N_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$k(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Fk(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class aC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aC(b_.fromBase64String(e))}catch(e){throw new Ov(Rv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new aC(b_.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class lC{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ov(Rv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jv(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class uC{constructor(e){this._methodName=e}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class cC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ov(Rv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ov(Rv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wv(this._lat,e._lat)||Wv(this._long,e._long)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const hC=/^__.*__$/;class dC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _b(e,this.data,this.fieldMask,t,this.fieldTransforms):new vb(e,this.data,t,this.fieldTransforms)}}class fC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _b(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nv()}}class mC{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new mC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return IC(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(pC(this.fu)&&hC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class gC{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||uE(e)}Fu(e,t,n,r=!1){return new mC({fu:e,methodName:t,vu:n,path:Jv.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yC(e){const t=e._freezeSettings(),n=uE(e._databaseId);return new gC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vC(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);EC("Data must be an object, but it was:",o,r);const a=bC(r,o);let l,u;if(s.merge)l=new __(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=kC(t,r,n);if(!o.contains(i))throw new Ov(Rv.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);xC(e,i)||e.push(i)}l=new __(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new dC(new H_(a),l,u)}class _C extends uC{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _C}}function wC(e,t){if(SC(e=ad(e)))return EC("Unsupported field value:",t,e),bC(e,t);if(e instanceof uC)return function(e,t){if(!pC(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=wC(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ad(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Kv.fromDate(e);return{timestampValue:Xb(t.serializer,n)}}if(e instanceof Kv){const n=new Kv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xb(t.serializer,n)}}if(e instanceof cC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof aC)return{bytesValue:Jb(t.serializer,e._byteString)};if(e instanceof Jk){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:tS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${Kk(e)}`)}(e,t)}function bC(e,t){const n={};return f_(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):d_(e,((e,r)=>{const i=wC(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function SC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kv||e instanceof cC||e instanceof aC||e instanceof Jk||e instanceof uC)}function EC(e,t,n){if(!SC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Kk(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function kC(e,t,n){if((t=ad(t))instanceof lC)return t._internalPath;if("string"==typeof t)return TC(e,t);throw IC("Field path arguments must be of type string or ",e,!1,void 0,n)}const CC=new RegExp("[~\\*/\\[\\]]");function TC(e,t,n){if(t.search(CC)>=0)throw IC(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new lC(...t.split("."))._internalPath}catch(Nj){throw IC(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function IC(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ov(Rv.INVALID_ARGUMENT,a+e+l)}function xC(e,t){return e.some((e=>e.isEqual(t)))}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class NC{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Jk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PC extends NC{data(){return super.data()}}function AC(e,t){return"string"==typeof t?TC(e,t):t instanceof lC?t._internalPath:t._delegate._internalPath}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function RC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ov(Rv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OC{}class DC extends OC{}class MC extends DC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new MC(e,t,n)}_apply(e){const t=this._parse(e);return zC(e._query,t),new Xk(e.firestore,e.converter,Iw(e._query,t))}_parse(e){const t=yC(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ov(Rv.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){qC(o,s);const t=[];for(const n of o)t.push(UC(r,e,n));a={arrayValue:{values:t}}}else a=UC(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||qC(o,s),a=function(e,t,n,r=!1){return wC(n,e.Fu(r?4:3,t))}(n,t,o,"in"===s||"not-in"===s);return tw.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function LC(e,t,n){const r=t,i=AC("where",e);return MC._create(i,r,n)}class FC extends OC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new FC(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:nw.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)zC(n,i),n=Iw(n,i)}(e._query,t),new Xk(e.firestore,e.converter,Iw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function jC(...e){return e.forEach((e=>$C("or",e))),FC._create("or",e)}function UC(e,t,n){if("string"==typeof(n=ad(n))){if(""===n)throw new Ov(Rv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(t)&&-1!==n.indexOf("/"))throw new Ov(Rv.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Yv.fromString(n));if(!Zv.isDocumentKey(r))throw new Ov(Rv.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return U_(e,new Zv(r))}if(n instanceof Jk)return U_(e,n._key);throw new Ov(Rv.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kk(n)}.`)}function qC(e,t){if(!Array.isArray(e)||0===e.length)throw new Ov(Rv.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zC(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ov(Rv.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ov(Rv.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function $C(e,t){if(!(t instanceof MC||t instanceof FC))throw new Ov(Rv.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class VC{convertValue(e,t="none"){switch(R_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return k_(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(C_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nv()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return d_(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new cC(k_(e.latitude),k_(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=I_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(x_(e));default:return null}}convertTimestamp(e){const t=E_(e);return new Kv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Yv.fromString(e);Pv(bS(n));const r=new P_(n.get(1),n.get(3)),i=new Zv(n.popFirst(5));return r.isEqual(t)||Tv(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function BC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */}class WC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HC extends NC{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new KC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(AC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class KC extends HC{data(e={}){return super.data(e)}}class GC{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new WC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new KC(this._firestore,this._userDataWriter,n.key,n,new WC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ov(Rv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new KC(e._firestore,e._userDataWriter,n.doc.key,n.doc,new WC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new KC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new WC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:QC(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nv()}}class YC extends VC{constructor(e){super(),this.firestore=e}convertBytes(e){return new aC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jk(this.firestore,null,t)}}function XC(e){e=Gk(e,Xk);const t=Gk(e.firestore,iC),n=sC(t),r=new YC(t);return RC(e._query),function(e,t,n={}){const r=new Dv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Lk({next:n=>{t.enqueueAndForget((()=>ZE(e,o))),n.fromCache&&"server"===r.source?i.reject(new Ov(Rv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new sk(n,s,{includeMetadataChanges:!0,ra:!0});return JE(e,o)}(await zk(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new GC(t,r,e,n)))}function JC(e,t,n,...r){e=Gk(e,Jk);const i=Gk(e.firestore,iC),s=yC(i);let o;return o="string"==typeof(t=ad(t))||t instanceof lC?function(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[kC(t,r,n)],l=[i];if(s.length%2!=0)throw new Ov(Rv.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(kC(t,s[d])),l.push(s[d+1]);const u=[],c=H_.empty();for(let d=a.length-1;d>=0;--d)if(!xC(u,a[d])){const e=a[d];let t=l[d];t=ad(t);const n=o.Su(e);if(t instanceof _C)u.push(e);else{const r=wC(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new __(u);return new fC(c,h,o.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.Fu(1,t,n);EC("Data must be an object, but it was:",i,r);const s=[],o=H_.empty();d_(r,((e,r)=>{const a=TC(t,e,n);r=ad(r);const l=i.Su(a);if(r instanceof _C)s.push(a);else{const e=wC(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new __(s);return new fC(o,a,i.fieldTransforms)}(s,"updateDoc",e._key,t),eT(i,[o.toMutation(e._key,cb.exists(!0))])}function ZC(e,...t){var n,r,i;e=ad(e);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||rC(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(rC(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof Jk)u=Gk(e.firestore,iC),c=Sw(e._key.path),l={next:n=>{t[o]&&t[o](function(e,t,n){const r=n.docs.get(t._key),i=new YC(e);return new HC(e,i,t._key,r,new WC(n.hasPendingWrites,n.fromCache),t.converter)}(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Gk(e,Xk);u=Gk(n.firestore,iC),c=n._query;const r=new YC(u);l={next:e=>{t[o]&&t[o](new GC(u,r,n,e))},error:t[o+1],complete:t[o+2]},RC(e._query)}return function(e,t,n,r){const i=new Lk(r),s=new sk(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>JE(await zk(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>ZE(await zk(e),s)))}}(sC(u),c,a,l)}function eT(e,t){return function(e,t){const n=new Dv;return e.asyncQueue.enqueueAndForget((async()=>yk(await function(e){return qk(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(sC(e),t)}!function(e,t=!0){!function(e){Sv=e}(Cf),wf(new ld("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new iC(new jv(e.getProvider("auth-internal")),new $v(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ov(Rv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new P_(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),xf(wv,"4.6.4",e),xf(wv,"4.6.4","esm2017")}();var tT={};const nT="@firebase/database",rT="1.0.6";
/**
       * @license
       * Copyright 2019 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
let iT="";
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class sT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$h(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:zh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class oT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bh(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const aT=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sT(t)}}catch(_j){}return new oT},lT=aT("localStorage"),uT=aT("sessionStorage"),cT=new vd("@firebase/database"),hT=function(){let e=1;return function(){return e++}}(),dT=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,dh(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Xh;n.update(t);const r=n.digest();return mh.encodeByteArray(r)},fT=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=fT.apply(null,r):t+="object"==typeof r?$h(r):r,t+=" "}return t};let pT=null,mT=!0;const gT=function(...e){var t;if(!0===mT&&(mT=!1,null===pT&&!0===uT.get("logging_enabled")&&(dh(!t,"Can't turn on custom loggers persistently."),cT.logLevel=fd.VERBOSE,pT=cT.log.bind(cT))),pT){const t=fT.apply(null,e);pT(t)}},yT=function(e){return function(...t){gT(e,...t)}},vT=function(...e){const t="FIREBASE INTERNAL ERROR: "+fT(...e);cT.error(t)},_T=function(...e){const t=`FIREBASE FATAL ERROR: ${fT(...e)}`;throw cT.error(t),new Error(t)},wT=function(...e){const t="FIREBASE WARNING: "+fT(...e);cT.warn(t)},bT=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ST="[MIN_NAME]",ET="[MAX_NAME]",kT=function(e,t){if(e===t)return 0;if(e===ST||t===ET)return-1;if(t===ST||e===ET)return 1;{const n=RT(e),r=RT(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},CT=function(e,t){return e===t?0:e<t?-1:1},TT=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$h(t))},IT=function(e){if("object"!=typeof e||null===e)return $h(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=$h(t[r]),n+=":",n+=IT(e[t[r]]);return n+="}",n},xT=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function NT(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const PT=function(e){dh(!bT(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let u="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()},AT=new RegExp("^-?(0*)\\d{1,10}$"),RT=function(e){if(AT.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},OT=function(e){try{e()}catch(_j){setTimeout((()=>{const t=_j.stack||"";throw wT("Exception was thrown by user callback.",t),_j}),Math.floor(0))}},DT=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class MT{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){wT(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class LT{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(gT("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wT(e)}}class FT{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}FT.OWNER="owner";
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const jT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,UT="ac",qT="websocket",zT="long_polling";
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class $T{constructor(e,t,n,r,i=!1,s="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lT.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lT.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function VT(e,t,n){let r;if(dh("string"==typeof t,"typeof type must == string"),dh("object"==typeof n,"typeof params must == object"),t===qT)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==zT)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return NT(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class BT{constructor(){this.counters_={}}incrementCounter(e,t=1){Bh(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return wh(this.counters_)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const WT={},HT={};function KT(e){const t=e.toString();return WT[t]||(WT[t]=new BT),WT[t]}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class GT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&OT((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const QT="start";class YT{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yT(e),this.stats_=KT(t),this.urlFn=e=>(this.appCheckToken&&(e[UT]=this.appCheckToken),VT(t,zT,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new GT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new XT(((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===QT)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[QT]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[UT]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jT.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){YT.forceAllow_=!0}static forceDisallow(){YT.forceDisallow_=!0}static isAvailable(){return!!YT.forceAllow_||!(YT.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=$h(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=yh(t),r=xT(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=$h(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class XT{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=hT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=XT.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(_j){gT("frame writing exception"),_j.stack&&gT(_j.stack),gT(_j)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gT("No IE domain setting required")}catch(_j){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{gT("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(_j){}}),Math.floor(1))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let JT=null;"undefined"!=typeof MozWebSocket?JT=MozWebSocket:"undefined"!=typeof WebSocket&&(JT=WebSocket);class ZT{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yT(this.connId),this.stats_=KT(t),this.connURL=ZT.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={v:"5"};return"undefined"!=typeof location&&location.hostname&&jT.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[UT]=r),i&&(s.p=i),VT(e,qT,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lT.set("previous_websocket_failure",!0);try{let e;Dh(),this.mySock=new JT(this.connURL,[],e)}catch(_j){this.log_("Error instantiating WebSocket.");const t=_j.message||_j.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ZT.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==JT&&!ZT.forceDisallow_}static previouslyFailed(){return lT.isInMemoryStorage||!0===lT.get("previous_websocket_failure")}markConnectionHealthy(){lT.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=zh(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(dh(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=$h(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=xT(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(_j){this.log_("Exception thrown from WebSocket.send():",_j.message||_j.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ZT.responsesRequiredToBeHealthy=2,ZT.healthyTimeout=3e4;
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class eI{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[YT,ZT]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=ZT&&ZT.isAvailable();let n=t&&!ZT.previouslyFailed();if(e.webSocketOnly&&(t||wT("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ZT];else{const e=this.transports_=[];for(const t of eI.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);eI.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}eI.globalTransportInitialized_=!1;class tI{constructor(e,t,n,r,i,s,o,a,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yT("c:"+this.id+":"),this.transportManager_=new eI(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=DT((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=TT("t",e),n=TT("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=TT("t",e),n=TT("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=TT("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?vT("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vT("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&wT("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),DT((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):DT((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lT.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class nI{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class rI{constructor(e){this.allowedEvents_=e,this.listeners_={},dh(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){dh(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class iI extends rI{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ah()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new iI}getInitialEvent(e){return dh("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const sI=32,oI=768;class aI{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function lI(){return new aI("")}function uI(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function cI(e){return e.pieces_.length-e.pieceNum_}function hI(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new aI(e.pieces_,t)}function dI(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function fI(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function pI(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new aI(t,0)}function mI(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof aI)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new aI(n,0)}function gI(e){return e.pieceNum_>=e.pieces_.length}function yI(e,t){const n=uI(e),r=uI(t);if(null===n)return t;if(n===r)return yI(hI(e),hI(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function vI(e,t){const n=fI(e,0),r=fI(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=kT(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function _I(e,t){if(cI(e)!==cI(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function wI(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(cI(e)>cI(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class bI{constructor(e,t){this.errorPrefix_=t,this.parts_=fI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=td(this.parts_[n]);SI(this)}}function SI(e){if(e.byteLength_>oI)throw new Error(e.errorPrefix_+"has a key path longer than "+oI+" bytes ("+e.byteLength_+").");if(e.parts_.length>sI)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+sI+") or object contains a cycle "+EI(e))}function EI(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class kI extends rI{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new kI}getInitialEvent(e){return dh("visible"===e,"Unknown event type: "+e),[this.visible_]}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const CI=1e3;class TI extends nI{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=TI.nextPersistentConnectionId_++,this.log_=yT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=CI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Dh())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kI.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&iI.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_($h(i)),dh(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new xh,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),dh(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),dh(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;TI.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&Bh(e,"w")){const n=Wh(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();wT(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Vh(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Vh(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),dh(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$h(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):vT("Unrecognized action received from server: "+$h(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){dh(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=CI,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=CI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=CI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+TI.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(e){dh(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?gT("getToken() completed but was canceled"):(gT("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=l&&l.token,a=new tI(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(e=>{wT(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),s))}catch(e){this.log_("Failed to get token: "+e),o||(this.repoInfo_.nodeAdmin&&wT(e),l())}}}interrupt(e){gT("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gT("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Hh(this.interruptReasons_)&&(this.reconnectDelay_=CI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>IT(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new aI(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){gT("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){gT("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+iT.replace(/\./g,"-")]=1,Ah()?e["framework.cordova"]=1:Oh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=iI.getInstance().currentlyOnline();return Hh(this.interruptReasons_)&&e}}TI.nextPersistentConnectionId_=0,TI.nextConnectionId_=0;
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class II{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new II(e,t)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class xI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new II(ST,e),r=new II(ST,t);return 0!==this.compare(n,r)}minPost(){return II.MIN}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let NI;class PI extends xI{static get __EMPTY_NODE(){return NI}static set __EMPTY_NODE(e){NI=e}compare(e,t){return kT(e.name,t.name)}isDefinedOn(e){throw fh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return II.MIN}maxPost(){return new II(ET,NI)}makePost(e,t){return dh("string"==typeof e,"KeyIndex indexValue must always be a string."),new II(e,NI)}toString(){return".key"}}const AI=new PI;
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class RI{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class OI{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:OI.RED,this.left=null!=r?r:DI.EMPTY_NODE,this.right=null!=i?i:DI.EMPTY_NODE}copy(e,t,n,r,i){return new OI(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return DI.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return DI.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,OI.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,OI.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}OI.RED=!0,OI.BLACK=!1;class DI{constructor(e,t=DI.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new DI(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,OI.BLACK,null,null))}remove(e){return new DI(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,OI.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new RI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new RI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new RI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new RI(this.root_,null,this.comparator_,!0,e)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function MI(e,t){return kT(e.name,t.name)}function LI(e,t){return kT(e,t)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let FI;DI.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new OI(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const jI=function(e){return"number"==typeof e?"number:"+PT(e):"string:"+e},UI=function(e){if(e.isLeafNode()){const t=e.val();dh("string"==typeof t||"number"==typeof t||"object"==typeof t&&Bh(t,".sv"),"Priority must be a string or number.")}else dh(e===FI||e.isEmpty(),"priority of unexpected type.");dh(e===FI||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
let qI,zI,$I;class VI{constructor(e,t=VI.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,dh(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),UI(this.priorityNode_)}static set __childrenNodeConstructor(e){qI=e}static get __childrenNodeConstructor(){return qI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new VI(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:VI.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return gI(e)?this:".priority"===uI(e)?this.priorityNode_:VI.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:VI.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=uI(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(dh(".priority"!==n||1===cI(e),".priority must be the last token in a path"),this.updateImmediateChild(n,VI.__childrenNodeConstructor.EMPTY_NODE.updateChild(hI(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?PT(this.value_):this.value_,this.lazyHash_=dT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===VI.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof VI.__childrenNodeConstructor?-1:(dh(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=VI.VALUE_TYPE_ORDER.indexOf(t),i=VI.VALUE_TYPE_ORDER.indexOf(n);return dh(r>=0,"Unknown leaf type: "+t),dh(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}VI.VALUE_TYPE_ORDER=["object","boolean","number","string"];const BI=new class extends xI{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?kT(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return II.MIN}maxPost(){return new II(ET,new VI("[PRIORITY-POST]",$I))}makePost(e,t){const n=zI(e);return new II(t,new VI("[PRIORITY-POST]",n))}toString(){return".priority"}},WI=Math.log(2);
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class HI{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/WI,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const KI=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new OI(a,o.node,OI.BLACK,null,null);{const l=parseInt(s/2,10)+t,u=i(t,l),c=i(l+1,r);return o=e[l],a=n?n(o):o,new OI(a,o.node,OI.BLACK,u,c)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const u=i(s+1,a),c=e[s],h=n?n(c):c;l(new OI(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,OI.BLACK):(a(r,OI.BLACK),a(r,OI.RED))}return s}(new HI(e.length));return new DI(r||t,s)};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let GI;const QI={};class YI{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return dh(QI&&BI,"ChildrenNode.ts has not been loaded"),GI=GI||new YI({".priority":QI},{".priority":BI}),GI}get(e){const t=Wh(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof DI?t:null}hasIndex(e){return Bh(this.indexSet_,e.toString())}addIndex(e,t){dh(e!==AI,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(II.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?KI(n,e.getCompare()):QI;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const u=Object.assign({},this.indexes_);return u[a]=s,new YI(u,l)}addToIndexes(e,t){const n=Kh(this.indexes_,((n,r)=>{const i=Wh(this.indexSet_,r);if(dh(i,"Missing index implementation for "+r),n===QI){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(II.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),KI(n,i.getCompare())}return QI}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new II(e.name,r))),i.insert(e,e.node)}}));return new YI(n,this.indexSet_)}removeFromIndexes(e,t){const n=Kh(this.indexes_,(n=>{if(n===QI)return n;{const r=t.get(e.name);return r?n.remove(new II(e.name,r)):n}}));return new YI(n,this.indexSet_)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let XI;class JI{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&UI(this.priorityNode_),this.children_.isEmpty()&&dh(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return XI||(XI=new JI(new DI(LI),null,YI.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||XI}updatePriority(e){return this.children_.isEmpty()?this:new JI(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?XI:t}}getChild(e){const t=uI(e);return null===t?this:this.getImmediateChild(t).getChild(hI(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(dh(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new II(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?XI:this.priorityNode_;return new JI(r,s,i)}}updateChild(e,t){const n=uI(e);if(null===n)return t;{dh(".priority"!==uI(e)||1===cI(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(hI(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(BI,((s,o)=>{t[s]=o.val(e),n++,i&&JI.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+jI(this.getPriority().val())+":"),this.forEachChild(BI,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":dT(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new II(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new II(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new II(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,II.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,II.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ZI?-1:0}withIndex(e){if(e===AI||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new JI(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===AI||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(BI),n=t.getIterator(BI);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===AI?null:this.indexMap_.get(e.toString())}}JI.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const ZI=new class extends JI{constructor(){super(new DI(LI),JI.EMPTY_NODE,YI.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return JI.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(II,{MIN:{value:new II(ST,JI.EMPTY_NODE)},MAX:{value:new II(ET,ZI)}}),PI.__EMPTY_NODE=JI.EMPTY_NODE,VI.__childrenNodeConstructor=JI,FI=ZI,function(e){$I=e}(ZI);
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const ex=!0;function tx(e,t=null){if(null===e)return JI.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),dh(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new VI(e,tx(t));if(e instanceof Array||!ex){let n=JI.EMPTY_NODE;return NT(e,((t,r)=>{if(Bh(e,t)&&"."!==t.substring(0,1)){const e=tx(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(tx(t))}{const n=[];let r=!1;if(NT(e,((e,t)=>{if("."!==e.substring(0,1)){const i=tx(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new II(e,i)))}})),0===n.length)return JI.EMPTY_NODE;const i=KI(n,MI,(e=>e.name),LI);if(r){const e=KI(n,BI.getCompare());return new JI(i,tx(t),new YI({".priority":e},{".priority":BI}))}return new JI(i,tx(t),YI.Default)}}!function(e){zI=e}(tx);
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class nx extends xI{constructor(e){super(),this.indexPath_=e,dh(!gI(e)&&".priority"!==uI(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?kT(e.name,t.name):i}makePost(e,t){const n=tx(e),r=JI.EMPTY_NODE.updateChild(this.indexPath_,n);return new II(t,r)}maxPost(){const e=JI.EMPTY_NODE.updateChild(this.indexPath_,ZI);return new II(ET,e)}toString(){return fI(this.indexPath_,0).join("/")}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const rx=new class extends xI{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?kT(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return II.MIN}maxPost(){return II.MAX}makePost(e,t){const n=tx(e);return new II(t,n)}toString(){return".value"}};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function ix(e){return{type:"value",snapshotNode:e}}function sx(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ox(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ax(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class lx{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){dh(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(ox(t,o)):dh(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(sx(t,n)):s.trackChildChange(ax(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(BI,((e,r)=>{t.hasChild(e)||n.trackChildChange(ox(e,r))})),t.isLeafNode()||t.forEachChild(BI,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(ax(t,r,i))}else n.trackChildChange(sx(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?JI.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class ux{constructor(e){this.indexedFilter_=new lx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ux.getStartPost_(e),this.endPost_=ux.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new II(t,n))||(n=JI.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=JI.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(JI.EMPTY_NODE);const i=this;return t.forEachChild(BI,((e,t)=>{i.matches(new II(e,t))||(r=r.updateImmediateChild(e,JI.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class cx{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ux(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new II(t,n))||(n=JI.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=JI.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=JI.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(JI.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,JI.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;dh(o.numChildren()===this.limit_,"");const a=new II(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let c=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===t||o.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:s(c,a);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(ax(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(ox(t,e));const n=o.updateImmediateChild(t,JI.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=i&&i.trackChildChange(sx(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:u&&s(l,a)>=0?(null!=i&&(i.trackChildChange(ox(l.name,l.node)),i.trackChildChange(sx(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,JI.EMPTY_NODE)):e}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class hx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=BI}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return dh(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return dh(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ST}hasEnd(){return this.endSet_}getIndexEndValue(){return dh(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return dh(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ET}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return dh(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===BI}copy(){const e=new hx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dx(e){const t={};if(e.isDefault())return t;let n;if(e.index_===BI?n="$priority":e.index_===rx?n="$value":e.index_===AI?n="$key":(dh(e.index_ instanceof nx,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=$h(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=$h(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+$h(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=$h(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+$h(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function fx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==BI&&(t.i=e.index_.toString()),t}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class px extends nI{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=yT("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(dh(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=px.getListenId_(e,n),o={};this.listens_[s]=o;const a=dx(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Wh(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=px.getListenId_(e,t);delete this.listens_[n]}get(e){const t=dx(e._queryParams),n=e._path.toString(),r=new xh;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yh(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=zh(o.responseText)}catch(_j){wT("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&wT("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class mx{constructor(){this.rootNode_=JI.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function gx(){return{value:null,children:new Map}}function yx(e,t,n){if(gI(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=uI(t);e.children.has(r)||e.children.set(r,gx()),yx(e.children.get(r),t=hI(t),n)}}function vx(e,t){if(gI(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(BI,((t,n)=>{yx(e,new aI(t),n)})),vx(e,t)}}if(e.children.size>0){const n=uI(t);return t=hI(t),e.children.has(n)&&vx(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function _x(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e,((e,r)=>{_x(r,new aI(t.toString()+"/"+e),n)}))}class wx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&NT(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class bx{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wx(e);const n=1e4+2e4*Math.random();DT(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;NT(e,((e,r)=>{r>0&&Bh(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),DT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */var Sx,Ex;function kx(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(Ex=Sx||(Sx={}))[Ex.OVERWRITE=0]="OVERWRITE",Ex[Ex.MERGE=1]="MERGE",Ex[Ex.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ex[Ex.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class Cx{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Sx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(gI(this.path)){if(null!=this.affectedTree.value)return dh(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new aI(e));return new Cx(lI(),t,this.revert)}}return dh(uI(this.path)===e,"operationForChild called for unrelated child."),new Cx(hI(this.path),this.affectedTree,this.revert)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Tx{constructor(e,t){this.source=e,this.path=t,this.type=Sx.LISTEN_COMPLETE}operationForChild(e){return gI(this.path)?new Tx(this.source,lI()):new Tx(this.source,hI(this.path))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Ix{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Sx.OVERWRITE}operationForChild(e){return gI(this.path)?new Ix(this.source,lI(),this.snap.getImmediateChild(e)):new Ix(this.source,hI(this.path),this.snap)}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class xx{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Sx.MERGE}operationForChild(e){if(gI(this.path)){const t=this.children.subtree(new aI(e));return t.isEmpty()?null:t.value?new Ix(this.source,lI(),t.value):new xx(this.source,lI(),t)}return dh(uI(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xx(this.source,hI(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Nx{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(gI(e))return this.isFullyInitialized()&&!this.filtered_;const t=uI(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Px{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ax(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw fh("Should only compare child_ events.");const r=new II(t.childName,t.snapshotNode),i=new II(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Rx(e,t){return{eventCache:e,serverCache:t}}function Ox(e,t,n,r){return Rx(new Nx(t,n,r),e.serverCache)}function Dx(e,t,n,r){return Rx(e.eventCache,new Nx(t,n,r))}function Mx(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Lx(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let Fx;class jx{constructor(e,t=(()=>(Fx||(Fx=new DI(CT)),Fx))()){this.value=e,this.children=t}static fromObject(e){let t=new jx(null);return NT(e,((e,n)=>{t=t.set(new aI(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:lI(),value:this.value};if(gI(e))return null;{const n=uI(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(hI(e),t);return null!=i?{path:mI(new aI(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(gI(e))return this;{const t=uI(e),n=this.children.get(t);return null!==n?n.subtree(hI(e)):new jx(null)}}set(e,t){if(gI(e))return new jx(t,this.children);{const n=uI(e),r=(this.children.get(n)||new jx(null)).set(hI(e),t),i=this.children.insert(n,r);return new jx(this.value,i)}}remove(e){if(gI(e))return this.children.isEmpty()?new jx(null):new jx(null,this.children);{const t=uI(e),n=this.children.get(t);if(n){const r=n.remove(hI(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new jx(null):new jx(this.value,i)}return this}}get(e){if(gI(e))return this.value;{const t=uI(e),n=this.children.get(t);return n?n.get(hI(e)):null}}setTree(e,t){if(gI(e))return t;{const n=uI(e),r=(this.children.get(n)||new jx(null)).setTree(hI(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new jx(this.value,i)}}fold(e){return this.fold_(lI(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(mI(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,lI(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(gI(e))return null;{const r=uI(e),i=this.children.get(r);return i?i.findOnPath_(hI(e),mI(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,lI(),t)}foreachOnPath_(e,t,n){if(gI(e))return this;{this.value&&n(t,this.value);const r=uI(e),i=this.children.get(r);return i?i.foreachOnPath_(hI(e),mI(t,r),n):new jx(null)}}foreach(e){this.foreach_(lI(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(mI(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class Ux{constructor(e){this.writeTree_=e}static empty(){return new Ux(new jx(null))}}function qx(e,t,n){if(gI(t))return new Ux(new jx(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=yI(i,t);return s=s.updateChild(o,n),new Ux(e.writeTree_.set(i,s))}{const r=new jx(n),i=e.writeTree_.setTree(t,r);return new Ux(i)}}}function zx(e,t,n){let r=e;return NT(n,((e,n)=>{r=qx(r,mI(t,e),n)})),r}function $x(e,t){if(gI(t))return Ux.empty();{const n=e.writeTree_.setTree(t,new jx(null));return new Ux(n)}}function Vx(e,t){return null!=Bx(e,t)}function Bx(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(yI(n.path,t)):null}function Wx(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(BI,((e,n)=>{t.push(new II(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new II(e,n.value))})),t}function Hx(e,t){if(gI(t))return e;{const n=Bx(e,t);return new Ux(null!=n?new jx(n):e.writeTree_.subtree(t))}}function Kx(e){return e.writeTree_.isEmpty()}function Gx(e,t){return Qx(lI(),e.writeTree_,t)}function Qx(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(dh(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Qx(mI(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(mI(e,".priority"),r)),n}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function Yx(e,t){return uN(t,e)}function Xx(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));dh(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&Jx(t,r.path)?i=!1:wI(r.path,t.path)&&(s=!0)),o--}return!!i&&(s?(function(e){e.visibleWrites=eN(e.allWrites,Zx,lI()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(r.snap?e.visibleWrites=$x(e.visibleWrites,r.path):NT(r.children,(t=>{e.visibleWrites=$x(e.visibleWrites,mI(r.path,t))})),!0))}function Jx(e,t){if(e.snap)return wI(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&wI(mI(e.path,n),t))return!0;return!1}function Zx(e){return e.visible}function eN(e,t,n){let r=Ux.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)wI(n,e)?(t=yI(n,e),r=qx(r,t,s.snap)):wI(e,n)&&(t=yI(e,n),r=qx(r,lI(),s.snap.getChild(t)));else{if(!s.children)throw fh("WriteRecord should have .snap or .children");if(wI(n,e))t=yI(n,e),r=zx(r,t,s.children);else if(wI(e,n))if(t=yI(e,n),gI(t))r=zx(r,lI(),s.children);else{const e=Wh(s.children,uI(t));if(e){const n=e.getChild(hI(t));r=qx(r,lI(),n)}}}}}return r}function tN(e,t,n,r,i){if(r||i){const s=Hx(e.visibleWrites,t);if(!i&&Kx(s))return n;if(i||null!=n||Vx(s,lI())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(wI(e.path,t)||wI(t,e.path))};return Gx(eN(e.allWrites,s,t),n||JI.EMPTY_NODE)}return null}{const r=Bx(e.visibleWrites,t);if(null!=r)return r;{const r=Hx(e.visibleWrites,t);return Kx(r)?n:null!=n||Vx(r,lI())?Gx(r,n||JI.EMPTY_NODE):null}}}function nN(e,t,n,r){return tN(e.writeTree,e.treePath,t,n,r)}function rN(e,t){return function(e,t,n){let r=JI.EMPTY_NODE;const i=Bx(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(BI,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Hx(e.visibleWrites,t);return n.forEachChild(BI,((e,t)=>{const n=Gx(Hx(i,new aI(e)),t);r=r.updateImmediateChild(e,n)})),Wx(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Wx(Hx(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function iN(e,t,n,r){return function(e,t,n,r,i){dh(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=mI(t,n);if(Vx(e.visibleWrites,s))return null;{const t=Hx(e.visibleWrites,s);return Kx(t)?i.getChild(n):Gx(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function sN(e,t){return function(e,t){return Bx(e.visibleWrites,t)}(e.writeTree,mI(e.treePath,t))}function oN(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Hx(e.visibleWrites,t),u=Bx(l,lI());if(null!=u)a=u;else{if(null==n)return[];a=Gx(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function aN(e,t,n){return function(e,t,n,r){const i=mI(t,n),s=Bx(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?Gx(Hx(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function lN(e,t){return uN(mI(e.treePath,t),e.writeTree)}function uN(e,t){return{treePath:e,writeTree:t}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class cN{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;dh("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),dh(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ax(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ox(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,sx(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw fh("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ax(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const hN=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class dN{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Nx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return aN(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Lx(this.viewCache_),i=oN(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */function fN(e,t,n,r,i){const s=new cN;let o,a;if(n.type===Sx.OVERWRITE){const l=n;l.source.fromUser?o=gN(e,t,l.path,l.snap,r,i,s):(dh(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!gI(l.path),o=mN(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Sx.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const u=mI(n,r);yN(t,uI(u))&&(a=gN(e,a,u,l,i,s,o))})),r.foreach(((r,l)=>{const u=mI(n,r);yN(t,uI(u))||(a=gN(e,a,u,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(dh(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=_N(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Sx.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=sN(r,n))return t;{const a=new dN(r,t,i),l=t.eventCache.getNode();let u;if(gI(n)||".priority"===uI(n)){let n;if(t.serverCache.isFullyInitialized())n=nN(r,Lx(t));else{const e=t.serverCache.getNode();dh(e instanceof JI,"serverChildren would be complete if leaf node"),n=rN(r,e)}u=e.filter.updateFullNode(l,n,s)}else{const i=uI(n);let c=aN(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=l.getImmediateChild(i)),u=null!=c?e.filter.updateChild(l,i,c,hI(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,JI.EMPTY_NODE,hI(n),a,s):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=nN(r,Lx(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=sN(r,lI()),Ox(t,u,o,e.filter.filtersNodes())}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=sN(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(gI(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return mN(e,t,n,l.getNode().getChild(n),i,s,a,o);if(gI(n)){let r=new jx(null);return l.getNode().forEachChild(AI,((e,t)=>{r=r.set(new aI(e),t)})),_N(e,t,n,r,i,s,a,o)}return t}{let u=new jx(null);return r.foreach(((e,t)=>{const r=mI(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))})),_N(e,t,n,u,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Sx.LISTEN_COMPLETE)throw fh("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Dx(t,s.getNode(),s.isFullyInitialized()||gI(n),s.isFiltered());return pN(e,o,n,r,hN,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Mx(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ix(Mx(t)))}}(t,o,l),{viewCache:o,changes:l}}function pN(e,t,n,r,i,s){const o=t.eventCache;if(null!=sN(r,n))return t;{let a,l;if(gI(n))if(dh(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Lx(t),i=rN(r,n instanceof JI?n:JI.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=nN(r,Lx(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=uI(n);if(".priority"===u){dh(1===cI(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=iN(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const c=hI(n);let h;if(o.isCompleteForChild(u)){l=t.serverCache.getNode();const e=iN(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(u).updateChild(c,e):o.getNode().getImmediateChild(u)}else h=aN(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,c,i,s):o.getNode()}}return Ox(t,a,o.isFullyInitialized()||gI(n),e.filter.filtersNodes())}}function mN(e,t,n,r,i,s,o,a){const l=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(gI(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=uI(n);if(!l.isCompleteForPath(n)&&cI(n)>1)return t;const i=hI(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?c.updatePriority(l.getNode(),s):c.updateChild(l.getNode(),e,s,i,hN,null)}const h=Dx(t,u,l.isFullyInitialized()||gI(n),c.filtersNodes());return pN(e,h,n,i,new dN(i,h,s),a)}function gN(e,t,n,r,i,s,o){const a=t.eventCache;let l,u;const c=new dN(i,t,s);if(gI(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ox(t,u,!0,e.filter.filtersNodes());else{const i=uI(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ox(t,u,a.isFullyInitialized(),a.isFiltered());else{const s=hI(n),u=a.getNode().getImmediateChild(i);let h;if(gI(s))h=r;else{const e=c.getCompleteChild(i);h=null!=e?".priority"===dI(s)&&e.getChild(pI(s)).isEmpty()?e:e.updateChild(s,r):JI.EMPTY_NODE}l=u.equals(h)?t:Ox(t,e.filter.updateChild(a.getNode(),i,h,s,c,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function yN(e,t){return e.eventCache.isCompleteForChild(t)}function vN(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function _N(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=gI(n)?r:new jx(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=vN(0,t.serverCache.getNode().getImmediateChild(n),r);u=mN(e,u,new aI(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!l){const l=vN(0,t.serverCache.getNode().getImmediateChild(n),r);u=mN(e,u,new aI(n),l,i,s,o,a)}})),u}class wN{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new lx(n.getIndex()),i=(s=n).loadsAllData()?new lx(s.getIndex()):s.hasLimit()?new cx(s):new ux(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(JI.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(JI.EMPTY_NODE,a.getNode(),null),c=new Nx(l,o.isFullyInitialized(),r.filtersNodes()),h=new Nx(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Rx(h,c),this.eventGenerator_=new Px(this.query_)}get query(){return this.query_}}function bN(e,t){const n=Lx(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!gI(t)&&!n.getImmediateChild(uI(t)).isEmpty())?n.getChild(t):null}function SN(e){return 0===e.eventRegistrations_.length}function EN(e,t,n){const r=[];if(n){dh(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function kN(e,t,n,r){t.type===Sx.MERGE&&null!==t.source.queryId&&(dh(Lx(e.viewCache_),"We should always have a full cache before handling merges"),dh(Mx(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=fN(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,dh(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),dh(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),dh(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,CN(e,s.changes,s.viewCache.eventCache.getNode(),null)}function CN(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ax(e,i,"child_removed",t,r,n),Ax(e,i,"child_added",t,r,n),Ax(e,i,"child_moved",s,r,n),Ax(e,i,"child_changed",t,r,n),Ax(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let TN,IN;class xN{constructor(){this.views=new Map}}function NN(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return dh(null!=s,"SyncTree gave us an op for an invalid query."),kN(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(kN(s,t,n,r));return i}}function PN(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=nN(n,i?r:null),s=!1;e?s=!0:r instanceof JI?(e=rN(n,r),s=!1):(e=JI.EMPTY_NODE,s=!1);const o=Rx(new Nx(e,s,!1),new Nx(r,i,!1));return new wN(t,o)}return o}function AN(e,t,n,r,i,s){const o=PN(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(BI,((e,t)=>{r.push(sx(e,t))})),n.isFullyInitialized()&&r.push(ix(n.getNode())),CN(e,r,n.getNode(),t)}(o,n)}function RN(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=FN(e);if("default"===i)for(const[l,u]of e.views.entries())o=o.concat(EN(u,n,r)),SN(u)&&(e.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const t=e.views.get(i);t&&(o=o.concat(EN(t,n,r)),SN(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!FN(e)&&s.push(new(dh(TN,"Reference.ts has not been loaded"),TN)(t._repo,t._path)),{removed:s,events:o}}function ON(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function DN(e,t){let n=null;for(const r of e.views.values())n=n||bN(r,t);return n}function MN(e,t){if(t._queryParams.loadsAllData())return jN(e);{const n=t._queryIdentifier;return e.views.get(n)}}function LN(e,t){return null!=MN(e,t)}function FN(e){return null!=jN(e)}function jN(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */let UN=1;class qN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jx(null),this.pendingWriteTree_={visibleWrites:Ux.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zN(e,t,n,r,i){return function(e,t,n,r,i){dh(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=qx(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?YN(e,new Ix({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function $N(e,t,n,r){!function(e,t,n,r){dh(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=zx(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=jx.fromObject(n);return YN(e,new xx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function VN(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Xx(e.pendingWriteTree_,t)){let t=new jx(null);return null!=r.snap?t=t.set(lI(),!0):NT(r.children,(e=>{t=t.set(new aI(e),!0)})),YN(e,new Cx(r.path,t,n))}return[]}function BN(e,t,n){return YN(e,new Ix({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function WN(e,t,n,r,i=!1){const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||LN(o,t))){const l=RN(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const n=-1!==u.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>FN(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&FN(t))return[jN(t)];{let e=[];return t&&(e=ON(t)),NT(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=ZN(e,r);e.listenProvider_.startListening(sP(i),eP(e,i),s.hashFn,s.onComplete)}}}if(!i&&u.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(sP(t),n)}else u.forEach((t=>{const n=e.queryToTagMap.get(tP(t));e.listenProvider_.stopListening(sP(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=tP(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return a}function HN(e,t,n,r){const i=nP(e,r);if(null!=i){const r=rP(i),s=r.path,o=r.queryId,a=yI(s,t);return iP(e,s,new Ix(kx(o),a,n))}return[]}function KN(e,t,n,r=!1){const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=yI(e,i);s=s||DN(t,n),o=o||FN(t)}));let a,l=e.syncPointTree_.get(i);l?(o=o||FN(l),s=s||DN(l,lI())):(l=new xN,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s?a=!0:(a=!1,s=JI.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=DN(t,lI());n&&(s=s.updateImmediateChild(e,n))})));const u=LN(l,t);if(!u&&!t._queryParams.loadsAllData()){const n=tP(t);dh(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=UN++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let c=AN(l,t,n,Yx(e.pendingWriteTree_,i),s,a);if(!u&&!o&&!r){const n=MN(l,t);c=c.concat(function(e,t,n){const r=t._path,i=eP(e,t),s=ZN(e,n),o=e.listenProvider_.startListening(sP(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)dh(!FN(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!gI(e)&&t&&FN(t))return[jN(t).query];{let e=[];return t&&(e=e.concat(ON(t).map((e=>e.query)))),NT(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(sP(r),eP(e,r))}}return o}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e,t,n))}return c}function GN(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=DN(n,yI(e,t));if(r)return r}));return tN(r,t,i,n,!0)}function QN(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=yI(e,n);r=r||DN(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||DN(i,lI()):(i=new xN,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Nx(r,!0,!1):null;return function(e){return Mx(e.viewCache_)}(PN(i,t,Yx(e.pendingWriteTree_,t._path),s?o.getNode():JI.EMPTY_NODE,s))}function YN(e,t){return XN(t,e.syncPointTree_,null,Yx(e.pendingWriteTree_,lI()))}function XN(e,t,n,r){if(gI(e.path))return JN(e,t,n,r);{const i=t.get(lI());null==n&&null!=i&&(n=DN(i,lI()));let s=[];const o=uI(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=lN(r,o);s=s.concat(XN(a,l,e,t))}return i&&(s=s.concat(NN(i,e,r,n))),s}}function JN(e,t,n,r){const i=t.get(lI());null==n&&null!=i&&(n=DN(i,lI()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=lN(r,t),l=e.operationForChild(t);l&&(s=s.concat(JN(l,i,o,a)))})),i&&(s=s.concat(NN(i,e,r,n))),s}function ZN(e,t){const n=t.query,r=eP(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||JI.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=nP(e,n);if(r){const n=rP(r),i=n.path,s=n.queryId,o=yI(i,t);return iP(e,i,new Tx(kx(s),o))}return[]}(e,n._path,r):function(e,t){return YN(e,new Tx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return WN(e,n,null,r)}}}}function eP(e,t){const n=tP(t);return e.queryToTagMap.get(n)}function tP(e){return e._path.toString()+"$"+e._queryIdentifier}function nP(e,t){return e.tagToQueryMap.get(t)}function rP(e){const t=e.indexOf("$");return dh(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new aI(e.substr(0,t))}}function iP(e,t,n){const r=e.syncPointTree_.get(t);return dh(r,"Missing sync point for query tag that we're tracking"),NN(r,n,Yx(e.pendingWriteTree_,t),null)}function sP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(dh(IN,"Reference.ts has not been loaded"),IN)(e._repo,e._path):e}class oP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new oP(t)}node(){return this.node_}}class aP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mI(this.path_,e);return new aP(this.syncTree_,t)}node(){return GN(this.syncTree_,this.path_)}}const lP=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},uP=function(e,t,n){return e&&"object"==typeof e?(dh(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?cP(e[".sv"],t,n):"object"==typeof e[".sv"]?hP(e[".sv"],t):void dh(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},cP=function(e,t,n){if("timestamp"===e)return n.timestamp;dh(!1,"Unexpected server value: "+e)},hP=function(e,t,n){e.hasOwnProperty("increment")||dh(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&dh(!1,"Unexpected increment value: "+r);const i=t.node();if(dh(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},dP=function(e,t,n,r){return pP(t,new aP(n,e),r)},fP=function(e,t,n){return pP(e,new oP(t),n)};function pP(e,t,n){const r=e.getPriority().val(),i=uP(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=uP(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new VI(s,tx(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new VI(i))),r.forEachChild(BI,((e,r)=>{const i=pP(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class mP{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function gP(e,t){let n=t instanceof aI?t:new aI(t),r=e,i=uI(n);for(;null!==i;){const e=Wh(r.node.children,i)||{children:{},childCount:0};r=new mP(i,r,e),n=hI(n),i=uI(n)}return r}function yP(e){return e.node.value}function vP(e,t){e.node.value=t,EP(e)}function _P(e){return e.node.childCount>0}function wP(e,t){NT(e.node.children,((n,r)=>{t(new mP(n,e,r))}))}function bP(e,t,n,r){n&&!r&&t(e),wP(e,(e=>{bP(e,t,!0,r)})),n&&r&&t(e)}function SP(e){return new aI(null===e.parent?e.name:SP(e.parent)+"/"+e.name)}function EP(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===yP(e)&&!_P(e)}(n),i=Bh(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,EP(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,EP(e))}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(e.parent,e.name,e)}const kP=/[\[\].#$\/\u0000-\u001F\u007F]/,CP=/[\[\].#$\u0000-\u001F\u007F]/,TP=10485760,IP=function(e){return"string"==typeof e&&0!==e.length&&!kP.test(e)},xP=function(e){return"string"==typeof e&&0!==e.length&&!CP.test(e)},NP=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!bT(e)||e&&"object"==typeof e&&Bh(e,".sv")},PP=function(e,t,n,r){AP(ed(e,"value"),t,n)},AP=function(e,t,n){const r=n instanceof aI?new bI(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+EI(r));if("function"==typeof t)throw new Error(e+"contains a function "+EI(r)+" with contents = "+t.toString());if(bT(t))throw new Error(e+"contains "+t.toString()+" "+EI(r));if("string"==typeof t&&t.length>TP/3&&td(t)>TP)throw new Error(e+"contains a string greater than "+TP+" utf8 bytes "+EI(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(NT(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!IP(t)))throw new Error(e+" contains an invalid key ("+t+") "+EI(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var o,a;a=t,(o=r).parts_.length>0&&(o.byteLength_+=1),o.parts_.push(a),o.byteLength_+=td(a),SI(o),AP(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=td(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+EI(r)+" in addition to actual children.")}},RP=function(e,t,n,r){const i=ed(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];NT(t,((e,t)=>{const r=new aI(e);if(AP(i,t,mI(n,r)),".priority"===dI(r)&&!NP(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=fI(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!IP(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(vI);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&wI(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},OP=function(e,t,n,r){if(!xP(n))throw new Error(ed(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},DP=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),OP(e,t,n)},MP=function(e,t){if(".info"===uI(t))throw new Error(e+" failed = Can't modify data under /.info/")},LP=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!IP(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xP(e)}(n))throw new Error(ed(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class FP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jP(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||_I(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function UP(e,t,n){jP(e,n),zP(e,(e=>_I(e,t)))}function qP(e,t,n){jP(e,n),zP(e,(e=>wI(e,t)||wI(t,e)))}function zP(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?($P(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function $P(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();pT&&gT("event: "+n.toString()),OT(r)}}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const VP="repo_interrupt",BP=25;class WP{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gx(),this.transactionQueueTree_=new mP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HP(e,t,n){if(e.stats_=KT(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new px(e.repoInfo_,((t,n,r,i)=>{QP(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>YP(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$h(n)}catch(_j){throw new Error("Invalid authOverride provided: "+_j)}}e.persistentConnection_=new TI(e.repoInfo_,t,((t,n,r,i)=>{QP(e,t,n,r,i)}),(t=>{YP(e,t)}),(t=>{!function(e,t){NT(t,((t,n)=>{XP(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return HT[n]||(HT[n]=t()),HT[n]}(e.repoInfo_,(()=>new bx(e.stats_,e.server_))),e.infoData_=new mx,e.infoSyncTree_=new qN({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=BN(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),XP(e,"connected",!1),e.serverSyncTree_=new qN({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);qP(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function KP(e){const t=e.infoData_.getNode(new aI(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function GP(e){return lP({timestamp:KP(e)})}function QP(e,t,n,r,i){e.dataUpdateCount++;const s=new aI(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Kh(n,(e=>tx(e)));o=function(e,t,n,r){const i=nP(e,r);if(i){const r=rP(i),s=r.path,o=r.queryId,a=yI(s,t),l=jx.fromObject(n);return iP(e,s,new xx(kx(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=tx(n);o=HN(e.serverSyncTree_,s,t,i)}else if(r){const t=Kh(n,(e=>tx(e)));o=function(e,t,n){const r=jx.fromObject(n);return YN(e,new xx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=tx(n);o=BN(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=oA(e,s)),qP(e.eventQueue_,a,o)}function YP(e,t){XP(e,"connected",t),!1===t&&function(e){nA(e,"onDisconnectEvents");const t=GP(e),n=gx();_x(e.onDisconnect_,lI(),((r,i)=>{const s=dP(r,i,e.serverSyncTree_,t);yx(n,r,s)}));let r=[];_x(n,lI(),((t,n)=>{r=r.concat(BN(e.serverSyncTree_,t,n));const i=hA(e,t);oA(e,i)})),e.onDisconnect_=gx(),qP(e.eventQueue_,lI(),r)}(e)}function XP(e,t,n){const r=new aI("/.info/"+t),i=tx(n);e.infoData_.updateSnapshot(r,i);const s=BN(e.infoSyncTree_,r,i);qP(e.eventQueue_,r,s)}function JP(e){return e.nextWriteId_++}function ZP(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&vx(e.onDisconnect_,t),rA(0,n,r,i)}))}function eA(e,t,n,r){const i=tx(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&yx(e.onDisconnect_,t,i),rA(0,r,n,s)}))}function tA(e,t,n){let r;r=".info"===uI(t._path)?WN(e.infoSyncTree_,t,n):WN(e.serverSyncTree_,t,n),UP(e.eventQueue_,t._path,r)}function nA(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),gT(n,...t)}function rA(e,t,n,r){t&&OT((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function iA(e,t,n){return GN(e.serverSyncTree_,t,n)||JI.EMPTY_NODE}function sA(e,t=e.transactionQueueTree_){if(t||cA(e,t),yP(t)){const n=lA(e,t);dh(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=iA(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const e=n[u];dh(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=yI(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{nA(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(VN(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();cA(e,gP(e.transactionQueueTree_,t)),sA(e,e.transactionQueueTree_),qP(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)OT(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{wT("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}oA(e,t)}}),o)}(e,SP(t),n)}else _P(t)&&wP(t,(t=>{sA(e,t)}))}function oA(e,t){const n=aA(e,t),r=SP(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],u=yI(n,s.path);let c,h=!1;if(dh(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,c=s.abortReason,i=i.concat(VN(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=BP)h=!0,c="maxretry",i=i.concat(VN(e.serverSyncTree_,s.currentWriteId,!0));else{const n=iA(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){AP("transaction failed: Data returned ",r,s.path);let t=tx(r);"object"==typeof r&&null!=r&&Bh(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=GP(e),u=fP(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=u,s.currentWriteId=JP(e),o.splice(o.indexOf(a),1),i=i.concat(zN(e.serverSyncTree_,s.path,u,s.currentWriteId,s.applyLocally)),i=i.concat(VN(e.serverSyncTree_,a,!0))}else h=!0,c="nodata",i=i.concat(VN(e.serverSyncTree_,s.currentWriteId,!0))}qP(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===c?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(c),!1,null)))))}var a;cA(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)OT(r[l]);sA(e,e.transactionQueueTree_)}(e,lA(e,n),r),r}function aA(e,t){let n,r=e.transactionQueueTree_;for(n=uI(t);null!==n&&void 0===yP(r);)r=gP(r,n),n=uI(t=hI(t));return r}function lA(e,t){const n=[];return uA(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function uA(e,t,n){const r=yP(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);wP(t,(t=>{uA(e,t,n)}))}function cA(e,t){const n=yP(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,vP(t,n.length>0?n:void 0)}wP(t,(t=>{cA(e,t)}))}function hA(e,t){const n=SP(aA(e,t)),r=gP(e.transactionQueueTree_,t);return function(e,t){let n=e.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(r,(t=>{dA(e,t)})),dA(e,r),bP(r,(t=>{dA(e,t)})),n}function dA(e,t){const n=yP(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(dh(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(dh(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(VN(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?vP(t,void 0):n.length=s+1,qP(e.eventQueue_,SP(t),i);for(let e=0;e<r.length;e++)OT(r[e])}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */const fA=function(e,t){const n=pA(e),r=n.namespace;"firebase.com"===n.domain&&_T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||_T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wT("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new $T(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new aI(n.pathString)}},pA=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(_j){}t+="/"+e}return t}(e.substring(c,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):wT(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(u+1),10)):u=t.length;const f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
class mA{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$h(this.snapshot.exportVal())}}class gA{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
       * @license
       * Copyright 2017 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class yA{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return dh(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class vA{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new xh;return ZP(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){MP("OnDisconnect.remove",this._path);const e=new xh;return eA(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){MP("OnDisconnect.set",this._path),PP("OnDisconnect.set",e,this._path);const t=new xh;return eA(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){MP("OnDisconnect.setWithPriority",this._path),PP("OnDisconnect.setWithPriority",e,this._path),function(e,t){if(bT(t))throw new Error(ed(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!NP(t))throw new Error(ed(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}("OnDisconnect.setWithPriority",t);const n=new xh;return function(e,t,n,r,i){const s=tx(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&yx(e.onDisconnect_,t,s),rA(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){MP("OnDisconnect.update",this._path),RP("OnDisconnect.update",e,this._path);const t=new xh;return function(e,t,n,r){if(Hh(n))return gT("onDisconnect().update() called with empty data.  Don't do anything."),void rA(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&NT(n,((n,r)=>{const i=tx(r);yx(e.onDisconnect_,mI(t,n),i)})),rA(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */class _A{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return gI(this._path)?null:dI(this._path)}get ref(){return new wA(this._repo,this._path)}get _queryIdentifier(){const e=fx(this._queryParams),t=IT(e);return"{}"===t?"default":t}get _queryObject(){return fx(this._queryParams)}isEqual(e){if(!((e=ad(e))instanceof _A))return!1;const t=this._repo===e._repo,n=_I(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class wA extends _A{constructor(e,t){super(e,t,new hx,!1)}get parent(){const e=pI(this._path);return null===e?null:new wA(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class bA{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new aI(e),n=EA(this.ref,e);return new bA(this._node.getChild(t),n,BI)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new bA(n,EA(this.ref,t),BI))))}hasChild(e){const t=new aI(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function SA(e,t){return(e=ad(e))._checkNotDeleted("ref"),void 0!==t?EA(e._root,t):e._root}function EA(e,t){return null===uI((e=ad(e))._path)?DP("child","path",t):OP("child","path",t),new wA(e._repo,mI(e._path,t))}function kA(e){return e=ad(e),new vA(e._repo,e._path)}function CA(e,t){e=ad(e),MP("set",e._path),PP("set",t,e._path);const n=new xh;return function(e,t,n,r,i){nA(e,"set",{path:t.toString(),value:n,priority:r});const s=GP(e),o=tx(n,r),a=GN(e.serverSyncTree_,t),l=fP(o,a,s),u=JP(e),c=zN(e.serverSyncTree_,t,l,u,!0);jP(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||wT("set at "+t+" failed: "+n);const o=VN(e.serverSyncTree_,u,!s);qP(e.eventQueue_,t,o),rA(0,i,n,r)}));const h=hA(e,t);oA(e,h),qP(e.eventQueue_,h,[])}(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function TA(e,t){RP("update",t,e._path);const n=new xh;return function(e,t,n,r){nA(e,"update",{path:t.toString(),value:n});let i=!0;const s=GP(e),o={};if(NT(n,((n,r)=>{i=!1,o[n]=dP(mI(t,n),tx(r),e.serverSyncTree_,s)})),i)gT("update() called with empty data.  Don't do anything."),rA(0,r,"ok",void 0);else{const i=JP(e),s=$N(e.serverSyncTree_,t,o,i);jP(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||wT("update at "+t+" failed: "+n);const a=VN(e.serverSyncTree_,i,!o),l=a.length>0?oA(e,t):t;qP(e.eventQueue_,l,a),rA(0,r,n,s)})),NT(n,(n=>{const r=hA(e,mI(t,n));oA(e,r)})),qP(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function IA(e){e=ad(e);const t=new yA((()=>{})),n=new xA(t);return function(e,t,n){const r=QN(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=tx(r).withIndex(t._queryParams.getIndex());let s;if(KN(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=BN(e.serverSyncTree_,t._path,i);else{const n=eP(e.serverSyncTree_,t);s=HN(e.serverSyncTree_,t._path,i,n)}return qP(e.eventQueue_,t._path,s),WN(e.serverSyncTree_,t,n,null,!0),i}),(n=>(nA(e,"get for query "+$h(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new bA(t,new wA(e._repo,e._path),e._queryParams.getIndex())))}class xA{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new mA("value",this,new bA(e.snapshotNode,new wA(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gA(this,e,t):null}matches(e){return e instanceof xA&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class NA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gA(this,e,t):null}createEvent(e,t){dh(null!=e.childName,"Child events should have a childName.");const n=EA(new wA(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new mA(e.type,this,new bA(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof NA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function PA(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{tA(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new yA(n,s||void 0),a="value"===t?new xA(o):new NA(t,o);return function(e,t,n){let r;r=".info"===uI(t._path)?KN(e.infoSyncTree_,t,n):KN(e.serverSyncTree_,t,n),UP(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>tA(e._repo,e,a)}!function(e){dh(!TN,"__referenceConstructor has already been defined"),TN=e}(wA),function(e){dh(!IN,"__referenceConstructor has already been defined"),IN=e}(wA);
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
const AA="FIREBASE_DATABASE_EMULATOR_HOST",RA={};let OA=!1;function DA(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||_T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gT("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a=fA(s,i),l=a.repoInfo;"undefined"!=typeof process&&tT&&(o=tT[AA]),o?(s=`http://${o}?ns=${l.namespace}`,a=fA(s,i),l=a.repoInfo):a.repoInfo.secure;const u=new LT(e.name,e.options,t);LP("Invalid Firebase Database URL",a),gI(a.path)||_T("Database URL must point to the root of a Firebase Database (not including a child path).");const c=function(e,t,n,r){let i=RA[t.name];i||(i={},RA[t.name]=i);let s=i[e.toURLString()];return s&&_T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new WP(e,OA,n,r),i[e.toURLString()]=s,s}(l,e,u,new MT(e.name,n));return new LA(c,e)}function MA(e,t){const n=RA[t];n&&n[e.key]===e||_T(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt(VP)}(e),delete n[e.key]}class LA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(HP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wA(this._repo,lI())),this._rootInternal}_delete(){return null!==this._rootInternal&&(MA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&_T("Cannot call "+e+" on a deleted database.")}}TI.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},TI.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},
/**
       * @license
       * Copyright 2021 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */
function(e){iT=Cf,wf(new ld("database",((e,{instanceIdentifier:t})=>DA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),xf(nT,rT,e),xf(nT,rT,"esm2017")}();const FA=Tf({apiKey:"AIzaSyAAx9xed3OJ12gkLhqDgkAw2f0TKzutIW4",authDomain:"chess-8426e.firebaseapp.com",projectId:"chess-8426e",storageBucket:"chess-8426e.appspot.com",messagingSenderId:"607251598004",appId:"1:607251598004:web:dd52ca4b826bbbcbbbe5e1",measurementId:"G-CR431E5BGW",databaseURL:{VITE_BASE_PATH:"/Chess/",VITE_ASSET_PATH:"/Chess/",VITE_FIREBASE_API_KEY:"AIzaSyAAx9xed3OJ12gkLhqDgkAw2f0TKzutIW4",VITE_FIREBASE_AUTH_DOMAIN:"chess-8426e.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"chess-8426e",VITE_FIREBASE_STORAGE_BUCKET:"chess-8426e.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"607251598004",VITE_FIREBASE_APP_ID:"1:607251598004:web:dd52ca4b826bbbcbbbe5e1",VITE_FIREBASE_MEASUREMENT_ID:"G-CR431E5BGW",VITE_FIREBASE_AUTH_DONAIN:"chess-8426e.firebaseapp.com",BASE_URL:"/Chess/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!0}.VITE_REAL_TIME_DB_URL});!function(e=If()){const t=bf(e=ad(e),Ny);t.isInitialized()?t.getImmediate():function(e,t={}){const n=bf(e,Ny);if(n.isInitialized()){const e=n.getImmediate();if(Gh(t,n.getOptions()))return e;throw Uy.create("already-initialized")}n.initialize({options:t})}(e)}(FA);const jA=function(e=If()){const t=bf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=bf(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Gh(n.getOptions(),null!=t?t:{}))return e;Kf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:bg,persistence:[Dm,ym,_m]}),r=Ih("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Cg)return;const r=null==t?void 0:t.token;Tg!==r&&(Tg=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){ad(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){ad(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=kh("auth");return s&&Jp(n,`http://${s}`),n}(FA),UA=function(e){const t="string"==typeof e?e:"(default)",n=bf("object"==typeof e?e:If(),"firestore").getImmediate({identifier:t});if(!n._initialized){const e=Ch("firestore");e&&function(e,t,n,r={}){var i;const s=(e=Gk(e,Yk))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Iv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=bv.MOCK_USER;else{t=Nh(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ov(Rv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bv(s)}e._authCredentials=new Fv(new Mv(t,n))}}(n,...e)}return n}(FA),qA=function(e=If(),t){const n=bf(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Ch("database");e&&function(e,t,n,r={}){(e=ad(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&_T("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_T('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new FT(FT.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:Nh(r.mockUserToken,e.app.options.projectId);s=new FT(t)}!function(e,t,n,r){e.repoInfo_=new $T(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}(FA);
/**
       * @remix-run/router v1.18.0
       *
       * Copyright (c) Remix Software Inc.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE.md file in the root directory of this source tree.
       *
       * @license MIT
       */
function zA(){return zA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zA.apply(this,arguments)}var $A;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}($A||($A={}));const VA="popstate";function BA(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$A.Pop,l=null,u=c();function c(){return(o.state||{idx:null}).idx}function h(){a=$A.Pop;let e=c(),t=null==e?null:e-u;u=e,l&&l({action:a,location:m.location,delta:t})}function d(e,t){a=$A.Push;let r=GA(m.location,e,t);n&&n(r,e),u=c()+1;let h=KA(r,u),d=m.createHref(r);try{o.pushState(h,"",d)}catch(vT){if(vT instanceof DOMException&&"DataCloneError"===vT.name)throw vT;i.location.assign(d)}s&&l&&l({action:a,location:m.location,delta:1})}function f(e,t){a=$A.Replace;let r=GA(m.location,e,t);n&&n(r,e),u=c();let i=KA(r,u),h=m.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:m.location,delta:0})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"==typeof e?e:QA(e);return n=n.replace(/ $/,"%20"),WA(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,o.replaceState(zA({},o.state,{idx:u}),""));let m={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(VA,h),l=e,()=>{i.removeEventListener(VA,h),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:d,replace:f,go:e=>o.go(e)};return m}((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=YA(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),GA("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:QA(t))}),(function(e,t){HA("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function WA(e,t){if(!1===e||null==e)throw new Error(t)}function HA(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(_j){}}}function KA(e,t){return{usr:e.state,key:e.key,idx:t}}function GA(e,t,n,r){return void 0===n&&(n=null),zA({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?YA(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function QA(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function YA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var XA;function JA(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let i="string"==typeof t?YA(t):t,s=dR(i.pathname||"/",n);if(null==s)return null;let o=ZA(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let l=0;null==a&&l<o.length;++l){let e=hR(s);a=uR(o[l],e,r)}return a}(e,t,n,!1)}function ZA(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(WA(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=gR([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(WA(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),ZA(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:lR(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of eR(e.path))i(e,t,r);else i(e,t)})),t}function eR(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=eR(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(XA||(XA={}));const tR=/^:[\w-]+$/,nR=3,rR=2,iR=1,sR=10,oR=-2,aR=e=>"*"===e;function lR(e,t){let n=e.split("/"),r=n.length;return n.some(aR)&&(r+=oR),t&&(r+=rR),n.filter((e=>!aR(e))).reduce(((e,t)=>e+(tR.test(t)?nR:""===t?iR:sR)),r)}function uR(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=cR({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=cR({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:gR([s,c.pathname]),pathnameBase:yR(gR([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=gR([s,c.pathnameBase]))}return o}function cR(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),HA("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function hR(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(vT){return HA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+vT+")."),e}}function dR(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function fR(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function pR(e,t){let n=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function mR(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=YA(e):(i=zA({},e),WA(!i.pathname||!i.pathname.includes("?"),fR("?","pathname","search",i)),WA(!i.pathname||!i.pathname.includes("#"),fR("#","pathname","hash",i)),WA(!i.search||!i.search.includes("#"),fR("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?YA(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:vR(r),hash:_R(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),c=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const gR=e=>e.join("/").replace(/\/\/+/g,"/"),yR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vR=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",_R=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",wR=["post","put","patch","delete"];new Set(wR);const bR=["get",...wR];
/**
       * React Router v6.25.1
       *
       * Copyright (c) Remix Software Inc.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE.md file in the root directory of this source tree.
       *
       * @license MIT
       */
function SR(){return SR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SR.apply(this,arguments)}new Set(bR);const ER=$.createContext(null),kR=$.createContext(null),CR=$.createContext(null),TR=$.createContext(null),IR=$.createContext({outlet:null,matches:[],isDataRoute:!1}),xR=$.createContext(null);function NR(){return null!=$.useContext(TR)}function PR(){return NR()||WA(!1),$.useContext(TR).location}function AR(e){$.useContext(CR).static||$.useLayoutEffect(e)}function RR(){let{isDataRoute:e}=$.useContext(IR);return e?function(){let{router:e}=function(){let e=$.useContext(ER);return e||WA(!1),e}(UR.UseNavigateStable),t=zR(qR.UseNavigateStable),n=$.useRef(!1);AR((()=>{n.current=!0}));let r=$.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,SR({fromRouteId:t},i)))}),[e,t]);return r}():function(){NR()||WA(!1);let e=$.useContext(ER),{basename:t,future:n,navigator:r}=$.useContext(CR),{matches:i}=$.useContext(IR),{pathname:s}=PR(),o=JSON.stringify(pR(i,n.v7_relativeSplatPath)),a=$.useRef(!1);return AR((()=>{a.current=!0})),$.useCallback((function(n,i){if(void 0===i&&(i={}),!a.current)return;if("number"==typeof n)return void r.go(n);let l=mR(n,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:gR([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[t,r,o,s,e])}()}const OR=$.createContext(null);function DR(e,t){return function(e,t,n,r){NR()||WA(!1);let{navigator:i}=$.useContext(CR),{matches:s}=$.useContext(IR),o=s[s.length-1],a=o?o.params:{};!o||o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u,c=PR();if(t){var h;let e="string"==typeof t?YA(t):t;"/"===l||(null==(h=e.pathname)?void 0:h.startsWith(l))||WA(!1),u=e}else u=c;let d=u.pathname||"/",f=d;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=JA(e,{pathname:f}),m=function(e,t,n,r){var i,s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){if(null==(s=n)||!s.errors)return null;e=n.matches}let o=e,a=null==(i=n)?void 0:i.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id])));e>=0||WA(!1),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let e=o[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=c),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((e,r,i)=>{let s,c=!1,h=null,d=null;n&&(s=a&&r.route.id?a[r.route.id]:void 0,h=r.route.errorElement||LR,l&&(u<0&&0===i?(c=!0,d=null):u===i&&(c=!0,d=r.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,i+1)),p=()=>{let t;return t=s?h:c?d:r.route.Component?$.createElement(r.route.Component,null):r.route.element?r.route.element:e,$.createElement(jR,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?$.createElement(FR,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()}),null)}(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:gR([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:gR([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,r);return t&&m?$.createElement(TR.Provider,{value:{location:SR({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:$A.Pop}},m):m}(e,t)}function MR(){let e=function(){var e;let t=$.useContext(xR),n=function(){let e=$.useContext(kR);return e||WA(!1),e}(qR.UseRouteError),r=zR(qR.UseRouteError);return void 0!==t?t:null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),n?$.createElement("pre",{style:r},n):null,null)}const LR=$.createElement(MR,null);class FR extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?$.createElement(IR.Provider,{value:this.props.routeContext},$.createElement(xR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jR(e){let{routeContext:t,match:n,children:r}=e,i=$.useContext(ER);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(IR.Provider,{value:t},r)}var UR=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(UR||{}),qR=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qR||{});function zR(e){let t=function(){let e=$.useContext(IR);return e||WA(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||WA(!1),n.route.id}function $R(e){let{to:t,replace:n,state:r,relative:i}=e;NR()||WA(!1);let{future:s,static:o}=$.useContext(CR),{matches:a}=$.useContext(IR),{pathname:l}=PR(),u=RR(),c=mR(t,pR(a,s.v7_relativeSplatPath),l,"path"===i),h=JSON.stringify(c);return $.useEffect((()=>u(JSON.parse(h),{replace:n,state:r,relative:i})),[u,h,i,n,r]),null}function VR(e){return function(e){let t=$.useContext(IR).outlet;return t?$.createElement(OR.Provider,{value:e},t):t}(e.context)}function BR(e){WA(!1)}function WR(e){let{basename:t="/",children:n=null,location:r,navigationType:i=$A.Pop,navigator:s,static:o=!1,future:a}=e;NR()&&WA(!1);let l=t.replace(/^\/*/,"/"),u=$.useMemo((()=>({basename:l,navigator:s,static:o,future:SR({v7_relativeSplatPath:!1},a)})),[l,a,s,o]);"string"==typeof r&&(r=YA(r));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,m=$.useMemo((()=>{let e=dR(c,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:i}}),[l,c,h,d,f,p,i]);return null==m?null:$.createElement(CR.Provider,{value:u},$.createElement(TR.Provider,{children:n,value:m}))}function HR(e){let{children:t,location:n}=e;return DR(KR(t),n)}function KR(e,t){void 0===t&&(t=[]);let n=[];return $.Children.forEach(e,((e,r)=>{if(!$.isValidElement(e))return;let i=[...t,r];if(e.type===$.Fragment)return void n.push.apply(n,KR(e.props.children,i));e.type!==BR&&WA(!1),e.props.index&&e.props.children&&WA(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=KR(e.props.children,i)),n.push(s)})),n}
/**
       * React Router DOM v6.25.1
       *
       * Copyright (c) Remix Software Inc.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE.md file in the root directory of this source tree.
       *
       * @license MIT
       */new Promise((()=>{}));try{window.__reactRouterVersion="6"}catch(_j){}const GR=B.startTransition;function QR(e){let{basename:t,children:n,future:r,window:i}=e,s=$.useRef();null==s.current&&(s.current=BA({window:i,v5Compat:!0}));let o=s.current,[a,l]=$.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=$.useCallback((e=>{u&&GR?GR((()=>l(e))):l(e)}),[l,u]);return $.useLayoutEffect((()=>o.listen(c)),[o,c]),$.createElement(WR,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var YR,XR,JR,ZR;function eO({board:e,selectedPiece:t,setSelectedPiece:n,turn:r,userTurn:i}){return e.map(((e,s)=>{const o=s+1,a=e.split("");let l="w"===a[0];if(e&&"h"!==e&&a.length>0&&a.length<3)return J.jsx("div",{onClick:()=>{r===l&&r===i&&n({piece:e,position:o})},className:`${e} square-${o} piece ${t.piece===e&&t.position===o?"selected-piece":""}`},o);if("h"===e)return J.jsx("div",{className:`square-${o} possible-move`},o);if("c"===a[2]){let e=`${a[0]}${a[1]}`;return J.jsx("div",{className:`${e} square-${o} piece capturable ${t.piece===e&&t.position===o?"selected-piece":""}`},o)}return null}))}(XR=YR||(YR={})).UseScrollRestoration="useScrollRestoration",XR.UseSubmit="useSubmit",XR.UseSubmitFetcher="useSubmitFetcher",XR.UseFetcher="useFetcher",XR.useViewTransitionState="useViewTransitionState",(ZR=JR||(JR={})).UseFetcher="useFetcher",ZR.UseFetchers="useFetchers",ZR.UseScrollRestoration="useScrollRestoration";var tO={exports:{}},nO={},rO=$,iO="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},sO=rO.useSyncExternalStore,oO=rO.useRef,aO=rO.useEffect,lO=rO.useMemo,uO=rO.useDebugValue;nO.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=oO(null);if(null===s.current){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=lO((function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&o.hasValue){var t=o.value;if(i(t,e))return a=t}return a=e}if(t=a,iO(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var a=sO(e,s[0],s[1]);return aO((function(){o.hasValue=!0,o.value=a}),[a]),uO(a),a},tO.exports=nO;var cO=tO.exports,hO="default"in B?V:B,dO=Symbol.for("react-redux-context"),fO="undefined"!=typeof globalThis?globalThis:{};function pO(){if(!hO.createContext)return{};const e=fO[dO]??(fO[dO]=new Map);let t=e.get(hO.createContext);return t||(t=hO.createContext(null),e.set(hO.createContext,t)),t}var mO=pO();function gO(e=mO){return function(){return hO.useContext(e)}}var yO=gO(),vO=()=>{throw new Error("uSES not initialized!")},_O=(e,t)=>e===t;function wO(e=mO){const t=e===mO?yO:gO(e),n=(e,n={})=>{const{equalityFn:r=_O,devModeChecks:i={}}="function"==typeof n?{equalityFn:n}:n,{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:u}=t();hO.useRef(!0);const c=hO.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck]),h=vO(o.addNestedSub,s.getState,a||s.getState,c,r);return hO.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var bO=wO(),SO={notify(){},get:()=>[]},EO=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),kO="undefined"!=typeof navigator&&"ReactNative"===navigator.product,CO=EO||kO?hO.useLayoutEffect:hO.useEffect,TO=function({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=hO.useMemo((()=>{const t=function(e){let t,n=SO,r=0,i=!1;function s(){l.onStateChange&&l.onStateChange()}function o(){r++,t||(t=e.subscribe(s),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){!function(e){e()}((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function a(){r--,t&&0===r&&(t(),t=void 0,n.clear(),n=SO)}const l={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),a())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,o())},tryUnsubscribe:function(){i&&(i=!1,a())},getListeners:()=>n};return l}(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}}),[e,r,i,s]),a=hO.useMemo((()=>e.getState()),[e]);CO((()=>{const{subscription:t}=o;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),a!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[o,a]);const l=t||mO;return hO.createElement(l.Provider,{value:o},n)};function IO(e=mO){const t=e===mO?yO:gO(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var xO=IO();function NO(e=mO){const t=e===mO?xO:IO(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var PO,AO=NO();PO=cO.useSyncExternalStoreWithSelector,vO=PO;const RO=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],OO="/Chess/",DO=new Audio(OO+"assets/audio/capture.mp3");new Audio(OO+"assets/audio/castle.mp3");const MO=new Audio(OO+"assets/audio/check.mp3"),LO=new Audio(OO+"assets/audio/checkMate.mp3");new Audio(OO+"assets/audio/gameOver.mp3");const FO=new Audio(OO+"assets/audio/gameStart.mp3"),jO=new Audio(OO+"assets/audio/move.mp3"),UO=new Audio(OO+"assets/audio/stalemate.mp3");function qO({customMoveHistory:e,muted:t,className:n}){const r={piece:"",position:""},[i,s]=$.useState(r),[o,a]=$.useState(RO),[l,u]=$.useState(!0),[c,h]=$.useState([]),[d,f]=$.useState(!1),[p,m]=$.useState([]),[g,y]=$.useState(""),[v,_]=$.useState(null);AO(),$.useEffect((()=>{if(Array.isArray(e)){const t=Array.from(e);h(t)}}),[e]);const w=e=>{const t=parseInt(e.split("-")[1]),n=t-1;if("p"===i.piece.charAt(1)&&!v){if("w"===i.piece.charAt(0)&&n>=0&&n<8)return _({piece:i.piece,from:i.position-1,to:n}),void y(`w${t.toString().charAt(t.toString().length-1)}`);if("b"===i.piece.charAt(0)&&n>=56&&n<64)return _({piece:i.piece,from:i.position-1,to:n}),void y(`b${(t-6).toString().charAt(t.toString().length-1)}`)}h((e=>[...e,{piece:i.piece,from:i.position-1,to:n,captured:""!==o[n]&&"h"!==o[n]?o[n].split("")[0]+o[n].split("")[1]:""}])),s(r)},b=e=>{console.log("promotionSquareInfo: ",v),console.log("promoteTo received: ",e),v&&e&&(h((t=>[...t,{piece:v.piece,from:v.from,to:v.to,captured:""!==o[v.to]&&"h"!==o[v.to]?o[v.to].split("")[0]+o[v.to].split("")[1]:"",promotedTo:e}])),_(null),y(""))},S=e=>{t||e.play()};$.useEffect((()=>{S(FO)}),[]);const E=(e,t,n,r)=>{const i=r+1;let s=[],o=[],a=[],l=[];if("w"===t){if("p"===n){r>=48&&r<=55?(a=[r-8,r-16],l=[r-7,r-9]):(a=[r-8],l=[r-7,r-9]),r%8==0&&(l=l.filter((e=>e!==r-9))),r%8==1&&(l=l.filter((e=>e!==r-7)));let n=!1;a.forEach((t=>{t>=0&&""===e[t]&&!n?o.push(t):n=!0})),l.forEach((n=>{n>=0&&""!==e[n]&&e[n].charAt(0)!==t&&s.push(n)}))}}else if("p"===n){const n=i-1;n>=8&&n<=15?(a=[n+8,n+16],l=[n+7,n+9]):(a=[n+8],l=[n+7,n+9]),n%8==0&&(l=l.filter((e=>e!==n+7))),n%8==1&&(l=l.filter((e=>e!==n+9)));let r=!1;a.forEach((t=>{t>=0&&""===e[t]&&!r?o.push(t):r=!0})),l.forEach((n=>{n>=0&&n<=63&&""!==e[n]&&e[n].charAt(0)!==t&&s.push(n)}))}if("r"===n||"q"===n){let n=r,i=!1;for(let r=n+8;r<64&&!i;r+=8)""!=e[r]?(i=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r);let o=!1;for(let r=n-8;r>=0&&!o;r-=8)""!=e[r]?(o=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r);let a=!1;for(let r=n+1;r%8!=0&&!a;r+=1)""!=e[r]?(a=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r);let l=!1;for(let r=n-1;r%8!=7&&r>=0&&!l;r-=1)""!=e[r]?(l=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r)}if("b"===n||"q"===n){let n=!1;for(let l=r+9;l<64&&l%8!=0&&!n;l+=9)""!==e[l]?(n=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l);let i=!1;for(let l=r-9;l>=0&&l%8!=7&&!i;l-=9)""!==e[l]?(i=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l);let o=!1;for(let l=r+7;l<64&&l%8!=7&&!o;l+=7)""!==e[l]?(o=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l);let a=!1;for(let l=r-7;l>=0&&l%8!=0&&!a;l-=7)""!==e[l]?(a=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l)}if("k"===n){let n=[r+7,r-7,r+8,r-8,r+9,r-9,r+1,r-1];r%8==7?n=n.filter((e=>e!==r+1&&e!==r-7&&e!==r+9)):r%8==0&&(n=n.filter((e=>e!==r-1&&e!==r+7&&e!==r-9))),n.forEach((n=>{n>=0&&n<64&&(""===e[n]||e[n].charAt(0)!==t)&&s.push(n)}))}if("n"===n){const n=r-15,o=r-17,a=r+17,l=r+15,u=r-10,c=r+6,h=r-6,d=r+10,f=-1*((i%8?i%8:8)-8),p=(i%8?i%8:8)-1,m=Math.floor(i/8),g=Math.floor((64-i)/8),y=n=>{n>=0&&n<64&&(""!==e[n]&&e[n].charAt(0)===t||s.push(n))};f>0&&m>1&&y(n),f>1&&m>0&&y(h),f>1&&g>0&&y(d),g>1&&f>0&&y(a),g>1&&p>0&&y(l),p>1&&g>0&&y(c),p>1&&m>0&&y(u),m>1&&p>0&&y(o)}return[s.filter((e=>e>=0&&e<64)),o.filter((e=>e>=0&&e<64))]},k=e=>{const t=l?"b":"w",n=l?"w":"b",r=e.findIndex((e=>e?.charAt(0)===n&&"k"===e.charAt(1)));let i=!1;return e.forEach(((n,s)=>{if(""!==n&&!i&&n.charAt(0)===t){const o=n.charAt(1);let[a]=E(e,t,o,s);if(a.includes(r))return void(i=!0)}})),i},C=()=>{const e=l?"w":"b";let t=[];return o.forEach(((n,r)=>{if(""!==n&&n.charAt(0)===e){const i=n.charAt(1);let[s,a]=E(o,e,i,r);[...s,...a].forEach((e=>{if(!(e>=0&&e<64))return;let i=((e,t)=>{let n=[...o];n=n.map((e=>{if(""===e)return e;const t=e.split("");return t.includes("h")?"":t.includes("c")?`${t[0]}${t[1]}`:e}));let r=n[e];return n[e]="",n[t]=r,k(n)})(r,e);i||t.push({moveIndex:e,piece:n,index:r})}))}})),t};return $.useEffect((()=>{const e=k(o);f(e);const t=C();m(t),t.length>0||!0!==e?t.length>0||!1!==e?t.length>0&&!0===e?S(MO):t.length>0&&!1===e&&c.length>0&&(c[c.length-1].captured?S(DO):S(jO)):S(UO):S(LO)}),[l]),$.useEffect((()=>{if(i.piece&&i.position){const e=e=>{const t=Array.from(e.target.classList);e.target.classList.contains("possible-move")?w(t[0]):e.target.classList.contains("capturable")?w(t[1]):(s(r),a((e=>e.map((e=>{const t=e.split("");return t.includes("h")?"":t.includes("c")?`${t[0]}${t[1]}`:e})))))};return document.getElementById("board-grid").addEventListener("click",e),()=>{document.getElementById("board-grid").removeEventListener("click",e)}}a((e=>e.map((e=>{const t=e.split("");return t.includes("h")?"":t.includes("c")?`${t[0]}${t[1]}`:e}))))}),[i]),$.useEffect((()=>{if(i.piece&&i.position){const[e,t]=i.piece.split(""),n=i.position;let[r,s]=E(o,e,t,n-1);(e=>{let t=o;e.forEach((e=>{if(!(e>=0&&e<64))return;let n=l?"b":"w";""!==t[e]?t[e].charAt(0)===n&&(t[e]=`${t[e]}c`):t[e]="h";let r=Array.from(t);a(r)}))})([...r,...s].filter((e=>p.filter((t=>t.piece===i.piece&&t.index===n-1&&t.moveIndex===e)).length>0)))}}),[i]),$.useEffect((()=>{const e=e=>{e.ctrlKey&&"z"==e.key&&(e.stopPropagation(),c.length>0&&h((e=>e.slice(0,-1))))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[c]),$.useEffect((()=>{if(!(c.length>0))return a(["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"]),void u(!0);const{boardToSend:e,capturedPieces:t}=(e=>{let t=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],n=[];return e.length>0?(e.forEach((e=>{t[e.from]="",t[e.to]=e.promotedTo||e.piece,e.captured&&n.push(e.captured)})),{boardToSend:t,capturedPieces:n}):{boardToSend:t,capturedPieces:n}})(c),n=Array.from(e);a(n),u((e=>!e))}),[c]),J.jsxs("div",{className:"board "+(d?"check-"+(l?"w":"b")+"k":"")+(n?" "+n:""),children:[" ",J.jsxs("div",{className:"board-grid",id:"board-grid",children:[J.jsx(eO,{board:o,selectedPiece:i,setSelectedPiece:s,turn:l,userTurn:l}),J.jsxs("div",{className:`promote-${g.charAt(0)}p square-${g.slice(1)} promote`,children:[J.jsx("div",{className:`${g.charAt(0)}q`,onClick:()=>{b(`${g.charAt(0)}q`)}}),J.jsx("div",{className:`${g.charAt(0)}n`,onClick:()=>{b(`${g.charAt(0)}n`)}}),J.jsx("div",{className:`${g.charAt(0)}r`,onClick:()=>{b(`${g.charAt(0)}r`)}}),J.jsx("div",{className:`${g.charAt(0)}b`,onClick:()=>{b(`${g.charAt(0)}b`)}}),J.jsx("div",{className:"promotion-close-btn",onClick:()=>{y(""),_(null)},children:"x"})]})]})]})}const zO=()=>{const e=async e=>{const t=tC(UA,"users",e.uid);await function(e,t,n){e=Gk(e,Jk);const r=Gk(e.firestore,iC),i=BC(e.converter,t,n);return eT(r,[vC(yC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cb.none())])}(t,{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL},{merge:!0})};return J.jsx("div",{children:J.jsx("button",{onClick:async()=>{const t=new am;try{const n=(await $m(jA,t)).user;e(n)}catch(vT){console.error("Error signing in with Google: ",vT)}},children:"Sign in with Google"})})};function $O(){const e={scholarsMate:[{piece:"wp",from:52,to:36,captured:""},{piece:"bp",from:12,to:28,captured:""},{piece:"wb",from:61,to:34,captured:""},{piece:"bn",from:1,to:18,captured:""},{piece:"wq",from:59,to:31,captured:""},{piece:"bn",from:6,to:21,captured:""},{piece:"wq",from:31,to:13,captured:"bp"}]},[t,n]=$.useState([]),[r,i]=$.useState(0),[s,o]=$.useState(0),a=RR(),l=Object.keys(e);return $.useEffect((()=>{const t=setInterval((()=>{r<e[l[s]].length?i((e=>e+1)):(n([]),i(0),o(Math.floor(Math.random()*l.length)))}),1e3);return()=>clearInterval(t)}),[r]),$.useEffect((()=>{r<e[l[s]].length?n((t=>[...t,e[l[s]][r]])):n((e=>[]))}),[r]),J.jsxs("div",{className:"row homepageOuterDiv",style:{width:"100%",height:"100%"},children:[J.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 d-flex align-items-center justify-content-center boardOuterDiv",children:[J.jsx("div",{className:"noClickOverlay noMediaQuery",style:{position:"absolute",zIndex:"1"}}),J.jsx(qO,{className:"noMediaQuery",customMoveHistory:t,muted:!0})]}),J.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 homepageMenu",children:[J.jsxs("h1",{style:{color:"white"},children:["Play ",J.jsx("span",{style:{color:"#739552"},children:"Chess"})]}),J.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"80%"},children:[J.jsx("button",{onClick:()=>a("/queue"),className:"hompageButton playOnline",children:"Play Online"}),J.jsx("button",{onClick:()=>a("/offline"),className:"hompageButton playOffline",children:"2-Player Offline"})]})]})]})}
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */var VO=function(){return VO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},VO.apply(this,arguments)},BO=function(e){return{loading:null==e,value:e}},WO=function(e){var t=$.useReducer((function(e,t){switch(t.type){case"error":return VO(VO({},e),{error:t.error,loading:!1,value:void 0});case"reset":return BO(t.defaultValue);case"value":return VO(VO({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),BO(void 0)),n=t[0],r=t[1],i=$.useCallback((function(){r({type:"reset",defaultValue:void 0})}),[e]),s=$.useCallback((function(e){r({type:"error",error:e})}),[]),o=$.useCallback((function(e){r({type:"value",value:e})}),[]);return $.useMemo((function(){return{error:n.error,loading:n.loading,reset:i,setError:s,setValue:o,value:n.value}}),[n.error,n.loading,i,s,o,n.value])},HO=function(e,t){var n=!e&&!t,r=!!e&&!!t&&function(e,t){return e=ad(e),t=ad(t),(e instanceof Jk||e instanceof Zk)&&(t instanceof Jk||t instanceof Zk)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}(e,t);return n||r},KO=function(e,t){return function(e,t,n){var r=$.useRef(e);return $.useEffect((function(){t(e,r.current)||(r.current=e,n&&n())})),r}(e,HO,t)},GO=function(e,t){var n=function(e){var t=WO(),n=t.error,r=t.loading,i=t.reset,s=t.setError,o=t.setValue,a=t.value,l=KO(e,i);return $.useEffect((function(){if(l.current){var e=ZC(l.current,o,s);return function(){e()}}o(void 0)}),[l.current]),[a,r,n]}(e),r=n[0],i=n[1],s=n[2];return[QO(r,void 0,void 0),i,s,r]},QO=function(e,t,n){return $.useMemo((function(){var r;return null!==(r=null==e?void 0:e.data(t))&&void 0!==r?r:n}),[e,t,n])};function YO(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var XO=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),JO=()=>Math.random().toString(36).substring(7).split("").join("."),ZO={INIT:`@@redux/INIT${JO()}`,REPLACE:`@@redux/REPLACE${JO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${JO()}`};function eD(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function tD(e,t,n){if("function"!=typeof e)throw new Error(YO(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(YO(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(YO(1));return n(tD)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function c(){if(l)throw new Error(YO(3));return i}function h(e){if("function"!=typeof e)throw new Error(YO(4));if(l)throw new Error(YO(5));let t=!0;u();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(YO(6));t=!1,u(),o.delete(n),s=null}}}function d(e){if(!eD(e))throw new Error(YO(7));if(void 0===e.type)throw new Error(YO(8));if("string"!=typeof e.type)throw new Error(YO(17));if(l)throw new Error(YO(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}return d({type:ZO.INIT}),{dispatch:d,subscribe:h,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(YO(10));r=e,d({type:ZO.REPLACE})},[XO]:function(){const e=h;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(YO(11));function n(){const e=t;e.next&&e.next(c())}return n(),{unsubscribe:e(n)}},[XO](){return this}}}}}function nD(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];"function"==typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:ZO.INIT}))throw new Error(YO(12));if(void 0===n(void 0,{type:ZO.PROBE_UNKNOWN_ACTION()}))throw new Error(YO(13))}))}(n)}catch(_j){i=_j}return function(e={},t){if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],u=e[a],c=l(u,t);if(void 0===c)throw t&&t.type,new Error(YO(14));o[a]=c,s=s||c!==u}return s=s||r.length!==Object.keys(e).length,s?o:e}}function rD(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}var iD=Symbol.for("immer-nothing"),sD=Symbol.for("immer-draftable"),oD=Symbol.for("immer-state");function aD(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var lD=Object.getPrototypeOf;function uD(e){return!!e&&!!e[oD]}function cD(e){return!!e&&(dD(e)||Array.isArray(e)||!!e[sD]||!!e.constructor?.[sD]||yD(e)||vD(e))}var hD=Object.prototype.constructor.toString();function dD(e){if(!e||"object"!=typeof e)return!1;const t=lD(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===hD}function fD(e,t){0===pD(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function pD(e){const t=e[oD];return t?t.type_:Array.isArray(e)?1:yD(e)?2:vD(e)?3:0}function mD(e,t){return 2===pD(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gD(e,t,n){const r=pD(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function yD(e){return e instanceof Map}function vD(e){return e instanceof Set}function _D(e){return e.copy_||e.base_}function wD(e,t){if(yD(e))return new Map(e);if(vD(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=dD(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[oD];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(lD(e),t)}{const t=lD(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function bD(e,t=!1){return ED(e)||uD(e)||!cD(e)||(pD(e)>1&&(e.set=e.add=e.clear=e.delete=SD),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>bD(t,!0)))),e}function SD(){aD(2)}function ED(e){return Object.isFrozen(e)}var kD,CD={};function TD(e){const t=CD[e];return t||aD(0),t}function ID(){return kD}function xD(e,t){t&&(TD("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ND(e){PD(e),e.drafts_.forEach(RD),e.drafts_=null}function PD(e){e===kD&&(kD=e.parent_)}function AD(e){return kD={drafts_:[],parent_:kD,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RD(e){const t=e[oD];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function OD(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[oD].modified_&&(ND(t),aD(4)),cD(e)&&(e=DD(t,e),t.parent_||LD(t,e)),t.patches_&&TD("Patches").generateReplacementPatches_(n[oD].base_,e,t.patches_,t.inversePatches_)):e=DD(t,n,[]),ND(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iD?e:void 0}function DD(e,t,n){if(ED(t))return t;const r=t[oD];if(!r)return fD(t,((i,s)=>MD(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return LD(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),fD(i,((i,o)=>MD(e,r,t,i,o,n,s))),LD(e,t,!1),n&&e.patches_&&TD("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function MD(e,t,n,r,i,s,o){if(uD(i)){const o=DD(e,i,s&&t&&3!==t.type_&&!mD(t.assigned_,r)?s.concat(r):void 0);if(gD(n,r,o),!uD(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(cD(i)&&!ED(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;DD(e,i),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||LD(e,i)}}function LD(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bD(t,n)}var FD={get(e,t){if(t===oD)return e;const n=_D(e);if(!mD(n,t))return function(e,t,n){const r=qD(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!cD(r)?r:r===UD(e.base_,t)?($D(e),e.copy_[t]=VD(r,e)):r},has:(e,t)=>t in _D(e),ownKeys:e=>Reflect.ownKeys(_D(e)),set(e,t,n){const r=qD(_D(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=UD(_D(e),t),i=r?.[oD];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||mD(e.base_,t)))return!0;$D(e),zD(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==UD(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$D(e),zD(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=_D(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){aD(11)},getPrototypeOf:e=>lD(e.base_),setPrototypeOf(){aD(12)}},jD={};function UD(e,t){const n=e[oD];return(n?_D(n):e)[t]}function qD(e,t){if(!(t in e))return;let n=lD(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=lD(n)}}function zD(e){e.modified_||(e.modified_=!0,e.parent_&&zD(e.parent_))}function $D(e){e.copy_||(e.copy_=wD(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function VD(e,t){const n=yD(e)?TD("MapSet").proxyMap_(e,t):vD(e)?TD("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ID(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=FD;n&&(i=[r],s=jD);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:ID()).drafts_.push(n),n}function BD(e){return uD(e)||aD(10),WD(e)}function WD(e){if(!cD(e)||ED(e))return e;const t=e[oD];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=wD(e,t.scope_.immer_.useStrictShallowCopy_)}else n=wD(e,!0);return fD(n,((e,t)=>{gD(n,e,WD(t))})),t&&(t.finalized_=!1),n}fD(FD,((e,t)=>{jD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),jD.deleteProperty=function(e,t){return jD.set.call(this,e,t,void 0)},jD.set=function(e,t,n){return FD.set.call(this,e[0],t,n,e[0])};var HD=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,(e=>t.call(this,e,...i)))}}let r;if("function"!=typeof t&&aD(6),void 0!==n&&"function"!=typeof n&&aD(7),cD(e)){const i=AD(this),s=VD(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?ND(i):PD(i)}return xD(i,n),OD(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===iD&&(r=void 0),this.autoFreeze_&&bD(r,!0),n){const t=[],i=[];TD("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}aD(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;const i=this.produce(e,t,((e,t)=>{n=e,r=t}));return[i,n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){cD(e)||aD(8),uD(e)&&(e=BD(e));const t=AD(this),n=VD(e,void 0);return n[oD].isManual_=!0,PD(t),n}finishDraft(e,t){const n=e&&e[oD];n&&n.isManual_||aD(9);const{scope_:r}=n;return xD(r,t),OD(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=TD("Patches").applyPatches_;return uD(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},KD=HD.produce;HD.produceWithPatches.bind(HD),HD.setAutoFreeze.bind(HD),HD.setUseStrictShallowCopy.bind(HD),HD.applyPatches.bind(HD),HD.createDraft.bind(HD),HD.finishDraft.bind(HD);var GD=e=>Array.isArray(e)?e:[e];function QD(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var YD="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},XD=0,JD=1;function ZD(){return{s:XD,v:void 0,o:null,p:null}}function eM(e,t={}){let n=ZD();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=ZD(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=ZD(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===JD)l=t.v;else if(l=e.apply(null,arguments),s++,r){const e=i?.deref?.()??i;null!=e&&r(e,l)&&(l=e,0!==s&&s--),i="object"==typeof l&&null!==l||"function"==typeof l?new YD(l):l}return a.s=JD,a.v=l,l}return o.clearCache=()=>{n=ZD(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function tM(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,i=0,s={},o=e.pop();"object"==typeof o&&(s=o,o=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);const a={...n,...s},{memoize:l,memoizeOptions:u=[],argsMemoize:c=eM,argsMemoizeOptions:h=[],devModeChecks:d={}}=a,f=GD(u),p=GD(h),m=QD(e),g=l((function(){return r++,o.apply(null,arguments)}),...f),y=c((function(){i++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(m,arguments);return t=g.apply(null,e),t}),...p);return Object.assign(y,{resultFunc:o,memoizedResultFunc:g,dependencies:m,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:c})};return Object.assign(r,{withTypes:()=>r}),r}var nM=tM(eM),rM=Object.assign(((e,t=nM)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>rM});function iM(e){return({dispatch:t,getState:n})=>r=>i=>"function"==typeof i?i(t,n,e):r(i)}var sM=iM(),oM=iM;((...e)=>{const t=tM(...e),n=Object.assign(((...e)=>{const n=t(...e),r=(e,...t)=>n(uD(e)?BD(e):e,...t);return Object.assign(r,n),r}),{withTypes:()=>n})})(eM);var aM="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?rD:rD.apply(null,arguments)};function lM(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(IM(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return eD(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var uM=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function cM(e){return cD(e)?KD(e,(()=>{})):e}function hM(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(IM(10));const r=n.insert(t,e);return e.set(t,r),r}var dM=e=>t=>{setTimeout(t,e)},fM="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:dM(10),pM=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new uM(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?fM:"callback"===e.type?e.queueNotification:dM(e.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>i&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{return i=!e?.meta?.RTK_autoBatch,s=!i,s&&(o||(o=!0,l(u))),r.dispatch(e)}finally{i=!0}}})})("object"==typeof n?n:void 0)),r};function mM(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(IM(28));if(r in t)throw new Error(IM(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var gM=Symbol.for("rtk-slice-createasyncthunk");function yM(e,t){return`${e}/${t}`}function vM({creators:e}={}){const t=e?.asyncThunk?.[gM];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(IM(11));const i=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(IM(12));if(n in o.sliceCaseReducersByType)throw new Error(IM(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"==typeof e.extraReducers?mM(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=mM(t);if(function(e){return"function"==typeof e}(e))n=()=>cM(e());else{const t=cM(e);n=()=>t}function o(e=n(),t){let o=[r[t.type],...i.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(uD(e)){const r=n(e,t);return void 0===r?e:r}if(cD(e))return KD(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(IM(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:yM(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(IM(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?lM(e,o):lM(e))}(o,s,a):function({type:e,reducerName:t},n,r,i){if(!i)throw new Error(IM(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,h=i(e,s,c);r.exposeAction(t,h),o&&r.addCase(h.fulfilled,o),a&&r.addCase(h.pending,a),l&&r.addCase(h.rejected,l),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(t,{fulfilled:o||bM,pending:a||bM,rejected:l||bM,settled:u||bM})}(o,s,a,t)}));const u=e=>e,c=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function p(t,n=!1){function r(e){let r=e[t];return void 0===r&&n&&(r=f()),r}function i(t=u){const r=hM(c,n,{insert:()=>new WeakMap});return hM(r,t,{insert:()=>{const r={};for(const[i,s]of Object.entries(e.selectors??{}))r[i]=_M(s,t,f,n);return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:n,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e,{reducerPath:t,...n}={}){const i=t??r;return e.inject({reducerPath:i,reducer:d},n),{...m,...p(i,!0)}}};return m}}function _M(e,t,n,r){function i(i,...s){let o=t(i);return void 0===o&&r&&(o=n()),e(o,...s)}return i.unwrapped=e,i}var wM=vM();function bM(){}var SM="listenerMiddleware",EM=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=lM(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(IM(21));return(e=>{if("function"!=typeof e)throw new Error(IM(32))})(s),{predicate:i,type:t,effect:s}},kM=Object.assign((e=>{const{type:t,predicate:n,effect:r}=EM(e);return{id:((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(IM(22))}}}),{withTypes:()=>kM}),CM=Object.assign(lM(`${SM}/add`),{withTypes:()=>CM});lM(`${SM}/removeAll`);var TM=Object.assign(lM(`${SM}/remove`),{withTypes:()=>TM});function IM(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const xM=wM({name:"userSlice",initialState:{loading:!1,error:null,popup:!1,uesr:null,gameData:null},reducers:{setError:(e,t)=>{e.error=t.payload},setPopup:(e,t)=>{e.popup=!!t.payload},setUser:(e,t)=>{e.user=t.payload},showPopup:(e,t)=>{e.error=t.payload,e.popup=!0},setReduxGameData:(e,t)=>{e.gameData=t.payload}},extraReducers:e=>{}}),{setError:NM,setPopup:PM,showPopup:AM,setUser:RM,setReduxGameData:OM}=xM.actions,DM=xM.reducer;function MM(){const{user:e}=bO((e=>e.user)),t=AO(),[n,r]=$.useState([]),[i,s]=$.useState(""),[o,a]=$.useState(""),l=SA(qA,`queue/${e.uid}`),u=SA(qA,"queue/"),c=SA(qA,"games/");eC(UA,"games");const[h,d]=$.useState([]),[f,p]=$.useState(5),m=RR();$.useEffect((()=>{IA(u).then((e=>{e.exists&&r(Object.values(e.val()||{}))})).catch((e=>{console.error("error while getting queue data: ",e)})),function(e,t,n,r){PA(e,"value",t,n,r)}(c,(e=>{e.exists()?d([e.val()]):d([])}),(e=>{console.log(e)}))}),[]),$.useEffect((()=>{(async()=>{if(console.log("queueData: ",n),!(n.filter((t=>t.uid===e.uid)).length>0))return;const t=n.filter((t=>t.uid!==e.uid));if(console.log("filtered: ",t),!(t.length>0))return;let r;n.findIndex((t=>t.uid===e.uid))<n.findIndex((e=>e.uid===t[0].uid))?(e.uid,t[0].uid,r={player1:e.uid,player2:t[0].uid,status:"waiting",moveHistory:[],createdAt:(new Date).toISOString()}):(t[0].uid,e.uid,r={player1:t[0].uid,player2:e.uid,status:"waiting",moveHistory:[],createdAt:(new Date).toISOString()});const i=eC(UA,"games"),s=await function(e,t){const n=Gk(e.firestore,iC),r=tC(e),i=BC(e.converter,t);return eT(n,[vC(yC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cb.exists(!1))]).then((()=>r))}(i,r);await CA(SA(qA,`games/${s.id}`),r)})()}),[n]),$.useEffect((()=>{if(h&&h.length>0&&!i){console.log("gamesData: ",h);const n=h.find((t=>{const n=Object.values(t)[0];return"waiting"===n.status&&(n.player1===e.uid||n.player2===e.uid)}));if(console.log("filtered game data: ",n),n&&Object.values(n).length>0){const r=Object.values(n)[0],i=Object.keys(n)[0];console.log("game: ",r),g(),a(i),s(r.player1===e.uid?r.player1:r.player2),kA(SA(qA,`games/${i}`)).remove().then((()=>{console.log("onDisconnect setup for game")})).catch((e=>{console.error("Error setting up onDisconnect:",e)})),function(e,t,n,r){PA(e,"child_removed",t,n,r)}(SA(qA,`games/${i}`),(()=>{s(""),a(""),m("/"),t(AM("Opponent disconnected"))}),(e=>{console.log(e)}))}}}),[o,h]),$.useEffect((()=>{if(o){const e=setInterval((()=>{p((t=>t>0?t-1:(clearInterval(e),t)))}),1e3),t=setTimeout((()=>{console.log("NAVIGATING"),m(`/online/${o}`)}),5e3);return()=>{clearInterval(e),clearTimeout(t)}}}),[o,i]);const g=async()=>{try{await(e=l,MP("remove",e._path),CA(e,null)).then((()=>{console.log("removed")})).catch((e=>{console.error("error removing user from queue: ",e)}))}catch(vT){console.error("error while removing user from queue: ",vT)}var e};return $.useEffect((()=>{if(!o)return console.log("adding"),(async()=>{try{await CA(l,{uid:e.uid}),kA(l).remove().then((()=>{console.log("onDisconnect setup for user")})).catch((e=>{console.error("Error setting up onDisconnect:",e)})),console.log("User added to queue")}catch(vT){console.error("Error adding user to queue:",vT)}})(),()=>{console.log("removing"),g()}}),[]),J.jsx("div",{style:{color:"white"},children:i?`Match Found ${f}`:"waiting in queue. . ."})}const LM=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],FM="/Chess/",jM=new Audio(FM+"assets/audio/capture.mp3");new Audio(FM+"assets/audio/castle.mp3");const UM=new Audio(FM+"assets/audio/check.mp3"),qM=new Audio(FM+"assets/audio/checkMate.mp3");new Audio(FM+"assets/audio/gameOver.mp3");const zM=new Audio(FM+"assets/audio/gameStart.mp3"),$M=new Audio(FM+"assets/audio/move.mp3"),VM=new Audio(FM+"assets/audio/stalemate.mp3");function BM({customMoveHistory:e,muted:t,className:n}){const{ID:r}=function(){let{matches:e}=$.useContext(IR),t=e[e.length-1];return t?t.params:{}}(),{user:i}=bO((e=>e.user)),[s,o]=$.useState(null);$.useEffect((()=>{s&&"waiting"===s.status&&(console.log("gameData: ",s),TA(SA(qA,`games/${r}`),{...s,status:"ongoing"}),JC(tC(UA,"games",r),{...s,status:"ongoing"},{merge:!0}))}),[s]),$.useEffect((()=>{r?IA(SA(qA,`games/${r}`)).then((e=>{if(!e.exists)return o(null),AM("Invalid Game ID"),void navigate("/");o(e.val())})).catch((e=>{console.error(e)})):navigate("/")}),[r]);const a={piece:"",position:""},l=s?.player1===i.uid,[u,c]=$.useState(a),[h,d]=$.useState(LM),[f,p]=$.useState(!0),[m,g]=$.useState([]),[y,v]=$.useState(!1),[_,w]=$.useState([]),[b,S]=$.useState(""),[E,k]=$.useState(null),[C,T,I]=GO(tC(UA,"games",r));$.useEffect((()=>{C&&!T&&(console.log("dbGameData: ",C),g(C?.moveHistory||[]))}),[C]),$.useEffect((()=>{if(Array.isArray(e)){const t=Array.from(e);g(t)}}),[e]);const x=e=>{const t=parseInt(e.split("-")[1]),n=t-1;if("p"===u.piece.charAt(1)&&!E){if("w"===u.piece.charAt(0)&&n>=0&&n<8)return k({piece:u.piece,from:u.position-1,to:n}),void S(`w${t.toString().charAt(t.toString().length-1)}`);if("b"===u.piece.charAt(0)&&n>=56&&n<64)return k({piece:u.piece,from:u.position-1,to:n}),void S(`b${(t-6).toString().charAt(t.toString().length-1)}`)}JC(tC(UA,"games",r),{...s,moveHistory:[...m,{piece:u.piece,from:u.position-1,to:n,captured:""!==h[n]&&"h"!==h[n]?h[n].split("")[0]+h[n].split("")[1]:""}]},{merge:!0}),c(a)},N=e=>{E&&e&&(JC(tC(UA,"games",r),{...s,moveHistory:[...m,{piece:E.piece,from:E.from,to:E.to,captured:""!==h[E.to]&&"h"!==h[E.to]?h[E.to].split("")[0]+h[E.to].split("")[1]:"",promotedTo:e}]},{merge:!0}),k(null),S(""))},P=e=>{t||e.play()};$.useEffect((()=>{P(zM)}),[]);const A=(e,t,n,r)=>{const i=r+1;let s=[],o=[],a=[],l=[];if("w"===t){if("p"===n){r>=48&&r<=55?(a=[r-8,r-16],l=[r-7,r-9]):(a=[r-8],l=[r-7,r-9]),r%8==0&&(l=l.filter((e=>e!==r-9))),r%8==1&&(l=l.filter((e=>e!==r-7)));let n=!1;a.forEach((t=>{t>=0&&""===e[t]&&!n?o.push(t):n=!0})),l.forEach((n=>{n>=0&&""!==e[n]&&e[n].charAt(0)!==t&&s.push(n)}))}}else if("p"===n){const n=i-1;n>=8&&n<=15?(a=[n+8,n+16],l=[n+7,n+9]):(a=[n+8],l=[n+7,n+9]),n%8==0&&(l=l.filter((e=>e!==n+7))),n%8==1&&(l=l.filter((e=>e!==n+9)));let r=!1;a.forEach((t=>{t>=0&&""===e[t]&&!r?o.push(t):r=!0})),l.forEach((n=>{n>=0&&""!==e[n]&&e[n].charAt(0)!==t&&s.push(n)}))}if("r"===n||"q"===n){let n=r,i=!1;for(let r=n+8;r<64&&!i;r+=8)""!=e[r]?(i=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r);let o=!1;for(let r=n-8;r>=0&&!o;r-=8)""!=e[r]?(o=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r);let a=!1;for(let r=n+1;r%8!=0&&!a;r+=1)""!=e[r]?(a=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r);let l=!1;for(let r=n-1;r%8!=7&&r>=0&&!l;r-=1)""!=e[r]?(l=!0,e[r].charAt(0)!==t&&s.push(r)):s.push(r)}if("b"===n||"q"===n){let n=!1;for(let l=r+9;l<64&&l%8!=0&&!n;l+=9)""!==e[l]?(n=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l);let i=!1;for(let l=r-9;l>=0&&l%8!=7&&!i;l-=9)""!==e[l]?(i=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l);let o=!1;for(let l=r+7;l<64&&l%8!=7&&!o;l+=7)""!==e[l]?(o=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l);let a=!1;for(let l=r-7;l>=0&&l%8!=0&&!a;l-=7)""!==e[l]?(a=!0,e[l].charAt(0)!==t&&s.push(l)):s.push(l)}if("k"===n){let n=[r+7,r-7,r+8,r-8,r+9,r-9,r+1,r-1];r%8==7?n=n.filter((e=>e!==r+1&&e!==r-7&&e!==r+9)):r%8==0&&(n=n.filter((e=>e!==r-1&&e!==r+7&&e!==r-9))),n.forEach((n=>{n>=0&&n<64&&(""===e[n]||e[n].charAt(0)!==t)&&s.push(n)}))}if("n"===n){const n=r-15,o=r-17,a=r+17,l=r+15,u=r-10,c=r+6,h=r-6,d=r+10,f=-1*((i%8?i%8:8)-8),p=(i%8?i%8:8)-1,m=Math.floor(i/8),g=Math.floor((64-i)/8),y=n=>{n>=0&&n<64&&(""!==e[n]&&e[n].charAt(0)===t||s.push(n))};f>0&&m>1&&y(n),f>1&&m>0&&y(h),f>1&&g>0&&y(d),g>1&&f>0&&y(a),g>1&&p>0&&y(l),p>1&&g>0&&y(c),p>1&&m>0&&y(u),m>1&&p>0&&y(o)}return[s.filter((e=>e>=0&&e<64)),o.filter((e=>e>=0&&e<64))]},R=e=>{const t=f?"b":"w",n=f?"w":"b",r=e.findIndex((e=>e?.charAt(0)===n&&"k"===e.charAt(1)));let i=!1;return e.forEach(((n,s)=>{if(""!==n&&!i&&n.charAt(0)===t){const o=n.charAt(1);let[a]=A(e,t,o,s);if(a.includes(r))return void(i=!0)}})),i},O=()=>{const e=f?"w":"b";let t=[];return h.forEach(((n,r)=>{if(""!==n&&n.charAt(0)===e){const i=n.charAt(1);let[s,o]=A(h,e,i,r);[...s,...o].forEach((e=>{if(!(e>=0&&e<64))return;let i=((e,t)=>{let n=[...h];n=n.map((e=>{if(""===e)return e;const t=e.split("");return t.includes("h")?"":t.includes("c")?`${t[0]}${t[1]}`:e}));let r=n[e];return n[e]="",n[t]=r,R(n)})(r,e);i||t.push({moveIndex:e,piece:n,index:r})}))}})),t};return $.useEffect((()=>{const e=R(h);v(e);const t=O();w(t),t.length>0||!0!==e?t.length>0||!1!==e?t.length>0&&!0===e?P(UM):t.length>0&&!1===e&&m.length>0&&(m[m.length-1].captured?P(jM):P($M)):(JC(tC(UA,"games",r),{...s,status:"ended"},{merge:!0}),P(VM)):(JC(tC(UA,"games",r),{...s,status:"ended"},{merge:!0}),P(qM))}),[f]),$.useEffect((()=>{if(u.piece&&u.position){const e=e=>{const t=Array.from(e.target.classList);e.target.classList.contains("possible-move")?x(t[0]):e.target.classList.contains("capturable")?x(t[1]):(c(a),d((e=>e.map((e=>{const t=e.split("");return t.includes("h")?"":t.includes("c")?`${t[0]}${t[1]}`:e})))))};return document.getElementById("board-grid").addEventListener("click",e),()=>{document.getElementById("board-grid").removeEventListener("click",e)}}d((e=>e.map((e=>{const t=e.split("");return t.includes("h")?"":t.includes("c")?`${t[0]}${t[1]}`:e}))))}),[u]),$.useEffect((()=>{if(u.piece&&u.position){const[e,t]=u.piece.split(""),n=u.position;let[r,i]=A(h,e,t,n-1);(e=>{let t=h;e.forEach((e=>{if(!(e>=0&&e<64))return;let n=f?"b":"w";""!==t[e]?t[e].charAt(0)===n&&(t[e]=`${t[e]}c`):t[e]="h";let r=Array.from(t);d(r)}))})([...r,...i].filter((e=>_.filter((t=>t.piece===u.piece&&t.index===n-1&&t.moveIndex===e)).length>0)))}}),[u]),$.useEffect((()=>{if(!(m.length>0))return d(["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"]),void p(!0);const{boardToSend:e,capturedPieces:t}=(e=>{let t=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],n=[];return e.length>0?(e.forEach((e=>{t[e.from]="",t[e.to]=e.promotedTo||e.piece,e.captured&&n.push(e.captured)})),{boardToSend:t,capturedPieces:n}):{boardToSend:t,capturedPieces:n}})(m),n=Array.from(e);d(n),p((e=>!e))}),[m]),J.jsxs("div",{className:"board "+(l?"":"rotate ")+(y?"check-"+(f?"w":"b")+"k":"")+(n?" "+n:""),children:[" ",J.jsxs("div",{className:"board-grid",id:"board-grid",children:[J.jsx(eO,{board:h,selectedPiece:u,setSelectedPiece:c,turn:f,userTurn:l}),J.jsxs("div",{className:`promote-${b.charAt(0)}p square-${b.slice(1)} promote`,children:[J.jsx("div",{className:`${b.charAt(0)}q`,onClick:()=>{N(`${b.charAt(0)}q`)}}),J.jsx("div",{className:`${b.charAt(0)}n`,onClick:()=>{N(`${b.charAt(0)}n`)}}),J.jsx("div",{className:`${b.charAt(0)}r`,onClick:()=>{N(`${b.charAt(0)}r`)}}),J.jsx("div",{className:`${b.charAt(0)}b`,onClick:()=>{N(`${b.charAt(0)}b`)}}),J.jsx("div",{className:"promotion-close-btn",onClick:()=>{S(""),k(null)},children:"x"})]})]})]})}const WM=[{path:"login",component:J.jsx(zO,{}),type:"Public"},{path:"queue",component:J.jsx(MM,{}),type:"Private",exact:!0},{path:"online/:ID",component:J.jsx(BM,{}),type:"Private"}],HM=()=>WM.filter((e=>"Private"===e.type)),KM=()=>WM.filter((e=>"Public"==e.type)),GM=e=>Array.isArray(e)&&e.length>0?e.map(((e,t)=>e.default?J.jsx(BR,{index:!0,element:e.component},t):J.jsx(BR,{path:e.path,element:e.component},t))):J.jsx(J.Fragment,{}),QM=()=>{const[e,t]=$.useState({top:0,left:0});return $.useEffect((()=>{const e=e=>{t({top:e.pageY,left:e.pageX})};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}}),[]),J.jsxs("div",{className:"Container",children:[J.jsxs("div",{className:"text",children:[J.jsx("h1",{children:"404"}),J.jsx("h2",{children:"Uh, Ohh"}),J.jsx("h3",{children:"Sorry we can't find what you are looking for 'cuz it's so dark in here"})]}),J.jsx("div",{className:"torch",style:{position:"absolute",top:`${e.top}px`,left:`${e.left}px`}})]})};function YM(){const{user:e}=bO((e=>e.user)),t=()=>e?J.jsx($R,{to:"/"}):J.jsx(VR,{}),n=()=>e?J.jsx(VR,{}):J.jsx($R,{to:"/login"});return J.jsx(QR,{children:J.jsxs(HR,{children:[J.jsx(BR,{path:"/",element:J.jsx(t,{}),children:GM(KM())}),J.jsx(BR,{path:"/",element:J.jsx(n,{}),children:GM(HM())}),J.jsx(BR,{index:!0,element:J.jsx($O,{})}),J.jsx(BR,{path:"/offline",element:J.jsx(qO,{})}),J.jsx(BR,{path:"*",element:J.jsx(QM,{})})]})})}
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */function XM(e,t,n,r){return new(n||(n=Promise))((function(t,i){function s(e){try{a(r.next(e))}catch(_j){i(_j)}}function o(e){try{a(r.throw(e))}catch(_j){i(_j)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,o)}a((r=r.apply(e,[])).next())}))}function JM(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(_j){s=[6,_j],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.

      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.

      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */var ZM=function(){return ZM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ZM.apply(this,arguments)},eL=function(e){return{loading:null==e,value:e}},tL=function(e){var t=e?e():void 0,n=$.useReducer((function(e,t){switch(t.type){case"error":return ZM(ZM({},e),{error:t.error,loading:!1,value:void 0});case"reset":return eL(t.defaultValue);case"value":return ZM(ZM({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),eL(t)),r=n[0],i=n[1],s=$.useCallback((function(){var t=e?e():void 0;i({type:"reset",defaultValue:t})}),[e]),o=$.useCallback((function(e){i({type:"error",error:e})}),[]),a=$.useCallback((function(e){i({type:"value",value:e})}),[]);return $.useMemo((function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}}),[r.error,r.loading,s,o,a,r.value])},nL=function(e,t){var n=tL((function(){return e.currentUser})),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return $.useEffect((function(){var n=function(e,t,n,r){return ad(e).onAuthStateChanged(t,n,r)}(e,(function(e){return XM(void 0,0,void 0,(function(){var n;return JM(this,(function(r){switch(r.label){case 0:return[3,4];case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),s(n),[3,4];case 4:return o(e),[2]}}))}))}),s);return function(){n()}}),[e]),[a,i,r]};function rL(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function iL(){return iL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iL.apply(null,arguments)}function sL(e,t,n=void 0){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function oL(...e){return $.useMemo((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{!function(e,t){"function"==typeof e?e(t):e&&(e.current=t)}(e,t)}))}),e)}function aL(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=aL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function lL(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=aL(e))&&(r&&(r+=" "),r+=t);return r}function uL(e,t=[]){if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"==typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}function cL(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"==typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}const hL=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function dL(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=e,o=rL(e,hL),a=s?{}:function(e,t,n){return"function"==typeof e?e(t,n):e}(r,i),{props:l,internalRef:u}=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=e;if(!t){const e=lL(null==n?void 0:n.className,s,null==i?void 0:i.className,null==r?void 0:r.className),t=iL({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),o=iL({},n,i,r);return e.length>0&&(o.className=e),Object.keys(t).length>0&&(o.style=t),{props:o,internalRef:void 0}}const o=uL(iL({},i,r)),a=cL(r),l=cL(i),u=t(o),c=lL(null==u?void 0:u.className,null==n?void 0:n.className,s,null==i?void 0:i.className,null==r?void 0:r.className),h=iL({},null==u?void 0:u.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),d=iL({},u,n,l,a);return c.length>0&&(d.className=c),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:u.ref}}(iL({},o,{externalSlotProps:a})),c=function(e,t,n){return void 0===e||"string"==typeof e?t:iL({},t,{ownerState:iL({},t.ownerState,n)})}(n,iL({},l,{ref:oL(u,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref)}),i);return c}function fL(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function pL(e){if(!fL(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=pL(e[n])})),t}function mL(e,t,n={clone:!0}){const r=n.clone?iL({},e):e;return fL(e)&&fL(t)&&Object.keys(t).forEach((i=>{fL(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&fL(e[i])?r[i]=mL(e[i],t[i],n):n.clone?r[i]=fL(t[i])?pL(t[i]):t[i]:r[i]=t[i]})),r}const gL=Object.freeze(Object.defineProperty({__proto__:null,default:mL,isPlainObject:fL},Symbol.toStringTag,{value:"Module"}));function yL(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const vL=Object.freeze(Object.defineProperty({__proto__:null,default:yL},Symbol.toStringTag,{value:"Module"}));var _L,wL={exports:{}},bL={},SL=Symbol.for("react.element"),EL=Symbol.for("react.portal"),kL=Symbol.for("react.fragment"),CL=Symbol.for("react.strict_mode"),TL=Symbol.for("react.profiler"),IL=Symbol.for("react.provider"),xL=Symbol.for("react.context"),NL=Symbol.for("react.server_context"),PL=Symbol.for("react.forward_ref"),AL=Symbol.for("react.suspense"),RL=Symbol.for("react.suspense_list"),OL=Symbol.for("react.memo"),DL=Symbol.for("react.lazy"),ML=Symbol.for("react.offscreen");function LL(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case SL:switch(e=e.type){case kL:case TL:case CL:case AL:case RL:return e;default:switch(e=e&&e.$$typeof){case NL:case xL:case PL:case DL:case OL:case IL:return e;default:return t}}case EL:return t}}}_L=Symbol.for("react.module.reference"),bL.ContextConsumer=xL,bL.ContextProvider=IL,bL.Element=SL,bL.ForwardRef=PL,bL.Fragment=kL,bL.Lazy=DL,bL.Memo=OL,bL.Portal=EL,bL.Profiler=TL,bL.StrictMode=CL,bL.Suspense=AL,bL.SuspenseList=RL,bL.isAsyncMode=function(){return!1},bL.isConcurrentMode=function(){return!1},bL.isContextConsumer=function(e){return LL(e)===xL},bL.isContextProvider=function(e){return LL(e)===IL},bL.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===SL},bL.isForwardRef=function(e){return LL(e)===PL},bL.isFragment=function(e){return LL(e)===kL},bL.isLazy=function(e){return LL(e)===DL},bL.isMemo=function(e){return LL(e)===OL},bL.isPortal=function(e){return LL(e)===EL},bL.isProfiler=function(e){return LL(e)===TL},bL.isStrictMode=function(e){return LL(e)===CL},bL.isSuspense=function(e){return LL(e)===AL},bL.isSuspenseList=function(e){return LL(e)===RL},bL.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===kL||e===TL||e===CL||e===AL||e===RL||e===ML||"object"==typeof e&&null!==e&&(e.$$typeof===DL||e.$$typeof===OL||e.$$typeof===IL||e.$$typeof===xL||e.$$typeof===PL||e.$$typeof===_L||void 0!==e.getModuleId)},bL.typeOf=LL,wL.exports=bL;var FL=wL.exports;const jL=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function UL(e){const t=`${e}`.match(jL);return t&&t[1]||""}function qL(e,t=""){return e.displayName||e.name||UL(e)||t}function zL(e,t,n){const r=qL(t);return e.displayName||(""!==r?`${n}(${r})`:n)}const $L=Object.freeze(Object.defineProperty({__proto__:null,default:function(e){if(null!=e){if("string"==typeof e)return e;if("function"==typeof e)return qL(e,"Component");if("object"==typeof e)switch(e.$$typeof){case FL.ForwardRef:return zL(e,e.render,"ForwardRef");case FL.Memo:return zL(e,e.type,"memo");default:return}}},getFunctionName:UL},Symbol.toStringTag,{value:"Module"}));function VL(e){if("string"!=typeof e)throw new Error(yL(7));return e.charAt(0).toUpperCase()+e.slice(1)}const BL=Object.freeze(Object.defineProperty({__proto__:null,default:VL},Symbol.toStringTag,{value:"Module"}));function WL(e){return e&&e.ownerDocument||document}const HL="undefined"!=typeof window?$.useLayoutEffect:$.useEffect;function KL(e){const t=$.useRef(e);return HL((()=>{t.current=e})),$.useRef(((...e)=>(0,t.current)(...e))).current}const GL={},QL=[];class YL{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new YL}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function XL(){const e=function(e,t){const n=$.useRef(GL);return n.current===GL&&(n.current=e(t)),n}(YL.create).current;return function(e){$.useEffect(e,QL)}(e.disposeEffect),e}function JL(e,t){const n=iL({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=iL({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},s=t[r];n[r]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[r]=iL({},s),Object.keys(i).forEach((e=>{n[r][e]=JL(i[e],s[e])}))):n[r]=s:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}const ZL=e=>e,eF=(()=>{let e=ZL;return{configure(t){e=t},generate:t=>e(t),reset(){e=ZL}}})(),tF={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function nF(e,t,n="Mui"){const r=tF[t];return r?`${n}-${r}`:`${eF.generate(e)}-${t}`}function rF(e,t,n="Mui"){const r={};return t.forEach((t=>{r[t]=nF(e,t,n)})),r}const iF=Object.freeze(Object.defineProperty({__proto__:null,default:function(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}},Symbol.toStringTag,{value:"Module"}));function sF(e){return e.substring(2).toLowerCase()}function oF(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=e,o=$.useRef(!1),a=$.useRef(null),l=$.useRef(!1),u=$.useRef(!1);$.useEffect((()=>(setTimeout((()=>{l.current=!0}),0),()=>{l.current=!1})),[]);const c=oL(t.ref,a),h=KL((e=>{const t=u.current;u.current=!1;const r=WL(a.current);if(!l.current||!a.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(o.current)return void(o.current=!1);let s;s=e.composedPath?e.composedPath().indexOf(a.current)>-1:!r.documentElement.contains(e.target)||a.current.contains(e.target),s||!n&&t||i(e)})),d=e=>n=>{u.current=!0;const r=t.props[e];r&&r(n)},f={ref:c};return!1!==s&&(f[s]=d(s)),$.useEffect((()=>{if(!1!==s){const e=sF(s),t=WL(a.current),n=()=>{o.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,s]),!1!==r&&(f[r]=d(r)),$.useEffect((()=>{if(!1!==r){const e=sF(r),t=WL(a.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,r]),J.jsx($.Fragment,{children:$.cloneElement(t,f)})}const aF="$$material";function lF(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var uF=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,cF=lF((function(e){return uF.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),hF=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(_j){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),dF="-ms-",fF="-moz-",pF="-webkit-",mF="comm",gF="rule",yF="decl",vF="@keyframes",_F=Math.abs,wF=String.fromCharCode,bF=Object.assign;function SF(e){return e.trim()}function EF(e,t,n){return e.replace(t,n)}function kF(e,t){return e.indexOf(t)}function CF(e,t){return 0|e.charCodeAt(t)}function TF(e,t,n){return e.slice(t,n)}function IF(e){return e.length}function xF(e){return e.length}function NF(e,t){return t.push(e),e}var PF=1,AF=1,RF=0,OF=0,DF=0,MF="";function LF(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:PF,column:AF,length:o,return:""}}function FF(e,t){return bF(LF("",null,null,"",null,null,0),e,{length:-e.length},t)}function jF(){return DF=OF>0?CF(MF,--OF):0,AF--,10===DF&&(AF=1,PF--),DF}function UF(){return DF=OF<RF?CF(MF,OF++):0,AF++,10===DF&&(AF=1,PF++),DF}function qF(){return CF(MF,OF)}function zF(){return OF}function $F(e,t){return TF(MF,e,t)}function VF(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function BF(e){return PF=AF=1,RF=IF(MF=e),OF=0,[]}function WF(e){return MF="",e}function HF(e){return SF($F(OF-1,QF(91===e?e+2:40===e?e+1:e)))}function KF(e){for(;(DF=qF())&&DF<33;)UF();return VF(e)>2||VF(DF)>3?"":" "}function GF(e,t){for(;--t&&UF()&&!(DF<48||DF>102||DF>57&&DF<65||DF>70&&DF<97););return $F(e,zF()+(t<6&&32==qF()&&32==UF()))}function QF(e){for(;UF();)switch(DF){case e:return OF;case 34:case 39:34!==e&&39!==e&&QF(DF);break;case 40:41===e&&QF(e);break;case 92:UF()}return OF}function YF(e,t){for(;UF()&&e+DF!==57&&(e+DF!==84||47!==qF()););return"/*"+$F(t,OF-1)+"*"+wF(47===e?e:UF())}function XF(e){for(;!VF(qF());)UF();return $F(e,OF)}function JF(e){return WF(ZF("",null,null,null,[""],e=BF(e),0,[0],e))}function ZF(e,t,n,r,i,s,o,a,l){for(var u=0,c=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,_="",w=i,b=s,S=r,E=_;g;)switch(p=v,v=UF()){case 40:if(108!=p&&58==CF(E,h-1)){-1!=kF(E+=EF(HF(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:E+=HF(v);break;case 9:case 10:case 13:case 32:E+=KF(p);break;case 92:E+=GF(zF()-1,7);continue;case 47:switch(qF()){case 42:case 47:NF(tj(YF(UF(),zF()),t,n),l);break;default:E+="/"}break;case 123*m:a[u++]=IF(E)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:-1==y&&(E=EF(E,/\f/g,"")),f>0&&IF(E)-h&&NF(f>32?nj(E+";",r,n,h-1):nj(EF(E," ","")+";",r,n,h-2),l);break;case 59:E+=";";default:if(NF(S=ej(E,t,n,u,c,i,a,_,w=[],b=[],h),s),123===v)if(0===c)ZF(E,t,S,S,w,s,h,a,b);else switch(99===d&&110===CF(E,3)?100:d){case 100:case 108:case 109:case 115:ZF(e,S,S,r&&NF(ej(e,S,S,0,0,i,a,_,i,w=[],h),b),i,b,h,a,r?w:b);break;default:ZF(E,S,S,S,[""],b,0,a,b)}}u=c=f=0,m=y=1,_=E="",h=o;break;case 58:h=1+IF(E),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==jF())continue;switch(E+=wF(v),v*m){case 38:y=c>0?1:(E+="\f",-1);break;case 44:a[u++]=(IF(E)-1)*y,y=1;break;case 64:45===qF()&&(E+=HF(UF())),d=qF(),c=h=IF(_=E+=XF(zF())),v++;break;case 45:45===p&&2==IF(E)&&(m=0)}}return s}function ej(e,t,n,r,i,s,o,a,l,u,c){for(var h=i-1,d=0===i?s:[""],f=xF(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=TF(e,h+1,h=_F(m=o[p])),_=e;y<f;++y)(_=SF(m>0?d[y]+" "+v:EF(v,/&\f/g,d[y])))&&(l[g++]=_);return LF(e,t,n,0===i?gF:a,l,u,c)}function tj(e,t,n){return LF(e,t,n,mF,wF(DF),TF(e,2,-2),0)}function nj(e,t,n,r){return LF(e,t,n,yF,TF(e,0,r),TF(e,r+1,-1),r)}function rj(e,t){for(var n="",r=xF(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ij(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case yF:return e.return=e.return||e.value;case mF:return"";case vF:return e.return=e.value+"{"+rj(e.children,r)+"}";case gF:e.value=e.props.join(",")}return IF(n=rj(e.children,r))?e.return=e.value+"{"+n+"}":""}function sj(e){return function(t){t.root||(t=t.return)&&e(t)}}var oj=function(e,t,n){for(var r=0,i=0;r=i,i=qF(),38===r&&12===i&&(t[n]=1),!VF(i);)UF();return $F(e,OF)},aj=function(e,t){return WF(function(e,t){var n=-1,r=44;do{switch(VF(r)){case 0:38===r&&12===qF()&&(t[n]=1),e[n]+=oj(OF-1,t,n);break;case 2:e[n]+=HF(r);break;case 4:if(44===r){e[++n]=58===qF()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=wF(r)}}while(r=UF());return e}(BF(e),t))},lj=new WeakMap,uj=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||lj.get(n))&&!r){lj.set(e,!0);for(var i=[],s=aj(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var u=0;u<o.length;u++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[u]):o[u]+" "+s[a]}}},cj=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function hj(e,t){switch(function(e,t){return 45^CF(e,0)?(((t<<2^CF(e,0))<<2^CF(e,1))<<2^CF(e,2))<<2^CF(e,3):0}(e,t)){case 5103:return pF+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pF+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return pF+e+fF+e+dF+e+e;case 6828:case 4268:return pF+e+dF+e+e;case 6165:return pF+e+dF+"flex-"+e+e;case 5187:return pF+e+EF(e,/(\w+).+(:[^]+)/,pF+"box-$1$2"+dF+"flex-$1$2")+e;case 5443:return pF+e+dF+"flex-item-"+EF(e,/flex-|-self/,"")+e;case 4675:return pF+e+dF+"flex-line-pack"+EF(e,/align-content|flex-|-self/,"")+e;case 5548:return pF+e+dF+EF(e,"shrink","negative")+e;case 5292:return pF+e+dF+EF(e,"basis","preferred-size")+e;case 6060:return pF+"box-"+EF(e,"-grow","")+pF+e+dF+EF(e,"grow","positive")+e;case 4554:return pF+EF(e,/([^-])(transform)/g,"$1"+pF+"$2")+e;case 6187:return EF(EF(EF(e,/(zoom-|grab)/,pF+"$1"),/(image-set)/,pF+"$1"),e,"")+e;case 5495:case 3959:return EF(e,/(image-set\([^]*)/,pF+"$1$`$1");case 4968:return EF(EF(e,/(.+:)(flex-)?(.*)/,pF+"box-pack:$3"+dF+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pF+e+e;case 4095:case 3583:case 4068:case 2532:return EF(e,/(.+)-inline(.+)/,pF+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(IF(e)-1-t>6)switch(CF(e,t+1)){case 109:if(45!==CF(e,t+4))break;case 102:return EF(e,/(.+:)(.+)-([^]+)/,"$1"+pF+"$2-$3$1"+fF+(108==CF(e,t+3)?"$3":"$2-$3"))+e;case 115:return~kF(e,"stretch")?hj(EF(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==CF(e,t+1))break;case 6444:switch(CF(e,IF(e)-3-(~kF(e,"!important")&&10))){case 107:return EF(e,":",":"+pF)+e;case 101:return EF(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pF+(45===CF(e,14)?"inline-":"")+"box$3$1"+pF+"$2$3$1"+dF+"$2box$3")+e}break;case 5936:switch(CF(e,t+11)){case 114:return pF+e+dF+EF(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return pF+e+dF+EF(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return pF+e+dF+EF(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return pF+e+dF+e+e}return e}var dj=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case yF:e.return=hj(e.value,e.length);break;case vF:return rj([FF(e,{value:EF(e.value,"@","@"+pF)})],r);case gF:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return rj([FF(e,{props:[EF(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return rj([FF(e,{props:[EF(t,/:(plac\w+)/,":"+pF+"input-$1")]}),FF(e,{props:[EF(t,/:(plac\w+)/,":-moz-$1")]}),FF(e,{props:[EF(t,/:(plac\w+)/,dF+"input-$1")]})],r)}return""}))}}],fj=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||dj,o={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,u=[uj,cj],c=[ij,sj((function(e){l.insert(e)}))],h=function(e){var t=xF(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}(u.concat(s,c));i=function(e,t,n,r){l=n,function(e){rj(JF(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new hF({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return d.sheet.hydrate(a),d},pj={exports:{}},mj={},gj="function"==typeof Symbol&&Symbol.for,yj=gj?Symbol.for("react.element"):60103,vj=gj?Symbol.for("react.portal"):60106,_j=gj?Symbol.for("react.fragment"):60107,wj=gj?Symbol.for("react.strict_mode"):60108,bj=gj?Symbol.for("react.profiler"):60114,Sj=gj?Symbol.for("react.provider"):60109,Ej=gj?Symbol.for("react.context"):60110,kj=gj?Symbol.for("react.async_mode"):60111,Cj=gj?Symbol.for("react.concurrent_mode"):60111,Tj=gj?Symbol.for("react.forward_ref"):60112,Ij=gj?Symbol.for("react.suspense"):60113,xj=gj?Symbol.for("react.suspense_list"):60120,Nj=gj?Symbol.for("react.memo"):60115,Pj=gj?Symbol.for("react.lazy"):60116,Aj=gj?Symbol.for("react.block"):60121,Rj=gj?Symbol.for("react.fundamental"):60117,Oj=gj?Symbol.for("react.responder"):60118,Dj=gj?Symbol.for("react.scope"):60119;function Mj(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case yj:switch(e=e.type){case kj:case Cj:case _j:case bj:case wj:case Ij:return e;default:switch(e=e&&e.$$typeof){case Ej:case Tj:case Pj:case Nj:case Sj:return e;default:return t}}case vj:return t}}}function Lj(e){return Mj(e)===Cj}mj.AsyncMode=kj,mj.ConcurrentMode=Cj,mj.ContextConsumer=Ej,mj.ContextProvider=Sj,mj.Element=yj,mj.ForwardRef=Tj,mj.Fragment=_j,mj.Lazy=Pj,mj.Memo=Nj,mj.Portal=vj,mj.Profiler=bj,mj.StrictMode=wj,mj.Suspense=Ij,mj.isAsyncMode=function(e){return Lj(e)||Mj(e)===kj},mj.isConcurrentMode=Lj,mj.isContextConsumer=function(e){return Mj(e)===Ej},mj.isContextProvider=function(e){return Mj(e)===Sj},mj.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===yj},mj.isForwardRef=function(e){return Mj(e)===Tj},mj.isFragment=function(e){return Mj(e)===_j},mj.isLazy=function(e){return Mj(e)===Pj},mj.isMemo=function(e){return Mj(e)===Nj},mj.isPortal=function(e){return Mj(e)===vj},mj.isProfiler=function(e){return Mj(e)===bj},mj.isStrictMode=function(e){return Mj(e)===wj},mj.isSuspense=function(e){return Mj(e)===Ij},mj.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===_j||e===Cj||e===bj||e===wj||e===Ij||e===xj||"object"==typeof e&&null!==e&&(e.$$typeof===Pj||e.$$typeof===Nj||e.$$typeof===Sj||e.$$typeof===Ej||e.$$typeof===Tj||e.$$typeof===Rj||e.$$typeof===Oj||e.$$typeof===Dj||e.$$typeof===Aj)},mj.typeOf=Mj,pj.exports=mj;var Fj=pj.exports,jj={};jj[Fj.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jj[Fj.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var Uj=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},qj=function(e,t,n){Uj(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},zj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$j=!1,Vj=/[A-Z]|^ms/g,Bj=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wj=function(e){return 45===e.charCodeAt(1)},Hj=function(e){return null!=e&&"boolean"!=typeof e},Kj=lF((function(e){return Wj(e)?e:e.replace(Vj,"-$&").toLowerCase()})),Gj=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Bj,(function(e,t,n){return Xj={name:t,styles:n,next:Xj},t}))}return 1===zj[e]||Wj(e)||"number"!=typeof t||0===t?t:t+"px"},Qj="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Yj(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Xj={name:i.name,styles:i.styles,next:Xj},i.name;var s=n;if(void 0!==s.styles){var o=s.next;if(void 0!==o)for(;void 0!==o;)Xj={name:o.name,styles:o.styles,next:Xj},o=o.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Yj(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!=typeof o){var a=o;null!=t&&void 0!==t[a]?r+=s+"{"+t[a]+"}":Hj(a)&&(r+=Kj(s)+":"+Gj(s,a)+";")}else{if("NO_COMPONENT_SELECTOR"===s&&$j)throw new Error(Qj);if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=Yj(e,t,o);switch(s){case"animation":case"animationName":r+=Kj(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var u=0;u<o.length;u++)Hj(o[u])&&(r+=Kj(s)+":"+Gj(s,o[u])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var a=Xj,l=n(e);return Xj=a,Yj(e,t,l)}}var u=n;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var Xj,Jj=/label:\s*([^\s;\n{]+)\s*(;|$)/g;function Zj(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Xj=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=Yj(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=Yj(n,t,e[o]),r&&(i+=s[o]);Jj.lastIndex=0;for(var a,l="";null!==(a=Jj.exec(i));)l+="-"+a[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:Xj}}var eU,tU=!!B.useInsertionEffect&&B.useInsertionEffect,nU=tU||function(e){return e()},rU=tU||$.useLayoutEffect,iU=$.createContext("undefined"!=typeof HTMLElement?fj({key:"css"}):null),sU=iU.Provider,oU=function(e){return $.forwardRef((function(t,n){var r=$.useContext(iU);return e(t,r,n)}))},aU=$.createContext({}),lU={exports:{}};function uU(){return eU||(eU=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(lU)),lU.exports}uU();var cU=oU((function(e,t){var n=Zj([e.styles],void 0,$.useContext(aU)),r=$.useRef();return rU((function(){var e=t.key+"-global",i=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,o=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(i.before=t.sheet.tags[0]),null!==o&&(s=!0,o.setAttribute("data-emotion",e),i.hydrate([o])),r.current=[i,s],function(){i.flush()}}),[t]),rU((function(){var e=r.current,i=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&qj(t,n.next,!0),i.tags.length){var s=i.tags[i.tags.length-1].nextElementSibling;i.before=s,i.flush()}t.insert("",n,i,!1)}}),[t,n.name]),null}));function hU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zj(t)}var dU=cF,fU=function(e){return"theme"!==e},pU=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?dU:fU},mU=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},gU=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Uj(t,n,r),nU((function(){return qj(t,n,r)})),null},yU=function e(t,n){var r,i,s=t.__emotion_real===t,o=s&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var a=mU(t,n,s),l=a||pU(o),u=!l("as");return function(){var c=arguments,h=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==c[0]||void 0===c[0].raw)h.push.apply(h,c);else{h.push(c[0][0]);for(var d=c.length,f=1;f<d;f++)h.push(c[f],c[0][f])}var p=oU((function(e,t,n){var r,s,c,d,f=u&&e.as||o,p="",m=[],g=e;if(null==e.theme){for(var y in g={},e)g[y]=e[y];g.theme=$.useContext(aU)}"string"==typeof e.className?(r=t.registered,s=m,c=e.className,d="",c.split(" ").forEach((function(e){void 0!==r[e]?s.push(r[e]+";"):d+=e+" "})),p=d):null!=e.className&&(p=e.className+" ");var v=Zj(h.concat(m),t.registered,g);p+=t.key+"-"+v.name,void 0!==i&&(p+=" "+i);var _=u&&void 0===a?pU(f):l,w={};for(var b in e)u&&"as"===b||_(b)&&(w[b]=e[b]);return w.className=p,n&&(w.ref=n),$.createElement($.Fragment,null,$.createElement(gU,{cache:t,serialized:v,isStringTag:"string"==typeof f}),$.createElement(f,w))}));return p.displayName=void 0!==r?r:"Styled("+("string"==typeof o?o:o.displayName||o.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=o,p.__emotion_styles=h,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+i}}),p.withComponent=function(t,r){return e(t,iL({},n,r,{shouldForwardProp:mU(p,r,!0)})).apply(void 0,h)},p}}.bind();let vU;["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){yU[e]=yU(e)})),"object"==typeof document&&(vU=fj({key:"css",prepend:!0}));const _U=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:function(e){const{styles:t,defaultTheme:n={}}=e,r="function"==typeof t?e=>{return t(null==(r=e)||0===Object.keys(r).length?n:e);var r}:t;return J.jsx(cU,{styles:r})},StyledEngineProvider:function(e){const{injectFirst:t,children:n}=e;return t&&vU?J.jsx(sU,{value:vU,children:n}):n},ThemeContext:aU,css:hU,default:function(e,t){return yU(e,t)},internal_processStyles:(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},keyframes:function(){var e=hU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},Symbol.toStringTag,{value:"Module"})),wU=["values","unit","step"],bU=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>iL({},e,{[t.key]:t.val})),{})};function SU(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=rL(e,wU),s=bU(t),o=Object.keys(s);function a(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-r/100}${n})`}function u(e,i){const s=o.indexOf(i);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==s&&"number"==typeof t[o[s]]?t[o[s]]:i)-r/100}${n})`}return iL({keys:o,values:s,up:a,down:l,between:u,only:function(e){return o.indexOf(e)+1<o.length?u(e,o[o.indexOf(e)+1]):a(e)},not:function(e){const t=o.indexOf(e);return 0===t?a(o[1]):t===o.length-1?l(o[t]):u(e,o[o.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}const EU={borderRadius:4};function kU(e,t){return t?mL(e,t,{clone:!1}):e}const CU={xs:0,sm:600,md:900,lg:1200,xl:1536},TU={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${CU[e]}px)`};function IU(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||TU;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"==typeof t){const e=r.breakpoints||TU;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||CU).indexOf(i))r[e.up(i)]=n(t[i],i);else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function xU(e,t,n=!0){if(!t||"string"!=typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function NU(e,t,n,r=n){let i;return i="function"==typeof e?e(n):Array.isArray(e)?e[n]||r:xU(e,n)||r,t&&(i=t(i,r,e)),i}function PU(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],o=xU(e.theme,r)||{};return IU(e,s,(e=>{let r=NU(o,i,e);return e===r&&"string"==typeof e&&(r=NU(o,i,`${t}${"default"===e?"":VL(e)}`,e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s}const AU={m:"margin",p:"padding"},RU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},OU={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},DU=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!OU[e])return[e];e=OU[e]}const[t,n]=e.split(""),r=AU[t],i=RU[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),MU=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],LU=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];function FU(e,t,n,r){var i;const s=null!=(i=xU(e,t,!1))?i:n;return"number"==typeof s?e=>"string"==typeof e?e:s*e:Array.isArray(s)?e=>"string"==typeof e?e:s[e]:"function"==typeof s?s:()=>{}}function jU(e){return FU(e,"spacing",8)}function UU(e,t){if("string"==typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:`-${n}`}function qU(e,t,n,r){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=UU(t,n),e)),{})}(DU(n),r);return IU(e,e[n],i)}function zU(e,t){const n=jU(e.theme);return Object.keys(e).map((r=>qU(e,t,r,n))).reduce(kU,{})}function $U(e){return zU(e,MU)}function VU(e){return zU(e,LU)}function BU(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?kU(n,t[r](e)):n),{});return n.propTypes={},n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n}function WU(e){return"number"!=typeof e?e:`${e}px solid`}function HU(e,t){return PU({prop:e,themeKey:"borders",transform:t})}$U.propTypes={},$U.filterProps=MU,VU.propTypes={},VU.filterProps=LU;const KU=HU("border",WU),GU=HU("borderTop",WU),QU=HU("borderRight",WU),YU=HU("borderBottom",WU),XU=HU("borderLeft",WU),JU=HU("borderColor"),ZU=HU("borderTopColor"),eq=HU("borderRightColor"),tq=HU("borderBottomColor"),nq=HU("borderLeftColor"),rq=HU("outline",WU),iq=HU("outlineColor"),sq=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=FU(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:UU(t,e)});return IU(e,e.borderRadius,n)}return null};sq.propTypes={},sq.filterProps=["borderRadius"],BU(KU,GU,QU,YU,XU,JU,ZU,eq,tq,nq,sq,rq,iq);const oq=e=>{if(void 0!==e.gap&&null!==e.gap){const t=FU(e.theme,"spacing",8),n=e=>({gap:UU(t,e)});return IU(e,e.gap,n)}return null};oq.propTypes={},oq.filterProps=["gap"];const aq=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=FU(e.theme,"spacing",8),n=e=>({columnGap:UU(t,e)});return IU(e,e.columnGap,n)}return null};aq.propTypes={},aq.filterProps=["columnGap"];const lq=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=FU(e.theme,"spacing",8),n=e=>({rowGap:UU(t,e)});return IU(e,e.rowGap,n)}return null};function uq(e,t){return"grey"===t?t:e}function cq(e){return e<=1&&0!==e?100*e+"%":e}lq.propTypes={},lq.filterProps=["rowGap"],BU(oq,aq,lq,PU({prop:"gridColumn"}),PU({prop:"gridRow"}),PU({prop:"gridAutoFlow"}),PU({prop:"gridAutoColumns"}),PU({prop:"gridAutoRows"}),PU({prop:"gridTemplateColumns"}),PU({prop:"gridTemplateRows"}),PU({prop:"gridTemplateAreas"}),PU({prop:"gridArea"})),BU(PU({prop:"color",themeKey:"palette",transform:uq}),PU({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:uq}),PU({prop:"backgroundColor",themeKey:"palette",transform:uq}));const hq=PU({prop:"width",transform:cq}),dq=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||CU[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:cq(t)}};return IU(e,e.maxWidth,t)}return null};dq.filterProps=["maxWidth"];const fq=PU({prop:"minWidth",transform:cq}),pq=PU({prop:"height",transform:cq}),mq=PU({prop:"maxHeight",transform:cq}),gq=PU({prop:"minHeight",transform:cq});PU({prop:"size",cssProperty:"width",transform:cq}),PU({prop:"size",cssProperty:"height",transform:cq}),BU(hq,dq,fq,pq,mq,gq,PU({prop:"boxSizing"}));const yq={border:{themeKey:"borders",transform:WU},borderTop:{themeKey:"borders",transform:WU},borderRight:{themeKey:"borders",transform:WU},borderBottom:{themeKey:"borders",transform:WU},borderLeft:{themeKey:"borders",transform:WU},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:WU},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sq},color:{themeKey:"palette",transform:uq},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:uq},backgroundColor:{themeKey:"palette",transform:uq},p:{style:VU},pt:{style:VU},pr:{style:VU},pb:{style:VU},pl:{style:VU},px:{style:VU},py:{style:VU},padding:{style:VU},paddingTop:{style:VU},paddingRight:{style:VU},paddingBottom:{style:VU},paddingLeft:{style:VU},paddingX:{style:VU},paddingY:{style:VU},paddingInline:{style:VU},paddingInlineStart:{style:VU},paddingInlineEnd:{style:VU},paddingBlock:{style:VU},paddingBlockStart:{style:VU},paddingBlockEnd:{style:VU},m:{style:$U},mt:{style:$U},mr:{style:$U},mb:{style:$U},ml:{style:$U},mx:{style:$U},my:{style:$U},margin:{style:$U},marginTop:{style:$U},marginRight:{style:$U},marginBottom:{style:$U},marginLeft:{style:$U},marginX:{style:$U},marginY:{style:$U},marginInline:{style:$U},marginInlineStart:{style:$U},marginInlineEnd:{style:$U},marginBlock:{style:$U},marginBlockStart:{style:$U},marginBlockEnd:{style:$U},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:oq},rowGap:{style:lq},columnGap:{style:aq},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:cq},maxWidth:{style:dq},minWidth:{transform:cq},height:{transform:cq},maxHeight:{transform:cq},minHeight:{transform:cq},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function vq(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:o=e,themeKey:a,transform:l,style:u}=s;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const c=xU(n,a)||{};return u?u(i):IU(i,t,(t=>{let n=NU(c,l,t);return t===n&&"string"==typeof t&&(n=NU(c,l,`${e}${"default"===t?"":VL(t)}`,t)),!1===o?n:{[o]:n}}))}return function t(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=null!=(r=s.unstable_sxConfig)?r:yq;function a(n){let r=n;if("function"==typeof n)r=n(s);else if("object"!=typeof n)return n;if(!r)return null;const i=function(e={}){var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}(s.breakpoints),a=Object.keys(i);let l=i;return Object.keys(r).forEach((n=>{const i=(a=r[n],u=s,"function"==typeof a?a(u):a);var a,u;if(null!=i)if("object"==typeof i)if(o[n])l=kU(l,e(n,i,s,o));else{const e=IU({theme:s},i,(e=>({[n]:e})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(e,i)?l=kU(l,e):l[n]=t({sx:i,theme:s})}else l=kU(l,e(n,i,s,o))})),function(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}(a,l)}return Array.isArray(i)?i.map(a):a(i)}}const _q=vq();function wq(e,t){const n=this;if(n.vars&&"function"==typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}_q.filterProps=["sx"];const bq=["breakpoints","palette","spacing","shape"];function Sq(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=e,o=rL(e,bq),a=SU(n),l=function(e=8){if(e.mui)return e;const t=jU({spacing:e}),n=(...e)=>(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"==typeof n?`${n}px`:n})).join(" ");return n.mui=!0,n}(i);let u=mL({breakpoints:a,direction:"ltr",components:{},palette:iL({mode:"light"},r),spacing:l,shape:iL({},EU,s)},o);return u.applyStyles=wq,u=t.reduce(((e,t)=>mL(e,t)),u),u.unstable_sxConfig=iL({},yq,null==o?void 0:o.unstable_sxConfig),u.unstable_sx=function(e){return _q({sx:e,theme:this})},u}const Eq=Object.freeze(Object.defineProperty({__proto__:null,default:Sq,private_createBreakpoints:SU,unstable_applyStyles:wq},Symbol.toStringTag,{value:"Module"}));function kq(e=null){const t=$.useContext(aU);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}const Cq=Sq(),Tq=["sx"],Iq=Object.freeze(Object.defineProperty({__proto__:null,default:_q,extendSxProp:function(e){const{sx:t}=e,n=rL(e,Tq),{systemProps:r,otherProps:i}=(e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:yq;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r})(n);let s;return s=Array.isArray(t)?[r,...t]:"function"==typeof t?(...e)=>{const n=t(...e);return fL(n)?iL({},r,n):r}:iL({},r,t),iL({},i,{sx:s})},unstable_createStyleFunctionSx:vq,unstable_defaultSxConfig:yq},Symbol.toStringTag,{value:"Module"})),xq=$.createContext(void 0);function Nq({props:e,name:t}){return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?JL(i.defaultProps,r):i.styleOverrides||i.variants?r:JL(i,r)}({props:e,name:t,theme:{components:$.useContext(xq)}})}var Pq={},Aq={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(Aq);var Rq=Aq.exports;const Oq=r(vL),Dq=r(iF);var Mq=Rq;Object.defineProperty(Pq,"__esModule",{value:!0});var Lq=Pq.alpha=Yq;Pq.blend=function(e,t,n,r=1){const i=(e,t)=>Math.round((e**(1/r)*(1-n)+t**(1/r)*n)**r),s=Wq(e),o=Wq(t),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return Kq({type:"rgb",values:a})},Pq.colorChannel=void 0;var Fq=Pq.darken=Xq;Pq.decomposeColor=Wq;var jq=Pq.emphasize=Zq,Uq=Pq.getContrastRatio=function(e,t){const n=Qq(e),r=Qq(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)};Pq.getLuminance=Qq,Pq.hexToRgb=Bq,Pq.hslToRgb=Gq;var qq=Pq.lighten=Jq;Pq.private_safeAlpha=function(e,t,n){try{return Yq(e,t)}catch(vT){return e}},Pq.private_safeColorChannel=void 0,Pq.private_safeDarken=function(e,t,n){try{return Xq(e,t)}catch(vT){return e}},Pq.private_safeEmphasize=function(e,t,n){try{return Zq(e,t)}catch(vT){return e}},Pq.private_safeLighten=function(e,t,n){try{return Jq(e,t)}catch(vT){return e}},Pq.recomposeColor=Kq,Pq.rgbToHex=function(e){if(0===e.indexOf("#"))return e;const{values:t}=Wq(e);return`#${t.map(((e,t)=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(3===t?Math.round(255*e):e))).join("")}`};var zq=Mq(Oq),$q=Mq(Dq);function Vq(e,t=0,n=1){return(0,$q.default)(e,t,n)}function Bq(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function Wq(e){if(e.type)return e;if("#"===e.charAt(0))return Wq(Bq(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,zq.default)(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,zq.default)(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const Hq=e=>{const t=Wq(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?`${e}%`:e)).join(" ")};function Kq(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function Gq(e){e=Wq(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=(e,t=(e+n/30)%12)=>i-s*Math.max(Math.min(t-3,9-t,1),-1);let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Kq({type:a,values:l})}function Qq(e){let t="hsl"===(e=Wq(e)).type||"hsla"===e.type?Wq(Gq(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Yq(e,t){return e=Wq(e),t=Vq(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,Kq(e)}function Xq(e,t){if(e=Wq(e),t=Vq(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Kq(e)}function Jq(e,t){if(e=Wq(e),t=Vq(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Kq(e)}function Zq(e,t=.15){return Qq(e)>.5?Xq(e,t):Jq(e,t)}Pq.colorChannel=Hq,Pq.private_safeColorChannel=(e,t)=>{try{return Hq(e)}catch(vT){return e}};const ez={black:"#000",white:"#fff"},tz={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nz={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},rz={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},iz={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},sz={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},oz={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},az={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},lz=["mode","contrastThreshold","tonalOffset"],uz={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ez.white,default:ez.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},cz={text:{primary:ez.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ez.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function hz(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=qq(e.main,i):"dark"===t&&(e.dark=Fq(e.main,s)))}function dz(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=rL(e,lz),s=e.primary||function(e="light"){return"dark"===e?{main:sz[200],light:sz[50],dark:sz[400]}:{main:sz[700],light:sz[400],dark:sz[800]}}(t),o=e.secondary||function(e="light"){return"dark"===e?{main:nz[200],light:nz[50],dark:nz[400]}:{main:nz[500],light:nz[300],dark:nz[700]}}(t),a=e.error||function(e="light"){return"dark"===e?{main:rz[500],light:rz[300],dark:rz[700]}:{main:rz[700],light:rz[400],dark:rz[800]}}(t),l=e.info||function(e="light"){return"dark"===e?{main:oz[400],light:oz[300],dark:oz[700]}:{main:oz[700],light:oz[500],dark:oz[900]}}(t),u=e.success||function(e="light"){return"dark"===e?{main:az[400],light:az[300],dark:az[700]}:{main:az[800],light:az[500],dark:az[900]}}(t),c=e.warning||function(e="light"){return"dark"===e?{main:iz[400],light:iz[300],dark:iz[700]}:{main:"#ed6c02",light:iz[500],dark:iz[900]}}(t);function h(e){return Uq(e,cz.text.primary)>=n?cz.text.primary:uz.text.primary}const d=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:s=700})=>{if(!(e=iL({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error(yL(11,t?` (${t})`:"",n));if("string"!=typeof e.main)throw new Error(yL(12,t?` (${t})`:"",JSON.stringify(e.main)));return hz(e,"light",i,r),hz(e,"dark",s,r),e.contrastText||(e.contrastText=h(e.main)),e},f={dark:cz,light:uz};return mL(iL({common:iL({},ez),mode:t,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:c,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:u,name:"success"}),grey:tz,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r},f[t]),i)}const fz=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],pz={textTransform:"uppercase"},mz='"Roboto", "Helvetica", "Arial", sans-serif';function gz(e,t){const n="function"==typeof t?t(e):t,{fontFamily:r=mz,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:c,pxToRem:h}=n,d=rL(n,fz),f=i/14,p=h||(e=>e/u*f+"rem"),m=(e,t,n,i,s)=>{return iL({fontFamily:r,fontWeight:e,fontSize:p(t),lineHeight:n},r===mz?{letterSpacing:(o=i/t,Math.round(1e5*o)/1e5+"em")}:{},s,c);var o},g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,pz),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,pz),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return mL(iL({htmlFontSize:u,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},g),d,{clone:!1})}function yz(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}const vz=["none",yz(0,2,1,-1,0,1,1,0,0,1,3,0),yz(0,3,1,-2,0,2,2,0,0,1,5,0),yz(0,3,3,-2,0,3,4,0,0,1,8,0),yz(0,2,4,-1,0,4,5,0,0,1,10,0),yz(0,3,5,-1,0,5,8,0,0,1,14,0),yz(0,3,5,-1,0,6,10,0,0,1,18,0),yz(0,4,5,-2,0,7,10,1,0,2,16,1),yz(0,5,5,-3,0,8,10,1,0,3,14,2),yz(0,5,6,-3,0,9,12,1,0,3,16,2),yz(0,6,6,-3,0,10,14,1,0,4,18,3),yz(0,6,7,-4,0,11,15,1,0,4,20,3),yz(0,7,8,-4,0,12,17,2,0,5,22,4),yz(0,7,8,-4,0,13,19,2,0,5,24,4),yz(0,7,9,-4,0,14,21,2,0,5,26,4),yz(0,8,9,-5,0,15,22,2,0,6,28,5),yz(0,8,10,-5,0,16,24,2,0,6,30,5),yz(0,8,11,-5,0,17,26,2,0,6,32,5),yz(0,9,11,-5,0,18,28,2,0,7,34,6),yz(0,9,12,-6,0,19,29,2,0,7,36,6),yz(0,10,13,-6,0,20,31,3,0,8,38,7),yz(0,10,13,-6,0,21,33,3,0,8,40,7),yz(0,10,14,-6,0,22,35,3,0,8,42,7),yz(0,11,14,-7,0,23,36,3,0,9,44,8),yz(0,11,15,-7,0,24,38,3,0,9,46,8)],_z=["duration","easing","delay"],wz={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},bz={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Sz(e){return`${Math.round(e)}ms`}function Ez(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function kz(e){const t=iL({},wz,e.easing),n=iL({},bz,e.duration);return iL({getAutoHeightDuration:Ez,create:(e=["all"],r={})=>{const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0}=r;return rL(r,_z),(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof i?i:Sz(i)} ${s} ${"string"==typeof o?o:Sz(o)}`)).join(",")}},e,{easing:t,duration:n})}const Cz={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Tz=["breakpoints","mixins","spacing","palette","transitions","typography","shape"],Iz=function(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=e,o=rL(e,Tz);if(e.vars)throw new Error(yL(18));const a=dz(r),l=Sq(e);let u=mL(l,{mixins:(c=l.breakpoints,h=n,iL({toolbar:{minHeight:56,[c.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[c.up("sm")]:{minHeight:64}}},h)),palette:a,shadows:vz.slice(),typography:gz(a,s),transitions:kz(i),zIndex:iL({},Cz)});var c,h;return u=mL(u,o),u=t.reduce(((e,t)=>mL(e,t)),u),u.unstable_sxConfig=iL({},yq,null==o?void 0:o.unstable_sxConfig),u.unstable_sx=function(e){return _q({sx:e,theme:this})},u}();function xz(){const e=function(e=Cq){return kq(e)}(Iz);return e[aF]||e}var Nz,Pz={},Az={exports:{}};const Rz=r(_U),Oz=r(gL),Dz=r(BL),Mz=r($L),Lz=r(Eq),Fz=r(Iq);var jz=Rq;Object.defineProperty(Pz,"__esModule",{value:!0});var Uz=Pz.default=function(e={}){const{themeId:t,defaultTheme:n=Xz,rootShouldForwardProp:r=Yz,slotShouldForwardProp:i=Yz}=e,s=e=>(0,Wz.default)((0,qz.default)({},e,{theme:Zz((0,qz.default)({},e,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,(e,o={})=>{(0,$z.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:u,skipSx:c,overridesResolver:h=e$(Jz(l))}=o,d=(0,zz.default)(o,Gz),f=void 0!==u?u:l&&"Root"!==l&&"root"!==l||!1,p=c||!1;let m=Yz;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"==typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,$z.default)(e,(0,qz.default)({shouldForwardProp:m,label:void 0},d)),y=e=>"function"==typeof e&&e.__emotion_real!==e||(0,Vz.isPlainObject)(e)?r=>t$(e,(0,qz.default)({},r,{theme:Zz({theme:r.theme,defaultTheme:n,themeId:t})})):e,v=(r,...i)=>{let o=y(r);const l=i?i.map(y):[];a&&h&&l.push((e=>{const r=Zz((0,qz.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,s={};return Object.entries(i).forEach((([t,n])=>{s[t]=t$(n,(0,qz.default)({},e,{theme:r}))})),h(e,s)})),a&&!f&&l.push((e=>{var r;const i=Zz((0,qz.default)({},e,{defaultTheme:n,themeId:t}));return t$({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,qz.default)({},e,{theme:i}))})),p||l.push(s);const u=l.length-i.length;if(Array.isArray(r)&&u>0){const e=new Array(u).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const c=g(o,...l);return e.muiName&&(c.muiName=e.muiName),c};return g.withConfig&&(v.withConfig=g.withConfig),v}};Pz.shouldForwardProp=Yz,Pz.systemDefaultTheme=void 0;var qz=jz(uU()),zz=jz((Nz||(Nz=1,function(e){e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports}(Az)),Az.exports)),$z=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Qz(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(Rz),Vz=Oz;jz(Dz),jz(Mz);var Bz=jz(Lz),Wz=jz(Fz);const Hz=["ownerState"],Kz=["variants"],Gz=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Qz(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Qz=function(e){return e?n:t})(e)}function Yz(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Xz=Pz.systemDefaultTheme=(0,Bz.default)(),Jz=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function Zz({defaultTheme:e,theme:t,themeId:n}){return r=t,0===Object.keys(r).length?e:t[n]||t;var r}function e$(e){return e?(t,n)=>n[e]:null}function t$(e,t){let{ownerState:n}=t,r=(0,zz.default)(t,Hz);const i="function"==typeof e?e((0,qz.default)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>t$(e,(0,qz.default)({ownerState:n},r))));if(i&&"object"==typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,zz.default)(i,Kz);return e.forEach((e=>{let i=!0;"function"==typeof e.props?i=e.props((0,qz.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"==typeof e.style?e.style((0,qz.default)({ownerState:n},r,n)):e.style))})),t}return i}const n$=Uz({themeId:aF,defaultTheme:Iz,rootShouldForwardProp:e=>function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}(e)&&"classes"!==e}),r$=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function i$(e){return Nq(e)}function s$(e,t){return s$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s$(e,t)}const o$=!1,a$=V.createContext(null);var l$="unmounted",u$="exited",c$="entering",h$="entered",d$="exiting",f$=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=u$,r.appearStatus=c$):i=h$:i=t.unmountOnExit||t.mountOnEnter?l$:u$,r.state={status:i},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s$(e,t)}(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l$?{status:u$}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c$&&n!==h$&&(t=c$):n!==c$&&n!==h$||(t=d$)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===c$){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:ah.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===u$&&this.setState({status:l$})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[ah.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||o$?this.safeSetState({status:h$},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,o),this.safeSetState({status:c$},(function(){t.props.onEntering(s,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:h$},(function(){t.props.onEntered(s,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:ah.findDOMNode(this);t&&!o$?(this.props.onExit(r),this.safeSetState({status:d$},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:u$},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:u$},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:ah.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===l$)return null;var t=this.props,n=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var r=rL(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return V.createElement(a$.Provider,{value:null},"function"==typeof n?n(e,r):V.cloneElement(V.Children.only(n),r))},t}(V.Component);function p$(){}function m$(e,t){var n,r;const{timeout:i,easing:s,style:o={}}=e;return{duration:null!=(n=o.transitionDuration)?n:"number"==typeof i?i:i[t.mode]||0,easing:null!=(r=o.transitionTimingFunction)?r:"object"==typeof s?s[t.mode]:s,delay:o.transitionDelay}}f$.contextType=a$,f$.propTypes={},f$.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p$,onEntering:p$,onEntered:p$,onExit:p$,onExiting:p$,onExited:p$},f$.UNMOUNTED=l$,f$.EXITED=u$,f$.ENTERING=c$,f$.ENTERED=h$,f$.EXITING=d$;const g$=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function y$(e){return`scale(${e}, ${e**2})`}const v$={entering:{opacity:1,transform:y$(1)},entered:{opacity:1,transform:"none"}},_$="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),w$=$.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:s,in:o,onEnter:a,onEntered:l,onEntering:u,onExit:c,onExited:h,onExiting:d,style:f,timeout:p="auto",TransitionComponent:m=f$}=e,g=rL(e,g$),y=XL(),v=$.useRef(),_=xz(),w=$.useRef(null),b=oL(w,i.ref,t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},E=S(u),k=S(((e,t)=>{(e=>{e.scrollTop})(e);const{duration:n,delay:r,easing:i}=m$({style:f,timeout:p,easing:s},{mode:"enter"});let o;"auto"===p?(o=_.transitions.getAutoHeightDuration(e.clientHeight),v.current=o):o=n,e.style.transition=[_.transitions.create("opacity",{duration:o,delay:r}),_.transitions.create("transform",{duration:_$?o:.666*o,delay:r,easing:i})].join(","),a&&a(e,t)})),C=S(l),T=S(d),I=S((e=>{const{duration:t,delay:n,easing:r}=m$({style:f,timeout:p,easing:s},{mode:"exit"});let i;"auto"===p?(i=_.transitions.getAutoHeightDuration(e.clientHeight),v.current=i):i=t,e.style.transition=[_.transitions.create("opacity",{duration:i,delay:n}),_.transitions.create("transform",{duration:_$?i:.666*i,delay:_$?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=y$(.75),c&&c(e)})),x=S(h);return J.jsx(m,iL({appear:r,in:o,nodeRef:w,onEnter:k,onEntered:C,onEntering:E,onExit:I,onExited:x,onExiting:T,addEndListener:e=>{"auto"===p&&y.start(v.current||0,e),n&&n(w.current,e)},timeout:"auto"===p?null:p},g,{children:(e,t)=>$.cloneElement(i,iL({style:iL({opacity:0,transform:y$(.75),visibility:"exited"!==e||o?void 0:"hidden"},v$[e],f,i.props.style),ref:b},t))}))}));function b$(e){return nF("MuiPaper",e)}w$.muiSupportAuto=!0,rF("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const S$=["className","component","elevation","square","variant"],E$=n$("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((({theme:e,ownerState:t})=>{var n;return iL({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},"outlined"===t.variant&&{border:`1px solid ${(e.vars||e).palette.divider}`},"elevation"===t.variant&&iL({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:`linear-gradient(${Lq("#fff",r$(t.elevation))}, ${Lq("#fff",r$(t.elevation))})`},e.vars&&{backgroundImage:null==(n=e.vars.overlays)?void 0:n[t.elevation]}))})),k$=$.forwardRef((function(e,t){const n=i$({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:s=1,square:o=!1,variant:a="elevation"}=n,l=rL(n,S$),u=iL({},n,{component:i,elevation:s,square:o,variant:a}),c=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return sL({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},b$,i)})(u);return J.jsx(E$,iL({as:i,ownerState:u,className:lL(c.root,r),ref:t},l))}));function C$(e){return nF("MuiSnackbarContent",e)}rF("MuiSnackbarContent",["root","message","action"]);const T$=["action","className","message","role"],I$=n$(k$,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>{const t="light"===e.palette.mode?.8:.98,n=jq(e.palette.background.default,t);return iL({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),x$=n$("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),N$=n$("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),P$=$.forwardRef((function(e,t){const n=i$({props:e,name:"MuiSnackbarContent"}),{action:r,className:i,message:s,role:o="alert"}=n,a=rL(n,T$),l=n,u=(e=>{const{classes:t}=e;return sL({root:["root"],action:["action"],message:["message"]},C$,t)})(l);return J.jsxs(I$,iL({role:o,square:!0,elevation:6,className:lL(u.root,i),ownerState:l,ref:t},a,{children:[J.jsx(x$,{className:u.message,ownerState:l,children:s}),r?J.jsx(N$,{className:u.action,ownerState:l,children:r}):null]}))}));function A$(e){return nF("MuiSnackbar",e)}rF("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const R$=["onEnter","onExited"],O$=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],D$=n$("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${VL(n.anchorOrigin.vertical)}${VL(n.anchorOrigin.horizontal)}`]]}})((({theme:e,ownerState:t})=>iL({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===t.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===t.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===t.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:iL({},"top"===t.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===t.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===t.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===t.anchorOrigin.horizontal&&{right:24,left:"auto"})}))),M$=$.forwardRef((function(e,t){const n=i$({props:e,name:"MuiSnackbar"}),r=xz(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:s,anchorOrigin:{vertical:o,horizontal:a}={vertical:"bottom",horizontal:"left"},autoHideDuration:l=null,children:u,className:c,ClickAwayListenerProps:h,ContentProps:d,disableWindowBlurListener:f=!1,message:p,open:m,TransitionComponent:g=w$,transitionDuration:y=i,TransitionProps:{onEnter:v,onExited:_}={}}=n,w=rL(n.TransitionProps,R$),b=rL(n,O$),S=iL({},n,{anchorOrigin:{vertical:o,horizontal:a},autoHideDuration:l,disableWindowBlurListener:f,TransitionComponent:g,transitionDuration:y}),E=(e=>{const{classes:t,anchorOrigin:n}=e;return sL({root:["root",`anchorOrigin${VL(n.vertical)}${VL(n.horizontal)}`]},A$,t)})(S),{getRootProps:k,onClickAway:C}=function(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:s}=e,o=XL();$.useEffect((()=>{if(i)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==r||r(e,"escapeKeyDown")}}),[i,r]);const a=KL(((e,t)=>{null==r||r(e,t)})),l=KL((e=>{r&&null!=e&&o.start(e,(()=>{a(null,"timeout")}))}));$.useEffect((()=>(i&&l(t),o.clear)),[i,t,l,o]);const u=o.clear,c=$.useCallback((()=>{null!=t&&l(null!=s?s:.5*t)}),[t,s,l]),h=e=>t=>{const n=e.onFocus;null==n||n(t),u()},d=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseLeave;null==n||n(t),c()};return $.useEffect((()=>{if(!n&&i)return window.addEventListener("focus",c),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",c),window.removeEventListener("blur",u)}}),[n,i,c,u]),{getRootProps:(t={})=>{const n=iL({},uL(e),uL(t));return iL({role:"presentation"},t,n,{onBlur:(r=n,e=>{const t=r.onBlur;null==t||t(e),c()}),onFocus:h(n),onMouseEnter:d(n),onMouseLeave:f(n)});var r},onClickAway:e=>{null==r||r(e,"clickaway")}}}(iL({},S)),[T,I]=$.useState(!0),x=dL({elementType:D$,getSlotProps:k,externalForwardedProps:b,ownerState:S,additionalProps:{ref:t},className:[E.root,c]});return!m&&T?null:J.jsx(oF,iL({onClickAway:C},h,{children:J.jsx(D$,iL({},x,{children:J.jsx(g,iL({appear:!0,in:m,timeout:y,direction:"top"===o?"down":"up",onEnter:(e,t)=>{I(!1),v&&v(e,t)},onExited:e=>{I(!0),_&&_(e)}},w,{children:u||J.jsx(P$,iL({message:p,action:s},d))}))}))}))}));function L$(){const e=AO(),[t]=nL(jA),{user:n,loading:r,error:i,popup:s}=bO((e=>e.user));return $.useEffect((()=>{if(t){const n={uid:t.uid,displayName:t.displayName,email:t.email,photoUrl:t.photoURL};console.log("dataToSet: ",t),e(RM(n))}}),[t,e]),$.useEffect((()=>{n&&(async()=>{const e=await XC(eC(UA,"games"),function(e,t,...n){let r=[];t instanceof OC&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof FC)).length,n=e.filter((e=>e instanceof MC)).length;if(t>1||t>0&&n>0)throw new Ov(Rv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
       * @license
       * Copyright 2020 Google LLC
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       *   http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       */(r);for(const i of r)e=i._apply(e)}(function(...e){return e.forEach((e=>$C("and",e))),FC._create("and",e)}(jC(LC("player1","==",n.uid),LC("player2","==",n.uid)),jC(LC("status","==","waiting"),LC("status","==","ongoing")))));e.forEach((e=>{!function(e){eT(Gk(e.firestore,iC),[new Eb(e._key,cb.none())])}(tC(UA,"games",e.id))}))})()}),[n]),J.jsxs(J.Fragment,{children:[J.jsx(M$,{open:s,autoHideDuration:6e3,onAnimationEnd:()=>e(NM("")),onClose:()=>e(PM(!1)),message:i}),J.jsx("div",{className:"wrapper",children:J.jsx(YM,{})})]})}const F$=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let s=new uM;return t&&(function(e){return"boolean"==typeof e}(t)?s.push(sM):s.push(oM(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"==typeof n)a=n;else{if(!eD(n))throw new Error(IM(1));a=nD(n)}l="function"==typeof r?r(t):t();let u=rD;i&&(u=aM({trace:!1,..."object"==typeof i&&i}));const c=function(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(YO(15))};const o={getState:i.getState,dispatch:(e,...t)=>s(e,...t)},a=e.map((e=>e(o)));return s=rD(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=pM(c);return tD(a,s,u(..."function"==typeof o?o(h):h()))}({reducer:{user:DM},devTools:!0});Z.createRoot(document.getElementById("root")).render(J.jsx(TO,{store:F$,children:J.jsx(L$,{})}))}}}));
