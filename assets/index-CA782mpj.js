var WE=Object.freeze,vD=Object.defineProperty;var hn=(t,e)=>WE(vD(t,"raw",{value:WE(e||t.slice())}));function GQ(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function wD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function MC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Es(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var LC={exports:{}},Df={},FC={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=Symbol.for("react.element"),ED=Symbol.for("react.portal"),TD=Symbol.for("react.fragment"),SD=Symbol.for("react.strict_mode"),ID=Symbol.for("react.profiler"),CD=Symbol.for("react.provider"),bD=Symbol.for("react.context"),RD=Symbol.for("react.forward_ref"),kD=Symbol.for("react.suspense"),AD=Symbol.for("react.memo"),PD=Symbol.for("react.lazy"),qE=Symbol.iterator;function xD(t){return t===null||typeof t!="object"?null:(t=qE&&t[qE]||t["@@iterator"],typeof t=="function"?t:null)}var VC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$C=Object.assign,UC={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=UC,this.updater=n||VC}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jC(){}jC.prototype=Ga.prototype;function q_(t,e,n){this.props=t,this.context=e,this.refs=UC,this.updater=n||VC}var H_=q_.prototype=new jC;H_.constructor=q_;$C(H_,Ga.prototype);H_.isPureReactComponent=!0;var HE=Array.isArray,zC=Object.prototype.hasOwnProperty,G_={current:null},BC={key:!0,ref:!0,__self:!0,__source:!0};function WC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zC.call(e,r)&&!BC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hc,type:t,key:s,ref:o,props:i,_owner:G_.current}}function ND(t,e){return{$$typeof:hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K_(t){return typeof t=="object"&&t!==null&&t.$$typeof===hc}function OD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var GE=/\/+/g;function Um(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OD(""+t.key):e.toString(36)}function Vh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hc:case ED:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Um(o,0):r,HE(i)?(n="",t!=null&&(n=t.replace(GE,"$&/")+"/"),Vh(i,e,n,"",function(c){return c})):i!=null&&(K_(i)&&(i=ND(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(GE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",HE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Um(s,a);o+=Vh(s,e,n,l,i)}else if(l=xD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Um(s,a++),o+=Vh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ih(t,e,n){if(t==null)return t;var r=[],i=0;return Vh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function DD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},$h={transition:null},MD={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:$h,ReactCurrentOwner:G_};function qC(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ih,forEach:function(t,e,n){ih(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ih(t,function(){e++}),e},toArray:function(t){return ih(t,function(e){return e})||[]},only:function(t){if(!K_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Ga;Se.Fragment=TD;Se.Profiler=ID;Se.PureComponent=q_;Se.StrictMode=SD;Se.Suspense=kD;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MD;Se.act=qC;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$C({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=G_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zC.call(e,l)&&!BC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hc,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:bD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CD,_context:t},t.Consumer=t};Se.createElement=WC;Se.createFactory=function(t){var e=WC.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:RD,render:t}};Se.isValidElement=K_;Se.lazy=function(t){return{$$typeof:PD,_payload:{_status:-1,_result:t},_init:DD}};Se.memo=function(t,e){return{$$typeof:AD,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=$h.transition;$h.transition={};try{t()}finally{$h.transition=e}};Se.unstable_act=qC;Se.useCallback=function(t,e){return un.current.useCallback(t,e)};Se.useContext=function(t){return un.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return un.current.useDeferredValue(t)};Se.useEffect=function(t,e){return un.current.useEffect(t,e)};Se.useId=function(){return un.current.useId()};Se.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return un.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};Se.useRef=function(t){return un.current.useRef(t)};Se.useState=function(t){return un.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return un.current.useTransition()};Se.version="18.3.1";FC.exports=Se;var k=FC.exports;const Nt=MC(k),wa=wD({__proto__:null,default:Nt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD=k,FD=Symbol.for("react.element"),VD=Symbol.for("react.fragment"),$D=Object.prototype.hasOwnProperty,UD=LD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jD={key:!0,ref:!0,__self:!0,__source:!0};function HC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$D.call(e,r)&&!jD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FD,type:t,key:s,ref:o,props:i,_owner:UD.current}}Df.Fragment=VD;Df.jsx=HC;Df.jsxs=HC;LC.exports=Df;var D=LC.exports,qg={},GC={exports:{}},$n={},KC={exports:{}},QC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var te=U.length;U.push(Q);e:for(;0<te;){var G=te-1>>>1,H=U[G];if(0<i(H,Q))U[G]=Q,U[te]=H,te=G;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],te=U.pop();if(te!==Q){U[0]=te;e:for(var G=0,H=U.length,j=H>>>1;G<j;){var $=2*(G+1)-1,ie=U[$],ee=$+1,ne=U[ee];if(0>i(ie,te))ee<H&&0>i(ne,ie)?(U[G]=ne,U[ee]=te,G=ee):(U[G]=ie,U[$]=te,G=$);else if(ee<H&&0>i(ne,te))U[G]=ne,U[ee]=te,G=ee;else break e}}return Q}function i(U,Q){var te=U.sortIndex-Q.sortIndex;return te!==0?te:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=U)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function P(U){if(E=!1,w(U),!y)if(n(l)!==null)y=!0,z(O);else{var Q=n(c);Q!==null&&B(P,Q.startTime-U)}}function O(U,Q){y=!1,E&&(E=!1,v(T),T=-1),g=!0;var te=p;try{for(w(Q),d=n(l);d!==null&&(!(d.expirationTime>Q)||U&&!x());){var G=d.callback;if(typeof G=="function"){d.callback=null,p=d.priorityLevel;var H=G(d.expirationTime<=Q);Q=t.unstable_now(),typeof H=="function"?d.callback=H:d===n(l)&&r(l),w(Q)}else r(l);d=n(l)}if(d!==null)var j=!0;else{var $=n(c);$!==null&&B(P,$.startTime-Q),j=!1}return j}finally{d=null,p=te,g=!1}}var L=!1,S=null,T=-1,b=5,R=-1;function x(){return!(t.unstable_now()-R<b)}function N(){if(S!==null){var U=t.unstable_now();R=U;var Q=!0;try{Q=S(!0,U)}finally{Q?A():(L=!1,S=null)}}else L=!1}var A;if(typeof _=="function")A=function(){_(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=N,A=function(){W.postMessage(null)}}else A=function(){C(N,0)};function z(U){S=U,L||(L=!0,A())}function B(U,Q){T=C(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,z(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var te=p;p=Q;try{return U()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=p;p=U;try{return Q()}finally{p=te}},t.unstable_scheduleCallback=function(U,Q,te){var G=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?G+te:G):te=G,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=te+H,U={id:h++,callback:Q,priorityLevel:U,startTime:te,expirationTime:H,sortIndex:-1},te>G?(U.sortIndex=te,e(c,U),n(l)===null&&U===n(c)&&(E?(v(T),T=-1):E=!0,B(P,te-G))):(U.sortIndex=H,e(l,U),y||g||(y=!0,z(O))),U},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(U){var Q=p;return function(){var te=p;p=Q;try{return U.apply(this,arguments)}finally{p=te}}}})(QC);KC.exports=QC;var zD=KC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BD=k,Ln=zD;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YC=new Set,Eu={};function go(t,e){Ea(t,e),Ea(t+"Capture",e)}function Ea(t,e){for(Eu[t]=e,t=0;t<e.length;t++)YC.add(e[t])}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,WD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KE={},QE={};function qD(t){return Hg.call(QE,t)?!0:Hg.call(KE,t)?!1:WD.test(t)?QE[t]=!0:(KE[t]=!0,!1)}function HD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GD(t,e,n,r){if(e===null||typeof e>"u"||HD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wt[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wt[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wt[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wt[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wt[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wt[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wt[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wt[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wt[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q_=/[\-:]([a-z])/g;function Y_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q_,Y_);Wt[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q_,Y_);Wt[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q_,Y_);Wt[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wt[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wt[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function X_(t,e,n,r){var i=Wt.hasOwnProperty(e)?Wt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GD(e,n,i,r)&&(n=null),r||i===null?qD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ci=BD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sh=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),J_=Symbol.for("react.strict_mode"),Gg=Symbol.for("react.profiler"),XC=Symbol.for("react.provider"),JC=Symbol.for("react.context"),Z_=Symbol.for("react.forward_ref"),Kg=Symbol.for("react.suspense"),Qg=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),ZC=Symbol.for("react.offscreen"),YE=Symbol.iterator;function bl(t){return t===null||typeof t!="object"?null:(t=YE&&t[YE]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,jm;function jl(t){if(jm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jm=e&&e[1]||""}return"\n"+jm+t}var zm=!1;function Bm(t,e){if(!t||zm)return"";zm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jl(t):""}function KD(t){switch(t.tag){case 5:return jl(t.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return t=Bm(t.type,!1),t;case 11:return t=Bm(t.type.render,!1),t;case 1:return t=Bm(t.type,!0),t;default:return""}}function Yg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wo:return"Fragment";case Bo:return"Portal";case Gg:return"Profiler";case J_:return"StrictMode";case Kg:return"Suspense";case Qg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case JC:return(t.displayName||"Context")+".Consumer";case XC:return(t._context.displayName||"Context")+".Provider";case Z_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ev:return e=t.displayName||null,e!==null?e:Yg(t.type)||"Memo";case Li:e=t._payload,t=t._init;try{return Yg(t(e))}catch(n){}}return null}function QD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yg(e);case 8:return e===J_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YD(t){var e=eb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oh(t){t._valueTracker||(t._valueTracker=YD(t))}function tb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Xg(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function XE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nb(t,e){e=e.checked,e!=null&&X_(t,"checked",e,!1)}function Jg(t,e){nb(t,e);var n=cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zg(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function JE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zg(t,e,n){(e!=="number"||hd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zl=Array.isArray;function oa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ey(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ZE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(zl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cs(n)}}function rb(t,e){var n=cs(e.value),r=cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ib(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ty(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ib(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ah,sb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ah=ah||document.createElement("div"),ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XD=["Webkit","ms","Moz","O"];Object.keys(Jl).forEach(function(t){XD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jl[e]=Jl[t]})});function ob(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jl.hasOwnProperty(t)&&Jl[t]?(""+e).trim():e+"px"}function ab(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ob(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var JD=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ny(t,e){if(e){if(JD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function ry(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iy=null;function tv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sy=null,aa=null,la=null;function tT(t){if(t=pc(t)){if(typeof sy!="function")throw Error(X(280));var e=t.stateNode;e&&(e=$f(e),sy(t.stateNode,t.type,e))}}function lb(t){aa?la?la.push(t):la=[t]:aa=t}function ub(){if(aa){var t=aa,e=la;if(la=aa=null,tT(t),e)for(t=0;t<e.length;t++)tT(e[t])}}function cb(t,e){return t(e)}function hb(){}var Wm=!1;function db(t,e,n){if(Wm)return t(e,n);Wm=!0;try{return cb(t,e,n)}finally{Wm=!1,(aa!==null||la!==null)&&(hb(),ub())}}function Su(t,e){var n=t.stateNode;if(n===null)return null;var r=$f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var oy=!1;if(fi)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){oy=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch(t){oy=!1}function ZD(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Zl=!1,dd=null,fd=!1,ay=null,eM={onError:function(t){Zl=!0,dd=t}};function tM(t,e,n,r,i,s,o,a,l){Zl=!1,dd=null,ZD.apply(eM,arguments)}function nM(t,e,n,r,i,s,o,a,l){if(tM.apply(this,arguments),Zl){if(Zl){var c=dd;Zl=!1,dd=null}else throw Error(X(198));fd||(fd=!0,ay=c)}}function yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nT(t){if(yo(t)!==t)throw Error(X(188))}function rM(t){var e=t.alternate;if(!e){if(e=yo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nT(i),t;if(s===r)return nT(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function pb(t){return t=rM(t),t!==null?mb(t):null}function mb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mb(t);if(e!==null)return e;t=t.sibling}return null}var gb=Ln.unstable_scheduleCallback,rT=Ln.unstable_cancelCallback,iM=Ln.unstable_shouldYield,sM=Ln.unstable_requestPaint,ht=Ln.unstable_now,oM=Ln.unstable_getCurrentPriorityLevel,nv=Ln.unstable_ImmediatePriority,yb=Ln.unstable_UserBlockingPriority,pd=Ln.unstable_NormalPriority,aM=Ln.unstable_LowPriority,_b=Ln.unstable_IdlePriority,Mf=null,Mr=null;function lM(t){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(Mf,t,void 0,(t.current.flags&128)===128)}catch(e){}}var wr=Math.clz32?Math.clz32:hM,uM=Math.log,cM=Math.LN2;function hM(t){return t>>>=0,t===0?32:31-(uM(t)/cM|0)|0}var lh=64,uh=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function md(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bl(a):(s&=o,s!==0&&(r=Bl(s)))}else o=n&~i,o!==0?r=Bl(o):s!==0&&(r=Bl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),i=1<<n,r|=t[n],e&=~i;return r}function dM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=dM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ly(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vb(){var t=lh;return lh<<=1,!(lh&4194240)&&(lh=64),t}function qm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function pM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function rv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function wb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Eb,iv,Tb,Sb,Ib,uy=!1,ch=[],Xi=null,Ji=null,Zi=null,Iu=new Map,Cu=new Map,Ui=[],mM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iT(t,e){switch(t){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Iu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(e.pointerId)}}function kl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pc(e),e!==null&&iv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gM(t,e,n,r,i){switch(e){case"focusin":return Xi=kl(Xi,t,e,n,r,i),!0;case"dragenter":return Ji=kl(Ji,t,e,n,r,i),!0;case"mouseover":return Zi=kl(Zi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Iu.set(s,kl(Iu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Cu.set(s,kl(Cu.get(s)||null,t,e,n,r,i)),!0}return!1}function Cb(t){var e=Us(t.target);if(e!==null){var n=yo(e);if(n!==null){if(e=n.tag,e===13){if(e=fb(n),e!==null){t.blockedOn=e,Ib(t.priority,function(){Tb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);iy=r,n.target.dispatchEvent(r),iy=null}else return e=pc(n),e!==null&&iv(e),t.blockedOn=n,!1;e.shift()}return!0}function sT(t,e,n){Uh(t)&&n.delete(e)}function yM(){uy=!1,Xi!==null&&Uh(Xi)&&(Xi=null),Ji!==null&&Uh(Ji)&&(Ji=null),Zi!==null&&Uh(Zi)&&(Zi=null),Iu.forEach(sT),Cu.forEach(sT)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,uy||(uy=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,yM)))}function bu(t){function e(i){return Al(i,t)}if(0<ch.length){Al(ch[0],t);for(var n=1;n<ch.length;n++){var r=ch[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xi!==null&&Al(Xi,t),Ji!==null&&Al(Ji,t),Zi!==null&&Al(Zi,t),Iu.forEach(e),Cu.forEach(e),n=0;n<Ui.length;n++)r=Ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ui.length&&(n=Ui[0],n.blockedOn===null);)Cb(n),n.blockedOn===null&&Ui.shift()}var ua=Ci.ReactCurrentBatchConfig,gd=!0;function _M(t,e,n,r){var i=De,s=ua.transition;ua.transition=null;try{De=1,sv(t,e,n,r)}finally{De=i,ua.transition=s}}function vM(t,e,n,r){var i=De,s=ua.transition;ua.transition=null;try{De=4,sv(t,e,n,r)}finally{De=i,ua.transition=s}}function sv(t,e,n,r){if(gd){var i=cy(t,e,n,r);if(i===null)tg(t,e,r,yd,n),iT(t,r);else if(gM(i,t,e,n,r))r.stopPropagation();else if(iT(t,r),e&4&&-1<mM.indexOf(t)){for(;i!==null;){var s=pc(i);if(s!==null&&Eb(s),s=cy(t,e,n,r),s===null&&tg(t,e,r,yd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tg(t,e,r,null,n)}}var yd=null;function cy(t,e,n,r){if(yd=null,t=tv(r),t=Us(t),t!==null)if(e=yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yd=t,null}function bb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oM()){case nv:return 1;case yb:return 4;case pd:case aM:return 16;case _b:return 536870912;default:return 16}default:return 16}}var Hi=null,ov=null,jh=null;function Rb(){if(jh)return jh;var t,e=ov,n=e.length,r,i="value"in Hi?Hi.value:Hi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return jh=i.slice(t,1<r?1-r:void 0)}function zh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hh(){return!0}function oT(){return!1}function Un(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hh:oT,this.isPropagationStopped=oT,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hh)},persist:function(){},isPersistent:hh}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=Un(Ka),fc=it({},Ka,{view:0,detail:0}),wM=Un(fc),Hm,Gm,Pl,Lf=it({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pl&&(Pl&&t.type==="mousemove"?(Hm=t.screenX-Pl.screenX,Gm=t.screenY-Pl.screenY):Gm=Hm=0,Pl=t),Hm)},movementY:function(t){return"movementY"in t?t.movementY:Gm}}),aT=Un(Lf),EM=it({},Lf,{dataTransfer:0}),TM=Un(EM),SM=it({},fc,{relatedTarget:0}),Km=Un(SM),IM=it({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),CM=Un(IM),bM=it({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RM=Un(bM),kM=it({},Ka,{data:0}),lT=Un(kM),AM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xM[t])?!!e[t]:!1}function lv(){return NM}var OM=it({},fc,{key:function(t){if(t.key){var e=AM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(t){return t.type==="keypress"?zh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DM=Un(OM),MM=it({},Lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uT=Un(MM),LM=it({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),FM=Un(LM),VM=it({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),$M=Un(VM),UM=it({},Lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jM=Un(UM),zM=[9,13,27,32],uv=fi&&"CompositionEvent"in window,eu=null;fi&&"documentMode"in document&&(eu=document.documentMode);var BM=fi&&"TextEvent"in window&&!eu,kb=fi&&(!uv||eu&&8<eu&&11>=eu),cT=" ",hT=!1;function Ab(t,e){switch(t){case"keyup":return zM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function WM(t,e){switch(t){case"compositionend":return Pb(e);case"keypress":return e.which!==32?null:(hT=!0,cT);case"textInput":return t=e.data,t===cT&&hT?null:t;default:return null}}function qM(t,e){if(qo)return t==="compositionend"||!uv&&Ab(t,e)?(t=Rb(),jh=ov=Hi=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kb&&e.locale!=="ko"?null:e.data;default:return null}}var HM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HM[t.type]:e==="textarea"}function xb(t,e,n,r){lb(r),e=_d(e,"onChange"),0<e.length&&(n=new av("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tu=null,Ru=null;function GM(t){zb(t,0)}function Ff(t){var e=Ko(t);if(tb(e))return t}function KM(t,e){if(t==="change")return e}var Nb=!1;if(fi){var Qm;if(fi){var Ym="oninput"in document;if(!Ym){var fT=document.createElement("div");fT.setAttribute("oninput","return;"),Ym=typeof fT.oninput=="function"}Qm=Ym}else Qm=!1;Nb=Qm&&(!document.documentMode||9<document.documentMode)}function pT(){tu&&(tu.detachEvent("onpropertychange",Ob),Ru=tu=null)}function Ob(t){if(t.propertyName==="value"&&Ff(Ru)){var e=[];xb(e,Ru,t,tv(t)),db(GM,e)}}function QM(t,e,n){t==="focusin"?(pT(),tu=e,Ru=n,tu.attachEvent("onpropertychange",Ob)):t==="focusout"&&pT()}function YM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ff(Ru)}function XM(t,e){if(t==="click")return Ff(e)}function JM(t,e){if(t==="input"||t==="change")return Ff(e)}function ZM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cr=typeof Object.is=="function"?Object.is:ZM;function ku(t,e){if(Cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hg.call(e,i)||!Cr(t[i],e[i]))return!1}return!0}function mT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gT(t,e){var n=mT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mT(n)}}function Db(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Db(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mb(){for(var t=window,e=hd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=hd(t.document)}return e}function cv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function e2(t){var e=Mb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Db(n.ownerDocument.documentElement,n)){if(r!==null&&cv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gT(n,s);var o=gT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var t2=fi&&"documentMode"in document&&11>=document.documentMode,Ho=null,hy=null,nu=null,dy=!1;function yT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dy||Ho==null||Ho!==hd(r)||(r=Ho,"selectionStart"in r&&cv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nu&&ku(nu,r)||(nu=r,r=_d(hy,"onSelect"),0<r.length&&(e=new av("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ho)))}function dh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},Xm={},Lb={};fi&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Vf(t){if(Xm[t])return Xm[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lb)return Xm[t]=e[n];return t}var Fb=Vf("animationend"),Vb=Vf("animationiteration"),$b=Vf("animationstart"),Ub=Vf("transitionend"),jb=new Map,_T="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(t,e){jb.set(t,e),go(e,[t])}for(var Jm=0;Jm<_T.length;Jm++){var Zm=_T[Jm],n2=Zm.toLowerCase(),r2=Zm[0].toUpperCase()+Zm.slice(1);Ts(n2,"on"+r2)}Ts(Fb,"onAnimationEnd");Ts(Vb,"onAnimationIteration");Ts($b,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(Ub,"onTransitionEnd");Ea("onMouseEnter",["mouseout","mouseover"]);Ea("onMouseLeave",["mouseout","mouseover"]);Ea("onPointerEnter",["pointerout","pointerover"]);Ea("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function vT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nM(r,e,void 0,t),t.currentTarget=null}function zb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;vT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;vT(i,a,c),s=l}}}if(fd)throw t=ay,fd=!1,ay=null,t}function Qe(t,e){var n=e[yy];n===void 0&&(n=e[yy]=new Set);var r=t+"__bubble";n.has(r)||(Bb(e,t,2,!1),n.add(r))}function eg(t,e,n){var r=0;e&&(r|=4),Bb(n,t,r,e)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Au(t){if(!t[fh]){t[fh]=!0,YC.forEach(function(n){n!=="selectionchange"&&(i2.has(n)||eg(n,!1,t),eg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fh]||(e[fh]=!0,eg("selectionchange",!1,e))}}function Bb(t,e,n,r){switch(bb(e)){case 1:var i=_M;break;case 4:i=vM;break;default:i=sv}n=i.bind(null,e,n,t),i=void 0,!oy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Us(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}db(function(){var c=s,h=tv(n),d=[];e:{var p=jb.get(t);if(p!==void 0){var g=av,y=t;switch(t){case"keypress":if(zh(n)===0)break e;case"keydown":case"keyup":g=DM;break;case"focusin":y="focus",g=Km;break;case"focusout":y="blur",g=Km;break;case"beforeblur":case"afterblur":g=Km;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=aT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=TM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=FM;break;case Fb:case Vb:case $b:g=CM;break;case Ub:g=$M;break;case"scroll":g=wM;break;case"wheel":g=jM;break;case"copy":case"cut":case"paste":g=RM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=uT}var E=(e&4)!==0,C=!E&&t==="scroll",v=E?p!==null?p+"Capture":null:p;E=[];for(var _=c,w;_!==null;){w=_;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,v!==null&&(P=Su(_,v),P!=null&&E.push(Pu(_,P,w)))),C)break;_=_.return}0<E.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==iy&&(y=n.relatedTarget||n.fromElement)&&(Us(y)||y[pi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Us(y):null,y!==null&&(C=yo(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(E=aT,P="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=uT,P="onPointerLeave",v="onPointerEnter",_="pointer"),C=g==null?p:Ko(g),w=y==null?p:Ko(y),p=new E(P,_+"leave",g,n,h),p.target=C,p.relatedTarget=w,P=null,Us(h)===c&&(E=new E(v,_+"enter",y,n,h),E.target=w,E.relatedTarget=C,P=E),C=P,g&&y)t:{for(E=g,v=y,_=0,w=E;w;w=xo(w))_++;for(w=0,P=v;P;P=xo(P))w++;for(;0<_-w;)E=xo(E),_--;for(;0<w-_;)v=xo(v),w--;for(;_--;){if(E===v||v!==null&&E===v.alternate)break t;E=xo(E),v=xo(v)}E=null}else E=null;g!==null&&wT(d,p,g,E,!1),y!==null&&C!==null&&wT(d,C,y,E,!0)}}e:{if(p=c?Ko(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var O=KM;else if(dT(p))if(Nb)O=JM;else{O=YM;var L=QM}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(O=XM);if(O&&(O=O(t,c))){xb(d,O,n,h);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&Zg(p,"number",p.value)}switch(L=c?Ko(c):window,t){case"focusin":(dT(L)||L.contentEditable==="true")&&(Ho=L,hy=c,nu=null);break;case"focusout":nu=hy=Ho=null;break;case"mousedown":dy=!0;break;case"contextmenu":case"mouseup":case"dragend":dy=!1,yT(d,n,h);break;case"selectionchange":if(t2)break;case"keydown":case"keyup":yT(d,n,h)}var S;if(uv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else qo?Ab(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(kb&&n.locale!=="ko"&&(qo||T!=="onCompositionStart"?T==="onCompositionEnd"&&qo&&(S=Rb()):(Hi=h,ov="value"in Hi?Hi.value:Hi.textContent,qo=!0)),L=_d(c,T),0<L.length&&(T=new lT(T,t,null,n,h),d.push({event:T,listeners:L}),S?T.data=S:(S=Pb(n),S!==null&&(T.data=S)))),(S=BM?WM(t,n):qM(t,n))&&(c=_d(c,"onBeforeInput"),0<c.length&&(h=new lT("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}zb(d,e)})}function Pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _d(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Su(t,n),s!=null&&r.unshift(Pu(t,s,i)),s=Su(t,e),s!=null&&r.push(Pu(t,s,i))),t=t.return}return r}function xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Su(n,s),l!=null&&o.unshift(Pu(n,l,a))):i||(l=Su(n,s),l!=null&&o.push(Pu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var s2=/\r\n?/g,o2=/\u0000|\uFFFD/g;function ET(t){return(typeof t=="string"?t:""+t).replace(s2,"\n").replace(o2,"")}function ph(t,e,n){if(e=ET(e),ET(t)!==e&&n)throw Error(X(425))}function vd(){}var fy=null,py=null;function my(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gy=typeof setTimeout=="function"?setTimeout:void 0,a2=typeof clearTimeout=="function"?clearTimeout:void 0,TT=typeof Promise=="function"?Promise:void 0,l2=typeof queueMicrotask=="function"?queueMicrotask:typeof TT<"u"?function(t){return TT.resolve(null).then(t).catch(u2)}:gy;function u2(t){setTimeout(function(){throw t})}function ng(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),bu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bu(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ST(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Or="__reactFiber$"+Qa,xu="__reactProps$"+Qa,pi="__reactContainer$"+Qa,yy="__reactEvents$"+Qa,c2="__reactListeners$"+Qa,h2="__reactHandles$"+Qa;function Us(t){var e=t[Or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[Or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ST(t);t!==null;){if(n=t[Or])return n;t=ST(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[Or]||t[pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function $f(t){return t[xu]||null}var _y=[],Qo=-1;function Ss(t){return{current:t}}function Xe(t){0>Qo||(t.current=_y[Qo],_y[Qo]=null,Qo--)}function qe(t,e){Qo++,_y[Qo]=t.current,t.current=e}var hs={},tn=Ss(hs),yn=Ss(!1),Zs=hs;function Ta(t,e){var n=t.type.contextTypes;if(!n)return hs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _n(t){return t=t.childContextTypes,t!=null}function wd(){Xe(yn),Xe(tn)}function IT(t,e,n){if(tn.current!==hs)throw Error(X(168));qe(tn,e),qe(yn,n)}function Wb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,QD(t)||"Unknown",i));return it({},n,r)}function Ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,Zs=tn.current,qe(tn,t),qe(yn,yn.current),!0}function CT(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=Wb(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,Xe(yn),Xe(tn),qe(tn,t)):Xe(yn),qe(yn,n)}var Zr=null,Uf=!1,rg=!1;function qb(t){Zr===null?Zr=[t]:Zr.push(t)}function d2(t){Uf=!0,qb(t)}function Is(){if(!rg&&Zr!==null){rg=!0;var t=0,e=De;try{var n=Zr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zr=null,Uf=!1}catch(i){throw Zr!==null&&(Zr=Zr.slice(t+1)),gb(nv,Is),i}finally{De=e,rg=!1}}return null}var Yo=[],Xo=0,Td=null,Sd=0,Kn=[],Qn=0,eo=null,ni=1,ri="";function Os(t,e){Yo[Xo++]=Sd,Yo[Xo++]=Td,Td=t,Sd=e}function Hb(t,e,n){Kn[Qn++]=ni,Kn[Qn++]=ri,Kn[Qn++]=eo,eo=t;var r=ni;t=ri;var i=32-wr(r)-1;r&=~(1<<i),n+=1;var s=32-wr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ni=1<<32-wr(e)+i|n<<i|r,ri=s+t}else ni=1<<s|n<<i|r,ri=t}function hv(t){t.return!==null&&(Os(t,1),Hb(t,1,0))}function dv(t){for(;t===Td;)Td=Yo[--Xo],Yo[Xo]=null,Sd=Yo[--Xo],Yo[Xo]=null;for(;t===eo;)eo=Kn[--Qn],Kn[Qn]=null,ri=Kn[--Qn],Kn[Qn]=null,ni=Kn[--Qn],Kn[Qn]=null}var On=null,Pn=null,Ze=!1,mr=null;function Gb(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,On=t,Pn=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,On=t,Pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eo!==null?{id:ni,overflow:ri}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,On=t,Pn=null,!0):!1;default:return!1}}function vy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wy(t){if(Ze){var e=Pn;if(e){var n=e;if(!bT(t,e)){if(vy(t))throw Error(X(418));e=es(n.nextSibling);var r=On;e&&bT(t,e)?Gb(r,n):(t.flags=t.flags&-4097|2,Ze=!1,On=t)}}else{if(vy(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ze=!1,On=t}}}function RT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;On=t}function mh(t){if(t!==On)return!1;if(!Ze)return RT(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!my(t.type,t.memoizedProps)),e&&(e=Pn)){if(vy(t))throw Kb(),Error(X(418));for(;e;)Gb(t,e),e=es(e.nextSibling)}if(RT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pn=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pn=null}}else Pn=On?es(t.stateNode.nextSibling):null;return!0}function Kb(){for(var t=Pn;t;)t=es(t.nextSibling)}function Sa(){Pn=On=null,Ze=!1}function fv(t){mr===null?mr=[t]:mr.push(t)}var f2=Ci.ReactCurrentBatchConfig;function xl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function gh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kT(t){var e=t._init;return e(t._payload)}function Qb(t){function e(v,_){if(t){var w=v.deletions;w===null?(v.deletions=[_],v.flags|=16):w.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=is(v,_),v.index=0,v.sibling=null,v}function s(v,_,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<_?(v.flags|=2,_):w):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,w,P){return _===null||_.tag!==6?(_=cg(w,v.mode,P),_.return=v,_):(_=i(_,w),_.return=v,_)}function l(v,_,w,P){var O=w.type;return O===Wo?h(v,_,w.props.children,P,w.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Li&&kT(O)===_.type)?(P=i(_,w.props),P.ref=xl(v,_,w),P.return=v,P):(P=Qh(w.type,w.key,w.props,null,v.mode,P),P.ref=xl(v,_,w),P.return=v,P)}function c(v,_,w,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=hg(w,v.mode,P),_.return=v,_):(_=i(_,w.children||[]),_.return=v,_)}function h(v,_,w,P,O){return _===null||_.tag!==7?(_=Qs(w,v.mode,P,O),_.return=v,_):(_=i(_,w),_.return=v,_)}function d(v,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=cg(""+_,v.mode,w),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case sh:return w=Qh(_.type,_.key,_.props,null,v.mode,w),w.ref=xl(v,null,_),w.return=v,w;case Bo:return _=hg(_,v.mode,w),_.return=v,_;case Li:var P=_._init;return d(v,P(_._payload),w)}if(zl(_)||bl(_))return _=Qs(_,v.mode,w,null),_.return=v,_;gh(v,_)}return null}function p(v,_,w,P){var O=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(v,_,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sh:return w.key===O?l(v,_,w,P):null;case Bo:return w.key===O?c(v,_,w,P):null;case Li:return O=w._init,p(v,_,O(w._payload),P)}if(zl(w)||bl(w))return O!==null?null:h(v,_,w,P,null);gh(v,w)}return null}function g(v,_,w,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(w)||null,a(_,v,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case sh:return v=v.get(P.key===null?w:P.key)||null,l(_,v,P,O);case Bo:return v=v.get(P.key===null?w:P.key)||null,c(_,v,P,O);case Li:var L=P._init;return g(v,_,w,L(P._payload),O)}if(zl(P)||bl(P))return v=v.get(w)||null,h(_,v,P,O,null);gh(_,P)}return null}function y(v,_,w,P){for(var O=null,L=null,S=_,T=_=0,b=null;S!==null&&T<w.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var R=p(v,S,w[T],P);if(R===null){S===null&&(S=b);break}t&&S&&R.alternate===null&&e(v,S),_=s(R,_,T),L===null?O=R:L.sibling=R,L=R,S=b}if(T===w.length)return n(v,S),Ze&&Os(v,T),O;if(S===null){for(;T<w.length;T++)S=d(v,w[T],P),S!==null&&(_=s(S,_,T),L===null?O=S:L.sibling=S,L=S);return Ze&&Os(v,T),O}for(S=r(v,S);T<w.length;T++)b=g(S,v,T,w[T],P),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),_=s(b,_,T),L===null?O=b:L.sibling=b,L=b);return t&&S.forEach(function(x){return e(v,x)}),Ze&&Os(v,T),O}function E(v,_,w,P){var O=bl(w);if(typeof O!="function")throw Error(X(150));if(w=O.call(w),w==null)throw Error(X(151));for(var L=O=null,S=_,T=_=0,b=null,R=w.next();S!==null&&!R.done;T++,R=w.next()){S.index>T?(b=S,S=null):b=S.sibling;var x=p(v,S,R.value,P);if(x===null){S===null&&(S=b);break}t&&S&&x.alternate===null&&e(v,S),_=s(x,_,T),L===null?O=x:L.sibling=x,L=x,S=b}if(R.done)return n(v,S),Ze&&Os(v,T),O;if(S===null){for(;!R.done;T++,R=w.next())R=d(v,R.value,P),R!==null&&(_=s(R,_,T),L===null?O=R:L.sibling=R,L=R);return Ze&&Os(v,T),O}for(S=r(v,S);!R.done;T++,R=w.next())R=g(S,v,T,R.value,P),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?T:R.key),_=s(R,_,T),L===null?O=R:L.sibling=R,L=R);return t&&S.forEach(function(N){return e(v,N)}),Ze&&Os(v,T),O}function C(v,_,w,P){if(typeof w=="object"&&w!==null&&w.type===Wo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case sh:e:{for(var O=w.key,L=_;L!==null;){if(L.key===O){if(O=w.type,O===Wo){if(L.tag===7){n(v,L.sibling),_=i(L,w.props.children),_.return=v,v=_;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Li&&kT(O)===L.type){n(v,L.sibling),_=i(L,w.props),_.ref=xl(v,L,w),_.return=v,v=_;break e}n(v,L);break}else e(v,L);L=L.sibling}w.type===Wo?(_=Qs(w.props.children,v.mode,P,w.key),_.return=v,v=_):(P=Qh(w.type,w.key,w.props,null,v.mode,P),P.ref=xl(v,_,w),P.return=v,v=P)}return o(v);case Bo:e:{for(L=w.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(v,_.sibling),_=i(_,w.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=hg(w,v.mode,P),_.return=v,v=_}return o(v);case Li:return L=w._init,C(v,_,L(w._payload),P)}if(zl(w))return y(v,_,w,P);if(bl(w))return E(v,_,w,P);gh(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,w),_.return=v,v=_):(n(v,_),_=cg(w,v.mode,P),_.return=v,v=_),o(v)):n(v,_)}return C}var Ia=Qb(!0),Yb=Qb(!1),Id=Ss(null),Cd=null,Jo=null,pv=null;function mv(){pv=Jo=Cd=null}function gv(t){var e=Id.current;Xe(Id),t._currentValue=e}function Ey(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Cd=t,pv=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(pv!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(Cd===null)throw Error(X(308));Jo=t,Cd.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var js=null;function yv(t){js===null?js=[t]:js.push(t)}function Xb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,yv(e)):(n.next=i.next,i.next=n),e.interleaved=n,mi(t,r)}function mi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fi=!1;function _v(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mi(t,n)}return i=r.interleaved,i===null?(e.next=e,yv(r)):(e.next=i.next,i.next=e),r.interleaved=e,mi(t,n)}function Bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}function AT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bd(t,e,n,r){var i=t.updateQueue;Fi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,E=a;switch(p=e,g=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=it({},d,p);break e;case 2:Fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);no|=o,t.lanes=o,t.memoizedState=d}}function PT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var mc={},Lr=Ss(mc),Nu=Ss(mc),Ou=Ss(mc);function zs(t){if(t===mc)throw Error(X(174));return t}function vv(t,e){switch(qe(Ou,e),qe(Nu,t),qe(Lr,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ty(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ty(e,t)}Xe(Lr),qe(Lr,e)}function Ca(){Xe(Lr),Xe(Nu),Xe(Ou)}function Zb(t){zs(Ou.current);var e=zs(Lr.current),n=ty(e,t.type);e!==n&&(qe(Nu,t),qe(Lr,n))}function wv(t){Nu.current===t&&(Xe(Lr),Xe(Nu))}var et=Ss(0);function Rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ig=[];function Ev(){for(var t=0;t<ig.length;t++)ig[t]._workInProgressVersionPrimary=null;ig.length=0}var Wh=Ci.ReactCurrentDispatcher,sg=Ci.ReactCurrentBatchConfig,to=0,rt=null,Et=null,At=null,kd=!1,ru=!1,Du=0,p2=0;function Kt(){throw Error(X(321))}function Tv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cr(t[n],e[n]))return!1;return!0}function Sv(t,e,n,r,i,s){if(to=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wh.current=t===null||t.memoizedState===null?_2:v2,t=n(r,i),ru){s=0;do{if(ru=!1,Du=0,25<=s)throw Error(X(301));s+=1,At=Et=null,e.updateQueue=null,Wh.current=w2,t=n(r,i)}while(ru)}if(Wh.current=Ad,e=Et!==null&&Et.next!==null,to=0,At=Et=rt=null,kd=!1,e)throw Error(X(300));return t}function Iv(){var t=Du!==0;return Du=0,t}function Pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?rt.memoizedState=At=t:At=At.next=t,At}function rr(){if(Et===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=At===null?rt.memoizedState:At.next;if(e!==null)At=e,Et=t;else{if(t===null)throw Error(X(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},At===null?rt.memoizedState=At=t:At=At.next=t}return At}function Mu(t,e){return typeof e=="function"?e(t):e}function og(t){var e=rr(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((to&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,rt.lanes|=h,no|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Cr(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rt.lanes|=s,no|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ag(t){var e=rr(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cr(s,e.memoizedState)||(mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eR(){}function tR(t,e){var n=rt,r=rr(),i=e(),s=!Cr(r.memoizedState,i);if(s&&(r.memoizedState=i,mn=!0),r=r.queue,Cv(iR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Lu(9,rR.bind(null,n,r,i,e),void 0,null),Ot===null)throw Error(X(349));to&30||nR(n,e,i)}return i}function nR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rR(t,e,n,r){e.value=n,e.getSnapshot=r,sR(e)&&oR(t)}function iR(t,e,n){return n(function(){sR(e)&&oR(t)})}function sR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cr(t,n)}catch(r){return!0}}function oR(t){var e=mi(t,1);e!==null&&Er(e,t,1,-1)}function xT(t){var e=Pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:t},e.queue=t,t=t.dispatch=y2.bind(null,rt,t),[e.memoizedState,t]}function Lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aR(){return rr().memoizedState}function qh(t,e,n,r){var i=Pr();rt.flags|=t,i.memoizedState=Lu(1|e,n,void 0,r===void 0?null:r)}function jf(t,e,n,r){var i=rr();r=r===void 0?null:r;var s=void 0;if(Et!==null){var o=Et.memoizedState;if(s=o.destroy,r!==null&&Tv(r,o.deps)){i.memoizedState=Lu(e,n,s,r);return}}rt.flags|=t,i.memoizedState=Lu(1|e,n,s,r)}function NT(t,e){return qh(8390656,8,t,e)}function Cv(t,e){return jf(2048,8,t,e)}function lR(t,e){return jf(4,2,t,e)}function uR(t,e){return jf(4,4,t,e)}function cR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hR(t,e,n){return n=n!=null?n.concat([t]):null,jf(4,4,cR.bind(null,e,t),n)}function bv(){}function dR(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fR(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pR(t,e,n){return to&21?(Cr(n,e)||(n=vb(),rt.lanes|=n,no|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function m2(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=sg.transition;sg.transition={};try{t(!1),e()}finally{De=n,sg.transition=r}}function mR(){return rr().memoizedState}function g2(t,e,n){var r=rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gR(t))yR(e,n);else if(n=Xb(t,e,n,r),n!==null){var i=an();Er(n,t,r,i),_R(n,e,r)}}function y2(t,e,n){var r=rs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gR(t))yR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Cr(a,o)){var l=e.interleaved;l===null?(i.next=i,yv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch(c){}finally{}n=Xb(t,e,i,r),n!==null&&(i=an(),Er(n,t,r,i),_R(n,e,r))}}function gR(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function yR(t,e){ru=kd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _R(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}var Ad={readContext:nr,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},_2={readContext:nr,useCallback:function(t,e){return Pr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:NT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qh(4194308,4,cR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qh(4194308,4,t,e)},useInsertionEffect:function(t,e){return qh(4,2,t,e)},useMemo:function(t,e){var n=Pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=g2.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=Pr();return t={current:t},e.memoizedState=t},useState:xT,useDebugValue:bv,useDeferredValue:function(t){return Pr().memoizedState=t},useTransition:function(){var t=xT(!1),e=t[0];return t=m2.bind(null,t[1]),Pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=Pr();if(Ze){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ot===null)throw Error(X(349));to&30||nR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,NT(iR.bind(null,r,s,t),[t]),r.flags|=2048,Lu(9,rR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Pr(),e=Ot.identifierPrefix;if(Ze){var n=ri,r=ni;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=p2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v2={readContext:nr,useCallback:dR,useContext:nr,useEffect:Cv,useImperativeHandle:hR,useInsertionEffect:lR,useLayoutEffect:uR,useMemo:fR,useReducer:og,useRef:aR,useState:function(){return og(Mu)},useDebugValue:bv,useDeferredValue:function(t){var e=rr();return pR(e,Et.memoizedState,t)},useTransition:function(){var t=og(Mu)[0],e=rr().memoizedState;return[t,e]},useMutableSource:eR,useSyncExternalStore:tR,useId:mR,unstable_isNewReconciler:!1},w2={readContext:nr,useCallback:dR,useContext:nr,useEffect:Cv,useImperativeHandle:hR,useInsertionEffect:lR,useLayoutEffect:uR,useMemo:fR,useReducer:ag,useRef:aR,useState:function(){return ag(Mu)},useDebugValue:bv,useDeferredValue:function(t){var e=rr();return Et===null?e.memoizedState=t:pR(e,Et.memoizedState,t)},useTransition:function(){var t=ag(Mu)[0],e=rr().memoizedState;return[t,e]},useMutableSource:eR,useSyncExternalStore:tR,useId:mR,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ty(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zf={isMounted:function(t){return(t=t._reactInternals)?yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),i=rs(t),s=ci(r,i);s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,i),e!==null&&(Er(e,t,i,r),Bh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),i=rs(t),s=ci(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ts(t,s,i),e!==null&&(Er(e,t,i,r),Bh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=rs(t),i=ci(n,r);i.tag=2,e!=null&&(i.callback=e),e=ts(t,i,r),e!==null&&(Er(e,t,r,n),Bh(e,t,r))}};function OT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ku(n,r)||!ku(i,s):!0}function vR(t,e,n){var r=!1,i=hs,s=e.contextType;return typeof s=="object"&&s!==null?s=nr(s):(i=_n(e)?Zs:tn.current,r=e.contextTypes,s=(r=r!=null)?Ta(t,i):hs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function DT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zf.enqueueReplaceState(e,e.state,null)}function Sy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_v(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nr(s):(s=_n(e)?Zs:tn.current,i.context=Ta(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ty(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zf.enqueueReplaceState(i,i.state,null),bd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ba(t,e){try{var n="",r=e;do n+=KD(r),r=r.return;while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:i,digest:null}}function lg(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Iy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var E2=typeof WeakMap=="function"?WeakMap:Map;function wR(t,e,n){n=ci(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xd||(xd=!0,Dy=r),Iy(t,e)},n}function ER(t,e,n){n=ci(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Iy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Iy(t,e),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new E2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=M2.bind(null,t,e,n),e.then(t,t))}function LT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function FT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ci(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var T2=Ci.ReactCurrentOwner,mn=!1;function sn(t,e,n,r){e.child=t===null?Yb(e,null,n,r):Ia(e,t.child,n,r)}function VT(t,e,n,r,i){n=n.render;var s=e.ref;return ca(e,i),r=Sv(t,e,n,r,s,i),n=Iv(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gi(t,e,i)):(Ze&&n&&hv(e),e.flags|=1,sn(t,e,r,i),e.child)}function $T(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,TR(t,e,s,r,i)):(t=Qh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(o,r)&&t.ref===e.ref)return gi(t,e,i)}return e.flags|=1,t=is(s,r),t.ref=e.ref,t.return=e,e.child=t}function TR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ku(s,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,gi(t,e,i)}return Cy(t,e,n,r,i)}function SR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(ea,kn),kn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qe(ea,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,qe(ea,kn),kn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,qe(ea,kn),kn|=r;return sn(t,e,i,n),e.child}function IR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cy(t,e,n,r,i){var s=_n(n)?Zs:tn.current;return s=Ta(e,s),ca(e,i),n=Sv(t,e,n,r,s,i),r=Iv(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gi(t,e,i)):(Ze&&r&&hv(e),e.flags|=1,sn(t,e,n,i),e.child)}function UT(t,e,n,r,i){if(_n(n)){var s=!0;Ed(e)}else s=!1;if(ca(e,i),e.stateNode===null)Hh(t,e),vR(e,n,r),Sy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nr(c):(c=_n(n)?Zs:tn.current,c=Ta(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&DT(e,o,r,c),Fi=!1;var p=e.memoizedState;o.state=p,bd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||yn.current||Fi?(typeof h=="function"&&(Ty(e,n,h,r),l=e.memoizedState),(a=Fi||OT(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fr(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nr(l):(l=_n(n)?Zs:tn.current,l=Ta(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&DT(e,o,r,l),Fi=!1,p=e.memoizedState,o.state=p,bd(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||yn.current||Fi?(typeof g=="function"&&(Ty(e,n,g,r),y=e.memoizedState),(c=Fi||OT(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return by(t,e,n,r,s,i)}function by(t,e,n,r,i,s){IR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&CT(e,n,!1),gi(t,e,s);r=e.stateNode,T2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ia(e,t.child,null,s),e.child=Ia(e,null,a,s)):sn(t,e,a,s),e.memoizedState=r.state,i&&CT(e,n,!0),e.child}function CR(t){var e=t.stateNode;e.pendingContext?IT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IT(t,e.context,!1),vv(t,e.containerInfo)}function jT(t,e,n,r,i){return Sa(),fv(i),e.flags|=256,sn(t,e,n,r),e.child}var Ry={dehydrated:null,treeContext:null,retryLane:0};function ky(t){return{baseLanes:t,cachePool:null,transitions:null}}function bR(t,e,n){var r=e.pendingProps,i=et.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),qe(et,i&1),t===null)return wy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qf(o,r,0,null),t=Qs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ky(n),e.memoizedState=Ry,t):Rv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return S2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=is(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=is(a,s):(s=Qs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ky(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ry,r}return s=t.child,t=s.sibling,r=is(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rv(t,e){return e=qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yh(t,e,n,r){return r!==null&&fv(r),Ia(e,t.child,null,n),t=Rv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function S2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=lg(Error(X(422))),yh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qf({mode:"visible",children:r.children},i,0,null),s=Qs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ia(e,t.child,null,o),e.child.memoizedState=ky(o),e.memoizedState=Ry,s);if(!(e.mode&1))return yh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=lg(s,r,void 0),yh(t,e,o,r)}if(a=(o&t.childLanes)!==0,mn||a){if(r=Ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mi(t,i),Er(r,t,i,-1))}return Ov(),r=lg(Error(X(421))),yh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=L2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pn=es(i.nextSibling),On=e,Ze=!0,mr=null,t!==null&&(Kn[Qn++]=ni,Kn[Qn++]=ri,Kn[Qn++]=eo,ni=t.id,ri=t.overflow,eo=e),e=Rv(e,r.children),e.flags|=4096,e)}function zT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ey(t.return,e,n)}function ug(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function RR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sn(t,e,r.children,n),r=et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zT(t,n,e);else if(t.tag===19)zT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qe(et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ug(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ug(e,!0,n,null,s);break;case"together":ug(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function I2(t,e,n){switch(e.tag){case 3:CR(e),Sa();break;case 5:Zb(e);break;case 1:_n(e.type)&&Ed(e);break;case 4:vv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;qe(Id,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qe(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?bR(t,e,n):(qe(et,et.current&1),t=gi(t,e,n),t!==null?t.sibling:null);qe(et,et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qe(et,et.current),r)break;return null;case 22:case 23:return e.lanes=0,SR(t,e,n)}return gi(t,e,n)}var kR,Ay,AR,PR;kR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ay=function(){};AR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zs(Lr.current);var s=null;switch(n){case"input":i=Xg(t,i),r=Xg(t,r),s=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),s=[];break;case"textarea":i=ey(t,i),r=ey(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vd)}ny(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Eu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};PR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nl(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function C2(t,e,n){var r=e.pendingProps;switch(dv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return _n(e.type)&&wd(),Qt(e),null;case 3:return r=e.stateNode,Ca(),Xe(yn),Xe(tn),Ev(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(Fy(mr),mr=null))),Ay(t,e),Qt(e),null;case 5:wv(e);var i=zs(Ou.current);if(n=e.type,t!==null&&e.stateNode!=null)AR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Qt(e),null}if(t=zs(Lr.current),mh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Or]=e,r[xu]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<Wl.length;i++)Qe(Wl[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":XE(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":ZE(r,s),Qe("invalid",r)}ny(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ph(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ph(r.textContent,a,t),i=["children",""+a]):Eu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":oh(r),JE(r,s,!0);break;case"textarea":oh(r),eT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ib(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Or]=e,t[xu]=r,kR(t,e,!1,!1),e.stateNode=t;e:{switch(o=ry(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wl.length;i++)Qe(Wl[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":XE(t,r),i=Xg(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":ZE(t,r),i=ey(t,r),Qe("invalid",t);break;default:i=r}ny(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ab(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Tu(t,l):typeof l=="number"&&Tu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&X_(t,s,l,o))}switch(n){case"input":oh(t),JE(t,r,!1);break;case"textarea":oh(t),eT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?oa(t,!!r.multiple,s,!1):r.defaultValue!=null&&oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)PR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=zs(Ou.current),zs(Lr.current),mh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Or]=e,(s=r.nodeValue!==n)&&(t=On,t!==null))switch(t.tag){case 3:ph(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ph(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Or]=e,e.stateNode=r}return Qt(e),null;case 13:if(Xe(et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Pn!==null&&e.mode&1&&!(e.flags&128))Kb(),Sa(),e.flags|=98560,s=!1;else if(s=mh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Or]=e}else Sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else mr!==null&&(Fy(mr),mr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?St===0&&(St=3):Ov())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Ca(),Ay(t,e),t===null&&Au(e.stateNode.containerInfo),Qt(e),null;case 10:return gv(e.type._context),Qt(e),null;case 17:return _n(e.type)&&wd(),Qt(e),null;case 19:if(Xe(et),s=e.memoizedState,s===null)return Qt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Nl(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rd(t),o!==null){for(e.flags|=128,Nl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qe(et,et.current&1|2),e.child}t=t.sibling}s.tail!==null&&ht()>Ra&&(e.flags|=128,r=!0,Nl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return Qt(e),null}else 2*ht()-s.renderingStartTime>Ra&&n!==1073741824&&(e.flags|=128,r=!0,Nl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,n=et.current,qe(et,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return Nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function b2(t,e){switch(dv(e),e.tag){case 1:return _n(e.type)&&wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ca(),Xe(yn),Xe(tn),Ev(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wv(e),null;case 13:if(Xe(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(et),null;case 4:return Ca(),null;case 10:return gv(e.type._context),null;case 22:case 23:return Nv(),null;case 24:return null;default:return null}}var _h=!1,Zt=!1,R2=typeof WeakSet=="function"?WeakSet:Set,re=null;function Zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ut(t,e,r)}else n.current=null}function Py(t,e,n){try{n()}catch(r){ut(t,e,r)}}var BT=!1;function k2(t,e){if(fy=gd,t=Mb(),cv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(P){n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(py={focusedElem:t,selectionRange:n},gd=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,C=y.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:fr(e.type,E),C);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(P){ut(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return y=BT,BT=!1,y}function iu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Py(e,n,s)}i=i.next}while(i!==r)}}function Bf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xR(t){var e=t.alternate;e!==null&&(t.alternate=null,xR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Or],delete e[xu],delete e[yy],delete e[c2],delete e[h2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NR(t){return t.tag===5||t.tag===3||t.tag===4}function WT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ny(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vd));else if(r!==4&&(t=t.child,t!==null))for(Ny(t,e,n),t=t.sibling;t!==null;)Ny(t,e,n),t=t.sibling}function Oy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oy(t,e,n),t=t.sibling;t!==null;)Oy(t,e,n),t=t.sibling}var $t=null,pr=!1;function Di(t,e,n){for(n=n.child;n!==null;)OR(t,e,n),n=n.sibling}function OR(t,e,n){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(Mf,n)}catch(a){}switch(n.tag){case 5:Zt||Zo(n,e);case 6:var r=$t,i=pr;$t=null,Di(t,e,n),$t=r,pr=i,$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$t.removeChild(n.stateNode));break;case 18:$t!==null&&(pr?(t=$t,n=n.stateNode,t.nodeType===8?ng(t.parentNode,n):t.nodeType===1&&ng(t,n),bu(t)):ng($t,n.stateNode));break;case 4:r=$t,i=pr,$t=n.stateNode.containerInfo,pr=!0,Di(t,e,n),$t=r,pr=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Py(n,e,o),i=i.next}while(i!==r)}Di(t,e,n);break;case 1:if(!Zt&&(Zo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ut(n,e,a)}Di(t,e,n);break;case 21:Di(t,e,n);break;case 22:n.mode&1?(Zt=(r=Zt)||n.memoizedState!==null,Di(t,e,n),Zt=r):Di(t,e,n);break;default:Di(t,e,n)}}function qT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new R2),e.forEach(function(r){var i=F2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$t=a.stateNode,pr=!1;break e;case 3:$t=a.stateNode.containerInfo,pr=!0;break e;case 4:$t=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if($t===null)throw Error(X(160));OR(s,o,i),$t=null,pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DR(e,t),e=e.sibling}function DR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dr(e,t),Ar(t),r&4){try{iu(3,t,t.return),Bf(3,t)}catch(E){ut(t,t.return,E)}try{iu(5,t,t.return)}catch(E){ut(t,t.return,E)}}break;case 1:dr(e,t),Ar(t),r&512&&n!==null&&Zo(n,n.return);break;case 5:if(dr(e,t),Ar(t),r&512&&n!==null&&Zo(n,n.return),t.flags&32){var i=t.stateNode;try{Tu(i,"")}catch(E){ut(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nb(i,s),ry(a,o);var c=ry(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?ab(i,d):h==="dangerouslySetInnerHTML"?sb(i,d):h==="children"?Tu(i,d):X_(i,h,d,c)}switch(a){case"input":Jg(i,s);break;case"textarea":rb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?oa(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?oa(i,!!s.multiple,s.defaultValue,!0):oa(i,!!s.multiple,s.multiple?[]:"",!1))}i[xu]=s}catch(E){ut(t,t.return,E)}}break;case 6:if(dr(e,t),Ar(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ut(t,t.return,E)}}break;case 3:if(dr(e,t),Ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bu(e.containerInfo)}catch(E){ut(t,t.return,E)}break;case 4:dr(e,t),Ar(t);break;case 13:dr(e,t),Ar(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pv=ht())),r&4&&qT(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Zt=(c=Zt)||h,dr(e,t),Zt=c):dr(e,t),Ar(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(re=t,h=t.child;h!==null;){for(d=re=h;re!==null;){switch(p=re,g=p.child,p.tag){case 0:case 11:case 14:case 15:iu(4,p,p.return);break;case 1:Zo(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){ut(r,n,E)}}break;case 5:Zo(p,p.return);break;case 22:if(p.memoizedState!==null){GT(d);continue}}g!==null?(g.return=p,re=g):GT(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ob("display",o))}catch(E){ut(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){ut(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dr(e,t),Ar(t),r&4&&qT(t);break;case 21:break;default:dr(e,t),Ar(t)}}function Ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NR(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tu(i,""),r.flags&=-33);var s=WT(t);Oy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=WT(t);Ny(t,a,o);break;default:throw Error(X(161))}}catch(l){ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A2(t,e,n){re=t,MR(t)}function MR(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_h;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=_h;var c=Zt;if(_h=o,(Zt=l)&&!c)for(re=i;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?KT(i):l!==null?(l.return=o,re=l):KT(i);for(;s!==null;)re=s,MR(s),s=s.sibling;re=i,_h=a,Zt=c}HT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):HT(t)}}function HT(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Bf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&bu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Zt||e.flags&512&&xy(e)}catch(p){ut(e,e.return,p)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function GT(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function KT(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bf(4,e)}catch(l){ut(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ut(e,i,l)}}var s=e.return;try{xy(e)}catch(l){ut(e,s,l)}break;case 5:var o=e.return;try{xy(e)}catch(l){ut(e,o,l)}}}catch(l){ut(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var P2=Math.ceil,Pd=Ci.ReactCurrentDispatcher,kv=Ci.ReactCurrentOwner,Zn=Ci.ReactCurrentBatchConfig,ke=0,Ot=null,yt=null,zt=0,kn=0,ea=Ss(0),St=0,Fu=null,no=0,Wf=0,Av=0,su=null,dn=null,Pv=0,Ra=1/0,Jr=null,xd=!1,Dy=null,ns=null,vh=!1,Gi=null,Nd=0,ou=0,My=null,Gh=-1,Kh=0;function an(){return ke&6?ht():Gh!==-1?Gh:Gh=ht()}function rs(t){return t.mode&1?ke&2&&zt!==0?zt&-zt:f2.transition!==null?(Kh===0&&(Kh=vb()),Kh):(t=De,t!==0||(t=window.event,t=t===void 0?16:bb(t.type)),t):1}function Er(t,e,n,r){if(50<ou)throw ou=0,My=null,Error(X(185));dc(t,n,r),(!(ke&2)||t!==Ot)&&(t===Ot&&(!(ke&2)&&(Wf|=n),St===4&&ji(t,zt)),vn(t,r),n===1&&ke===0&&!(e.mode&1)&&(Ra=ht()+500,Uf&&Is()))}function vn(t,e){var n=t.callbackNode;fM(t,e);var r=md(t,t===Ot?zt:0);if(r===0)n!==null&&rT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rT(n),e===1)t.tag===0?d2(QT.bind(null,t)):qb(QT.bind(null,t)),l2(function(){!(ke&6)&&Is()}),n=null;else{switch(wb(r)){case 1:n=nv;break;case 4:n=yb;break;case 16:n=pd;break;case 536870912:n=_b;break;default:n=pd}n=BR(n,LR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LR(t,e){if(Gh=-1,Kh=0,ke&6)throw Error(X(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var r=md(t,t===Ot?zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Od(t,r);else{e=r;var i=ke;ke|=2;var s=VR();(Ot!==t||zt!==e)&&(Jr=null,Ra=ht()+500,Ks(t,e));do try{O2();break}catch(a){FR(t,a)}while(!0);mv(),Pd.current=s,ke=i,yt!==null?e=0:(Ot=null,zt=0,e=St)}if(e!==0){if(e===2&&(i=ly(t),i!==0&&(r=i,e=Ly(t,i))),e===1)throw n=Fu,Ks(t,0),ji(t,r),vn(t,ht()),n;if(e===6)ji(t,r);else{if(i=t.current.alternate,!(r&30)&&!x2(i)&&(e=Od(t,r),e===2&&(s=ly(t),s!==0&&(r=s,e=Ly(t,s))),e===1))throw n=Fu,Ks(t,0),ji(t,r),vn(t,ht()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Ds(t,dn,Jr);break;case 3:if(ji(t,r),(r&130023424)===r&&(e=Pv+500-ht(),10<e)){if(md(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gy(Ds.bind(null,t,dn,Jr),e);break}Ds(t,dn,Jr);break;case 4:if(ji(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P2(r/1960))-r,10<r){t.timeoutHandle=gy(Ds.bind(null,t,dn,Jr),r);break}Ds(t,dn,Jr);break;case 5:Ds(t,dn,Jr);break;default:throw Error(X(329))}}}return vn(t,ht()),t.callbackNode===n?LR.bind(null,t):null}function Ly(t,e){var n=su;return t.current.memoizedState.isDehydrated&&(Ks(t,e).flags|=256),t=Od(t,e),t!==2&&(e=dn,dn=n,e!==null&&Fy(e)),t}function Fy(t){dn===null?dn=t:dn.push.apply(dn,t)}function x2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cr(s(),i))return!1}catch(o){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ji(t,e){for(e&=~Av,e&=~Wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function QT(t){if(ke&6)throw Error(X(327));ha();var e=md(t,0);if(!(e&1))return vn(t,ht()),null;var n=Od(t,e);if(t.tag!==0&&n===2){var r=ly(t);r!==0&&(e=r,n=Ly(t,r))}if(n===1)throw n=Fu,Ks(t,0),ji(t,e),vn(t,ht()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,dn,Jr),vn(t,ht()),null}function xv(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ra=ht()+500,Uf&&Is())}}function ro(t){Gi!==null&&Gi.tag===0&&!(ke&6)&&ha();var e=ke;ke|=1;var n=Zn.transition,r=De;try{if(Zn.transition=null,De=1,t)return t()}finally{De=r,Zn.transition=n,ke=e,!(ke&6)&&Is()}}function Nv(){kn=ea.current,Xe(ea)}function Ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,a2(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wd();break;case 3:Ca(),Xe(yn),Xe(tn),Ev();break;case 5:wv(r);break;case 4:Ca();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:gv(r.type._context);break;case 22:case 23:Nv()}n=n.return}if(Ot=t,yt=t=is(t.current,null),zt=kn=e,St=0,Fu=null,Av=Wf=no=0,dn=su=null,js!==null){for(e=0;e<js.length;e++)if(n=js[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}js=null}return t}function FR(t,e){do{var n=yt;try{if(mv(),Wh.current=Ad,kd){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kd=!1}if(to=0,At=Et=rt=null,ru=!1,Du=0,kv.current=null,n===null||n.return===null){St=1,Fu=e,yt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=LT(o);if(g!==null){g.flags&=-257,FT(g,o,a,s,e),g.mode&1&&MT(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var E=new Set;E.add(l),e.updateQueue=E}else y.add(l);break e}else{if(!(e&1)){MT(s,c,e),Ov();break e}l=Error(X(426))}}else if(Ze&&a.mode&1){var C=LT(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),FT(C,o,a,s,e),fv(ba(l,a));break e}}s=l=ba(l,a),St!==4&&(St=2),su===null?su=[s]:su.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=wR(s,l,e);AT(s,v);break e;case 1:a=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ns===null||!ns.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=ER(s,a,e);AT(s,P);break e}}s=s.return}while(s!==null)}UR(n)}catch(O){e=O,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function VR(){var t=Pd.current;return Pd.current=Ad,t===null?Ad:t}function Ov(){(St===0||St===3||St===2)&&(St=4),Ot===null||!(no&268435455)&&!(Wf&268435455)||ji(Ot,zt)}function Od(t,e){var n=ke;ke|=2;var r=VR();(Ot!==t||zt!==e)&&(Jr=null,Ks(t,e));do try{N2();break}catch(i){FR(t,i)}while(!0);if(mv(),ke=n,Pd.current=r,yt!==null)throw Error(X(261));return Ot=null,zt=0,St}function N2(){for(;yt!==null;)$R(yt)}function O2(){for(;yt!==null&&!iM();)$R(yt)}function $R(t){var e=zR(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?UR(t):yt=e,kv.current=null}function UR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=b2(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,yt=null;return}}else if(n=C2(n,e,kn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);St===0&&(St=5)}function Ds(t,e,n){var r=De,i=Zn.transition;try{Zn.transition=null,De=1,D2(t,e,n,r)}finally{Zn.transition=i,De=r}return null}function D2(t,e,n,r){do ha();while(Gi!==null);if(ke&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(pM(t,s),t===Ot&&(yt=Ot=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vh||(vh=!0,BR(pd,function(){return ha(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zn.transition,Zn.transition=null;var o=De;De=1;var a=ke;ke|=4,kv.current=null,k2(t,n),DR(n,t),e2(py),gd=!!fy,py=fy=null,t.current=n,A2(n),sM(),ke=a,De=o,Zn.transition=s}else t.current=n;if(vh&&(vh=!1,Gi=t,Nd=i),s=t.pendingLanes,s===0&&(ns=null),lM(n.stateNode),vn(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xd)throw xd=!1,t=Dy,Dy=null,t;return Nd&1&&t.tag!==0&&ha(),s=t.pendingLanes,s&1?t===My?ou++:(ou=0,My=t):ou=0,Is(),null}function ha(){if(Gi!==null){var t=wb(Nd),e=Zn.transition,n=De;try{if(Zn.transition=null,De=16>t?16:t,Gi===null)var r=!1;else{if(t=Gi,Gi=null,Nd=0,ke&6)throw Error(X(331));var i=ke;for(ke|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(re=c;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:iu(8,h,s)}var d=h.child;if(d!==null)d.return=h,re=d;else for(;re!==null;){h=re;var p=h.sibling,g=h.return;if(xR(h),h===c){re=null;break}if(p!==null){p.return=g,re=p;break}re=g}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:iu(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,re=v;break e}re=s.return}}var _=t.current;for(re=_;re!==null;){o=re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,re=w;else e:for(o=_;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bf(9,a)}}catch(O){ut(a,a.return,O)}if(a===o){re=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,re=P;break e}re=a.return}}if(ke=i,Is(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(Mf,t)}catch(O){}r=!0}return r}finally{De=n,Zn.transition=e}}return!1}function YT(t,e,n){e=ba(n,e),e=wR(t,e,1),t=ts(t,e,1),e=an(),t!==null&&(dc(t,1,e),vn(t,e))}function ut(t,e,n){if(t.tag===3)YT(t,t,n);else for(;e!==null;){if(e.tag===3){YT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){t=ba(n,t),t=ER(e,t,1),e=ts(e,t,1),t=an(),e!==null&&(dc(e,1,t),vn(e,t));break}}e=e.return}}function M2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&(zt&n)===n&&(St===4||St===3&&(zt&130023424)===zt&&500>ht()-Pv?Ks(t,0):Av|=n),vn(t,e)}function jR(t,e){e===0&&(t.mode&1?(e=uh,uh<<=1,!(uh&130023424)&&(uh=4194304)):e=1);var n=an();t=mi(t,e),t!==null&&(dc(t,e,n),vn(t,n))}function L2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jR(t,n)}function F2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),jR(t,n)}var zR;zR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,I2(t,e,n);mn=!!(t.flags&131072)}else mn=!1,Ze&&e.flags&1048576&&Hb(e,Sd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hh(t,e),t=e.pendingProps;var i=Ta(e,tn.current);ca(e,n),i=Sv(null,e,r,t,i,n);var s=Iv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(s=!0,Ed(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_v(e),i.updater=zf,e.stateNode=i,i._reactInternals=e,Sy(e,r,t,n),e=by(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&hv(e),sn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$2(r),t=fr(r,t),i){case 0:e=Cy(null,e,r,t,n);break e;case 1:e=UT(null,e,r,t,n);break e;case 11:e=VT(null,e,r,t,n);break e;case 14:e=$T(null,e,r,fr(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Cy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),UT(t,e,r,i,n);case 3:e:{if(CR(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Jb(t,e),bd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ba(Error(X(423)),e),e=jT(t,e,r,n,i);break e}else if(r!==i){i=ba(Error(X(424)),e),e=jT(t,e,r,n,i);break e}else for(Pn=es(e.stateNode.containerInfo.firstChild),On=e,Ze=!0,mr=null,n=Yb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sa(),r===i){e=gi(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return Zb(e),t===null&&wy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,my(r,i)?o=null:s!==null&&my(r,s)&&(e.flags|=32),IR(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&wy(e),null;case 13:return bR(t,e,n);case 4:return vv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ia(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),VT(t,e,r,i,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,qe(Id,r._currentValue),r._currentValue=o,s!==null)if(Cr(s.value,o)){if(s.children===i.children&&!yn.current){e=gi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ci(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ey(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ey(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ca(e,n),i=nr(i),r=r(i),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,i=fr(r,e.pendingProps),i=fr(r.type,i),$T(t,e,r,i,n);case 15:return TR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fr(r,i),Hh(t,e),e.tag=1,_n(r)?(t=!0,Ed(e)):t=!1,ca(e,n),vR(e,r,i),Sy(e,r,i,n),by(null,e,r,!0,t,n);case 19:return RR(t,e,n);case 22:return SR(t,e,n)}throw Error(X(156,e.tag))};function BR(t,e){return gb(t,e)}function V2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,r){return new V2(t,e,n,r)}function Dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $2(t){if(typeof t=="function")return Dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Z_)return 11;if(t===ev)return 14}return 2}function is(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wo:return Qs(n.children,i,s,e);case J_:o=8,i|=8;break;case Gg:return t=Xn(12,n,e,i|2),t.elementType=Gg,t.lanes=s,t;case Kg:return t=Xn(13,n,e,i),t.elementType=Kg,t.lanes=s,t;case Qg:return t=Xn(19,n,e,i),t.elementType=Qg,t.lanes=s,t;case ZC:return qf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case XC:o=10;break e;case JC:o=9;break e;case Z_:o=11;break e;case ev:o=14;break e;case Li:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qs(t,e,n,r){return t=Xn(7,t,r,e),t.lanes=n,t}function qf(t,e,n,r){return t=Xn(22,t,r,e),t.elementType=ZC,t.lanes=n,t.stateNode={isHidden:!1},t}function cg(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function hg(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function U2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qm(0),this.expirationTimes=qm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mv(t,e,n,r,i,s,o,a,l){return t=new U2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(s),t}function j2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WR(t){if(!t)return hs;t=t._reactInternals;e:{if(yo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(_n(n))return Wb(t,n,e)}return e}function qR(t,e,n,r,i,s,o,a,l){return t=Mv(n,r,!0,t,i,s,o,a,l),t.context=WR(null),n=t.current,r=an(),i=rs(n),s=ci(r,i),s.callback=e!=null?e:null,ts(n,s,i),t.current.lanes=i,dc(t,i,r),vn(t,r),t}function Hf(t,e,n,r){var i=e.current,s=an(),o=rs(i);return n=WR(n),e.context===null?e.context=n:e.pendingContext=n,e=ci(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ts(i,e,o),t!==null&&(Er(t,i,o,s),Bh(t,i,o)),o}function Dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){XT(t,e),(t=t.alternate)&&XT(t,e)}function z2(){return null}var HR=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fv(t){this._internalRoot=t}Gf.prototype.render=Fv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Hf(t,e,null,null)};Gf.prototype.unmount=Fv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){Hf(null,t,null,null)}),e[pi]=null}};function Gf(t){this._internalRoot=t}Gf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ui.length&&e!==0&&e<Ui[n].priority;n++);Ui.splice(n,0,t),n===0&&Cb(t)}};function Vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JT(){}function B2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Dd(o);s.call(c)}}var o=qR(e,r,t,0,null,!1,!1,"",JT);return t._reactRootContainer=o,t[pi]=o.current,Au(t.nodeType===8?t.parentNode:t),ro(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Dd(l);a.call(c)}}var l=Mv(t,0,!1,null,null,!1,!1,"",JT);return t._reactRootContainer=l,t[pi]=l.current,Au(t.nodeType===8?t.parentNode:t),ro(function(){Hf(e,l,n,r)}),l}function Qf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Dd(o);a.call(l)}}Hf(e,o,t,i)}else o=B2(n,e,t,i,r);return Dd(o)}Eb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&(rv(e,n|1),vn(e,ht()),!(ke&6)&&(Ra=ht()+500,Is()))}break;case 13:ro(function(){var r=mi(t,1);if(r!==null){var i=an();Er(r,t,1,i)}}),Lv(t,1)}};iv=function(t){if(t.tag===13){var e=mi(t,134217728);if(e!==null){var n=an();Er(e,t,134217728,n)}Lv(t,134217728)}};Tb=function(t){if(t.tag===13){var e=rs(t),n=mi(t,e);if(n!==null){var r=an();Er(n,t,e,r)}Lv(t,e)}};Sb=function(){return De};Ib=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};sy=function(t,e,n){switch(e){case"input":if(Jg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$f(r);if(!i)throw Error(X(90));tb(r),Jg(r,i)}}}break;case"textarea":rb(t,n);break;case"select":e=n.value,e!=null&&oa(t,!!n.multiple,e,!1)}};cb=xv;hb=ro;var W2={usingClientEntryPoint:!1,Events:[pc,Ko,$f,lb,ub,xv]},Ol={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q2={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||z2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{Mf=wh.inject(q2),Mr=wh}catch(t){}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W2;$n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(X(200));return j2(t,e,null,n)};$n.createRoot=function(t,e){if(!Vv(t))throw Error(X(299));var n=!1,r="",i=HR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mv(t,1,!1,null,null,n,!1,r,i),t[pi]=e.current,Au(t.nodeType===8?t.parentNode:t),new Fv(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=pb(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return ro(t)};$n.hydrate=function(t,e,n){if(!Kf(e))throw Error(X(200));return Qf(null,t,e,!0,n)};$n.hydrateRoot=function(t,e,n){if(!Vv(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=HR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qR(e,null,t,1,n!=null?n:null,i,!1,s,o),t[pi]=e.current,Au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gf(e)};$n.render=function(t,e,n){if(!Kf(e))throw Error(X(200));return Qf(null,t,e,!1,n)};$n.unmountComponentAtNode=function(t){if(!Kf(t))throw Error(X(40));return t._reactRootContainer?(ro(function(){Qf(null,null,t,!1,function(){t._reactRootContainer=null,t[pi]=null})}),!0):!1};$n.unstable_batchedUpdates=xv;$n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Qf(t,e,n,!1,r)};$n.version="18.3.1-next-f1338f8080-20240426";function GR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GR)}catch(t){console.error(t)}}GR(),GC.exports=$n;var $v=GC.exports;const Eh=MC($v);var ZT=$v;qg.createRoot=ZT.createRoot,qg.hydrateRoot=ZT.hydrateRoot;var e1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J=function(t,e){if(!t)throw Ya(e)},Ya=function(t){return new Error("Firebase Database ("+KR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},H2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):H2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new G2;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class G2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YR=function(t){const e=QR(t);return Uv.encodeByteArray(e,!0)},Md=function(t){return YR(t).replace(/\./g,"")},Ld=function(t){try{return Uv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){return XR(void 0,t)}function XR(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Q2(n)||(t[n]=XR(t[n],e[n]));return t}function Q2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=()=>Y2().__FIREBASE_DEFAULTS__,J2=()=>{if(typeof process>"u"||typeof e1>"u")return;const t=e1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&Ld(t[1]);return e&&JSON.parse(e)},Yf=()=>{try{return X2()||J2()||Z2()}catch(t){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t));return}},JR=t=>{var e,n;return(n=(e=Yf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZR=t=>{const e=JR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ek=()=>{var t;return(t=Yf())===null||t===void 0?void 0:t.config},tk=t=>{var e;return(e=Yf())===null||e===void 0?void 0:e["_".concat(t)]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(r),aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Md(JSON.stringify(n)),Md(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function eL(){var t;const e=(t=Yf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function rk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ik(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tL(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sk(){return KR.NODE_ADMIN===!0}function nL(){return!eL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ok(){try{return typeof indexedDB=="object"}catch(t){return!1}}function ak(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function rL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iL,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}}class _o{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i="".concat(this.service,"/").concat(e),s=this.errors[e],o=s?sL(s,r):"Error",a="".concat(this.serviceName,": ").concat(o," (").concat(i,").");return new kr(i,a,r)}}function sL(t,e){return t.replace(oL,(n,r)=>{const i=e[r];return i!=null?String(i):"<".concat(r,"?>")})}const oL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return JSON.parse(t)}function Tt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Vu(Ld(s[0])||""),n=Vu(Ld(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},aL=function(t){const e=lk(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},lL=function(t){const e=lk(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ka(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Fd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function $u(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(t1(s)&&t1(o)){if(!$u(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function t1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function cL(t,e){const n=new hL(t,e);return n.subscribe.bind(n)}class hL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dg),i.error===void 0&&(i.error=dg),i.complete===void 0&&(i.complete=dg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dg(){}function Aa(t,e){return"".concat(t," failed: ").concat(e," argument ")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,J(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Xf=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=1e3,mL=2,gL=4*60*60*1e3,yL=.5;function n1(t,e=pL,n=mL){const r=e*Math.pow(n,t),i=Math.round(yL*r*(Math.random()-.5)*2);return Math.min(gL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _L=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Dr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(wL(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vL(t){return t===Ms?void 0:t}function wL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _L(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const TL={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},SL=Ie.INFO,IL={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},CL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=IL[e];if(i)console[i]("[".concat(r,"]  ").concat(t.name,":"),...n);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))};class gc{constructor(e){this.name=e,this._logLevel=SL,this._logHandler=CL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const bL=(t,e)=>e.some(n=>t instanceof n);let r1,i1;function RL(){return r1||(r1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kL(){return i1||(i1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uk=new WeakMap,Vy=new WeakMap,ck=new WeakMap,fg=new WeakMap,zv=new WeakMap;function AL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ss(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uk.set(n,t)}).catch(()=>{}),zv.set(e,t),e}function PL(t){if(Vy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Vy.set(t,e)}let $y={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ck.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xL(t){$y=t($y)}function NL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pg(this),e,...n);return ck.set(r,e.sort?e.sort():[e]),ss(r)}:kL().includes(t)?function(...e){return t.apply(pg(this),e),ss(uk.get(this))}:function(...e){return ss(t.apply(pg(this),e))}}function OL(t){return typeof t=="function"?NL(t):(t instanceof IDBTransaction&&PL(t),bL(t,RL())?new Proxy(t,$y):t)}function ss(t){if(t instanceof IDBRequest)return AL(t);if(fg.has(t))return fg.get(t);const e=OL(t);return e!==t&&(fg.set(t,e),zv.set(e,t)),e}const pg=t=>zv.get(t);function hk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ss(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ss(o.result),l.oldVersion,l.newVersion,ss(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const DL=["get","getKey","getAll","getAllKeys","count"],ML=["put","add","delete","clear"],mg=new Map;function s1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ML.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return mg.set(e,s),s}xL(t=>({...t,get:(e,n,r)=>s1(e,n)||t.get(e,n,r),has:(e,n)=>!!s1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FL(n)){const r=n.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(n=>n).join(" ")}}function FL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uy="@firebase/app",o1="0.10.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new gc("@firebase/app"),VL="@firebase/app-compat",$L="@firebase/analytics-compat",UL="@firebase/analytics",jL="@firebase/app-check-compat",zL="@firebase/app-check",BL="@firebase/auth",WL="@firebase/auth-compat",qL="@firebase/database",HL="@firebase/database-compat",GL="@firebase/functions",KL="@firebase/functions-compat",QL="@firebase/installations",YL="@firebase/installations-compat",XL="@firebase/messaging",JL="@firebase/messaging-compat",ZL="@firebase/performance",eF="@firebase/performance-compat",tF="@firebase/remote-config",nF="@firebase/remote-config-compat",rF="@firebase/storage",iF="@firebase/storage-compat",sF="@firebase/firestore",oF="@firebase/vertexai-preview",aF="@firebase/firestore-compat",lF="firebase",uF="10.12.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",cF={[Uy]:"fire-core",[VL]:"fire-core-compat",[UL]:"fire-analytics",[$L]:"fire-analytics-compat",[zL]:"fire-app-check",[jL]:"fire-app-check-compat",[BL]:"fire-auth",[WL]:"fire-auth-compat",[qL]:"fire-rtdb",[HL]:"fire-rtdb-compat",[GL]:"fire-fn",[KL]:"fire-fn-compat",[QL]:"fire-iid",[YL]:"fire-iid-compat",[XL]:"fire-fcm",[JL]:"fire-fcm-compat",[ZL]:"fire-perf",[eF]:"fire-perf-compat",[tF]:"fire-rc",[nF]:"fire-rc-compat",[rF]:"fire-gcs",[iF]:"fire-gcs-compat",[sF]:"fire-fst",[aF]:"fire-fst-compat",[oF]:"fire-vertex","fire-js":"fire-js",[lF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Map,hF=new Map,zy=new Map;function a1(t,e){try{t.container.addComponent(e)}catch(n){io.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function br(t){const e=t.name;if(zy.has(e))return io.debug("There were multiple attempts to register component ".concat(e,".")),!1;zy.set(e,t);for(const n of $d.values())a1(n,t);for(const n of hF.values())a1(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new _o("app","Firebase",dF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=uF;function dk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw os.create("bad-app-name",{appName:String(i)});if(n||(n=ek()),!n)throw os.create("no-options");const s=$d.get(i);if(s){if($u(n,s.options)&&$u(r,s.config))return s;throw os.create("duplicate-app",{appName:i})}const o=new EL(i);for(const l of zy.values())o.addComponent(l);const a=new fF(n,r,o);return $d.set(i,a),a}function Jf(t=jy){const e=$d.get(t);if(!e&&t===jy&&ek())return dk();if(!e)throw os.create("no-app",{appName:t});return e}function wn(t,e,n){var r;let i=(r=cF[t])!==null&&r!==void 0?r:t;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];s&&a.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&a.push("and"),o&&a.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),io.warn(a.join(" "));return}br(new ir("".concat(i,"-version"),()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="firebase-heartbeat-database",mF=1,Uu="firebase-heartbeat-store";let gg=null;function fk(){return gg||(gg=hk(pF,mF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),gg}async function gF(t){try{const n=(await fk()).transaction(Uu),r=await n.objectStore(Uu).get(pk(t));return await n.done,r}catch(e){if(e instanceof kr)io.warn(e.message);else{const n=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(n.message)}}}async function l1(t,e){try{const r=(await fk()).transaction(Uu,"readwrite");await r.objectStore(Uu).put(e,pk(t)),await r.done}catch(n){if(n instanceof kr)io.warn(n.message);else{const r=os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});io.warn(r.message)}}}function pk(t){return"".concat(t.name,"!").concat(t.options.appId)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=1024,_F=30*24*60*60*1e3;class vF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=u1();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_F}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u1(),{heartbeatsToSend:r,unsentEntries:i}=wF(this._heartbeatsCache.heartbeats),s=Md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function u1(){return new Date().toISOString().substring(0,10)}function wF(t,e=yF){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),c1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),c1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ok()?ak().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return l1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return l1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function c1(t){return Md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t){br(new ir("platform-logger",e=>new LL(e),"PRIVATE")),br(new ir("heartbeat",e=>new vF(e),"PRIVATE")),wn(Uy,o1,t),wn(Uy,o1,"esm2017"),wn("fire-js","")}TF("");var SF="firebase",IF="10.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(SF,IF,"app");function Bv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CF=mk,gk=new _o("auth","Firebase",mk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new gc("@firebase/auth");function bF(t,...e){Ud.logLevel<=Ie.WARN&&Ud.warn("Auth (".concat(vo,"): ").concat(t),...e)}function Yh(t,...e){Ud.logLevel<=Ie.ERROR&&Ud.error("Auth (".concat(vo,"): ").concat(t),...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,...e){throw qv(t,...e)}function Tr(t,...e){return qv(t,...e)}function Wv(t,e,n){const r=Object.assign(Object.assign({},CF()),{[e]:n});return new _o("auth","Firebase",r).create(e,{appName:t.name})}function Ys(t){return Wv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Br(t,"argument-error"),Wv(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gk.create(t,...e)}function fe(t,e,...n){if(!t)throw qv(e,...n)}function si(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yh(e),new Error(e)}function yi(t,e){t||si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kF(){return h1()==="http:"||h1()==="https:"}function h1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kF()||rk()||"connection"in navigator)?navigator.onLine:!0}function PF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,yi(n>e,"Short delay should be less than long delay!"),this.isMobile=jv()||ik()}get(){return AF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e){yi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=new yc(3e4,6e4);function Gv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ja(t,e,n,r,i={}){return _k(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Xa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),yk.fetch()(vk(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function _k(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xF),e);try{const i=new DF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Th(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Th(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Th(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Wv(t,h,c);Br(t,h)}}catch(i){if(i instanceof kr)throw i;Br(t,"network-request-failed",{message:String(i)})}}async function OF(t,e,n,r,i={}){const s=await Ja(t,e,n,r,i);return"mfaPendingCredential"in s&&Br(t,"multi-factor-auth-required",{_serverResponse:s}),s}function vk(t,e,n,r){const i="".concat(e).concat(n,"?").concat(r);return t.config.emulator?Hv(t.config,i):"".concat(t.config.apiScheme,"://").concat(i)}class DF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tr(this.auth,"network-request-failed")),NF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Th(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(t,e){return Ja(t,"POST","/v1/accounts:delete",e)}async function wk(t,e){return Ja(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function LF(t,e=!1){const n=Me(t),r=await n.getIdToken(e),i=Kv(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:au(yg(i.auth_time)),issuedAtTime:au(yg(i.iat)),expirationTime:au(yg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yg(t){return Number(t)*1e3}function Kv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ld(n);return i?JSON.parse(i):(Yh("Failed to decode base64 JWT payload"),null)}catch(i){return Yh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function d1(t){const e=Kv(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&FF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ju(t,wk(n,{idToken:r}));fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ek(s.providerUserInfo):[],a=UF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wy(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function $F(t){const e=Me(t);await jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ek(t){return t.map(e=>{var{providerId:n}=e,r=Bv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(t,e){const n=await _k(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vk(t,i,"/v1/token","key=".concat(s)),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yk.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zF(t,e){return Ja(t,"POST","/v2/accounts:revokeToken",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=d1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await jF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new da;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ju(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LF(this,e)}reload(){return $F(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(Ys(this.auth));const e=await this.getIdToken();return await ju(this,MF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:P,isAnonymous:O,providerData:L,stsTokenManager:S}=n;fe(w&&S,e,"internal-error");const T=da.fromJSON(this.name,S);fe(typeof w=="string",e,"internal-error"),Mi(d,e.name),Mi(p,e.name),fe(typeof P=="boolean",e,"internal-error"),fe(typeof O=="boolean",e,"internal-error"),Mi(g,e.name),Mi(y,e.name),Mi(E,e.name),Mi(C,e.name),Mi(v,e.name),Mi(_,e.name);const b=new oi({uid:w,auth:e,email:p,emailVerified:P,displayName:d,isAnonymous:O,photoURL:y,phoneNumber:g,tenantId:E,stsTokenManager:T,createdAt:v,lastLoginAt:_});return L&&Array.isArray(L)&&(b.providerData=L.map(R=>Object.assign({},R))),C&&(b._redirectEventId=C),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new da;i.updateFromServerResponse(n);const s=new oi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Ek(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new da;a.updateFromIdToken(r);const l=new oi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map;function ai(t){yi(t instanceof Function,"Expected a class definition");let e=f1.get(t);return e?(yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tk.type="NONE";const p1=Tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e,n){return"firebase:".concat(t,":").concat(e,":").concat(n)}class fa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?oi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fa(ai(p1),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ai(p1);const o=Xh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=oi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch(h){}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch(h){}})),new fa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ck(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rk(e))return"Blackberry";if(kk(e))return"Webos";if(Qv(e))return"Safari";if((e.includes("chrome/")||Ik(e))&&!e.includes("edge/"))return"Chrome";if(bk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Sk(t=qt()){return/firefox\//i.test(t)}function Qv(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ik(t=qt()){return/crios\//i.test(t)}function Ck(t=qt()){return/iemobile/i.test(t)}function bk(t=qt()){return/android/i.test(t)}function Rk(t=qt()){return/blackberry/i.test(t)}function kk(t=qt()){return/webos/i.test(t)}function Zf(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BF(t=qt()){var e;return Zf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WF(){return tL()&&document.documentMode===10}function Ak(t=qt()){return Zf(t)||bk(t)||kk(t)||Rk(t)||/windows phone/i.test(t)||Ck(t)}function qF(){try{return!!(window&&window!==window.top)}catch(t){return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e=[]){let n;switch(t){case"Browser":n=m1(qt());break;case"Worker":n="".concat(m1(qt()),"-").concat(t);break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return"".concat(n,"/JsCore/").concat(vo,"/").concat(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(s){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(t,e={}){return Ja(t,"GET","/v2/passwordPolicy",Gv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=6;class QF{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g1(this),this.idTokenSubscription=new g1(this),this.beforeStateQueue=new HF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ai(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wk(this,{idToken:e}),r=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ii(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(Ys(this));const n=e?Me(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(Ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(Ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GF(this),n=new QF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _o("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ai(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bF("Error while retrieving App Check token: ".concat(n.error)),n==null?void 0:n.token}}function ep(t){return Me(t)}class g1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cL(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XF(t){Yv=t}function JF(t){return Yv.loadJS(t)}function ZF(){return Yv.gapiScript}function eV(t){return"__".concat(t).concat(Math.floor(Math.random()*1e6))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($u(s,e!=null?e:{}))return i;Br(i,"already-initialized")}return n.initialize({options:e})}function nV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rV(t,e,n){const r=ep(t);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=xk(e),{host:o,port:a}=iV(e),l=a===null?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),sV()}function xk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iV(t){const e=xk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:y1(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:y1(o)}}}function y1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,n){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(t,e){return OF(t,"POST","/v1/accounts:signInWithIdp",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="http://localhost";class so extends Nk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Bv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new so(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return pa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pa(e,n)}buildRequest(){const e={requestUri:oV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends _c{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch(n){return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return so._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ti.credential(n,r)}catch(i){return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends _c{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch(n){return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends _c{constructor(){super("twitter.com")}static credential(e,n){return so._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Wi.credential(n,r)}catch(i){return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await oi._fromIdTokenResponse(e,r,i),o=_1(r);return new Pa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_1(r);return new Pa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends kr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zd(e,n,r,i)}}function Ok(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(t,s,e,r):s})}async function aV(t,e,n=!1){const r=await ju(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(t,e,n=!1){const{auth:r}=t;if(ii(r.app))return Promise.reject(Ys(r));const i="reauthenticate";try{const s=await ju(t,Ok(r,i,e,t),n);fe(s.idToken,r,"internal-error");const o=Kv(s.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),Pa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Br(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(t,e,n=!1){if(ii(t.app))return Promise.reject(Ys(t));const r="signIn",i=await Ok(t,r,e),s=await Pa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function cV(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function hV(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function dV(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function fV(t){return Me(t).signOut()}const Bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bd,"1"),this.storage.removeItem(Bd),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(){const t=qt();return Qv(t)||Zf(t)}const mV=1e3,gV=10;class Mk extends Dk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pV()&&qF(),this.fallbackToPolling=Ak(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);WF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,gV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mk.type="LOCAL";const yV=Mk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk extends Dk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lk.type="SESSION";const Fk=Lk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new tp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await _V(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function wV(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function EV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function TV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SV(){return Vk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="firebaseLocalStorageDb",IV=1,Wd="firebaseLocalStorage",Uk="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function np(t,e){return t.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function CV(){const t=indexedDB.deleteDatabase($k);return new vc(t).toPromise()}function qy(){const t=indexedDB.open($k,IV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wd,{keyPath:Uk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wd)?e(r):(r.close(),await CV(),e(await qy()))})})}async function v1(t,e,n){const r=np(t,!0).put({[Uk]:e,value:n});return new vc(r).toPromise()}async function bV(t,e){const n=np(t,!1).get(e),r=await new vc(n).toPromise();return r===void 0?null:r.value}function w1(t,e){const n=np(t,!0).delete(e);return new vc(n).toPromise()}const RV=800,kV=3;class jk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(SV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await EV(),!this.activeServiceWorker)return;this.sender=new vV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qy();return await v1(e,Bd,"1"),await w1(e,Bd),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>v1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=np(i,!1).getAll();return new vc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jk.type="LOCAL";const AV=jk;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t,e){return e?ai(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Nk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PV(t){return uV(t.auth,new Zv(t),t.bypassAuthState)}function xV(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),lV(n,new Zv(t),t.bypassAuthState)}async function NV(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),aV(n,new Zv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PV;case"linkViaPopup":case"linkViaRedirect":return NV;case"reauthViaPopup":case"reauthViaRedirect":return xV;default:Br(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new yc(2e3,1e4);async function DV(t,e,n){if(ii(t.app))return Promise.reject(Tr(t,"operation-not-supported-in-this-environment"));const r=ep(t);RF(t,e,Xv);const i=zk(r,n);return new Bs(r,"signInViaPopup",e,i).executeNotNull()}class Bs extends Bk{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bs.currentPopupAction&&Bs.currentPopupAction.cancel(),Bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=Jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OV.get())};e()}}Bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="pendingRedirect",Jh=new Map;class LV extends Bk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{const r=await FV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FV(t,e){const n=UV(e),r=$V(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function VV(t,e){Jh.set(t._key(),e)}function $V(t){return ai(t._redirectPersistence)}function UV(t){return Xh(MV,t.config.apiKey,t.name)}async function jV(t,e,n=!1){if(ii(t.app))return Promise.reject(Ys(t));const r=ep(t),i=zk(r,e),o=await new LV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=10*60*1e3;class BV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Wk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zV&&this.cachedEventUids.clear(),this.cachedEventUids.has(E1(e))}saveEventToCache(e){this.cachedEventUids.add(E1(e)),this.lastProcessedEventTime=Date.now()}}function E1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Wk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t,e={}){return Ja(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GV=/^https?/;async function KV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qV(t);for(const n of e)try{if(QV(n))return}catch(r){}Br(t,"unauthorized-domain")}function QV(t){const e=By(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!GV.test(n))return!1;if(HV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=new yc(3e4,6e4);function T1(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XV(t){return new Promise((e,n)=>{var r,i,s;function o(){T1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T1(),n(Tr(t,"network-request-failed"))},timeout:YV.get()})}if(!((i=(r=Fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fr().gapi)===null||s===void 0)&&s.load)o();else{const a=eV("iframefcb");return Fr()[a]=()=>{gapi.load?o():n(Tr(t,"network-request-failed"))},JF("".concat(ZF(),"?onload=").concat(a)).catch(l=>n(l))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function JV(t){return Zh=Zh||XV(t),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new yc(5e3,15e3),e4="__/auth/iframe",t4="emulator/auth/iframe",n4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i4(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hv(e,t4):"https://".concat(t.config.authDomain,"/").concat(e4),r={apiKey:e.apiKey,appName:t.name,v:vo},i=r4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Xa(r).slice(1))}async function s4(t){const e=await JV(t),n=Fr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:i4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Tr(t,"network-request-failed"),a=Fr().setTimeout(()=>{s(o)},ZV.get());function l(){Fr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a4=500,l4=600,u4="_blank",c4="http://localhost";class S1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function h4(t,e,n,r=a4,i=l4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},o4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=qt().toLowerCase();n&&(a=Ik(c)?u4:n),Sk(c)&&(e=e||c4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>"".concat(p).concat(g,"=").concat(y,","),"");if(BF(c)&&a!=="_self")return d4(e||"",a),new S1(null);const d=window.open(e||"",a,h);fe(d,t,"popup-blocked");try{d.focus()}catch(p){}return new S1(d)}function d4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="__/auth/handler",p4="emulator/auth/handler",m4=encodeURIComponent("fac");async function I1(t,e,n,r,i,s){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vo,eventId:i};if(e instanceof Xv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Fd(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof _c){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?"#".concat(m4,"=").concat(encodeURIComponent(l)):"";return"".concat(g4(t),"?").concat(Xa(a).slice(1)).concat(c)}function g4({config:t}){return t.emulator?Hv(t,p4):"https://".concat(t.authDomain,"/").concat(f4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="webStorageSupport";class y4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fk,this._completeRedirectFn=jV,this._overrideRedirectResult=VV}async _openPopup(e,n,r,i){var s;yi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await I1(e,n,r,By(),i);return h4(e,o,Jv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await I1(e,n,r,By(),i);return wV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(yi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await s4(e),r=new BV(e);return n.register("authEvent",i=>(fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_g,{type:_g},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[_g];o!==void 0&&n(!!o),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ak()||Qv()||Zf()}}const _4=y4;var C1="@firebase/auth",b1="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E4(t){br(new ir("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pk(t)},c=new YF(r,i,s,l);return nV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),br(new ir("auth-internal",e=>{const n=ep(e.getProvider("auth").getImmediate());return(r=>new v4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(C1,b1,w4(t)),wn(C1,b1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=5*60,S4=tk("authIdTokenMaxAge")||T4;let R1=null;const I4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>S4)return;const i=n==null?void 0:n.token;R1!==i&&(R1=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function C4(t=Jf()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=tV(t,{popupRedirectResolver:_4,persistence:[AV,yV,Fk]}),r=tk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=I4(s.toString());hV(n,o,()=>o(n.currentUser)),cV(n,a=>o(a))}}const i=JR("auth");return i&&rV(n,"http://".concat(i)),n}function b4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Tr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",b4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E4("Browser");/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const R4={};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function Sh(t){return Object.isFrozen(t)&&Object.isFrozen(t.raw)}function Ih(t){return t.toString().indexOf("`")===-1}var TC,SC,IC,CC;Ih(t=>t(TC||(TC=hn([""]))))||Ih(t=>t(SC||(SC=hn(["\0"],["\\0"]))))||Ih(t=>t(IC||(IC=hn(["\n"],["\\n"]))))||Ih(t=>t(CC||(CC=hn(["\0"],["\\u0000"]))));var bC,RC,kC,AC;Sh(bC||(bC=hn([""])))&&Sh(RC||(RC=hn(["\0"],["\\0"])))&&Sh(kC||(kC=hn(["\n"],["\\n"])))&&Sh(AC||(AC=hn(["\0"],["\\u0000"])));/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */let qk="google#safe";function k4(){if(typeof window<"u")return window.trustedTypes}function Hk(){var t;return qk!==""&&(t=k4())!==null&&t!==void 0?t:null}let Ch;function A4(){var t,e;if(Ch===void 0)try{Ch=(e=(t=Hk())===null||t===void 0?void 0:t.createPolicy(qk,{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n}))!==null&&e!==void 0?e:null}catch(n){Ch=null}return Ch}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */class Gk{constructor(e,n){this.privateDoNotAccessOrElseWrappedResourceUrl=e}toString(){return this.privateDoNotAccessOrElseWrappedResourceUrl.toString()}}function k1(t){var e;const n=t,r=(e=A4())===null||e===void 0?void 0:e.createScriptURL(n);return r!=null?r:new Gk(n,R4)}function P4(t){var e;if(!((e=Hk())===null||e===void 0)&&e.isScriptURL(t))return t;if(t instanceof Gk)return t.privateDoNotAccessOrElseWrappedResourceUrl;{let n="";throw new Error(n)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function x4(t,...e){if(e.length===0)return k1(t[0]);t[0].toLowerCase();let n=t[0];for(let r=0;r<e.length;r++)n+=encodeURIComponent(e[r])+t[r+1];return k1(n)}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function N4(t){return O4("script",t)}function O4(t,e){var n;const r=e.document,i=(n=r.querySelector)===null||n===void 0?void 0:n.call(r,"".concat(t,"[nonce]"));return i&&(i.nonce||i.getAttribute("nonce"))||""}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function D4(t){const e=t.ownerDocument&&t.ownerDocument.defaultView,n=N4(e||window);n&&t.setAttribute("nonce",n)}function M4(t,e,n){t.src=P4(e),D4(t)}const Kk="@firebase/installations",e0="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=1e4,Yk="w:".concat(e0),Xk="FIS_v2",L4="https://firebaseinstallations.googleapis.com/v1",F4=60*60*1e3,V4="installations",$4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oo=new _o(V4,$4,U4);function Jk(t){return t instanceof kr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk({projectId:t}){return"".concat(L4,"/projects/").concat(t,"/installations")}function eA(t){return{token:t.token,requestStatus:2,expiresIn:z4(t.expiresIn),creationTime:Date.now()}}async function tA(t,e){const r=(await e.json()).error;return oo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function j4(t,{refreshToken:e}){const n=nA(t);return n.append("Authorization",B4(e)),n}async function rA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function z4(t){return Number(t.replace("s","000"))}function B4(t){return"".concat(Xk," ").concat(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Zk(t),i=nA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:Xk,appId:t.appId,sdkVersion:Yk},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await rA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:eA(c.authToken)}}else throw await tA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^[cdef][\w-]{21}$/,Hy="";function G4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=K4(t);return H4.test(n)?n:Hy}catch(t){return Hy}}function K4(t){return q4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t){return"".concat(t.appName,"!").concat(t.appId)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Map;function oA(t,e){const n=rp(t);aA(n,e),Q4(n,e)}function aA(t,e){const n=sA.get(t);if(n)for(const r of n)r(e)}function Q4(t,e){const n=Y4();n&&n.postMessage({key:t,fid:e}),X4()}let Ws=null;function Y4(){return!Ws&&"BroadcastChannel"in self&&(Ws=new BroadcastChannel("[Firebase] FID Change"),Ws.onmessage=t=>{aA(t.data.key,t.data.fid)}),Ws}function X4(){sA.size===0&&Ws&&(Ws.close(),Ws=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="firebase-installations-database",Z4=1,ao="firebase-installations-store";let vg=null;function t0(){return vg||(vg=hk(J4,Z4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ao)}}})),vg}async function qd(t,e){const n=rp(t),i=(await t0()).transaction(ao,"readwrite"),s=i.objectStore(ao),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&oA(t,e.fid),e}async function lA(t){const e=rp(t),r=(await t0()).transaction(ao,"readwrite");await r.objectStore(ao).delete(e),await r.done}async function ip(t,e){const n=rp(t),i=(await t0()).transaction(ao,"readwrite"),s=i.objectStore(ao),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&oA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n0(t){let e;const n=await ip(t.appConfig,r=>{const i=e$(r),s=t$(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Hy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function e$(t){const e=t||{fid:G4(),registrationStatus:0};return uA(e)}function t$(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(oo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=n$(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:r$(t)}:{installationEntry:e}}async function n$(t,e){try{const n=await W4(t,e);return qd(t.appConfig,n)}catch(n){throw Jk(n)&&n.customData.serverCode===409?await lA(t.appConfig):await qd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function r$(t){let e=await A1(t.appConfig);for(;e.registrationStatus===1;)await iA(100),e=await A1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await n0(t);return r||n}return e}function A1(t){return ip(t,e=>{if(!e)throw oo.create("installation-not-found");return uA(e)})}function uA(t){return i$(t)?{fid:t.fid,registrationStatus:0}:t}function i$(t){return t.registrationStatus===1&&t.registrationTime+Qk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s$({appConfig:t,heartbeatServiceProvider:e},n){const r=o$(t,n),i=j4(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:Yk,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await rA(()=>fetch(r,a));if(l.ok){const c=await l.json();return eA(c)}else throw await tA("Generate Auth Token",l)}function o$(t,{fid:e}){return"".concat(Zk(t),"/").concat(e,"/authTokens:generate")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0(t,e=!1){let n;const r=await ip(t.appConfig,s=>{if(!cA(s))throw oo.create("not-registered");const o=s.authToken;if(!e&&u$(o))return s;if(o.requestStatus===1)return n=a$(t,e),s;{if(!navigator.onLine)throw oo.create("app-offline");const a=h$(s);return n=l$(t,a),a}});return n?await n:r.authToken}async function a$(t,e){let n=await P1(t.appConfig);for(;n.authToken.requestStatus===1;)await iA(100),n=await P1(t.appConfig);const r=n.authToken;return r.requestStatus===0?r0(t,e):r}function P1(t){return ip(t,e=>{if(!cA(e))throw oo.create("not-registered");const n=e.authToken;return d$(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function l$(t,e){try{const n=await s$(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await qd(t.appConfig,r),n}catch(n){if(Jk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qd(t.appConfig,r)}throw n}}function cA(t){return t!==void 0&&t.registrationStatus===2}function u$(t){return t.requestStatus===2&&!c$(t)}function c$(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+F4}function h$(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function d$(t){return t.requestStatus===1&&t.requestTime+Qk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f$(t){const e=t,{installationEntry:n,registrationPromise:r}=await n0(e);return r?r.catch(console.error):r0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p$(t,e=!1){const n=t;return await m$(n),(await r0(n,e)).token}async function m$(t){const{registrationPromise:e}=await n0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t){if(!t||!t.options)throw wg("App Configuration");if(!t.name)throw wg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function wg(t){return oo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="installations",y$="installations-internal",_$=t=>{const e=t.getProvider("app").getImmediate(),n=g$(e),r=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},v$=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,hA).getImmediate();return{getId:()=>f$(n),getToken:i=>p$(n,i)}};function w$(){br(new ir(hA,_$,"PUBLIC")),br(new ir(y$,v$,"PRIVATE"))}w$();wn(Kk,e0);wn(Kk,e0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="analytics",E$="firebase_id",T$="origin",S$=60*1e3,I$="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",C$="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new gc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}var PC;function b$(t,e){const n=document.createElement("script"),r=x4(PC||(PC=hn(["https://www.googletagmanager.com/gtag/js?l=","&id=",""])),t,e);M4(n,r),n.async=!0,document.head.appendChild(n)}function R$(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function k$(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await dA(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Dn.error(a)}t("config",i,s)}async function A$(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await dA(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Dn.error(s)}}function P$(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await A$(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await k$(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Dn.error(a)}}return i}function x$(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=P$(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function N$(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(C$)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},er=new _o("analytics","Analytics",O$);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=30,M$=1e3;class L${constructor(e={},n=M$){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fA=new L$;function F$(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function V$(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:F$(r)},s=I$.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch(l){}throw er.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function $$(t,e=fA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw er.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw er.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new z$;return setTimeout(async()=>{a.abort()},S$),pA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function pA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=fA){var s;const{appId:o,measurementId:a}=t;try{await U$(r,e)}catch(l){if(a)return Dn.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(a)+' provided in the "measurementId" field in the local Firebase config. ['.concat(l==null?void 0:l.message,"]")),{appId:o,measurementId:a};throw l}try{const l=await V$(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!j$(c)){if(i.deleteThrottleMetadata(o),a)return Dn.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(a)+' provided in the "measurementId" field in the local Firebase config. ['.concat(c==null?void 0:c.message,"]")),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?n1(n,i.intervalMillis,D$):n1(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,d),Dn.debug("Calling attemptFetch again in ".concat(h," millis")),pA(t,d,r,i)}}function U$(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function j$(t){if(!(t instanceof kr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class z${constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function B$(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W$(){if(ok())try{await ak()}catch(t){return Dn.warn(er.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Dn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function q$(t,e,n,r,i,s,o){var a;const l=$$(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Dn.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(g.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(g=>Dn.error(g)),e.push(l);const c=W$().then(g=>{if(g)return r.getId()}),[h,d]=await Promise.all([l,c]);N$(s)||b$(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[T$]="firebase",p.update=!0,d!=null&&(p[E$]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.app=e}_delete(){return delete lu[this.app.options.appId],Promise.resolve()}}let lu={},x1=[];const N1={};let Eg="dataLayer",G$="gtag",O1,mA,D1=!1;function K$(){const t=[];if(rk()&&t.push("This is a browser extension environment."),rL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>"(".concat(i+1,") ").concat(r)).join(" "),n=er.create("invalid-analytics-context",{errorInfo:e});Dn.warn(n.message)}}function Q$(t,e,n){K$();const r=t.options.appId;if(!r)throw er.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Dn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(t.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw er.create("no-api-key");if(lu[r]!=null)throw er.create("already-exists",{id:r});if(!D1){R$(Eg);const{wrappedGtag:s,gtagCore:o}=x$(lu,x1,N1,Eg,G$);mA=s,O1=o,D1=!0}return lu[r]=q$(t,x1,N1,e,O1,Eg,n),new H$(t)}function Y$(t=Jf()){t=Me(t);const e=Cs(t,Hd);return e.isInitialized()?e.getImmediate():X$(t)}function X$(t,e={}){const n=Cs(t,Hd);if(n.isInitialized()){const i=n.getImmediate();if($u(e,n.getOptions()))return i;throw er.create("already-initialized")}return n.initialize({options:e})}function J$(t,e,n,r){t=Me(t),B$(mA,lu[t.app.options.appId],e,n,r).catch(i=>Dn.error(i))}const M1="@firebase/analytics",L1="0.10.6";function Z$(){br(new ir(Hd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Q$(r,i,n)},"PUBLIC")),br(new ir("analytics-internal",t,"PRIVATE")),wn(M1,L1),wn(M1,L1,"esm2017");function t(e){try{const n=e.getProvider(Hd).getImmediate();return{logEvent:(r,i,s)=>J$(n,r,i,s)}}catch(n){throw er.create("interop-component-reg-failed",{reason:n})}}}Z$();var F1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,gA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.D=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(R,x,N){for(var A=Array(arguments.length-2),V=2;V<arguments.length;V++)A[V-2]=arguments[V];return T.prototype[x].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,b){b||(b=0);var R=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)R[x]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(x=0;16>x;++x)R[x]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],x=S.g[2];var N=S.g[3],A=T+(N^b&(x^N))+R[0]+3614090360&4294967295;T=b+(A<<7&4294967295|A>>>25),A=N+(x^T&(b^x))+R[1]+3905402710&4294967295,N=T+(A<<12&4294967295|A>>>20),A=x+(b^N&(T^b))+R[2]+606105819&4294967295,x=N+(A<<17&4294967295|A>>>15),A=b+(T^x&(N^T))+R[3]+3250441966&4294967295,b=x+(A<<22&4294967295|A>>>10),A=T+(N^b&(x^N))+R[4]+4118548399&4294967295,T=b+(A<<7&4294967295|A>>>25),A=N+(x^T&(b^x))+R[5]+1200080426&4294967295,N=T+(A<<12&4294967295|A>>>20),A=x+(b^N&(T^b))+R[6]+2821735955&4294967295,x=N+(A<<17&4294967295|A>>>15),A=b+(T^x&(N^T))+R[7]+4249261313&4294967295,b=x+(A<<22&4294967295|A>>>10),A=T+(N^b&(x^N))+R[8]+1770035416&4294967295,T=b+(A<<7&4294967295|A>>>25),A=N+(x^T&(b^x))+R[9]+2336552879&4294967295,N=T+(A<<12&4294967295|A>>>20),A=x+(b^N&(T^b))+R[10]+4294925233&4294967295,x=N+(A<<17&4294967295|A>>>15),A=b+(T^x&(N^T))+R[11]+2304563134&4294967295,b=x+(A<<22&4294967295|A>>>10),A=T+(N^b&(x^N))+R[12]+1804603682&4294967295,T=b+(A<<7&4294967295|A>>>25),A=N+(x^T&(b^x))+R[13]+4254626195&4294967295,N=T+(A<<12&4294967295|A>>>20),A=x+(b^N&(T^b))+R[14]+2792965006&4294967295,x=N+(A<<17&4294967295|A>>>15),A=b+(T^x&(N^T))+R[15]+1236535329&4294967295,b=x+(A<<22&4294967295|A>>>10),A=T+(x^N&(b^x))+R[1]+4129170786&4294967295,T=b+(A<<5&4294967295|A>>>27),A=N+(b^x&(T^b))+R[6]+3225465664&4294967295,N=T+(A<<9&4294967295|A>>>23),A=x+(T^b&(N^T))+R[11]+643717713&4294967295,x=N+(A<<14&4294967295|A>>>18),A=b+(N^T&(x^N))+R[0]+3921069994&4294967295,b=x+(A<<20&4294967295|A>>>12),A=T+(x^N&(b^x))+R[5]+3593408605&4294967295,T=b+(A<<5&4294967295|A>>>27),A=N+(b^x&(T^b))+R[10]+38016083&4294967295,N=T+(A<<9&4294967295|A>>>23),A=x+(T^b&(N^T))+R[15]+3634488961&4294967295,x=N+(A<<14&4294967295|A>>>18),A=b+(N^T&(x^N))+R[4]+3889429448&4294967295,b=x+(A<<20&4294967295|A>>>12),A=T+(x^N&(b^x))+R[9]+568446438&4294967295,T=b+(A<<5&4294967295|A>>>27),A=N+(b^x&(T^b))+R[14]+3275163606&4294967295,N=T+(A<<9&4294967295|A>>>23),A=x+(T^b&(N^T))+R[3]+4107603335&4294967295,x=N+(A<<14&4294967295|A>>>18),A=b+(N^T&(x^N))+R[8]+1163531501&4294967295,b=x+(A<<20&4294967295|A>>>12),A=T+(x^N&(b^x))+R[13]+2850285829&4294967295,T=b+(A<<5&4294967295|A>>>27),A=N+(b^x&(T^b))+R[2]+4243563512&4294967295,N=T+(A<<9&4294967295|A>>>23),A=x+(T^b&(N^T))+R[7]+1735328473&4294967295,x=N+(A<<14&4294967295|A>>>18),A=b+(N^T&(x^N))+R[12]+2368359562&4294967295,b=x+(A<<20&4294967295|A>>>12),A=T+(b^x^N)+R[5]+4294588738&4294967295,T=b+(A<<4&4294967295|A>>>28),A=N+(T^b^x)+R[8]+2272392833&4294967295,N=T+(A<<11&4294967295|A>>>21),A=x+(N^T^b)+R[11]+1839030562&4294967295,x=N+(A<<16&4294967295|A>>>16),A=b+(x^N^T)+R[14]+4259657740&4294967295,b=x+(A<<23&4294967295|A>>>9),A=T+(b^x^N)+R[1]+2763975236&4294967295,T=b+(A<<4&4294967295|A>>>28),A=N+(T^b^x)+R[4]+1272893353&4294967295,N=T+(A<<11&4294967295|A>>>21),A=x+(N^T^b)+R[7]+4139469664&4294967295,x=N+(A<<16&4294967295|A>>>16),A=b+(x^N^T)+R[10]+3200236656&4294967295,b=x+(A<<23&4294967295|A>>>9),A=T+(b^x^N)+R[13]+681279174&4294967295,T=b+(A<<4&4294967295|A>>>28),A=N+(T^b^x)+R[0]+3936430074&4294967295,N=T+(A<<11&4294967295|A>>>21),A=x+(N^T^b)+R[3]+3572445317&4294967295,x=N+(A<<16&4294967295|A>>>16),A=b+(x^N^T)+R[6]+76029189&4294967295,b=x+(A<<23&4294967295|A>>>9),A=T+(b^x^N)+R[9]+3654602809&4294967295,T=b+(A<<4&4294967295|A>>>28),A=N+(T^b^x)+R[12]+3873151461&4294967295,N=T+(A<<11&4294967295|A>>>21),A=x+(N^T^b)+R[15]+530742520&4294967295,x=N+(A<<16&4294967295|A>>>16),A=b+(x^N^T)+R[2]+3299628645&4294967295,b=x+(A<<23&4294967295|A>>>9),A=T+(x^(b|~N))+R[0]+4096336452&4294967295,T=b+(A<<6&4294967295|A>>>26),A=N+(b^(T|~x))+R[7]+1126891415&4294967295,N=T+(A<<10&4294967295|A>>>22),A=x+(T^(N|~b))+R[14]+2878612391&4294967295,x=N+(A<<15&4294967295|A>>>17),A=b+(N^(x|~T))+R[5]+4237533241&4294967295,b=x+(A<<21&4294967295|A>>>11),A=T+(x^(b|~N))+R[12]+1700485571&4294967295,T=b+(A<<6&4294967295|A>>>26),A=N+(b^(T|~x))+R[3]+2399980690&4294967295,N=T+(A<<10&4294967295|A>>>22),A=x+(T^(N|~b))+R[10]+4293915773&4294967295,x=N+(A<<15&4294967295|A>>>17),A=b+(N^(x|~T))+R[1]+2240044497&4294967295,b=x+(A<<21&4294967295|A>>>11),A=T+(x^(b|~N))+R[8]+1873313359&4294967295,T=b+(A<<6&4294967295|A>>>26),A=N+(b^(T|~x))+R[15]+4264355552&4294967295,N=T+(A<<10&4294967295|A>>>22),A=x+(T^(N|~b))+R[6]+2734768916&4294967295,x=N+(A<<15&4294967295|A>>>17),A=b+(N^(x|~T))+R[13]+1309151649&4294967295,b=x+(A<<21&4294967295|A>>>11),A=T+(x^(b|~N))+R[4]+4149444226&4294967295,T=b+(A<<6&4294967295|A>>>26),A=N+(b^(T|~x))+R[11]+3174756917&4294967295,N=T+(A<<10&4294967295|A>>>22),A=x+(T^(N|~b))+R[2]+718787259&4294967295,x=N+(A<<15&4294967295|A>>>17),A=b+(N^(x|~T))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var b=T-this.blockSize,R=this.B,x=this.h,N=0;N<T;){if(x==0)for(;N<=b;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<T;)if(R[x++]=S.charCodeAt(N++),x==this.blockSize){i(this,R),x=0;break}}else for(;N<T;)if(R[x++]=S[N++],x==this.blockSize){i(this,R),x=0;break}}this.h=x,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var b=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=b&255,b/=256;for(this.u(S),S=Array(16),T=b=0;4>T;++T)for(var R=0;32>R;R+=8)S[b++]=this.g[T]>>>R&255;return S};function s(S,T){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function o(S,T){this.h=T;for(var b=[],R=!0,x=S.length-1;0<=x;x--){var N=S[x]|0;R&&N==T||(b[x]=N,R=!1)}this.g=b}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return C(c(-S));for(var T=[],b=1,R=0;S>=b;R++)T[R]=S/b|0,b*=4294967296;return new o(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return C(h(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(T,8)),R=d,x=0;x<S.length;x+=8){var N=Math.min(8,S.length-x),A=parseInt(S.substring(x,x+N),T);8>N?(N=c(Math.pow(T,N)),R=R.j(N).add(c(A))):(R=R.j(b),R=R.add(c(A)))}return R}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-C(this).m();for(var S=0,T=1,b=0;b<this.g.length;b++){var R=this.i(b);S+=(0<=R?R:4294967296+R)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(E(this))return"-"+C(this).toString(S);for(var T=c(Math.pow(S,6)),b=this,R="";;){var x=P(b,T).g;b=v(b,x.j(T));var N=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=x,y(b))return N+R;for(;6>N.length;)N="0"+N;R=N+R}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=v(this,S),E(S)?-1:y(S)?0:1};function C(S){for(var T=S.g.length,b=[],R=0;R<T;R++)b[R]=~S.g[R];return new o(b,~S.h).add(p)}t.abs=function(){return E(this)?C(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],R=0,x=0;x<=T;x++){var N=R+(this.i(x)&65535)+(S.i(x)&65535),A=(N>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);R=A>>>16,N&=65535,A&=65535,b[x]=A<<16|N}return new o(b,b[b.length-1]&-2147483648?-1:0)};function v(S,T){return S.add(C(T))}t.j=function(S){if(y(this)||y(S))return d;if(E(this))return E(S)?C(this).j(C(S)):C(C(this).j(S));if(E(S))return C(this.j(C(S)));if(0>this.l(g)&&0>S.l(g))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,b=[],R=0;R<2*T;R++)b[R]=0;for(R=0;R<this.g.length;R++)for(var x=0;x<S.g.length;x++){var N=this.i(R)>>>16,A=this.i(R)&65535,V=S.i(x)>>>16,W=S.i(x)&65535;b[2*R+2*x]+=A*W,_(b,2*R+2*x),b[2*R+2*x+1]+=N*W,_(b,2*R+2*x+1),b[2*R+2*x+1]+=A*V,_(b,2*R+2*x+1),b[2*R+2*x+2]+=N*V,_(b,2*R+2*x+2)}for(R=0;R<T;R++)b[R]=b[2*R+1]<<16|b[2*R];for(R=T;R<2*T;R++)b[R]=0;return new o(b,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function w(S,T){this.g=S,this.h=T}function P(S,T){if(y(T))throw Error("division by zero");if(y(S))return new w(d,d);if(E(S))return T=P(C(S),T),new w(C(T.g),C(T.h));if(E(T))return T=P(S,C(T)),new w(C(T.g),T.h);if(30<S.g.length){if(E(S)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var b=p,R=T;0>=R.l(S);)b=O(b),R=O(R);var x=L(b,1),N=L(R,1);for(R=L(R,2),b=L(b,2);!y(R);){var A=N.add(R);0>=A.l(S)&&(x=x.add(b),N=A),R=L(R,1),b=L(b,1)}return T=v(S,x.j(T)),new w(x,T)}for(x=d;0<=S.l(T);){for(b=Math.max(1,Math.floor(S.m()/T.m())),R=Math.ceil(Math.log(b)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),N=c(b),A=N.j(T);E(A)||0<A.l(S);)b-=R,N=c(b),A=N.j(T);y(N)&&(N=p),x=x.add(N),S=v(S,A)}return new w(x,S)}t.A=function(S){return P(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],R=0;R<T;R++)b[R]=this.i(R)&S.i(R);return new o(b,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],R=0;R<T;R++)b[R]=this.i(R)|S.i(R);return new o(b,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),b=[],R=0;R<T;R++)b[R]=this.i(R)^S.i(R);return new o(b,this.h^S.h)};function O(S){for(var T=S.g.length+1,b=[],R=0;R<T;R++)b[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(b,S.h)}function L(S,T){var b=T>>5;T%=32;for(var R=S.g.length-b,x=[],N=0;N<R;N++)x[N]=0<T?S.i(N+b)>>>T|S.i(N+b+1)<<32-T:S.i(N+b);return new o(x,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Xs=o}).apply(typeof F1<"u"?F1:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yA,_A,ql,vA,ed,Gy,wA,EA,TA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in m))break e;m=m[M]}u=u[u.length-1],I=m[u],f=f(I),f!=I&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,I=!1,M={next:function(){if(!I&&m<u.length){var F=m++;return{value:f(F,u[F]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(I,M,F){for(var Z=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Z[Ue-2]=arguments[Ue];return f.prototype[M].apply(I,Z)}}function E(u){const f=u.length;if(0<f){const m=Array(f);for(let I=0;I<f;I++)m[I]=u[I];return m}return[]}function C(u,f){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const M=u.length||0,F=I.length||0;u.length=M+F;for(let Z=0;Z<F;Z++)u[M+Z]=I[Z]}else u.push(I)}}class v{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function w(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function L(u,f,m){for(const I in u)f.call(m,u[I],I,u)}function S(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function T(u){const f={};for(const m in u)f[m]=u[m];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,f){let m,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(m in I)u[m]=I[m];for(let F=0;F<b.length;F++)m=b[F],Object.prototype.hasOwnProperty.call(I,m)&&(u[m]=I[m])}}function x(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function A(){var u=Q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class V{constructor(){this.h=this.g=null}add(f,m){const I=W.get();I.set(f,m),this.h?this.h.next=I:this.g=I,this.h=I}}var W=new v(()=>new z,u=>u.reset());class z{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,Q=new V,te=()=>{const u=a.Promise.resolve(void 0);B=()=>{u.then(G)}};var G=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(m){N(m)}var f=W;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}U=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch(m){}return u}();function ie(u,f){if(j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{P(f.nodeName);var M=!0;break e}catch(F){}M=!1}M||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ie.aa.h.call(this)}}y(ie,j);var ee={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),he=0;function ve(u,f,m,I,M){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!I,this.ha=M,this.key=++he,this.da=this.fa=!1}function le(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,f,m,I,M){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var Z=Ge(u,f,I,M);return-1<Z?(f=u[Z],m||(f.fa=!1)):(f=new ve(f,this.src,F,!!I,M),f.fa=m,u.push(f)),f};function Re(u,f){var m=f.type;if(m in u.g){var I=u.g[m],M=Array.prototype.indexOf.call(I,f,void 0),F;(F=0<=M)&&Array.prototype.splice.call(I,M,1),F&&(le(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ge(u,f,m,I){for(var M=0;M<u.length;++M){var F=u[M];if(!F.da&&F.listener==f&&F.capture==!!m&&F.ha==I)return M}return-1}var ce="closure_lm_"+(1e6*Math.random()|0),me={};function Bn(u,f,m,I,M){if(Array.isArray(f)){for(var F=0;F<f.length;F++)Bn(u,f[F],m,I,M);return null}return m=Ai(m),u&&u[ne]?u.K(f,m,c(I)?!!I.capture:!!I,M):hl(u,f,m,!1,I,M)}function hl(u,f,m,I,M,F){if(!f)throw Error("Invalid event type");var Z=c(M)?!!M.capture:!!M,Ue=cr(u);if(Ue||(u[ce]=Ue=new ue(u)),m=Ue.add(f,m,I,Z,F),m.proxy)return m;if(I=Ri(),m.proxy=I,I.src=u,I.listener=m,u.addEventListener)$||(M=Z),M===void 0&&(M=!1),u.addEventListener(f.toString(),I,M);else if(u.attachEvent)u.attachEvent(ur(f.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ri(){function u(m){return f.call(u.src,u.listener,m)}const f=qn;return u}function Kr(u,f,m,I,M){if(Array.isArray(f))for(var F=0;F<f.length;F++)Kr(u,f[F],m,I,M);else I=c(I)?!!I.capture:!!I,m=Ai(m),u&&u[ne]?(u=u.i,f=String(f).toString(),f in u.g&&(F=u.g[f],m=Ge(F,m,I,M),-1<m&&(le(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[f],u.h--)))):u&&(u=cr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Ge(f,m,I,M)),(m=-1<u?f[u]:null)&&Wn(m))}function Wn(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ne])Re(f.i,u);else{var m=u.type,I=u.proxy;f.removeEventListener?f.removeEventListener(m,I,u.capture):f.detachEvent?f.detachEvent(ur(m),I):f.addListener&&f.removeListener&&f.removeListener(I),(m=cr(f))?(Re(m,u),m.h==0&&(m.src=null,f[ce]=null)):le(u)}}}function ur(u){return u in me?me[u]:me[u]="on"+u}function qn(u,f){if(u.da)u=!0;else{f=new ie(f,this);var m=u.listener,I=u.ha||u.src;u.fa&&Wn(u),u=m.call(I,f)}return u}function cr(u){return u=u[ce],u instanceof ue?u:null}var ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ai(u){return typeof u=="function"?u:(u[ki]||(u[ki]=function(f){return u.handleEvent(f)}),u[ki])}function Ct(){H.call(this),this.i=new ue(this),this.M=this,this.F=null}y(Ct,H),Ct.prototype[ne]=!0,Ct.prototype.removeEventListener=function(u,f,m,I){Kr(this,u,f,m,I)};function bt(u,f){var m,I=u.F;if(I)for(m=[];I;I=I.F)m.push(I);if(u=u.M,I=f.type||f,typeof f=="string")f=new j(f,u);else if(f instanceof j)f.target=f.target||u;else{var M=f;f=new j(I,u),R(f,M)}if(M=!0,m)for(var F=m.length-1;0<=F;F--){var Z=f.g=m[F];M=bo(Z,I,!0,f)&&M}if(Z=f.g=u,M=bo(Z,I,!0,f)&&M,M=bo(Z,I,!1,f)&&M,m)for(F=0;F<m.length;F++)Z=f.g=m[F],M=bo(Z,I,!1,f)&&M}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],I=0;I<m.length;I++)le(m[I]);delete u.g[f],u.h--}}this.F=null},Ct.prototype.K=function(u,f,m,I){return this.i.add(String(u),f,!1,m,I)},Ct.prototype.L=function(u,f,m,I){return this.i.add(String(u),f,!0,m,I)};function bo(u,f,m,I){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,F=0;F<f.length;++F){var Z=f[F];if(Z&&!Z.da&&Z.capture==m){var Ue=Z.listener,Ft=Z.ha||Z.src;Z.fa&&Re(u.i,Z),M=Ue.call(Ft,I)!==!1&&M}}return M&&!I.defaultPrevented}function ye(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function dl(u){u.g=ye(()=>{u.g=null,u.i&&(u.i=!1,dl(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Tm extends H{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:dl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(u){H.call(this),this.h=u,this.g={}}y(Pi,H);var Sm=[];function Jw(u){L(u.g,function(f,m){this.g.hasOwnProperty(m)&&Wn(f)},u),u.g={}}Pi.prototype.N=function(){Pi.aa.N.call(this),Jw(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Im=a.JSON.stringify,KO=a.JSON.parse,QO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Cm(){}Cm.prototype.h=null;function Zw(u){return u.h||(u.h=u.i())}function eE(){}var fl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bm(){j.call(this,"d")}y(bm,j);function Rm(){j.call(this,"c")}y(Rm,j);var As={},tE=null;function Wc(){return tE=tE||new Ct}As.La="serverreachability";function nE(u){j.call(this,As.La,u)}y(nE,j);function pl(u){const f=Wc();bt(f,new nE(f))}As.STAT_EVENT="statevent";function rE(u,f){j.call(this,As.STAT_EVENT,u),this.stat=f}y(rE,j);function rn(u){const f=Wc();bt(f,new rE(f,u))}As.Ma="timingevent";function iE(u,f){j.call(this,As.Ma,u),this.size=f}y(iE,j);function ml(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function gl(){this.g=!0}gl.prototype.xa=function(){this.g=!1};function YO(u,f,m,I,M,F){u.info(function(){if(u.g)if(F)for(var Z="",Ue=F.split("&"),Ft=0;Ft<Ue.length;Ft++){var Ae=Ue[Ft].split("=");if(1<Ae.length){var Ht=Ae[0];Ae=Ae[1];var Gt=Ht.split("_");Z=2<=Gt.length&&Gt[1]=="type"?Z+(Ht+"="+Ae+"&"):Z+(Ht+"=redacted&")}}else Z=null;else Z=F;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+f+"\n"+m+"\n"+Z})}function XO(u,f,m,I,M,F,Z){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+f+"\n"+m+"\n"+F+" "+Z})}function Ro(u,f,m,I){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+ZO(u,m)+(I?" "+I:"")})}function JO(u,f){u.info(function(){return"TIMEOUT: "+f})}gl.prototype.info=function(){};function ZO(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var I=m[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Z=1;Z<M.length;Z++)M[Z]=""}}}}return Im(m)}catch(Ue){return f}}var qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},km;function Hc(){}y(Hc,Cm),Hc.prototype.g=function(){return new XMLHttpRequest},Hc.prototype.i=function(){return{}},km=new Hc;function xi(u,f,m,I){this.j=u,this.i=f,this.l=m,this.R=I||1,this.U=new Pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oE}function oE(){this.i=null,this.g="",this.h=!1}var aE={},Am={};function Pm(u,f,m){u.L=1,u.v=Yc(Qr(f)),u.m=m,u.P=!0,lE(u,null)}function lE(u,f){u.F=Date.now(),Gc(u),u.A=Qr(u.v);var m=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),TE(m.i,"t",I),u.C=0,m=u.j.J,u.h=new oE,u.g=UE(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Tm(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Sm[0]=M.toString()),M=Sm);for(var F=0;F<M.length;F++){var Z=Bn(m,M[F],I||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),pl(),YO(u.i,u.u,u.A,u.l,u.R,u.m)}xi.prototype.ca=function(u){u=u.target;const f=this.M;f&&Yr(u)==3?f.j():this.Y(u)},xi.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Yr(this.g);var f=this.g.Ba();const Po=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||AE(this.g)))){this.J||Gt!=4||f==7||(f==8||0>=Po?pl(3):pl(2)),xm(this);var m=this.g.Z();this.X=m;t:if(uE(this)){var I=AE(this.g);u="";var M=I.length,F=Yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ps(this),yl(this);var Z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(I[f],{stream:!(F&&f==M-1)});I.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,XO(this.i,this.u,this.A,this.l,this.R,Gt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Ft=this.g;if((Ue=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ue)){var Ae=Ue;break t}}Ae=null}if(m=Ae)Ro(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nm(this,m);else{this.o=!1,this.s=3,rn(12),Ps(this),yl(this);break e}}if(this.P){m=!0;let hr;for(;!this.J&&this.C<Z.length;)if(hr=eD(this,Z),hr==Am){Gt==4&&(this.s=4,rn(14),m=!1),Ro(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==aE){this.s=4,rn(15),Ro(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else Ro(this.i,this.l,hr,null),Nm(this,hr);if(uE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||Z.length!=0||this.h.h||(this.s=1,rn(16),m=!1),this.o=this.o&&m,!m)Ro(this.i,this.l,Z,"[Invalid Chunked Response]"),Ps(this),yl(this);else if(0<Z.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Vm(Ht),Ht.M=!0,rn(11))}}else Ro(this.i,this.l,Z,null),Nm(this,Z);Gt==4&&Ps(this),this.o&&!this.J&&(Gt==4?LE(this.j,this):(this.o=!1,Gc(this)))}else yD(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),Ps(this),yl(this)}}}catch(Gt){}finally{}};function uE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function eD(u,f){var m=u.C,I=f.indexOf("\n",m);return I==-1?Am:(m=Number(f.substring(m,I)),isNaN(m)?aE:(I+=1,I+m>f.length?Am:(f=f.slice(I,I+m),u.C=I+m,f)))}xi.prototype.cancel=function(){this.J=!0,Ps(this)};function Gc(u){u.S=Date.now()+u.I,cE(u,u.I)}function cE(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ml(p(u.ba,u),f)}function xm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}xi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(JO(this.i,this.A),this.L!=2&&(pl(),rn(17)),Ps(this),this.s=2,yl(this)):cE(this,this.S-u)};function yl(u){u.j.G==0||u.J||LE(u.j,u)}function Ps(u){xm(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Jw(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Nm(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Om(m.h,u))){if(!u.K&&Om(m.h,u)&&m.G==3){try{var I=m.Da.g.parse(f)}catch(Ae){I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)th(m),Zc(m);else break e;Fm(m),rn(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=ml(p(m.Za,m),6e3));if(1>=fE(m.h)&&m.ca){try{m.ca()}catch(Ae){}m.ca=void 0}}else Ns(m,11)}else if((u.K||m.g==u)&&th(m),!_(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let Ae=M[f];if(m.T=Ae[0],Ae=Ae[1],m.G==2)if(Ae[0]=="c"){m.K=Ae[1],m.ia=Ae[2];const Ht=Ae[3];Ht!=null&&(m.la=Ht,m.j.info("VER="+m.la));const Gt=Ae[4];Gt!=null&&(m.Aa=Gt,m.j.info("SVER="+m.Aa));const Po=Ae[5];Po!=null&&typeof Po=="number"&&0<Po&&(I=1.5*Po,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const hr=u.g;if(hr){const rh=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rh){var F=I.h;F.g||rh.indexOf("spdy")==-1&&rh.indexOf("quic")==-1&&rh.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Dm(F,F.h),F.h=null))}if(I.D){const $m=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;$m&&(I.ya=$m,Ke(I.I,I.D,$m))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var Z=u;if(I.qa=$E(I,I.J?I.ia:null,I.W),Z.K){pE(I.h,Z);var Ue=Z,Ft=I.L;Ft&&(Ue.I=Ft),Ue.B&&(xm(Ue),Gc(Ue)),I.g=Z}else DE(I);0<m.i.length&&eh(m)}else Ae[0]!="stop"&&Ae[0]!="close"||Ns(m,7);else m.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Ns(m,7):Lm(m):Ae[0]!="noop"&&m.l&&m.l.ta(Ae),m.v=0)}}pl(4)}catch(Ae){}}var tD=class{constructor(u,f){this.g=u,this.map=f}};function hE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fE(u){return u.h?1:u.g?u.g.size:0}function Om(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Dm(u,f){u.g?u.g.add(f):u.h=f}function pE(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}hE.prototype.cancel=function(){if(this.i=mE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return E(u.i)}function nD(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,I=0;I<m;I++)f.push(u[I]);return f}f=[],m=0;for(I in u)f[m++]=u[I];return f}function rD(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const I in u)f[m++]=I;return f}}}function gE(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=rD(u),I=nD(u),M=I.length,F=0;F<M;F++)f.call(void 0,I[F],m&&m[F],u)}var yE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iD(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var I=u[m].indexOf("="),M=null;if(0<=I){var F=u[m].substring(0,I);M=u[m].substring(I+1)}else F=u[m];f(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function xs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof xs){this.h=u.h,Kc(this,u.j),this.o=u.o,this.g=u.g,Qc(this,u.s),this.l=u.l;var f=u.i,m=new wl;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),_E(this,m),this.m=u.m}else u&&(f=String(u).match(yE))?(this.h=!1,Kc(this,f[1]||"",!0),this.o=_l(f[2]||""),this.g=_l(f[3]||"",!0),Qc(this,f[4]),this.l=_l(f[5]||"",!0),_E(this,f[6]||"",!0),this.m=_l(f[7]||"")):(this.h=!1,this.i=new wl(null,this.h))}xs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(vl(f,vE,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(vl(f,vE,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(vl(m,m.charAt(0)=="/"?aD:oD,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",vl(m,uD)),u.join("")};function Qr(u){return new xs(u)}function Kc(u,f,m){u.j=m?_l(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Qc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function _E(u,f,m){f instanceof wl?(u.i=f,cD(u.i,u.h)):(m||(f=vl(f,lD)),u.i=new wl(f,u.h))}function Ke(u,f,m){u.i.set(f,m)}function Yc(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function _l(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vl(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,sD),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vE=/[#\/\?@]/g,oD=/[#\?:]/g,aD=/[#\?]/g,lD=/[#\?@]/g,uD=/#/g;function wl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Ni(u){u.g||(u.g=new Map,u.h=0,u.i&&iD(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=wl.prototype,t.add=function(u,f){Ni(this),this.i=null,u=ko(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function wE(u,f){Ni(u),f=ko(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function EE(u,f){return Ni(u),f=ko(u,f),u.g.has(f)}t.forEach=function(u,f){Ni(this),this.g.forEach(function(m,I){m.forEach(function(M){u.call(f,M,I,this)},this)},this)},t.na=function(){Ni(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let I=0;I<f.length;I++){const M=u[I];for(let F=0;F<M.length;F++)m.push(f[I])}return m},t.V=function(u){Ni(this);let f=[];if(typeof u=="string")EE(this,u)&&(f=f.concat(this.g.get(ko(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return Ni(this),this.i=null,u=ko(this,u),EE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function TE(u,f,m){wE(u,f),0<m.length&&(u.i=null,u.g.set(ko(u,f),E(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var I=f[m];const F=encodeURIComponent(String(I)),Z=this.V(I);for(I=0;I<Z.length;I++){var M=F;Z[I]!==""&&(M+="="+encodeURIComponent(String(Z[I]))),u.push(M)}}return this.i=u.join("&")};function ko(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function cD(u,f){f&&!u.j&&(Ni(u),u.i=null,u.g.forEach(function(m,I){var M=I.toLowerCase();I!=M&&(wE(this,I),TE(this,M,m))},u)),u.j=f}function hD(u,f){const m=new gl;if(a.Image){const I=new Image;I.onload=g(Oi,m,"TestLoadImage: loaded",!0,f,I),I.onerror=g(Oi,m,"TestLoadImage: error",!1,f,I),I.onabort=g(Oi,m,"TestLoadImage: abort",!1,f,I),I.ontimeout=g(Oi,m,"TestLoadImage: timeout",!1,f,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else f(!1)}function dD(u,f){const m=new gl,I=new AbortController,M=setTimeout(()=>{I.abort(),Oi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:I.signal}).then(F=>{clearTimeout(M),F.ok?Oi(m,"TestPingServer: ok",!0,f):Oi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Oi(m,"TestPingServer: error",!1,f)})}function Oi(u,f,m,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(m)}catch(F){}}function fD(){this.g=new QO}function pD(u,f,m){const I=m||"";try{gE(u,function(M,F){let Z=M;c(M)&&(Z=Im(M)),f.push(I+F+"="+encodeURIComponent(Z))})}catch(M){throw f.push(I+"type="+encodeURIComponent("_badmap")),M}}function El(u){this.l=u.Ub||null,this.j=u.eb||!1}y(El,Cm),El.prototype.g=function(){return new Xc(this.l,this.j)},El.prototype.i=function(u){return function(){return u}}({});function Xc(u,f){Ct.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Xc,Ct),t=Xc.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Sl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Sl(this)),this.g&&(this.readyState=3,Sl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;SE(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function SE(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Tl(this):Sl(this),this.readyState==3&&SE(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Tl(this))},t.Qa=function(u){this.g&&(this.response=u,Tl(this))},t.ga=function(){this.g&&Tl(this)};function Tl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Sl(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join("\r\n")};function Sl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function IE(u){let f="";return L(u,function(m,I){f+=I,f+=":",f+=m,f+="\r\n"}),f}function Mm(u,f,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=IE(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ke(u,f,m))}function ot(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ot,Ct);var mD=/^https?$/i,gD=["POST","PUT"];t=ot.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():km.g(),this.v=this.o?Zw(this.o):Zw(km),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(F){CE(this,F);return}if(u=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)m.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())m.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gD,f,void 0))||I||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Z]of m)this.g.setRequestHeader(F,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kE(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){CE(this,F)}};function CE(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,bE(u),Jc(u)}function bE(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),Jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jc(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?RE(this):this.bb())},t.bb=function(){RE(this)};function RE(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Yr(u)!=4||u.Z()!=2)){if(u.u&&Yr(u)==4)ye(u.Ea,0,u);else if(bt(u,"readystatechange"),Yr(u)==4){u.h=!1;try{const Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var I;if(I=Z===0){var M=String(u.D).match(yE)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),I=!mD.test(M?M.toLowerCase():"")}m=I}if(m)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var F=2<Yr(u)?u.g.statusText:""}catch(Ue){F=""}u.l=F+" ["+u.Z()+"]",bE(u)}}finally{Jc(u)}}}}function Jc(u,f){if(u.g){kE(u);const m=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||bt(u,"ready");try{m.onreadystatechange=I}catch(M){}}}function kE(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Yr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Yr(this)?this.g.status:-1}catch(u){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(u){return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),KO(f)}};function AE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch(f){return null}}function yD(u){const f={};u=(u.g&&2<=Yr(u)&&u.g.getAllResponseHeaders()||"").split("\r\n");for(let I=0;I<u.length;I++){if(_(u[I]))continue;var m=x(u[I]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=f[M]||[];f[M]=F,F.push(m)}S(f,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Il(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function PE(u){this.Aa=0,this.i=[],this.j=new gl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Il("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Il("baseRetryDelayMs",5e3,u),this.cb=Il("retryDelaySeedMs",1e4,u),this.Wa=Il("forwardChannelMaxRetries",2,u),this.wa=Il("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hE(u&&u.concurrentRequestLimit),this.Da=new fD,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=PE.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,I){rn(0),this.W=u,this.H=f||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=$E(this,null,this.W),eh(this)};function Lm(u){if(xE(u),u.G==3){var f=u.U++,m=Qr(u.I);if(Ke(m,"SID",u.K),Ke(m,"RID",f),Ke(m,"TYPE","terminate"),Cl(u,m),f=new xi(u,u.j,f),f.L=2,f.v=Yc(Qr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch(I){}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=UE(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Gc(f)}VE(u)}function Zc(u){u.g&&(Vm(u),u.g.cancel(),u.g=null)}function xE(u){Zc(u),u.u&&(a.clearTimeout(u.u),u.u=null),th(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function eh(u){if(!dE(u.h)&&!u.s){u.s=!0;var f=u.Ga;B||te(),U||(B(),U=!0),Q.add(f,u),u.B=0}}function _D(u,f){return fE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ml(p(u.Ga,u,f),FE(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new xi(this,this.j,u);let F=this.o;if(this.S&&(F?(F=T(F),R(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=OE(this,M,f),m=Qr(this.I),Ke(m,"RID",u),Ke(m,"CVER",22),this.D&&Ke(m,"X-HTTP-Session-Id",this.D),Cl(this,m),F&&(this.O?f="headers="+encodeURIComponent(String(IE(F)))+"&"+f:this.m&&Mm(m,this.m,F)),Dm(this.h,M),this.Ua&&Ke(m,"TYPE","init"),this.P?(Ke(m,"$req",f),Ke(m,"SID","null"),M.T=!0,Pm(M,m,null)):Pm(M,m,f),this.G=2}}else this.G==3&&(u?NE(this,u):this.i.length==0||dE(this.h)||NE(this))};function NE(u,f){var m;f?m=f.l:m=u.U++;const I=Qr(u.I);Ke(I,"SID",u.K),Ke(I,"RID",m),Ke(I,"AID",u.T),Cl(u,I),u.m&&u.o&&Mm(I,u.m,u.o),m=new xi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=OE(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Dm(u.h,m),Pm(m,I,f)}function Cl(u,f){u.H&&L(u.H,function(m,I){Ke(f,I,m)}),u.l&&gE({},function(m,I){Ke(f,I,m)})}function OE(u,f,m){m=Math.min(u.i.length,m);var I=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let F=-1;for(;;){const Z=["count="+m];F==-1?0<m?(F=M[0].g,Z.push("ofs="+F)):F=0:Z.push("ofs="+F);let Ue=!0;for(let Ft=0;Ft<m;Ft++){let Ae=M[Ft].g;const Ht=M[Ft].map;if(Ae-=F,0>Ae)F=Math.max(0,M[Ft].g-100),Ue=!1;else try{pD(Ht,Z,"req"+Ae+"_")}catch(Gt){I&&I(Ht)}}if(Ue){I=Z.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,I}function DE(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;B||te(),U||(B(),U=!0),Q.add(f,u),u.v=0}}function Fm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ml(p(u.Fa,u),FE(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ME(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ml(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),Zc(this),ME(this))};function Vm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ME(u){u.g=new xi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Qr(u.qa);Ke(f,"RID","rpc"),Ke(f,"SID",u.K),Ke(f,"AID",u.T),Ke(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(f,"TO",u.ja),Ke(f,"TYPE","xmlhttp"),Cl(u,f),u.m&&u.o&&Mm(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Yc(Qr(f)),m.m=null,m.P=!0,lE(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Zc(this),Fm(this),rn(19))};function th(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function LE(u,f){var m=null;if(u.g==f){th(u),Vm(u),u.g=null;var I=2}else if(Om(u.h,f))m=f.D,pE(u.h,f),I=1;else return;if(u.G!=0){if(f.o)if(I==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;I=Wc(),bt(I,new iE(I,m)),eh(u)}else DE(u);else if(M=f.s,M==3||M==0&&0<f.X||!(I==1&&_D(u,f)||I==2&&Fm(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),M){case 1:Ns(u,5);break;case 4:Ns(u,10);break;case 3:Ns(u,6);break;default:Ns(u,2)}}}function FE(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Ns(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),I=u.Xa;const M=!I;I=new xs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kc(I,"https"),Yc(I),M?hD(I.toString(),m):dD(I.toString(),m)}else rn(2);u.G=0,u.l&&u.l.sa(f),VE(u),xE(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function VE(u){if(u.G=0,u.ka=[],u.l){const f=mE(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function $E(u,f,m){var I=m instanceof xs?Qr(m):new xs(m);if(I.g!="")f&&(I.g=f+"."+I.g),Qc(I,I.s);else{var M=a.location;I=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var F=new xs(null);I&&Kc(F,I),f&&(F.g=f),M&&Qc(F,M),m&&(F.l=m),I=F}return m=u.D,f=u.ya,m&&f&&Ke(I,m,f),Ke(I,"VER",u.la),Cl(u,I),I}function UE(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ot(new El({eb:m})):new ot(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jE(){}t=jE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nh(){}nh.prototype.g=function(u,f){return new Rn(u,f)};function Rn(u,f){Ct.call(this),this.g=new PE(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Ao(this)}y(Rn,Ct),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Lm(this.g)},Rn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Im(u),u=m);f.i.push(new tD(f.Ya++,u)),f.G==3&&eh(f)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Lm(this.g),delete this.g,Rn.aa.N.call(this)};function zE(u){bm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(zE,bm);function BE(){Rm.call(this),this.status=1}y(BE,Rm);function Ao(u){this.g=u}y(Ao,jE),Ao.prototype.ua=function(){bt(this.g,"a")},Ao.prototype.ta=function(u){bt(this.g,new zE(u))},Ao.prototype.sa=function(u){bt(this.g,new BE)},Ao.prototype.ra=function(){bt(this.g,"b")},nh.prototype.createWebChannel=nh.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,TA=function(){return new nh},EA=function(){return Wc()},wA=As,Gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,ed=qc,sE.COMPLETE="complete",vA=sE,eE.EventType=fl,fl.OPEN="a",fl.CLOSE="b",fl.ERROR="c",fl.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,ql=eE,_A=El,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,yA=ot}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const V1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new gc("@firebase/firestore");function Dl(){return lo.logLevel}function oe(t,...e){if(lo.logLevel<=Ie.DEBUG){const n=e.map(i0);lo.debug("Firestore (".concat(Za,"): ").concat(t),...n)}}function _i(t,...e){if(lo.logLevel<=Ie.ERROR){const n=e.map(i0);lo.error("Firestore (".concat(Za,"): ").concat(t),...n)}}function xa(t,...e){if(lo.logLevel<=Ie.WARN){const n=e.map(i0);lo.warn("Firestore (".concat(Za,"): ").concat(t),...n)}}function i0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e="FIRESTORE (".concat(Za,") INTERNAL ASSERTION FAILED: ")+t;throw _i(e),new Error(e)}function He(t,e){t||pe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class eU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class tU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nU{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new SA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Jt(e)}}class rU{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rU(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(s.error.message));const o=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider","Received ".concat(o?"new":"existing"," token.")),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.R=n.token,new sU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function Na(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new It(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new It(0,0))}static max(){return new ge(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends zu{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(K.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const lU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends zu{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return lU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ye.fromString(e))}static fromName(e){return new ae(Ye.fromString(e).popFirst(5))}static empty(){return new ae(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ye(e.slice()))}}function uU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new ds(i,ae.empty(),e)}function cU(t){return new ds(t.readTime,t.key,-1)}class ds{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ds(ge.min(),ae.empty(),-1)}static max(){return new ds(ge.max(),ae.empty(),-1)}}function hU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==dU)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(i=>i?Y.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Y((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function pU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ec(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}s0.oe=-1;function sp(t){return t==null}function Gd(t){return t===0&&1/t==-1/0}function mU(t){return typeof t=="number"&&Number.isInteger(t)&&!Gd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wt=class Ky{constructor(e,n){this.comparator=e,this.root=n||as.EMPTY}insert(e,n){return new Ky(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,as.BLACK,null,null))}remove(e){return new Ky(this.comparator,this.root.remove(e,this.comparator).copy(null,null,as.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push("".concat(n,":").concat(r)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rh(this.root,e,this.comparator,!0)}},Rh=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},as=class Xr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Xr.RED,this.left=i!=null?i:Xr.EMPTY,this.right=s!=null?s:Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Xr(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}};as.EMPTY=null,as.RED=!0,as.BLACK=!1;as.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new as(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U1(this.data.getIterator())}getIteratorFrom(e){return new U1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class U1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Bt(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bA("Invalid base64 string: "+s):s}}(e);return new nn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const gU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fs(t){if(He(!!t),typeof t=="string"){let e=0;const n=gU.exec(t);if(He(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uo(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function a0(t){const e=t.mapValue.fields.__previous_value__;return o0(e)?a0(e):e}function Bu(t){const e=fs(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Wu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?o0(t)?4:_U(t)?9007199254740991:10:pe()}function Wr(t,e){if(t===e)return!0;const n=co(t);if(n!==co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bu(t).isEqual(Bu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fs(i.timestampValue),a=fs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return uo(i.bytesValue).isEqual(uo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return mt(i.geoPointValue.latitude)===mt(s.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mt(i.integerValue)===mt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=mt(i.doubleValue),a=mt(s.doubleValue);return o===a?Gd(o)===Gd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($1(o)!==$1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Wr(o[l],a[l])))return!1;return!0}(t,e);default:return pe()}}function qu(t,e){return(t.values||[]).find(n=>Wr(n,e))!==void 0}function Oa(t,e){if(t===e)return 0;const n=co(t),r=co(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=mt(s.integerValue||s.doubleValue),l=mt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return j1(t.timestampValue,e.timestampValue);case 4:return j1(Bu(t),Bu(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=uo(s),l=uo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Oe(a[c],l[c]);if(h!==0)return h}return Oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Oe(mt(s.latitude),mt(o.latitude));return a!==0?a:Oe(mt(s.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Oa(a[c],l[c]);if(h)return h}return Oe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===kh.mapValue&&o===kh.mapValue)return 0;if(s===kh.mapValue)return 1;if(o===kh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Oe(l[d],h[d]);if(p!==0)return p;const g=Oa(a[l[d]],c[h[d]]);if(g!==0)return g}return Oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw pe()}}function j1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=fs(t),r=fs(e),i=Oe(n.seconds,r.seconds);return i!==0?i:Oe(n.nanos,r.nanos)}function Da(t){return Qy(t)}function Qy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fs(n);return"time(".concat(r.seconds,",").concat(r.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return uo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return"geo(".concat(n.latitude,",").concat(n.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Qy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+="".concat(o,":").concat(Qy(n.fields[o]));return i+"}"}(t.mapValue):pe()}function z1(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function Yy(t){return!!t&&"integerValue"in t}function l0(t){return!!t&&"arrayValue"in t}function B1(t){return!!t&&"nullValue"in t}function W1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function td(t){return!!t&&"mapValue"in t}function uu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _U(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=uu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fn(uu(this.value))}}function RA(t){const e=[];return wo(t.fields,(n,r)=>{const i=new jt([n]);if(td(r)){const s=RA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new en(e,0,ge.min(),ge.min(),ge.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new en(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new en(e,2,n,ge.min(),ge.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,ge.min(),ge.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n){this.position=e,this.inclusive=n}}function q1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=Oa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function H1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function vU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{}class _t extends kA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EU(e,n,r):n==="array-contains"?new IU(e,r):n==="in"?new CU(e,r):n==="not-in"?new bU(e,r):n==="array-contains-any"?new RU(e,r):new _t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TU(e,r):new SU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oa(n,this.value)):n!==null&&co(this.value)===co(n)&&this.matchesComparison(Oa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rr extends kA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Rr(e,n)}matches(e){return AA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function AA(t){return t.op==="and"}function PA(t){return wU(t)&&AA(t)}function wU(t){for(const e of t.filters)if(e instanceof Rr)return!1;return!0}function Xy(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(PA(t))return t.filters.map(e=>Xy(e)).join(",");{const e=t.filters.map(n=>Xy(n)).join(",");return"".concat(t.op,"(").concat(e,")")}}function xA(t,e){return t instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)}(t,e):t instanceof Rr?function(r,i){return i instanceof Rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&xA(o,i.filters[a]),!0):!1}(t,e):void pe()}function NA(t){return t instanceof _t?function(n){return"".concat(n.field.canonicalString()," ").concat(n.op," ").concat(Da(n.value))}(t):t instanceof Rr?function(n){return n.op.toString()+" {"+n.getFilters().map(NA).join(" ,")+"}"}(t):"Filter"}class EU extends _t{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class TU extends _t{constructor(e,n){super(e,"in",n),this.keys=OA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SU extends _t{constructor(e,n){super(e,"not-in",n),this.keys=OA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class IU extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return l0(n)&&qu(n.arrayValue,this.value)}}class CU extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qu(this.value.arrayValue,n)}}class bU extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qu(this.value.arrayValue,n)}}class RU extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!l0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function G1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new kU(t,e,n,r,i,s,o)}function u0(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Da(r)).join(",")),e.ue=n}return e.ue}function c0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!H1(t.startAt,e.startAt)&&H1(t.endAt,e.endAt)}function Jy(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function AU(t,e,n,r,i,s,o,a){return new Tc(t,e,n,r,i,s,o,a)}function op(t){return new Tc(t)}function K1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DA(t){return t.collectionGroup!==null}function cu(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Bt(jt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qd(s,r))}),n.has(jt.keyField().canonicalString())||e.ce.push(new Qd(jt.keyField(),r))}return e.ce}function Vr(t){const e=_e(t);return e.le||(e.le=PU(e,cu(t))),e.le}function PU(t,e){if(t.limitType==="F")return G1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qd(i.field,s)});const n=t.endAt?new Kd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kd(t.startAt.position,t.startAt.inclusive):null;return G1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zy(t,e){const n=t.filters.concat([e]);return new Tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function e_(t,e,n){return new Tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ap(t,e){return c0(Vr(t),Vr(e))&&t.limitType===e.limitType}function MA(t){return"".concat(u0(Vr(t)),"|lt:").concat(t.limitType)}function $o(t){return"Query(target=".concat(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=", filters: [".concat(n.filters.map(i=>NA(i)).join(", "),"]")),sp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=", orderBy: [".concat(n.orderBy.map(i=>function(o){return"".concat(o.field.canonicalString()," (").concat(o.dir,")")}(i)).join(", "),"]")),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Da(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Da(i)).join(",")),"Target(".concat(r,")")}(Vr(t)),"; limitType=").concat(t.limitType,")")}function lp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of cu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=q1(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,cu(r),i)||r.endAt&&!function(o,a,l){const c=q1(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,cu(r),i))}(t,e)}function xU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LA(t){return(e,n)=>{let r=!1;for(const i of cu(t)){const s=NU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NU(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Oa(l,c):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=new wt(ae.comparator);function vi(){return OU}const FA=new wt(ae.comparator);function Hl(...t){let e=FA;for(const n of t)e=e.insert(n.key,n);return e}function VA(t){let e=FA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qs(){return hu()}function $A(){return hu()}function hu(){return new el(t=>t.toString(),(t,e)=>t.isEqual(e))}const DU=new wt(ae.comparator),MU=new Bt(ae.comparator);function Ce(...t){let e=MU;for(const n of t)e=e.add(n);return e}const LU=new Bt(Oe);function FU(){return LU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function jA(t){return{integerValue:""+t}}function VU(t,e){return mU(e)?jA(e):UA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this._=void 0}}function $U(t,e,n){return t instanceof Yd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&o0(s)&&(s=a0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hu?BA(t,e):t instanceof Gu?WA(t,e):function(i,s){const o=zA(i,s),a=Q1(o)+Q1(i.Pe);return Yy(o)&&Yy(i.Pe)?jA(a):UA(i.serializer,a)}(t,e)}function UU(t,e,n){return t instanceof Hu?BA(t,e):t instanceof Gu?WA(t,e):n}function zA(t,e){return t instanceof Xd?function(r){return Yy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Yd extends up{}class Hu extends up{constructor(e){super(),this.elements=e}}function BA(t,e){const n=qA(e);for(const r of t.elements)n.some(i=>Wr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gu extends up{constructor(e){super(),this.elements=e}}function WA(t,e){let n=qA(e);for(const r of t.elements)n=n.filter(i=>!Wr(i,r));return{arrayValue:{values:n}}}class Xd extends up{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Q1(t){return mt(t.integerValue||t.doubleValue)}function qA(t){return l0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hu&&i instanceof Hu||r instanceof Gu&&i instanceof Gu?Na(r.elements,i.elements,Wr):r instanceof Xd&&i instanceof Xd?Wr(r.Pe,i.Pe):r instanceof Yd&&i instanceof Yd}(t.transform,e.transform)}class zU{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cp{}function HA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new h0(t.key,tr.none()):new Sc(t.key,t.data,tr.none());{const n=t.data,r=fn.empty();let i=new Bt(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bs(t.key,r,new xn(i.toArray()),tr.none())}}function BU(t,e,n){t instanceof Sc?function(i,s,o){const a=i.value.clone(),l=X1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(i,s,o){if(!nd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=X1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(GA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function du(t,e,n,r){return t instanceof Sc?function(s,o,a,l){if(!nd(s.precondition,o))return a;const c=s.value.clone(),h=J1(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof bs?function(s,o,a,l){if(!nd(s.precondition,o))return a;const c=J1(s.fieldTransforms,l,o),h=o.data;return h.setAll(GA(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return nd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zA(r.transform,i||null);s!=null&&(n===null&&(n=fn.empty()),n.set(r.field,s))}return n||null}function Y1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Na(r,i,(s,o)=>jU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sc extends cp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bs extends cp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function X1(t,e,n){const r=new Map;He(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,UU(o,a,n[i]))}return r}function J1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,$U(s,o,e))}return r}class h0 extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qU extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&BU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=du(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=du(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$A();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=HA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(n,r)=>Y1(n,r))&&Na(this.baseMutations,e.baseMutations,(n,r)=>Y1(n,r))}}class d0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){He(e.mutations.length===r.length);let i=function(){return DU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new d0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,be;function QU(t){switch(t){default:return pe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function KA(t){if(t===void 0)return _i("GRPC error has no .code"),K.UNKNOWN;switch(t){case pt.OK:return K.OK;case pt.CANCELLED:return K.CANCELLED;case pt.UNKNOWN:return K.UNKNOWN;case pt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case pt.INTERNAL:return K.INTERNAL;case pt.UNAVAILABLE:return K.UNAVAILABLE;case pt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case pt.NOT_FOUND:return K.NOT_FOUND;case pt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case pt.ABORTED:return K.ABORTED;case pt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case pt.DATA_LOSS:return K.DATA_LOSS;default:return pe()}}(be=pt||(pt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=new Xs([4294967295,4294967295],0);function Z1(t){const e=YU().encode(t),n=new gA;return n.update(e),new Uint8Array(n.digest())}function eS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xs([n,r],0),new Xs([i,s],0)]}class f0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gl("Invalid padding: ".concat(n));if(r<0)throw new Gl("Invalid hash count: ".concat(r));if(e.length>0&&this.hashCount===0)throw new Gl("Invalid hash count: ".concat(r));if(e.length===0&&n!==0)throw new Gl("Invalid padding when bitmap length is 0: ".concat(n));this.Ie=8*e.length-n,this.Te=Xs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Xs.fromNumber(r)));return i.compare(XU)===1&&(i=new Xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Z1(e),[r,i]=eS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new f0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Z1(e),[r,i]=eS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hp(ge.min(),i,new wt(Oe),vi(),Ce())}}class Ic{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ic(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class QA{constructor(e,n){this.targetId=e,this.me=n}}class YA{constructor(e,n,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tS{constructor(){this.fe=0,this.ge=rS(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),n=Ce(),r=Ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new Ic(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=rS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class JU{constructor(e){this.Le=e,this.Be=new Map,this.ke=vi(),this.qe=nS(),this.Qe=new wt(Oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Jy(s))if(r===0){const o=new ae(s.path);this.Ue(n,o,en.newNoDocument(o,ge.min()))}else He(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=uo(r).toUint8Array()}catch(l){if(l instanceof bA)return xa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new f0(o,i,s)}catch(l){return xa(l instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(s.path.canonicalString());e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Jy(a.target)){const l=new ae(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,en.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new hp(e,n,this.Qe,this.ke,r);return this.ke=vi(),this.qe=nS(),this.Qe=new wt(Oe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Bt(Oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nS(){return new wt(ae.comparator)}function rS(){return new wt(ae.comparator)}const ZU={asc:"ASCENDING",desc:"DESCENDING"},e3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t3={and:"AND",or:"OR"};class n3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function t_(t,e){return t.useProto3Json||sp(e)?e:{value:e}}function Jd(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function XA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function r3(t,e){return Jd(t,e.toTimestamp())}function $r(t){return He(!!t),ge.fromTimestamp(function(n){const r=fs(n);return new It(r.seconds,r.nanos)}(t))}function p0(t,e){return n_(t,e).canonicalString()}function n_(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JA(t){const e=Ye.fromString(t);return He(rP(e)),e}function r_(t,e){return p0(t.databaseId,e.path)}function Tg(t,e){const n=JA(e);if(n.get(1)!==t.databaseId.projectId)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(eP(n))}function ZA(t,e){return p0(t.databaseId,e)}function i3(t){const e=JA(t);return e.length===4?Ye.emptyPath():eP(e)}function i_(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eP(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iS(t,e,n){return{name:r_(t,e),fields:n.value.mapValue.fields}}function s3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(He(h===void 0||typeof h=="string"),nn.fromBase64String(h||"")):(He(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?K.UNKNOWN:KA(c.code);return new se(h,c.message||"")}(o);n=new YA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Tg(t,r.document.name),s=$r(r.document.updateTime),o=r.document.createTime?$r(r.document.createTime):ge.min(),a=new fn({mapValue:{fields:r.document.fields}}),l=en.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new rd(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Tg(t,r.document),s=r.readTime?$r(r.readTime):ge.min(),o=en.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Tg(t,r.document),s=r.removedTargetIds||[];n=new rd([],s,i,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new KU(i,s),a=r.targetId;n=new QA(a,o)}}return n}function o3(t,e){let n;if(e instanceof Sc)n={update:iS(t,e.key,e.value)};else if(e instanceof h0)n={delete:r_(t,e.key)};else if(e instanceof bs)n={update:iS(t,e.key,e.data),updateMask:m3(e.fieldMask)};else{if(!(e instanceof qU))return pe();n={verify:r_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Yd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:r3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pe()}(t,e.precondition)),n}function a3(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$r(i.updateTime):$r(s);return o.isEqual(ge.min())&&(o=$r(s)),new zU(o,i.transformResults||[])}(n,e))):[]}function l3(t,e){return{documents:[ZA(t,e.path)]}}function u3(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZA(t,i);const s=function(c){if(c.length!==0)return nP(Rr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Uo(p.field),direction:d3(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=t_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function c3(t){let e=i3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){He(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=tP(d);return p instanceof Rr&&PA(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Qd(jo(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,sp(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new Kd(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new Kd(g,p)}(n.endAt)),AU(e,i,o,s,a,"F",l,c)}function h3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=jo(n.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jo(n.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jo(n.unaryFilter.field);return _t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jo(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return _t.create(jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rr.create(n.compositeFilter.filters.map(r=>tP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function d3(t){return ZU[t]}function f3(t){return e3[t]}function p3(t){return t3[t]}function Uo(t){return{fieldPath:t.canonicalString()}}function jo(t){return jt.fromServerFormat(t.fieldPath)}function nP(t){return t instanceof _t?function(n){if(n.op==="=="){if(W1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NAN"}};if(B1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NAN"}};if(B1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(n.field),op:f3(n.op),value:n.value}}}(t):t instanceof Rr?function(n){const r=n.getFilters().map(i=>nP(i));return r.length===1?r[0]:{compositeFilter:{op:p3(n.op),filters:r}}}(t):pe()}function m3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,r,i,s=ge.min(),o=ge.min(),a=nn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.ct=e}}function y3(t){const e=c3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?e_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this._n=new v3}addToCollectionParentIndex(e,n){return this._n.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(ds.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class v3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Bt(Ye.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ma(0)}static Ln(){return new Ma(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.changes=new el(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&du(r.mutation,i,xn.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const i=qs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=vi();const o=hu(),a=function(){return hu()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof bs)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),du(h.mutation,c,h.mutation.getFieldMask(),It.now())):o.set(c.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new E3(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hu();let i=new wt((o,a)=>o-a),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||xn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Ce()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=$A();h.forEach(p=>{if(!s.has(p)){const g=HA(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Y.resolve(qs());let a=-1,l=s;return o.next(c=>Y.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?Y.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ce())).next(h=>({batchId:a,changes:VA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Hl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hl();return this.indexManager.getCollectionParents(e,s).next(a=>Y.forEach(a,l=>{const c=function(d,p){return new Tc(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,en.newInvalidDocument(h)))});let a=Hl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&du(h.mutation,c,xn.empty(),It.now()),lp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Y.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$r(i.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:y3(i.bundledQuery),readTime:$r(i.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.overlays=new wt(ae.comparator),this.hr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qs();return Y.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const i=qs(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new wt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=qs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=qs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Y.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GU(n,r));let s=this.hr.get(n);s===void 0&&(s=Ce(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.Pr=new Bt(kt.Ir),this.Tr=new Bt(kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new kt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ae(new Ye([])),r=new kt(n,e),i=new kt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ae(new Ye([])),r=new kt(n,e),i=new kt(n,e+1);let s=Ce();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new kt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ae.comparator(e.key,n.key)||Oe(e.pr,n.pr)}static Er(e,n){return Oe(e.pr,n.pr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Bt(kt.Ir)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),i=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bt(Oe);return n.forEach(i=>{const s=new kt(i,0),o=new kt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new kt(new ae(s),0);let a=new Bt(Oe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),Y.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){He(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Y.forEach(n.mutations,i=>{const s=new kt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new kt(n,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.vr=e,this.docs=function(){return new wt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=vi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():en.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=vi();const o=n.path,a=new ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||hU(cU(h),r)<=0||(i.has(h.key)||lp(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Y.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe()}Fr(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new R3(this)}getSize(e){return Y.resolve(this.size)}}class R3 extends w3{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.persistence=e,this.Mr=new el(n=>u0(n),c0),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Or=0,this.Nr=new m0,this.targetCount=0,this.Lr=Ma.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Y.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ma(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.qn(n),Y.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(s).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.Br={},this.overlays={},this.kr=new s0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new k3(this),this.indexManager=new _3,this.remoteDocumentCache=function(i){return new b3(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new g3(n),this.$r=new S3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new C3(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new P3(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class P3 extends fU{constructor(e){super(),this.currentSequenceNumber=e}}class g0{constructor(e){this.persistence=e,this.zr=new m0,this.jr=null}static Hr(e){return new g0(e)}get Jr(){if(this.jr)return this.jr;throw pe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=ae.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Y.or([()=>Y.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ce(),i=Ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new y0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return nL()?8:pU(qt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new x3;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Dl()<=Ie.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",$o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(Dl()<=Ie.DEBUG&&oe("QueryEngine","Query:",$o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Dl()<=Ie.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",$o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(n))):Y.resolve())}ji(e,n){if(K1(n))return Y.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=e_(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ce(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,e_(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return K1(n)||i.isEqual(ge.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Y.resolve(null):(Dl()<=Ie.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$o(n)),this.es(e,o,n,uU(i,-1)).next(a=>a))})}Zi(e,n){let r=new Bt(LA(e));return n.forEach((i,s)=>{lp(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Dl()<=Ie.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",$o(n)),this.zi.getDocumentsMatchingQuery(e,n,ds.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new wt(Oe),this.rs=new el(s=>u0(s),c0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T3(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function D3(t,e,n,r){return new O3(t,e,n,r)}async function iP(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function M3(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=Y.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(E=>{const C=c.docVersions.get(y);He(C!==null),E.version.compareTo(C)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sP(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function L3(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(nn.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(E,C,v){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,h)&&a.push(n.Qr.updateTargetData(s,g))});let l=vi(),c=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(F3(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ge.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Y.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function F3(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=vi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function V3(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $3(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,Y.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ki(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function s_(t,e,n){const r=_e(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ec(o))throw o;oe("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(o))}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function sS(t,e,n){const r=_e(t);let i=ge.min(),s=Ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=_e(l),p=d.rs.get(h);return p!==void 0?Y.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:Ce())).next(a=>(U3(r,xU(e),a),{documents:a,hs:s})))}function U3(t,e,n){let r=t.ss.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class oS{constructor(){this.activeTargetIds=FU()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j3{constructor(){this.no=new oS,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new oS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=null;function Sg(){return Ah===null?Ah=function(){return 268435456+Math.round(2147483648*Math.random())}():Ah++,"0x"+Ah.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class q3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So="projects/".concat(i,"/databases/").concat(s),this.bo=this.databaseId.database==="(default)"?"project_id=".concat(i):"project_id=".concat(i,"&database_id=").concat(s)}get Do(){return!1}Co(n,r,i,s,o){const a=Sg(),l=this.vo(n,r.toUriEncodedString());oe("RestConnection","Sending RPC '".concat(n,"' ").concat(a,":"),l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(oe("RestConnection","Received RPC '".concat(n,"' ").concat(a,": "),h),h),h=>{throw xa("RestConnection","RPC '".concat(n,"' ").concat(a," failed with error: "),h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=B3[n];return"".concat(this.wo,"/v1/").concat(r,":").concat(i)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Sg();return new Promise((o,a)=>{const l=new yA;l.setWithCredentials(!0),l.listenOnce(vA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ed.NO_ERROR:const h=l.getResponseJson();oe(Yt,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(h)),o(h);break;case ed.TIMEOUT:oe(Yt,"RPC '".concat(e,"' ").concat(s," timed out")),a(new se(K.DEADLINE_EXCEEDED,"Request time out"));break;case ed.HTTP_ERROR:const d=l.getStatus();if(oe(Yt,"RPC '".concat(e,"' ").concat(s," failed with status:"),d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(C){const v=C.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(v)>=0?v:K.UNKNOWN}(g.status);a(new se(y,g.message))}else a(new se(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(K.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{oe(Yt,"RPC '".concat(e,"' ").concat(s," completed."))}});const c=JSON.stringify(i);oe(Yt,"RPC '".concat(e,"' ").concat(s," sending request:"),i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Sg(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TA(),a=EA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new _A({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");oe(Yt,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(h),l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new W3({lo:C=>{g?oe(Yt,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),C):(p||(oe(Yt,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),d.open(),p=!0),oe(Yt,"RPC '".concat(e,"' stream ").concat(i," sending:"),C),d.send(C))},ho:()=>d.close()}),E=(C,v,_)=>{C.listen(v,w=>{try{_(w)}catch(P){setTimeout(()=>{throw P},0)}})};return E(d,ql.EventType.OPEN,()=>{g||(oe(Yt,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),y.mo())}),E(d,ql.EventType.CLOSE,()=>{g||(g=!0,oe(Yt,"RPC '".concat(e,"' stream ").concat(i," transport closed")),y.po())}),E(d,ql.EventType.ERROR,C=>{g||(g=!0,xa(Yt,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),C),y.po(new se(K.UNAVAILABLE,"The operation could not be completed")))}),E(d,ql.EventType.MESSAGE,C=>{var v;if(!g){const _=C.data[0];He(!!_);const w=_,P=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(P){oe(Yt,"RPC '".concat(e,"' stream ").concat(i," received error:"),P);const O=P.status;let L=function(b){const R=pt[b];if(R!==void 0)return KA(R)}(O),S=P.message;L===void 0&&(L=K.INTERNAL,S="Unknown error status: "+O+" with message "+P.message),g=!0,y.po(new se(L,S)),d.close()}else oe(Yt,"RPC '".concat(e,"' stream ").concat(i," received:"),_),y.yo(_)}}),E(a,wA.STAT_EVENT,C=>{C.stat===Gy.PROXY?oe(Yt,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):C.stat===Gy.NOPROXY&&oe(Yt,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{y.fo()},0),y}}function Ig(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return new n3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new oP(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(_i(n.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new se(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return oe("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H3 extends aP{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=s3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?$r(o.readTime):ge.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=i_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Jy(l)?{documents:l3(s,l)}:{query:u3(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=XA(s,o.resumeToken);const c=t_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Jd(s,o.snapshotVersion.toTimestamp());const c=t_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=h3(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=i_(this.serializer),n.removeTarget=e,this.i_(n)}}class G3 extends aP{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=a3(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.A_(r,n)}return He(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=i_(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>o3(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(K.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,n_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(K.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Q3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(_i(n),this.y_=!1):oe("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Eo(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=_e(l);c.M_.add(4),await Cc(c),c.N_.set("Unknown"),c.M_.delete(4),await fp(c)}(this))})}),this.N_=new Q3(r,i)}}async function fp(t){if(Eo(t))for(const e of t.x_)await e(!0)}async function Cc(t){for(const e of t.x_)await e(!1)}function lP(t,e){const n=_e(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),E0(n)?w0(n):tl(n).Xo()&&v0(n,e))}function _0(t,e){const n=_e(t),r=tl(n);n.F_.delete(e),r.Xo()&&uP(n,e),n.F_.size===0&&(r.Xo()?r.n_():Eo(n)&&n.N_.set("Unknown"))}function v0(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(t).P_(e)}function uP(t,e){t.L_.xe(e),tl(t).I_(e)}function w0(t){t.L_=new JU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),tl(t).start(),t.N_.w_()}function E0(t){return Eo(t)&&!tl(t).Zo()&&t.F_.size>0}function Eo(t){return _e(t).M_.size===0}function cP(t){t.L_=void 0}async function X3(t){t.N_.set("Online")}async function J3(t){t.F_.forEach((e,n)=>{v0(t,e)})}async function Z3(t,e){cP(t),E0(t)?(t.N_.D_(e),w0(t)):t.N_.set("Unknown")}async function e5(t,e,n){if(t.N_.set("Online"),e instanceof YA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zd(t,r)}else if(e instanceof rd?t.L_.Ke(e):e instanceof QA?t.L_.He(e):t.L_.We(e),!n.isEqual(ge.min()))try{const r=await sP(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),uP(s,l);const d=new Ki(h.target,l,c,h.sequenceNumber);v0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await Zd(t,r)}}async function Zd(t,e,n){if(!Ec(e))throw e;t.M_.add(1),await Cc(t),t.N_.set("Offline"),n||(n=()=>sP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await fp(t)})}function hP(t,e){return e().catch(n=>Zd(t,n,e))}async function pp(t){const e=_e(t),n=ps(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;t5(e);)try{const i=await V3(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,n5(e,i)}catch(i){await Zd(e,i)}dP(e)&&fP(e)}function t5(t){return Eo(t)&&t.v_.length<10}function n5(t,e){t.v_.push(e);const n=ps(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function dP(t){return Eo(t)&&!ps(t).Zo()&&t.v_.length>0}function fP(t){ps(t).start()}async function r5(t){ps(t).V_()}async function i5(t){const e=ps(t);for(const n of t.v_)e.d_(n.mutations)}async function s5(t,e,n){const r=t.v_.shift(),i=d0.from(r,e,n);await hP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pp(t)}async function o5(t,e){e&&ps(t).E_&&await async function(r,i){if(function(o){return QU(o)&&o!==K.ABORTED}(i.code)){const s=r.v_.shift();ps(r).t_(),await hP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pp(r)}}(t,e),dP(t)&&fP(t)}async function lS(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=Eo(n);n.M_.add(3),await Cc(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await fp(n)}async function a5(t,e){const n=_e(t);e?(n.M_.delete(2),await fp(n)):e||(n.M_.add(2),await Cc(n),n.N_.set("Unknown"))}function tl(t){return t.B_||(t.B_=function(n,r,i){const s=_e(n);return s.f_(),new H3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:X3.bind(null,t),To:J3.bind(null,t),Ao:Z3.bind(null,t),h_:e5.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),E0(t)?w0(t):t.N_.set("Unknown")):(await t.B_.stop(),cP(t))})),t.B_}function ps(t){return t.k_||(t.k_=function(n,r,i){const s=_e(n);return s.f_(),new G3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:r5.bind(null,t),Ao:o5.bind(null,t),R_:i5.bind(null,t),A_:s5.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await pp(t)):(await t.k_.stop(),t.v_.length>0&&(oe("RemoteStore","Stopping write stream with ".concat(t.v_.length," pending writes")),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new T0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S0(t,e){if(_i("AsyncQueue","".concat(e,": ").concat(t)),Ec(t))return new se(K.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Hl(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new ma(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.q_=new wt(ae.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):pe():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class La{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new La(e,n,ma.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class u5{constructor(){this.queries=new el(e=>MA(e),ap),this.onlineState="Unknown",this.z_=new Set}}async function I0(t,e){const n=_e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new l5,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=S0(o,"Initialization of query '".concat($o(e.query),"' failed"));return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&b0(n)}async function C0(t,e){const n=_e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function c5(t,e){const n=_e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&b0(n)}function h5(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function b0(t){t.z_.forEach(e=>{e.next()})}var o_,cS;(cS=o_||(o_={})).J_="default",cS.Cache="cache";class R0{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new La(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=La.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==o_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.key=e}}class mP{constructor(e){this.key=e}}class d5{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=LA(e),this.Ta=new ma(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new uS,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=lp(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?y!==E&&(r.track({type:3,doc:g}),C=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||c)&&(a=!0)),C&&(g?(o=o.add(g),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(g,y){const E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return E(g)-E(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new La(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new uS,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new mP(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new pP(r))}),n}pa(e){this.la=e.hs,this.Pa=Ce();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return La.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class f5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p5{constructor(e){this.key=e,this.wa=!1}}class m5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new el(a=>MA(a),ap),this.Da=new Map,this.Ca=new Set,this.va=new wt(ae.comparator),this.Fa=new Map,this.Ma=new m0,this.xa={},this.Oa=new Map,this.Na=Ma.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function g5(t,e,n=!0){const r=EP(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await gP(r,e,n,!0),i}async function y5(t,e){const n=EP(t);await gP(n,e,!0,!1)}async function gP(t,e,n,r){const i=await $3(t.localStore,Vr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await _5(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&lP(t.remoteStore,i),a}async function _5(t,e,n,r,i){t.Ba=(d,p,g)=>async function(E,C,v,_){let w=C.view.da(v);w.Xi&&(w=await sS(E.localStore,C.query,!1).then(({documents:S})=>C.view.da(S,w)));const P=_&&_.targetChanges.get(C.targetId),O=_&&_.targetMismatches.get(C.targetId)!=null,L=C.view.applyChanges(w,E.isPrimaryClient,P,O);return dS(E,C.targetId,L.fa),L.snapshot}(t,d,p,g);const s=await sS(t.localStore,e,!0),o=new d5(e,s.hs),a=o.da(s.documents),l=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);dS(t,n,c.fa);const h=new f5(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function v5(t,e,n){const r=_e(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!ap(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await s_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_0(r.remoteStore,i.targetId),a_(r,i.targetId)}).catch(wc)):(a_(r,i.targetId),await s_(r.localStore,i.targetId,!0))}async function w5(t,e){const n=_e(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_0(n.remoteStore,r.targetId))}async function E5(t,e,n){const r=k5(t);try{const i=await function(o,a){const l=_e(o),c=It.now(),h=a.reduce((g,y)=>g.add(y.key),Ce());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=vi(),E=Ce();return l.os.getEntries(g,h).next(C=>{y=C,y.forEach((v,_)=>{_.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(C=>{d=C;const v=[];for(const _ of a){const w=WU(_,d.get(_.key).overlayedDocument);w!=null&&v.push(new bs(_.key,w,RA(w.value.mapValue),tr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(C=>{p=C;const v=C.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(g,C.batchId,v)})}).then(()=>({batchId:p.batchId,changes:VA(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new wt(Oe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await bc(r,i.changes),await pp(r.remoteStore)}catch(i){const s=S0(i,"Failed to persist write");n.reject(s)}}async function yP(t,e){const n=_e(t);try{const r=await L3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?He(o.wa):i.removedDocuments.size>0&&(He(o.wa),o.wa=!1))}),await bc(n,r,e)}catch(r){await wc(r)}}function hS(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.U_)p.j_(a)&&(c=!0)}),c&&b0(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function T5(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new wt(ae.comparator);o=o.insert(s,en.newNoDocument(s,ge.min()));const a=Ce().add(s),l=new hp(ge.min(),new Map,new wt(Oe),o,a);await yP(r,l),r.va=r.va.remove(s),r.Fa.delete(e),k0(r)}else await s_(r.localStore,e,!1).then(()=>a_(r,e,n)).catch(wc)}async function S5(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await M3(n.localStore,e);vP(n,r,null),_P(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bc(n,i)}catch(i){await wc(i)}}async function I5(t,e,n){const r=_e(t);try{const i=await function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(He(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);vP(r,e,n),_P(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bc(r,i)}catch(i){await wc(i)}}function _P(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function vP(t,e,n){const r=_e(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function a_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||wP(t,r)})}function wP(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(_0(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),k0(t))}function dS(t,e,n){for(const r of n)r instanceof pP?(t.Ma.addReference(r.key,e),C5(t,r)):r instanceof mP?(oe("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||wP(t,r.key)):pe()}function C5(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(oe("SyncEngine","New document in limbo: "+n),t.Ca.add(r),k0(t))}function k0(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ae(Ye.fromString(e)),r=t.Na.next();t.Fa.set(r,new p5(n)),t.va=t.va.insert(n,r),lP(t.remoteStore,new Ki(Vr(op(n.path)),r,"TargetPurposeLimboResolution",s0.oe))}}async function bc(t,e,n){const r=_e(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=y0.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=_e(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Y.forEach(c,p=>Y.forEach(p.qi,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>Y.forEach(p.Qi,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Ec(d))throw d;oe("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.ns.get(p),y=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,E)}}}(r.localStore,s))}async function b5(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await iP(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new se(K.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bc(n,r.us)}}function R5(t,e){const n=_e(t),r=n.Fa.get(e);if(r&&r.wa)return Ce().add(r.key);{let i=Ce();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function EP(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T5.bind(null,e),e.Sa.h_=c5.bind(null,e.eventManager),e.Sa.ka=h5.bind(null,e.eventManager),e}function k5(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I5.bind(null,e),e}class fS{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=dp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return D3(this.persistence,new N3,e.initialUser,this.serializer)}createPersistence(e){return new A3(g0.Hr,this.serializer)}createSharedClientState(e){return new j3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class A5{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b5.bind(null,this.syncEngine),await a5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u5}()}createDatastore(e){const n=dp(e.databaseInfo.databaseId),r=function(s){return new q3(s)}(e.databaseInfo);return function(s,o,a,l){return new K3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Y3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hS(this.syncEngine,n,0),function(){return aS.D()?new aS:new z3}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new m5(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=_e(r);oe("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Cc(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=IA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{oe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(oe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=S0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cg(t,e){t.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await iP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await N5(t);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lS(e.remoteStore,i)),t._onlineComponents=e}function x5(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function N5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!x5(n))throw n;xa("Error using user provided cache. Falling back to memory cache: "+n),await Cg(t,new fS)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Cg(t,new fS);return t._offlineComponents}async function TP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await pS(t,t._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await pS(t,new A5))),t._onlineComponents}function O5(t){return TP(t).then(e=>e.syncEngine)}async function ef(t){const e=await TP(t),n=e.eventManager;return n.onListen=g5.bind(null,e.syncEngine),n.onUnlisten=v5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w5.bind(null,e.syncEngine),n}function D5(t,e,n={}){const r=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new A0({next:p=>{o.enqueueAndForget(()=>C0(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new se(K.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new se(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new R0(op(a.path),h,{includeMetadataChanges:!0,ra:!0});return I0(s,d)}(await ef(t),t.asyncQueue,e,n,r)),r.promise}function M5(t,e,n={}){const r=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new A0({next:p=>{o.enqueueAndForget(()=>C0(s,d)),p.fromCache&&l.source==="server"?c.reject(new se(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new R0(a,h,{includeMetadataChanges:!0,ra:!0});return I0(s,d)}(await ef(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e,n){if(!n)throw new se(K.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function L5(t,e,n,r){if(e===!0&&r===!0)throw new se(K.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}function gS(t){if(!ae.isDocumentKey(t))throw new se(K.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function yS(t){if(ae.isDocumentKey(t))throw new se(K.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function mp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return typeof t=="function"?"a function":pe()}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mp(t);throw new se(K.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(K.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (must not be NaN)"));if(s.timeoutSeconds<5)throw new se(K.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (minimum allowed value is 5)"));if(s.timeoutSeconds>30)throw new se(K.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(s.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _S({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new se(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _S(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eU;switch(r.type){case"firstParty":return new iU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mS.get(n);r&&(oe("ComponentProvider","Removing Datastore"),mS.delete(n),r.terminate())}(this),Promise.resolve()}}function F5(t,e,n,r={}){var i;const s=(t=En(t,gp))._getSettings(),o="".concat(e,":").concat(n);if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Jt.MOCK_USER;else{a=nk(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new se(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Jt(c)}t._authCredentials=new tU(new SA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new To(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class Ur extends To{constructor(e,n,r){super(e,n,op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new ae(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function tf(t,e,...n){if(t=Me(t),IP("collection","path",e),t instanceof gp){const r=Ye.fromString(e,...n);return yS(r),new Ur(t,null,r)}{if(!(t instanceof Dt||t instanceof Ur))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return yS(r),new Ur(t.firestore,null,r)}}function gr(t,e,...n){if(t=Me(t),arguments.length===1&&(e=IA.newId()),IP("doc","path",e),t instanceof gp){const r=Ye.fromString(e,...n);return gS(r),new Dt(t,null,new ae(r))}{if(!(t instanceof Dt||t instanceof Ur))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return gS(r),new Dt(t.firestore,t instanceof Ur?t.converter:null,new ae(r))}}function V5(t,e){return t=Me(t),e=Me(e),(t instanceof Dt||t instanceof Ur)&&(e instanceof Dt||e instanceof Ur)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new oP(this,"async_queue_retry"),this.hu=()=>{const n=Ig();n&&oe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=Ig();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=Ig();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new hi;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ec(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r);throw _i("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=T0.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&pe()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function vS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wi extends gp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new $5}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||CP(this),this._firestoreClient.terminate()}}function U5(t,e){const n=typeof t=="object"?t:Jf(),r=typeof t=="string"?t:"(default)",i=Cs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ZR("firestore");s&&F5(i,...s)}return i}function yp(t){return t._firestoreClient||CP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function CP(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new yU(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,SP(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new P5(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fa(nn.fromBase64String(e))}catch(n){throw new se(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fa(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=/^__.*__$/;class z5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class bP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function RP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class N0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new N0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return nf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(RP(this.fu)&&j5.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class B5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dp(e)}Fu(e,n,r,i=!1){return new N0({fu:e,methodName:n,vu:r,path:jt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vp(t){const e=t._freezeSettings(),n=dp(t._databaseId);return new B5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kP(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);O0("Data must be an object, but it was:",o,r);const a=AP(r,o);let l,c;if(s.merge)l=new xn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=l_(e,d,n);if(!o.contains(p))throw new se(K.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));xP(h,p)||h.push(p)}l=new xn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new z5(new fn(a),l,c)}class wp extends P0{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}function W5(t,e,n,r){const i=t.Fu(1,e,n);O0("Data must be an object, but it was:",i,r);const s=[],o=fn.empty();wo(r,(l,c)=>{const h=D0(e,l,n);c=Me(c);const d=i.Su(h);if(c instanceof wp)s.push(h);else{const p=Rc(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new xn(s);return new bP(o,a,i.fieldTransforms)}function q5(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[l_(e,r,n)],l=[i];if(s.length%2!=0)throw new se(K.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let p=0;p<s.length;p+=2)a.push(l_(e,s[p])),l.push(s[p+1]);const c=[],h=fn.empty();for(let p=a.length-1;p>=0;--p)if(!xP(c,a[p])){const g=a[p];let y=l[p];y=Me(y);const E=o.Su(g);if(y instanceof wp)c.push(g);else{const C=Rc(y,E);C!=null&&(c.push(g),h.set(g,C))}}const d=new xn(c);return new bP(h,d,o.fieldTransforms)}function H5(t,e,n,r=!1){return Rc(n,t.Fu(r?4:3,e))}function Rc(t,e){if(PP(t=Me(t)))return O0("Unsupported field value:",e,t),AP(t,e);if(t instanceof P0)return function(r,i){if(!RP(i.fu))throw i.Du("".concat(r._methodName,"() can only be used with update() and set()"));if(!i.path)throw i.Du("".concat(r._methodName,"() is not currently supported inside arrays"));const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Rc(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=It.fromDate(r);return{timestampValue:Jd(i.serializer,s)}}if(r instanceof It){const s=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jd(i.serializer,s)}}if(r instanceof x0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fa)return{bytesValue:XA(i.serializer,r._byteString)};if(r instanceof Dt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(s.projectId,"/").concat(s.database));return{referenceValue:p0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du("Unsupported field value: ".concat(mp(r)))}(t,e)}function AP(t,e){const n={};return CA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(t,(r,i)=>{const s=Rc(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function PP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof x0||t instanceof Fa||t instanceof Dt||t instanceof P0)}function O0(t,e,n){if(!PP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=mp(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function l_(t,e,n){if((e=Me(e))instanceof _p)return e._internalPath;if(typeof e=="string")return D0(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const G5=new RegExp("[~\\*/\\[\\]]");function D0(t,e,n){if(e.search(G5)>=0)throw nf("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new _p(...e.split("."))._internalPath}catch(r){throw nf("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function nf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new se(K.INVALID_ARGUMENT,a+t+l)}function xP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new K5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(M0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class K5 extends NP{data(){return super.data()}}function M0(t,e){return typeof e=="string"?D0(t,e):e instanceof _p?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L0{}class Q5 extends L0{}function wS(t,e,...n){let r=[];e instanceof L0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof F0).length,a=s.filter(l=>l instanceof Ep).length;if(o>1||o>0&&a>0)throw new se(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ep extends Q5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ep(e,n,r)}_apply(e){const n=this._parse(e);return DP(e._query,n),new To(e.firestore,e.converter,Zy(e._query,n))}_parse(e){const n=vp(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(K.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(h,"' queries on documentId()."));if(h==="in"||h==="not-in"){TS(d,h);const g=[];for(const y of d)g.push(ES(l,s,y));p={arrayValue:{values:g}}}else p=ES(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||TS(d,h),p=H5(a,o,d,h==="in"||h==="not-in");return _t.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ph(t,e,n){const r=e,i=M0("where",t);return Ep._create(i,r,n)}class F0 extends L0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new F0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)DP(o,l),o=Zy(o,l)}(e._query,n),new To(e.firestore,e.converter,Zy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ES(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DA(e)&&n.indexOf("/")!==-1)throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=e.path.child(Ye.fromString(n));if(!ae.isDocumentKey(r))throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return z1(t,new ae(r))}if(n instanceof Dt)return z1(t,n._key);throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mp(n),"."))}function TS(t,e){if(!Array.isArray(t)||t.length===0)throw new se(K.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function DP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(K.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new se(K.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Y5{convertValue(e,n="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new x0(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=a0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const n=fs(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);He(rP(r));const i=new Wu(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||_i("Document ".concat(s," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(n.projectId,"/").concat(n.database,") instead.")),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LP extends NP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(M0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class id extends LP{data(e={}){return super.data(e)}}class FP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Kl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new id(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new id(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new id(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:X5(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function X5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){t=En(t,Dt);const e=En(t.firestore,wi);return D5(yp(e),t._key).then(n=>VP(e,t,n))}class V0 extends Y5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function IS(t){t=En(t,To);const e=En(t.firestore,wi),n=yp(e),r=new V0(e);return OP(t._query),M5(n,t._query).then(i=>new FP(e,r,t,i))}function J5(t,e,n){t=En(t,Dt);const r=En(t.firestore,wi),i=MP(t.converter,e,n);return Tp(r,[kP(vp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,tr.none())])}function Ql(t,e,n,...r){t=En(t,Dt);const i=En(t.firestore,wi),s=vp(i);let o;return o=typeof(e=Me(e))=="string"||e instanceof _p?q5(s,"updateDoc",t._key,e,n,r):W5(s,"updateDoc",t._key,e),Tp(i,[o.toMutation(t._key,tr.exists(!0))])}function Z5(t){return Tp(En(t.firestore,wi),[new h0(t._key,tr.none())])}function ej(t,e){const n=En(t.firestore,wi),r=gr(t),i=MP(t.converter,e);return Tp(n,[kP(vp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}function tj(t,...e){var n,r,i;t=Me(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vS(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof Dt)c=En(t.firestore,wi),h=op(t._key.path),l={next:d=>{e[o]&&e[o](VP(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=En(t,To);c=En(d.firestore,wi),h=d._query;const p=new V0(c);l={next:g=>{e[o]&&e[o](new FP(c,p,d,g))},error:e[o+1],complete:e[o+2]},OP(t._query)}return function(p,g,y,E){const C=new A0(E),v=new R0(g,C,y);return p.asyncQueue.enqueueAndForget(async()=>I0(await ef(p),v)),()=>{C.$a(),p.asyncQueue.enqueueAndForget(async()=>C0(await ef(p),v))}}(yp(c),h,a,l)}function Tp(t,e){return function(r,i){const s=new hi;return r.asyncQueue.enqueueAndForget(async()=>E5(await O5(r),i,s)),s.promise}(yp(t),e)}function VP(t,e,n){const r=n.docs.get(e._key),i=new V0(t);return new LP(t,i,e._key,r,new Kl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Za=i})(vo),br(new ir("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wi(new nU(r.getProvider("auth-internal")),new oU(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),wn(V1,"4.6.4",e),wn(V1,"4.6.4","esm2017")})();var CS={};const bS="@firebase/database",RS="1.0.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $P="";function nj(t){$P=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Vu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return qr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rj(e)}}catch(e){}return new ij},Hs=UP("localStorage"),sj=UP("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new gc("@firebase/database"),oj=function(){let t=1;return function(){return t++}}(),jP=function(t){const e=fL(t),n=new uL;n.update(e);const r=n.digest();return Uv.encodeByteArray(r)},kc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=kc.apply(null,r):typeof r=="object"?e+=Tt(r):e+=r,e+=" "}return e};let fu=null,kS=!0;const aj=function(t,e){J(!e,"Can't turn on custom loggers persistently."),ga.logLevel=Ie.VERBOSE,fu=ga.log.bind(ga)},xt=function(...t){if(kS===!0&&(kS=!1,fu===null&&sj.get("logging_enabled")===!0&&aj()),fu){const e=kc.apply(null,t);fu(e)}},Ac=function(t){return function(...e){xt(t,...e)}},u_=function(...t){const e="FIREBASE INTERNAL ERROR: "+kc(...t);ga.error(e)},Ei=function(...t){const e="FIREBASE FATAL ERROR: ".concat(kc(...t));throw ga.error(e),new Error(e)},ln=function(...t){const e="FIREBASE WARNING: "+kc(...t);ga.warn(e)},lj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Sp=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},uj=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Va="[MIN_NAME]",ho="[MAX_NAME]",So=function(t,e){if(t===e)return 0;if(t===Va||e===ho)return-1;if(e===Va||t===ho)return 1;{const n=AS(t),r=AS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},cj=function(t,e){return t===e?0:t<e?-1:1},Ml=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Tt(e))},$0=function(t){if(typeof t!="object"||t===null)return Tt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Tt(e[r]),n+=":",n+=$0(t[e[r]]);return n+="}",n},zP=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Mt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const BP=function(t){J(!Sp(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},hj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function fj(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const pj=new RegExp("^-?(0*)\\d{1,10}$"),mj=-2147483648,gj=2147483647,AS=function(t){if(pj.test(t)){const e=Number(t);if(e>=mj&&e<=gj)return e}return null},nl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ln("Exception was thrown by user callback.",n),e},Math.floor(0))}},yj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ln('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" are invalid. This usually indicates your app was not initialized correctly.'))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ln(e)}}class sd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="5",WP="v",qP="s",HP="r",GP="f",KP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QP="ls",YP="p",c_="ac",XP="websocket",JP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(n)}}function wj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ex(t,e,n){J(typeof e=="string","typeof type must == string"),J(typeof n=="object","typeof params must == object");let r;if(e===XP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===JP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);wj(t)&&(n.ns=t.namespace);const i=[];return Mt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.counters_={}}incrementCounter(e,n=1){qr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return K2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg={},Rg={};function j0(t){const e=t.toString();return bg[e]||(bg[e]=new Ej),bg[e]}function Tj(t,e){const n=t.toString();return Rg[n]||(Rg[n]=e()),Rg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="start",Ij="close",Cj="pLPCommand",bj="pRTLPCB",tx="id",nx="pw",rx="ser",Rj="cb",kj="seg",Aj="ts",Pj="d",xj="dframe",ix=1870,sx=30,Nj=ix-sx,Oj=25e3,Dj=3e4;class ta{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ac(e),this.stats_=j0(n),this.urlFn=l=>(this.appCheckToken&&(l[c_]=this.appCheckToken),ex(n,JP,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Sj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Dj)),uj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new z0((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===PS)this.id=a,this.password=l;else if(o===Ij)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[PS]="t",r[rx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Rj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[WP]=U0,this.transportSessionId&&(r[qP]=this.transportSessionId),this.lastSessionId&&(r[QP]=this.lastSessionId),this.applicationId&&(r[YP]=this.applicationId),this.appCheckToken&&(r[c_]=this.appCheckToken),typeof location<"u"&&location.hostname&&KP.test(location.hostname)&&(r[HP]=GP);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ta.forceAllow_=!0}static forceDisallow(){ta.forceDisallow_=!0}static isAvailable(){return ta.forceAllow_?!0:!ta.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hj()&&!dj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=YR(n),i=zP(r,Nj);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[xj]="t",r[tx]=e,r[nx]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Tt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class z0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=oj(),window[Cj+this.uniqueCallbackIdentifier]=e,window[bj+this.uniqueCallbackIdentifier]=n,this.myIFrame=z0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){xt("frame writing exception"),a.stack&&xt(a.stack),xt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xt("No IE domain setting required")}catch(n){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tx]=this.myID,e[nx]=this.myPW,e[rx]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sx+r.length<=ix;){const o=this.pendingSegs.shift();r=r+"&"+kj+i+"="+o.seg+"&"+Aj+i+"="+o.ts+"&"+Pj+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Oj)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=16384,Lj=45e3;let rf=null;typeof MozWebSocket<"u"?rf=MozWebSocket:typeof WebSocket<"u"&&(rf=WebSocket);class yr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ac(this.connId),this.stats_=j0(n),this.connURL=yr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[WP]=U0,typeof location<"u"&&location.hostname&&KP.test(location.hostname)&&(o[HP]=GP),n&&(o[qP]=n),r&&(o[QP]=r),i&&(o[c_]=i),s&&(o[YP]=s),ex(e,XP,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hs.set("previous_websocket_failure",!0);try{let r;sk(),this.mySock=new rf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){yr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&rf!==null&&!yr.forceDisallow_}static previouslyFailed(){return Hs.isInMemoryStorage||Hs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Vu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(J(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=zP(n,Mj);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Lj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yr.responsesRequiredToBeHealthy=2;yr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ta,yr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=yr&&yr.isAvailable();let r=n&&!yr.previouslyFailed();if(e.webSocketOnly&&(n||ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yr];else{const i=this.transports_=[];for(const s of Ku.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Ku.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ku.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=6e4,Vj=5e3,$j=10*1024,Uj=100*1024,kg="t",xS="d",jj="s",NS="r",zj="e",OS="o",DS="a",MS="n",LS="p",Bj="h";class Wj{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ac("c:"+this.id+":"),this.transportManager_=new Ku(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=pu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Uj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$j?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(kg in e){const n=e[kg];n===DS?this.upgradeIfSecondaryHealthy_():n===NS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===OS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ml("t",e),r=Ml("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:DS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:MS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ml("t",e),r=Ml("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ml(kg,e);if(xS in e){const r=e[xS];if(n===Bj){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===MS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jj?this.onConnectionShutdown_(r):n===NS?this.onReset_(r):n===zj?u_("Server Error: "+r):n===OS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):u_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),U0!==r&&ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Fj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.allowedEvents_=e,this.listeners_={},J(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){J(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf extends ax{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new sf}getInitialEvent(e){return J(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=32,VS=768;class Le{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new Le("")}function we(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ms(t){return t.pieces_.length-t.pieceNum_}function je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Le(t.pieces_,e)}function B0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Qu(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function lx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Le(e,0)}function tt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Le)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Le(n,0)}function Ee(t){return t.pieceNum_>=t.pieces_.length}function on(t,e){const n=we(t),r=we(e);if(n===null)return e;if(n===r)return on(je(t),je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Hj(t,e){const n=Qu(t,0),r=Qu(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=So(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function W0(t,e){if(ms(t)!==ms(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Jn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ms(t)>ms(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Gj{constructor(e,n){this.errorPrefix_=n,this.parts_=Qu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xf(this.parts_[r]);ux(this)}}function Kj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xf(e),ux(t)}function Qj(t){const e=t.parts_.pop();t.byteLength_-=Xf(e),t.parts_.length>0&&(t.byteLength_-=1)}function ux(t){if(t.byteLength_>VS)throw new Error(t.errorPrefix_+"has a key path longer than "+VS+" bytes ("+t.byteLength_+").");if(t.parts_.length>FS)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+FS+") or object contains a cycle "+Ls(t))}function Ls(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends ax{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new q0}getInitialEvent(e){return J(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=1e3,Yj=60*5*1e3,$S=30*1e3,Xj=1.3,Jj=3e4,Zj="server_kill",US=3;class di extends ox{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=di.nextPersistentConnectionId_++,this.log_=Ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ll,this.maxReconnectDelay_=Yj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!sk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");q0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&sf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Tt(s)),J(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Dr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),J(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;di.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&qr(e,"w")){const r=ka(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ln("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".concat(i," at ").concat(s," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||lL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$S)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=aL(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):u_("Unrecognized action received from server: "+Tt(e)+"\nAre you using the latest client?")}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){J(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ll,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ll,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Jj&&(this.reconnectDelay_=Ll),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Xj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+di.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){J(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?xt("getToken() completed but was canceled"):(xt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new Wj(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{ln(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Zj)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ln(d),l())}}}interrupt(e){xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Fd(this.interruptReasons_)&&(this.reconnectDelay_=Ll,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>$0(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Le(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){xt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=US&&(this.reconnectDelay_=$S,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){xt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=US&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+$P.replace(/\./g,"-")]=1,jv()?e["framework.cordova"]=1:ik()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=sf.getInstance().currentlyOnline();return Fd(this.interruptReasons_)&&e}}di.nextPersistentConnectionId_=0;di.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Te(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Te(Va,e),i=new Te(Va,n);return this.compare(r,i)!==0}minPost(){return Te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh;class cx extends Ip{static get __EMPTY_NODE(){return xh}static set __EMPTY_NODE(e){xh=e}compare(e,n){return So(e.name,n.name)}isDefinedOn(e){throw Ya("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Te.MIN}maxPost(){return new Te(ho,xh)}makePost(e,n){return J(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,xh)}toString(){return".key"}}const ya=new cx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Pt.RED,this.left=i!=null?i:gn.EMPTY_NODE,this.right=s!=null?s:gn.EMPTY_NODE}copy(e,n,r,i,s){return new Pt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return gn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Pt.RED=!0;Pt.BLACK=!1;class e6{copy(e,n,r,i,s){return this}insert(e,n,r){return new Pt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class gn{constructor(e,n=gn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new gn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))}remove(e){return new gn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Nh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Nh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Nh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Nh(this.root_,null,this.comparator_,!0,e)}}gn.EMPTY_NODE=new e6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t,e){return So(t.name,e.name)}function H0(t,e){return So(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_;function n6(t){h_=t}const hx=function(t){return typeof t=="number"?"number:"+BP(t):"string:"+t},dx=function(t){if(t.isLeafNode()){const e=t.val();J(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qr(e,".sv"),"Priority must be a string or number.")}else J(t===h_||t.isEmpty(),"priority of unexpected type.");J(t===h_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jS;class Rt{constructor(e,n=Rt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,J(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),dx(this.priorityNode_)}static set __childrenNodeConstructor(e){jS=e}static get __childrenNodeConstructor(){return jS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Rt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Rt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ee(e)?this:we(e)===".priority"?this.priorityNode_:Rt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Rt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=we(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(J(r!==".priority"||ms(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Rt.__childrenNodeConstructor.EMPTY_NODE.updateChild(je(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=BP(this.value_):e+=this.value_,this.lazyHash_=jP(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Rt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Rt.__childrenNodeConstructor?-1:(J(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Rt.VALUE_TYPE_ORDER.indexOf(n),s=Rt.VALUE_TYPE_ORDER.indexOf(r);return J(i>=0,"Unknown leaf type: "+n),J(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Rt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fx,px;function r6(t){fx=t}function i6(t){px=t}class s6 extends Ip{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?So(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(ho,new Rt("[PRIORITY-POST]",px))}makePost(e,n){const r=fx(e);return new Te(n,new Rt("[PRIORITY-POST]",r))}toString(){return".priority"}}const nt=new s6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=Math.log(2);class a6{constructor(e){const n=s=>parseInt(Math.log(s)/o6,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const of=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new Pt(p,d.node,Pt.BLACK,null,null);{const g=parseInt(h/2,10)+l,y=i(l,g),E=i(g+1,c);return d=t[g],p=n?n(d):d,new Pt(p,d.node,Pt.BLACK,y,E)}},s=function(l){let c=null,h=null,d=t.length;const p=function(y,E){const C=d-y,v=d;d-=y;const _=i(C+1,v),w=t[C],P=n?n(w):w;g(new Pt(P,w.node,E,null,_))},g=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const E=l.nextBitIsOne(),C=Math.pow(2,l.count-(y+1));E?p(C,Pt.BLACK):(p(C,Pt.BLACK),p(C,Pt.RED))}return h},o=new a6(t.length),a=s(o);return new gn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ag;const No={};class li{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return J(No&&nt,"ChildrenNode.ts has not been loaded"),Ag=Ag||new li({".priority":No},{".priority":nt}),Ag}get(e){const n=ka(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gn?n:null}hasIndex(e){return qr(this.indexSet_,e.toString())}addIndex(e,n){J(e!==ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Te.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=of(r,e.getCompare()):a=No;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new li(h,c)}addToIndexes(e,n){const r=Vd(this.indexes_,(i,s)=>{const o=ka(this.indexSet_,s);if(J(o,"Missing index implementation for "+s),i===No)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Te.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),of(a,o.getCompare())}else return No;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Te(e.name,a))),l.insert(e,e.node)}});return new li(r,this.indexSet_)}removeFromIndexes(e,n){const r=Vd(this.indexes_,i=>{if(i===No)return i;{const s=n.get(e.name);return s?i.remove(new Te(e.name,s)):i}});return new li(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl;class de{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&dx(this.priorityNode_),this.children_.isEmpty()&&J(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fl||(Fl=new de(new gn(H0),null,li.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fl}updatePriority(e){return this.children_.isEmpty()?this:new de(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fl:n}}getChild(e){const n=we(e);return n===null?this:this.getImmediateChild(n).getChild(je(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(J(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Te(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Fl:this.priorityNode_;return new de(i,o,s)}}updateChild(e,n){const r=we(e);if(r===null)return n;{J(we(e)!==".priority"||ms(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(je(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(nt,(o,a)=>{n[o]=a.val(e),r++,s&&de.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+hx(this.getPriority().val())+":"),this.forEachChild(nt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":jP(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Te(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Te(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Te(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Te.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Te.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pc?-1:0}withIndex(e){if(e===ya||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new de(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ya||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(nt),i=n.getIterator(nt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ya?null:this.indexMap_.get(e.toString())}}de.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class l6 extends de{constructor(){super(new gn(H0),de.EMPTY_NODE,li.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}}const Pc=new l6;Object.defineProperties(Te,{MIN:{value:new Te(Va,de.EMPTY_NODE)},MAX:{value:new Te(ho,Pc)}});cx.__EMPTY_NODE=de.EMPTY_NODE;Rt.__childrenNodeConstructor=de;n6(Pc);i6(Pc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=!0;function ct(t,e=null){if(t===null)return de.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),J(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Rt(n,ct(e))}if(!(t instanceof Array)&&u6){const n=[];let r=!1;if(Mt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=ct(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Te(o,l)))}}),n.length===0)return de.EMPTY_NODE;const s=of(n,t6,o=>o.name,H0);if(r){const o=of(n,nt.getCompare());return new de(s,ct(e),new li({".priority":o},{".priority":nt}))}else return new de(s,ct(e),li.Default)}else{let n=de.EMPTY_NODE;return Mt(t,(r,i)=>{if(qr(t,r)&&r.substring(0,1)!=="."){const s=ct(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ct(e))}}r6(ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6 extends Ip{constructor(e){super(),this.indexPath_=e,J(!Ee(e)&&we(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?So(e.name,n.name):s}makePost(e,n){const r=ct(e),i=de.EMPTY_NODE.updateChild(this.indexPath_,r);return new Te(n,i)}maxPost(){const e=de.EMPTY_NODE.updateChild(this.indexPath_,Pc);return new Te(ho,e)}toString(){return Qu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6 extends Ip{compare(e,n){const r=e.node.compareTo(n.node);return r===0?So(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,n){const r=ct(e);return new Te(n,r)}toString(){return".value"}}const d6=new h6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){return{type:"value",snapshotNode:t}}function $a(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Xu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function f6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){J(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Yu(n,a)):J(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange($a(n,r)):o.trackChildChange(Xu(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(nt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Yu(i,s))}),n.isLeafNode()||n.forEachChild(nt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Xu(i,s,o))}else r.trackChildChange($a(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?de.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e){this.indexedFilter_=new G0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ju.getStartPost_(e),this.endPost_=Ju.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Te(n,r))||(r=de.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=de.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(de.EMPTY_NODE);const s=this;return n.forEachChild(nt,(o,a)=>{s.matches(new Te(o,a))||(i=i.updateImmediateChild(o,de.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ju(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Te(n,r))||(r=de.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=de.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=de.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(de.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,de.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,g)=>d(g,p)}else o=this.index_.getCompare();const a=e;J(a.numChildren()===this.limit_,"");const l=new Te(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=i.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);const g=p==null?1:o(p,l);if(h&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(Xu(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Yu(n,d));const E=a.updateImmediateChild(n,de.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(s!=null&&s.trackChildChange($a(p.name,p.node)),E.updateImmediateChild(p.name,p.node)):E}}else return r.isEmpty()?e:h&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Yu(c.name,c.node)),s.trackChildChange($a(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,de.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return J(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return J(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Va}hasEnd(){return this.endSet_}getIndexEndValue(){return J(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return J(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ho}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return J(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new K0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function m6(t){return t.loadsAllData()?new G0(t.getIndex()):t.hasLimit()?new p6(t):new Ju(t)}function zS(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nt?n="$priority":t.index_===d6?n="$value":t.index_===ya?n="$key":(J(t.index_ instanceof c6,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Tt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Tt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Tt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Tt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Tt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function BS(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends ox{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ac("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(J(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=af.getListenId_(e,r),a={};this.listens_[o]=a;const l=zS(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),ka(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=af.getListenId_(e,n);delete this.listens_[r]}get(e){const n=zS(e._queryParams),r=e._path.toString(),i=new Dr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xa(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Vu(a.responseText)}catch(c){ln("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ln("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(){return{value:null,children:new Map}}function rl(t,e,n){if(Ee(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=we(e);t.children.has(r)||t.children.set(r,lf());const i=t.children.get(r);e=je(e),rl(i,e,n)}}function d_(t,e){if(Ee(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(nt,(r,i)=>{rl(t,new Le(r),i)}),d_(t,e)}}else if(t.children.size>0){const n=we(e);return e=je(e),t.children.has(n)&&d_(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function f_(t,e,n){t.value!==null?n(e,t.value):y6(t,(r,i)=>{const s=new Le(e.toString()+"/"+r);f_(i,s,n)})}function y6(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Mt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=10*1e3,v6=30*1e3,w6=5*60*1e3;class E6{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _6(e);const r=WS+(v6-WS)*Math.random();pu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Mt(e,(i,s)=>{s>0&&qr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),pu(this.reportStats_.bind(this),Math.floor(Math.random()*2*w6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vr||(vr={}));function Q0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Y0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function X0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=vr.ACK_USER_WRITE,this.source=Q0()}operationForChild(e){if(Ee(this.path)){if(this.affectedTree.value!=null)return J(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Le(e));return new uf(Pe(),n,this.revert)}}else return J(we(this.path)===e,"operationForChild called for unrelated child."),new uf(je(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.source=e,this.path=n,this.type=vr.LISTEN_COMPLETE}operationForChild(e){return Ee(this.path)?new Zu(this.source,Pe()):new Zu(this.source,je(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=vr.OVERWRITE}operationForChild(e){return Ee(this.path)?new fo(this.source,Pe(),this.snap.getImmediateChild(e)):new fo(this.source,je(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=vr.MERGE}operationForChild(e){if(Ee(this.path)){const n=this.children.subtree(new Le(e));return n.isEmpty()?null:n.value?new fo(this.source,Pe(),n.value):new Ua(this.source,Pe(),n)}else return J(we(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ua(this.source,je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ee(e))return this.isFullyInitialized()&&!this.filtered_;const n=we(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function S6(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(f6(o.childName,o.snapshotNode))}),Vl(t,i,"child_removed",e,r,n),Vl(t,i,"child_added",e,r,n),Vl(t,i,"child_moved",s,r,n),Vl(t,i,"child_changed",e,r,n),Vl(t,i,"value",e,r,n),i}function Vl(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>C6(t,a,l)),o.forEach(a=>{const l=I6(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function I6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function C6(t,e,n){if(e.childName==null||n.childName==null)throw Ya("Should only compare child_ events.");const r=new Te(e.childName,e.snapshotNode),i=new Te(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t,e){return{eventCache:t,serverCache:e}}function mu(t,e,n,r){return Cp(new gs(e,n,r),t.serverCache)}function gx(t,e,n,r){return Cp(t.eventCache,new gs(e,n,r))}function cf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function po(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg;const b6=()=>(Pg||(Pg=new gn(cj)),Pg);class Be{constructor(e,n=b6()){this.value=e,this.children=n}static fromObject(e){let n=new Be(null);return Mt(e,(r,i)=>{n=n.set(new Le(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(Ee(e))return null;{const r=we(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(je(e),n);return s!=null?{path:tt(new Le(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ee(e))return this;{const n=we(e),r=this.children.get(n);return r!==null?r.subtree(je(e)):new Be(null)}}set(e,n){if(Ee(e))return new Be(n,this.children);{const r=we(e),s=(this.children.get(r)||new Be(null)).set(je(e),n),o=this.children.insert(r,s);return new Be(this.value,o)}}remove(e){if(Ee(e))return this.children.isEmpty()?new Be(null):new Be(null,this.children);{const n=we(e),r=this.children.get(n);if(r){const i=r.remove(je(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Be(null):new Be(this.value,s)}else return this}}get(e){if(Ee(e))return this.value;{const n=we(e),r=this.children.get(n);return r?r.get(je(e)):null}}setTree(e,n){if(Ee(e))return n;{const r=we(e),s=(this.children.get(r)||new Be(null)).setTree(je(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Be(this.value,o)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ee(e))return null;{const s=we(e),o=this.children.get(s);return o?o.findOnPath_(je(e),tt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,r){if(Ee(e))return this;{this.value&&r(n,this.value);const i=we(e),s=this.children.get(i);return s?s.foreachOnPath_(je(e),tt(n,i),r):new Be(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(tt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.writeTree_=e}static empty(){return new Sr(new Be(null))}}function gu(t,e,n){if(Ee(e))return new Sr(new Be(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=on(i,e);return s=s.updateChild(o,n),new Sr(t.writeTree_.set(i,s))}else{const i=new Be(n),s=t.writeTree_.setTree(e,i);return new Sr(s)}}}function p_(t,e,n){let r=t;return Mt(n,(i,s)=>{r=gu(r,tt(e,i),s)}),r}function qS(t,e){if(Ee(e))return Sr.empty();{const n=t.writeTree_.setTree(e,new Be(null));return new Sr(n)}}function m_(t,e){return Io(t,e)!=null}function Io(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(on(n.path,e)):null}function HS(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nt,(r,i)=>{e.push(new Te(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Te(r,i.value))}),e}function ls(t,e){if(Ee(e))return t;{const n=Io(t,e);return n!=null?new Sr(new Be(n)):new Sr(t.writeTree_.subtree(e))}}function g_(t){return t.writeTree_.isEmpty()}function ja(t,e){return yx(Pe(),t.writeTree_,e)}function yx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(J(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=yx(tt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(tt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e){return Ex(e,t)}function R6(t,e,n,r,i){J(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=gu(t.visibleWrites,e,n)),t.lastWriteId=r}function k6(t,e,n,r){J(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=p_(t.visibleWrites,e,n),t.lastWriteId=r}function A6(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function P6(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);J(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&x6(a,r.path)?i=!1:Jn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return N6(t),!0;if(r.snap)t.visibleWrites=qS(t.visibleWrites,r.path);else{const a=r.children;Mt(a,l=>{t.visibleWrites=qS(t.visibleWrites,tt(r.path,l))})}return!0}else return!1}function x6(t,e){if(t.snap)return Jn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Jn(tt(t.path,n),e))return!0;return!1}function N6(t){t.visibleWrites=_x(t.allWrites,O6,Pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function O6(t){return t.visible}function _x(t,e,n){let r=Sr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Jn(n,o)?(a=on(n,o),r=gu(r,a,s.snap)):Jn(o,n)&&(a=on(o,n),r=gu(r,Pe(),s.snap.getChild(a)));else if(s.children){if(Jn(n,o))a=on(n,o),r=p_(r,a,s.children);else if(Jn(o,n))if(a=on(o,n),Ee(a))r=p_(r,Pe(),s.children);else{const l=ka(s.children,we(a));if(l){const c=l.getChild(je(a));r=gu(r,Pe(),c)}}}else throw Ya("WriteRecord should have .snap or .children")}}return r}function vx(t,e,n,r,i){if(!r&&!i){const s=Io(t.visibleWrites,e);if(s!=null)return s;{const o=ls(t.visibleWrites,e);if(g_(o))return n;if(n==null&&!m_(o,Pe()))return null;{const a=n||de.EMPTY_NODE;return ja(o,a)}}}else{const s=ls(t.visibleWrites,e);if(!i&&g_(s))return n;if(!i&&n==null&&!m_(s,Pe()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Jn(c.path,e)||Jn(e,c.path))},a=_x(t.allWrites,o,e),l=n||de.EMPTY_NODE;return ja(a,l)}}}function D6(t,e,n){let r=de.EMPTY_NODE;const i=Io(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ls(t.visibleWrites,e);return n.forEachChild(nt,(o,a)=>{const l=ja(ls(s,new Le(o)),a);r=r.updateImmediateChild(o,l)}),HS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=ls(t.visibleWrites,e);return HS(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function M6(t,e,n,r,i){J(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=tt(e,n);if(m_(t.visibleWrites,s))return null;{const o=ls(t.visibleWrites,s);return g_(o)?i.getChild(n):ja(o,i.getChild(n))}}function L6(t,e,n,r){const i=tt(e,n),s=Io(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=ls(t.visibleWrites,i);return ja(o,r.getNode().getImmediateChild(n))}else return null}function F6(t,e){return Io(t.visibleWrites,e)}function V6(t,e,n,r,i,s,o){let a;const l=ls(t.visibleWrites,e),c=Io(l,Pe());if(c!=null)a=c;else if(n!=null)a=ja(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=p.getNext();for(;g&&h.length<i;)d(g,r)!==0&&h.push(g),g=p.getNext();return h}else return[]}function $6(){return{visibleWrites:Sr.empty(),allWrites:[],lastWriteId:-1}}function hf(t,e,n,r){return vx(t.writeTree,t.treePath,e,n,r)}function J0(t,e){return D6(t.writeTree,t.treePath,e)}function GS(t,e,n,r){return M6(t.writeTree,t.treePath,e,n,r)}function df(t,e){return F6(t.writeTree,tt(t.treePath,e))}function U6(t,e,n,r,i,s){return V6(t.writeTree,t.treePath,e,n,r,i,s)}function Z0(t,e,n){return L6(t.writeTree,t.treePath,e,n)}function wx(t,e){return Ex(tt(t.treePath,e),t.writeTree)}function Ex(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;J(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),J(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Xu(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Yu(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,$a(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Xu(r,e.snapshotNode,i.oldSnap));else throw Ya("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Tx=new z6;class ew{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new gs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Z0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:po(this.viewCache_),s=U6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){return{filter:t}}function W6(t,e){J(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),J(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function q6(t,e,n,r,i){const s=new j6;let o,a;if(n.type===vr.OVERWRITE){const c=n;c.source.fromUser?o=y_(t,e,c.path,c.snap,r,i,s):(J(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ee(c.path),o=ff(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===vr.MERGE){const c=n;c.source.fromUser?o=G6(t,e,c.path,c.children,r,i,s):(J(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=__(t,e,c.path,c.children,r,i,a,s))}else if(n.type===vr.ACK_USER_WRITE){const c=n;c.revert?o=Y6(t,e,c.path,r,i,s):o=K6(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===vr.LISTEN_COMPLETE)o=Q6(t,e,n.path,r,s);else throw Ya("Unknown operation type: "+n.type);const l=s.getChanges();return H6(e,o,l),{viewCache:o,changes:l}}function H6(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=cf(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(mx(cf(e)))}}function Sx(t,e,n,r,i,s){const o=e.eventCache;if(df(r,n)!=null)return e;{let a,l;if(Ee(n))if(J(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=po(e),h=c instanceof de?c:de.EMPTY_NODE,d=J0(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=hf(r,po(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=we(n);if(c===".priority"){J(ms(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=GS(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=je(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=GS(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=Z0(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return mu(e,a,o.isFullyInitialized()||Ee(n),t.filter.filtersNodes())}}function ff(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Ee(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),g,null)}else{const g=we(n);if(!l.isCompleteForPath(n)&&ms(n)>1)return e;const y=je(n),C=l.getNode().getImmediateChild(g).updateChild(y,r);g===".priority"?c=h.updatePriority(l.getNode(),C):c=h.updateChild(l.getNode(),g,C,y,Tx,null)}const d=gx(e,c,l.isFullyInitialized()||Ee(n),h.filtersNodes()),p=new ew(i,d,s);return Sx(t,d,n,i,p,a)}function y_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new ew(i,e,s);if(Ee(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=mu(e,c,!0,t.filter.filtersNodes());else{const d=we(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=mu(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=je(n),g=a.getNode().getImmediateChild(d);let y;if(Ee(p))y=r;else{const E=h.getCompleteChild(d);E!=null?B0(p)===".priority"&&E.getChild(lx(p)).isEmpty()?y=E:y=E.updateChild(p,r):y=de.EMPTY_NODE}if(g.equals(y))l=e;else{const E=t.filter.updateChild(a.getNode(),d,y,p,h,o);l=mu(e,E,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function KS(t,e){return t.eventCache.isCompleteForChild(e)}function G6(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=tt(n,l);KS(e,we(h))&&(a=y_(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=tt(n,l);KS(e,we(h))||(a=y_(t,a,h,c,i,s,o))}),a}function QS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function __(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ee(n)?c=r:c=new Be(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),y=QS(t,g,p);l=ff(t,l,new Le(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const g=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!g){const y=e.serverCache.getNode().getImmediateChild(d),E=QS(t,y,p);l=ff(t,l,new Le(d),E,i,s,o,a)}}),l}function K6(t,e,n,r,i,s,o){if(df(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ee(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ff(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Ee(n)){let c=new Be(null);return l.getNode().forEachChild(ya,(h,d)=>{c=c.set(new Le(h),d)}),__(t,e,n,c,i,s,a,o)}else return e}else{let c=new Be(null);return r.foreach((h,d)=>{const p=tt(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),__(t,e,n,c,i,s,a,o)}}function Q6(t,e,n,r,i){const s=e.serverCache,o=gx(e,s.getNode(),s.isFullyInitialized()||Ee(n),s.isFiltered());return Sx(t,o,n,r,Tx,i)}function Y6(t,e,n,r,i,s){let o;if(df(r,n)!=null)return e;{const a=new ew(r,e,i),l=e.eventCache.getNode();let c;if(Ee(n)||we(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=hf(r,po(e));else{const d=e.serverCache.getNode();J(d instanceof de,"serverChildren would be complete if leaf node"),h=J0(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=we(n);let d=Z0(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,je(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,de.EMPTY_NODE,je(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=hf(r,po(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||df(r,Pe())!=null,mu(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new G0(r.getIndex()),s=m6(r);this.processor_=B6(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(de.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(de.EMPTY_NODE,a.getNode(),null),h=new gs(l,o.isFullyInitialized(),i.filtersNodes()),d=new gs(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Cp(d,h),this.eventGenerator_=new T6(this.query_)}get query(){return this.query_}}function J6(t){return t.viewCache_.serverCache.getNode()}function Z6(t){return cf(t.viewCache_)}function e9(t,e){const n=po(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ee(e)&&!n.getImmediateChild(we(e)).isEmpty())?n.getChild(e):null}function YS(t){return t.eventRegistrations_.length===0}function t9(t,e){t.eventRegistrations_.push(e)}function XS(t,e,n){const r=[];if(n){J(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function JS(t,e,n,r){e.type===vr.MERGE&&e.source.queryId!==null&&(J(po(t.viewCache_),"We should always have a full cache before handling merges"),J(cf(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=q6(t.processor_,i,e,n,r);return W6(t.processor_,s.viewCache),J(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Ix(t,s.changes,s.viewCache.eventCache.getNode(),null)}function n9(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nt,(s,o)=>{r.push($a(s,o))}),n.isFullyInitialized()&&r.push(mx(n.getNode())),Ix(t,r,n.getNode(),e)}function Ix(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return S6(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf;class Cx{constructor(){this.views=new Map}}function r9(t){J(!pf,"__referenceConstructor has already been defined"),pf=t}function i9(){return J(pf,"Reference.ts has not been loaded"),pf}function s9(t){return t.views.size===0}function tw(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return J(s!=null,"SyncTree gave us an op for an invalid query."),JS(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(JS(o,e,n,r));return s}}function bx(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=hf(n,i?r:null),l=!1;a?l=!0:r instanceof de?(a=J0(n,r),l=!1):(a=de.EMPTY_NODE,l=!1);const c=Cp(new gs(a,l,!1),new gs(r,i,!1));return new X6(e,c)}return o}function o9(t,e,n,r,i,s){const o=bx(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),t9(o,n),n9(o,n)}function a9(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ys(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(XS(c,n,r)),YS(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(XS(l,n,r)),YS(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ys(t)&&s.push(new(i9())(e._repo,e._path)),{removed:s,events:o}}function Rx(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function us(t,e){let n=null;for(const r of t.views.values())n=n||e9(r,e);return n}function kx(t,e){if(e._queryParams.loadsAllData())return Rp(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Ax(t,e){return kx(t,e)!=null}function ys(t){return Rp(t)!=null}function Rp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;function l9(t){J(!mf,"__referenceConstructor has already been defined"),mf=t}function u9(){return J(mf,"Reference.ts has not been loaded"),mf}let c9=1;class ZS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Be(null),this.pendingWriteTree_=$6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Px(t,e,n,r,i){return R6(t.pendingWriteTree_,e,n,r,i),i?il(t,new fo(Q0(),e,n)):[]}function h9(t,e,n,r){k6(t.pendingWriteTree_,e,n,r);const i=Be.fromObject(n);return il(t,new Ua(Q0(),e,i))}function Qi(t,e,n=!1){const r=A6(t.pendingWriteTree_,e);if(P6(t.pendingWriteTree_,e)){let s=new Be(null);return r.snap!=null?s=s.set(Pe(),!0):Mt(r.children,o=>{s=s.set(new Le(o),!0)}),il(t,new uf(r.path,s,n))}else return[]}function xc(t,e,n){return il(t,new fo(Y0(),e,n))}function d9(t,e,n){const r=Be.fromObject(n);return il(t,new Ua(Y0(),e,r))}function f9(t,e){return il(t,new Zu(Y0(),e))}function p9(t,e,n){const r=rw(t,n);if(r){const i=iw(r),s=i.path,o=i.queryId,a=on(s,e),l=new Zu(X0(o),a);return sw(t,s,l)}else return[]}function gf(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||Ax(o,e))){const l=a9(o,e,n,r);s9(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(p,g)=>ys(g));if(h&&!d){const p=t.syncPointTree_.subtree(s);if(!p.isEmpty()){const g=y9(p);for(let y=0;y<g.length;++y){const E=g[y],C=E.query,v=Dx(t,E);t.listenProvider_.startListening(yu(C),ec(t,C),v.hashFn,v.onComplete)}}}!d&&c.length>0&&!r&&(h?t.listenProvider_.stopListening(yu(e),null):c.forEach(p=>{const g=t.queryToTagMap.get(kp(p));t.listenProvider_.stopListening(yu(p),g)}))}_9(t,c)}return a}function xx(t,e,n,r){const i=rw(t,r);if(i!=null){const s=iw(i),o=s.path,a=s.queryId,l=on(o,e),c=new fo(X0(a),l,n);return sw(t,o,c)}else return[]}function m9(t,e,n,r){const i=rw(t,r);if(i){const s=iw(i),o=s.path,a=s.queryId,l=on(o,e),c=Be.fromObject(n),h=new Ua(X0(a),l,c);return sw(t,o,h)}else return[]}function v_(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(p,g)=>{const y=on(p,i);s=s||us(g,y),o=o||ys(g)});let a=t.syncPointTree_.get(i);a?(o=o||ys(a),s=s||us(a,Pe())):(a=new Cx,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=de.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,y)=>{const E=us(y,Pe());E&&(s=s.updateImmediateChild(g,E))}));const c=Ax(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=kp(e);J(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const g=v9();t.queryToTagMap.set(p,g),t.tagToQueryMap.set(g,p)}const h=bp(t.pendingWriteTree_,i);let d=o9(a,e,n,h,s,l);if(!c&&!o&&!r){const p=kx(a,e);d=d.concat(w9(t,e,p))}return d}function nw(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=on(o,e),c=us(a,l);if(c)return c});return vx(i,e,s,n,!0)}function g9(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=on(c,n);r=r||us(h,d)});let i=t.syncPointTree_.get(n);i?r=r||us(i,Pe()):(i=new Cx,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new gs(r,!0,!1):null,a=bp(t.pendingWriteTree_,e._path),l=bx(i,e,a,s?o.getNode():de.EMPTY_NODE,s);return Z6(l)}function il(t,e){return Nx(e,t.syncPointTree_,null,bp(t.pendingWriteTree_,Pe()))}function Nx(t,e,n,r){if(Ee(t.path))return Ox(t,e,n,r);{const i=e.get(Pe());n==null&&i!=null&&(n=us(i,Pe()));let s=[];const o=we(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=wx(r,o);s=s.concat(Nx(a,l,c,h))}return i&&(s=s.concat(tw(i,t,r,n))),s}}function Ox(t,e,n,r){const i=e.get(Pe());n==null&&i!=null&&(n=us(i,Pe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=wx(r,o),h=t.operationForChild(o);h&&(s=s.concat(Ox(h,a,l,c)))}),i&&(s=s.concat(tw(i,t,r,n))),s}function Dx(t,e){const n=e.query,r=ec(t,n);return{hashFn:()=>(J6(e)||de.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?p9(t,n._path,r):f9(t,n._path);{const s=fj(i,n);return gf(t,n,null,s)}}}}function ec(t,e){const n=kp(e);return t.queryToTagMap.get(n)}function kp(t){return t._path.toString()+"$"+t._queryIdentifier}function rw(t,e){return t.tagToQueryMap.get(e)}function iw(t){const e=t.indexOf("$");return J(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Le(t.substr(0,e))}}function sw(t,e,n){const r=t.syncPointTree_.get(e);J(r,"Missing sync point for query tag that we're tracking");const i=bp(t.pendingWriteTree_,e);return tw(r,n,i,null)}function y9(t){return t.fold((e,n,r)=>{if(n&&ys(n))return[Rp(n)];{let i=[];return n&&(i=Rx(n)),Mt(r,(s,o)=>{i=i.concat(o)}),i}})}function yu(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(u9())(t._repo,t._path):t}function _9(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=kp(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function v9(){return c9++}function w9(t,e,n){const r=e._path,i=ec(t,e),s=Dx(t,n),o=t.listenProvider_.startListening(yu(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)J(!ys(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,d)=>{if(!Ee(c)&&h&&ys(h))return[Rp(h).query];{let p=[];return h&&(p=p.concat(Rx(h).map(g=>g.query))),Mt(d,(g,y)=>{p=p.concat(y)}),p}});for(let c=0;c<l.length;++c){const h=l[c];t.listenProvider_.stopListening(yu(h),ec(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ow(n)}node(){return this.node_}}class aw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=tt(this.path_,e);return new aw(this.syncTree_,n)}node(){return nw(this.syncTree_,this.path_)}}const E9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},eI=function(t,e,n){if(!t||typeof t!="object")return t;if(J(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return T9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return S9(t[".sv"],e);J(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},T9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:J(!1,"Unexpected server value: "+t)}},S9=function(t,e,n){t.hasOwnProperty("increment")||J(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&J(!1,"Unexpected increment value: "+r);const i=e.node();if(J(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Mx=function(t,e,n,r){return lw(e,new aw(n,t),r)},Lx=function(t,e,n){return lw(t,new ow(e),n)};function lw(t,e,n){const r=t.getPriority().val(),i=eI(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=eI(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Rt(a,ct(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Rt(i))),o.forEachChild(nt,(a,l)=>{const c=lw(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function cw(t,e){let n=e instanceof Le?e:new Le(e),r=t,i=we(n);for(;i!==null;){const s=ka(r.node.children,i)||{children:{},childCount:0};r=new uw(i,r,s),n=je(n),i=we(n)}return r}function sl(t){return t.node.value}function Fx(t,e){t.node.value=e,w_(t)}function Vx(t){return t.node.childCount>0}function I9(t){return sl(t)===void 0&&!Vx(t)}function Ap(t,e){Mt(t.node.children,(n,r)=>{e(new uw(n,t,r))})}function $x(t,e,n,r){n&&!r&&e(t),Ap(t,i=>{$x(i,e,!0,r)}),n&&r&&e(t)}function C9(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Nc(t){return new Le(t.parent===null?t.name:Nc(t.parent)+"/"+t.name)}function w_(t){t.parent!==null&&b9(t.parent,t.name,t)}function b9(t,e,n){const r=I9(n),i=qr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,w_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,w_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=/[\[\].#$\/\u0000-\u001F\u007F]/,k9=/[\[\].#$\u0000-\u001F\u007F]/,xg=10*1024*1024,hw=function(t){return typeof t=="string"&&t.length!==0&&!R9.test(t)},Ux=function(t){return typeof t=="string"&&t.length!==0&&!k9.test(t)},A9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ux(t)},jx=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Sp(t)||t&&typeof t=="object"&&qr(t,".sv")},E_=function(t,e,n,r){Pp(Aa(t,"value"),e,n)},Pp=function(t,e,n){const r=n instanceof Le?new Gj(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ls(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ls(r)+" with contents = "+e.toString());if(Sp(e))throw new Error(t+"contains "+e.toString()+" "+Ls(r));if(typeof e=="string"&&e.length>xg/3&&Xf(e)>xg)throw new Error(t+"contains a string greater than "+xg+" utf8 bytes "+Ls(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Mt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!hw(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ls(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Kj(r,o),Pp(t,a,r),Qj(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ls(r)+" in addition to actual children.")}},P9=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Qu(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!hw(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}}e.sort(Hj);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Jn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},zx=function(t,e,n,r){const i=Aa(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Mt(e,(o,a)=>{const l=new Le(o);if(Pp(i,a,tt(n,l)),B0(l)===".priority"&&!jx(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),P9(i,s)},x9=function(t,e,n){if(Sp(e))throw new Error(Aa(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jx(e))throw new Error(Aa(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},Bx=function(t,e,n,r){if(!Ux(n))throw new Error(Aa(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},N9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Bx(t,e,n)},na=function(t,e){if(we(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},O9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!A9(n))throw new Error(Aa(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xp(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!W0(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wx(t,e,n){xp(t,n),qx(t,r=>W0(r,e))}function sr(t,e,n){xp(t,n),qx(t,r=>Jn(r,e)||Jn(e,r))}function qx(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(M9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function M9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();fu&&xt("event: "+n.toString()),nl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9="repo_interrupt",F9=25;class V9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new D9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lf(),this.transactionQueueTree_=new uw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $9(t,e,n){if(t.stats_=j0(t.repoInfo_),t.forceRestClient_||yj())t.server_=new af(t.repoInfo_,(r,i,s,o)=>{tI(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new di(t.repoInfo_,e,(r,i,s,o)=>{tI(t,r,i,s,o)},r=>{nI(t,r)},r=>{j9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Tj(t.repoInfo_,()=>new E6(t.stats_,t.server_)),t.infoData_=new g6,t.infoSyncTree_=new ZS({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=xc(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),dw(t,"connected",!1),t.serverSyncTree_=new ZS({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);sr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function U9(t){const n=t.infoData_.getNode(new Le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Np(t){return E9({timestamp:U9(t)})}function tI(t,e,n,r,i){t.dataUpdateCount++;const s=new Le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Vd(n,c=>ct(c));o=m9(t.serverSyncTree_,s,l,i)}else{const l=ct(n);o=xx(t.serverSyncTree_,s,l,i)}else if(r){const l=Vd(n,c=>ct(c));o=d9(t.serverSyncTree_,s,l)}else{const l=ct(n);o=xc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=za(t,s)),sr(t.eventQueue_,a,o)}function nI(t,e){dw(t,"connected",e),e===!1&&q9(t)}function j9(t,e){Mt(e,(n,r)=>{dw(t,n,r)})}function dw(t,e,n){const r=new Le("/.info/"+e),i=ct(n);t.infoData_.updateSnapshot(r,i);const s=xc(t.infoSyncTree_,r,i);sr(t.eventQueue_,r,s)}function fw(t){return t.nextWriteId_++}function z9(t,e,n){const r=g9(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=ct(i).withIndex(e._queryParams.getIndex());v_(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=xc(t.serverSyncTree_,e._path,s);else{const a=ec(t.serverSyncTree_,e);o=xx(t.serverSyncTree_,e._path,s,a)}return sr(t.eventQueue_,e._path,o),gf(t.serverSyncTree_,e,n,null,!0),s},i=>(Oc(t,"get for query "+Tt(e)+" failed: "+i),Promise.reject(new Error(i))))}function B9(t,e,n,r,i){Oc(t,"set",{path:e.toString(),value:n,priority:r});const s=Np(t),o=ct(n,r),a=nw(t.serverSyncTree_,e),l=Lx(o,a,s),c=fw(t),h=Px(t.serverSyncTree_,e,l,c,!0);xp(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,g)=>{const y=p==="ok";y||ln("set at "+e+" failed: "+p);const E=Qi(t.serverSyncTree_,c,!y);sr(t.eventQueue_,e,E),_s(t,i,p,g)});const d=mw(t,e);za(t,d),sr(t.eventQueue_,d,[])}function W9(t,e,n,r){Oc(t,"update",{path:e.toString(),value:n});let i=!0;const s=Np(t),o={};if(Mt(n,(a,l)=>{i=!1,o[a]=Mx(tt(e,a),ct(l),t.serverSyncTree_,s)}),i)xt("update() called with empty data.  Don't do anything."),_s(t,r,"ok",void 0);else{const a=fw(t),l=h9(t.serverSyncTree_,e,o,a);xp(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,h)=>{const d=c==="ok";d||ln("update at "+e+" failed: "+c);const p=Qi(t.serverSyncTree_,a,!d),g=p.length>0?za(t,e):e;sr(t.eventQueue_,g,p),_s(t,r,c,h)}),Mt(n,c=>{const h=mw(t,tt(e,c));za(t,h)}),sr(t.eventQueue_,e,[])}}function q9(t){Oc(t,"onDisconnectEvents");const e=Np(t),n=lf();f_(t.onDisconnect_,Pe(),(i,s)=>{const o=Mx(i,s,t.serverSyncTree_,e);rl(n,i,o)});let r=[];f_(n,Pe(),(i,s)=>{r=r.concat(xc(t.serverSyncTree_,i,s));const o=mw(t,i);za(t,o)}),t.onDisconnect_=lf(),sr(t.eventQueue_,Pe(),r)}function H9(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&d_(t.onDisconnect_,e),_s(t,n,r,i)})}function rI(t,e,n,r){const i=ct(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&rl(t.onDisconnect_,e,i),_s(t,r,s,o)})}function G9(t,e,n,r,i){const s=ct(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&rl(t.onDisconnect_,e,s),_s(t,i,o,a)})}function K9(t,e,n,r){if(Fd(n)){xt("onDisconnect().update() called with empty data.  Don't do anything."),_s(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&Mt(n,(o,a)=>{const l=ct(a);rl(t.onDisconnect_,tt(e,o),l)}),_s(t,r,i,s)})}function Q9(t,e,n){let r;we(e._path)===".info"?r=v_(t.infoSyncTree_,e,n):r=v_(t.serverSyncTree_,e,n),Wx(t.eventQueue_,e._path,r)}function iI(t,e,n){let r;we(e._path)===".info"?r=gf(t.infoSyncTree_,e,n):r=gf(t.serverSyncTree_,e,n),Wx(t.eventQueue_,e._path,r)}function Y9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(L9)}function Oc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),xt(n,...e)}function _s(t,e,n,r){e&&nl(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function Hx(t,e,n){return nw(t.serverSyncTree_,e,n)||de.EMPTY_NODE}function pw(t,e=t.transactionQueueTree_){if(e||Op(t,e),sl(e)){const n=Kx(t,e);J(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&X9(t,Nc(e),n)}else Vx(e)&&Ap(e,n=>{pw(t,n)})}function X9(t,e,n){const r=n.map(c=>c.currentWriteId),i=Hx(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];J(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=on(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Oc(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(Qi(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Op(t,cw(t.transactionQueueTree_,e)),pw(t,t.transactionQueueTree_),sr(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)nl(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ln("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}za(t,e)}},o)}function za(t,e){const n=Gx(t,e),r=Nc(n),i=Kx(t,n);return J9(t,i,r),r}function J9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=on(n,l.path);let h=!1,d;if(J(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(Qi(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=F9)h=!0,d="maxretry",i=i.concat(Qi(t.serverSyncTree_,l.currentWriteId,!0));else{const p=Hx(t,l.path,o);l.currentInputSnapshot=p;const g=e[a].update(p.val());if(g!==void 0){Pp("transaction failed: Data returned ",g,l.path);let y=ct(g);typeof g=="object"&&g!=null&&qr(g,".priority")||(y=y.updatePriority(p.getPriority()));const C=l.currentWriteId,v=Np(t),_=Lx(y,p,v);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=_,l.currentWriteId=fw(t),o.splice(o.indexOf(C),1),i=i.concat(Px(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Qi(t.serverSyncTree_,C,!0))}else h=!0,d="nodata",i=i.concat(Qi(t.serverSyncTree_,l.currentWriteId,!0))}sr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Op(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)nl(r[a]);pw(t,t.transactionQueueTree_)}function Gx(t,e){let n,r=t.transactionQueueTree_;for(n=we(e);n!==null&&sl(r)===void 0;)r=cw(r,n),e=je(e),n=we(e);return r}function Kx(t,e){const n=[];return Qx(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Qx(t,e,n){const r=sl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ap(e,i=>{Qx(t,i,n)})}function Op(t,e){const n=sl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Fx(e,n.length>0?n:void 0)}Ap(e,r=>{Op(t,r)})}function mw(t,e){const n=Nc(Gx(t,e)),r=cw(t.transactionQueueTree_,e);return C9(r,i=>{Ng(t,i)}),Ng(t,r),$x(r,i=>{Ng(t,i)}),n}function Ng(t,e){const n=sl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(J(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(J(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Qi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Fx(e,void 0):n.length=s+1,sr(t.eventQueue_,Nc(e),i);for(let o=0;o<r.length;o++)nl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}function ez(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ln("Invalid query segment '".concat(n,"' in query '").concat(t,"'"))}return e}const sI=function(t,e){const n=tz(t),r=n.namespace;n.domain==="firebase.com"&&Ei(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||lj();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ZP(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Le(n.pathString)}},tz=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=Z9(t.substring(h,d)));const p=ez(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Tt(this.snapshot.exportVal())}}class Xx{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return J(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Dr;return H9(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){na("OnDisconnect.remove",this._path);const e=new Dr;return rI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){na("OnDisconnect.set",this._path),E_("OnDisconnect.set",e,this._path);const n=new Dr;return rI(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){na("OnDisconnect.setWithPriority",this._path),E_("OnDisconnect.setWithPriority",e,this._path),x9("OnDisconnect.setWithPriority",n);const r=new Dr;return G9(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){na("OnDisconnect.update",this._path),zx("OnDisconnect.update",e,this._path);const n=new Dr;return K9(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ee(this._path)?null:B0(this._path)}get ref(){return new Hr(this._repo,this._path)}get _queryIdentifier(){const e=BS(this._queryParams),n=$0(e);return n==="{}"?"default":n}get _queryObject(){return BS(this._queryParams)}isEqual(e){if(e=Me(e),!(e instanceof gw))return!1;const n=this._repo===e._repo,r=W0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+qj(this._path)}}class Hr extends gw{constructor(e,n){super(e,n,new K0,!1)}get parent(){const e=lx(this._path);return e===null?null:new Hr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ba{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Le(e),r=yf(this.ref,e);return new Ba(this._node.getChild(n),r,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ba(i,yf(this.ref,r),nt)))}hasChild(e){const n=new Le(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vi(t,e){return t=Me(t),t._checkNotDeleted("ref"),e!==void 0?yf(t._root,e):t._root}function yf(t,e){return t=Me(t),we(t._path)===null?N9("child","path",e):Bx("child","path",e),new Hr(t._repo,tt(t._path,e))}function oI(t){return t=Me(t),new nz(t._repo,t._path)}function rz(t){return na("remove",t._path),T_(t,null)}function T_(t,e){t=Me(t),na("set",t._path),E_("set",e,t._path);const n=new Dr;return B9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function iz(t,e){zx("update",e,t._path);const n=new Dr;return W9(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Zx(t){t=Me(t);const e=new Jx(()=>{}),n=new Dp(e);return z9(t._repo,t,n).then(r=>new Ba(r,new Hr(t._repo,t._path),t._queryParams.getIndex()))}class Dp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Yx("value",this,new Ba(e.snapshotNode,new Hr(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Xx(this,e,n):null}matches(e){return e instanceof Dp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class yw{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Xx(this,e,n):null}createEvent(e,n){J(e.childName!=null,"Child events should have a childName.");const r=yf(new Hr(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Yx(e.type,this,new Ba(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof yw?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function eN(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(h,d)=>{iI(t._repo,t,a),l(h,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new Jx(n,s||void 0),a=e==="value"?new Dp(o):new yw(e,o);return Q9(t._repo,t,a),()=>iI(t._repo,t,a)}function sz(t,e,n,r){return eN(t,"value",e,n,r)}function oz(t,e,n,r){return eN(t,"child_removed",e,n,r)}r9(Hr);l9(Hr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az="FIREBASE_DATABASE_EMULATOR_HOST",S_={};let lz=!1;function uz(t,e,n,r){t.repoInfo_=new ZP("".concat(e,":").concat(n),!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function cz(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xt("Using default host for project ",t.options.projectId),s="".concat(t.options.projectId,"-default-rtdb.firebaseio.com"));let o=sI(s,i),a=o.repoInfo,l;typeof process<"u"&&CS&&(l=CS[az]),l?(s="http://".concat(l,"?ns=").concat(a.namespace),o=sI(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new vj(t.name,t.options,e);O9("Invalid Firebase Database URL",o),Ee(o.path)||Ei("Database URL must point to the root of a Firebase Database (not including a child path).");const h=dz(a,t,c,new _j(t.name,n));return new fz(h,t)}function hz(t,e){const n=S_[e];(!n||n[t.key]!==t)&&Ei("Database ".concat(e,"(").concat(t.repoInfo_,") has already been deleted.")),Y9(t),delete n[t.key]}function dz(t,e,n,r){let i=S_[e.name];i||(i={},S_[e.name]=i);let s=i[t.toURLString()];return s&&Ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new V9(t,lz,n,r),i[t.toURLString()]=s,s}class fz{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hr(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ei("Cannot call "+e+" on a deleted database.")}}function pz(t=Jf(),e){const n=Cs(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=ZR("database");r&&mz(n,...r)}return n}function mz(t,e,n,r={}){t=Me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ei("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new sd(sd.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:nk(r.mockUserToken,t.app.options.projectId);s=new sd(o)}uz(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(t){nj(vo),br(new ir("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return cz(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),wn(bS,RS,t),wn(bS,RS,"esm2017")}di.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};di.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};gz();const yz={apiKey:"AIzaSyAAx9xed3OJ12gkLhqDgkAw2f0TKzutIW4",authDomain:"chess-8426e.firebaseapp.com",projectId:"chess-8426e",storageBucket:"chess-8426e.appspot.com",messagingSenderId:"607251598004",appId:"1:607251598004:web:dd52ca4b826bbbcbbbe5e1",measurementId:"G-CR431E5BGW",databaseURL:{VITE_BASE_PATH:"/Chess/",VITE_ASSET_PATH:"/Chess/",VITE_FIREBASE_API_KEY:"AIzaSyAAx9xed3OJ12gkLhqDgkAw2f0TKzutIW4",VITE_FIREBASE_AUTH_DOMAIN:"chess-8426e.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"chess-8426e",VITE_FIREBASE_STORAGE_BUCKET:"chess-8426e.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"607251598004",VITE_FIREBASE_APP_ID:"1:607251598004:web:dd52ca4b826bbbcbbbe5e1",VITE_FIREBASE_MEASUREMENT_ID:"G-CR431E5BGW",VITE_FIREBASE_AUTH_DONAIN:"chess-8426e.firebaseapp.com",BASE_URL:"/Chess/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}.VITE_REAL_TIME_DB_URL},Mp=dk(yz);Y$(Mp);const _w=C4(Mp),pn=U5(Mp),$i=pz(Mp);/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tc.apply(this,arguments)}var Yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yi||(Yi={}));const aI="popstate";function _z(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Co(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),I_("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:tN(s))}function r(i,s){vw(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return wz(e,n,r,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch(n){}}}function vz(){return Math.random().toString(36).substr(2,8)}function lI(t,e){return{usr:t.state,key:t.key,idx:e}}function I_(t,e,n,r){return n===void 0&&(n=null),tc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Co(e):e,{state:n,key:e&&e.key||r||vz()})}function tN(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wz(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Yi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(tc({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Yi.Pop;let C=h(),v=C==null?null:C-c;c=C,l&&l({action:a,location:E.location,delta:v})}function p(C,v){a=Yi.Push;let _=I_(E.location,C,v);n&&n(_,C),c=h()+1;let w=lI(_,c),P=E.createHref(_);try{o.pushState(w,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(P)}s&&l&&l({action:a,location:E.location,delta:1})}function g(C,v){a=Yi.Replace;let _=I_(E.location,C,v);n&&n(_,C),c=h();let w=lI(_,c),P=E.createHref(_);o.replaceState(w,"",P),s&&l&&l({action:a,location:E.location,delta:0})}function y(C){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof C=="string"?C:tN(C);return _=_.replace(/ $/,"%20"),vt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let E={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(aI,d),l=C,()=>{i.removeEventListener(aI,d),l=null}},createHref(C){return e(i,C)},createURL:y,encodeLocation(C){let v=y(C);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(C){return o.go(C)}};return E}var uI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uI||(uI={}));function Ez(t,e,n){return n===void 0&&(n="/"),Tz(t,e,n,!1)}function Tz(t,e,n,r){let i=typeof e=="string"?Co(e):e,s=iN(i.pathname||"/",n);if(s==null)return null;let o=nN(t);Sz(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Dz(s);a=Nz(o[l],c,r)}return a}function nN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Js([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nN(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Pz(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of rN(s.path))i(s,o,l)}),e}function rN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=rN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Sz(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xz(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Iz=/^:[\w-]+$/,Cz=3,bz=2,Rz=1,kz=10,Az=-2,cI=t=>t==="*";function Pz(t,e){let n=t.split("/"),r=n.length;return n.some(cI)&&(r+=Az),e&&(r+=bz),n.filter(i=>!cI(i)).reduce((i,s)=>i+(Iz.test(s)?Cz:s===""?Rz:kz),r)}function xz(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Nz(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=hI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=hI({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Js([s,d.pathname]),pathnameBase:Vz(Js([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=Js([s,d.pathnameBase]))}return o}function hI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Oz(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let E=a[d]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Oz(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Dz(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function iN(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Mz(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Co(t):t;return{pathname:n?n.startsWith("/")?n:Lz(n,e):e,search:$z(r),hash:Uz(i)}}function Lz(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Og(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fz(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sN(t,e){let n=Fz(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function oN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Co(t):(i=tc({},t),vt(!i.pathname||!i.pathname.includes("?"),Og("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),Og("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),Og("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=Mz(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Js=t=>t.join("/").replace(/\/\/+/g,"/"),Vz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$z=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uz=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jz(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aN=["post","put","patch","delete"];new Set(aN);const zz=["get",...aN];new Set(zz);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(this,arguments)}const ww=k.createContext(null),Bz=k.createContext(null),Dc=k.createContext(null),Lp=k.createContext(null),bi=k.createContext({outlet:null,matches:[],isDataRoute:!1}),lN=k.createContext(null);function Mc(){return k.useContext(Lp)!=null}function Ew(){return Mc()||vt(!1),k.useContext(Lp).location}function uN(t){k.useContext(Dc).static||k.useLayoutEffect(t)}function Lc(){let{isDataRoute:t}=k.useContext(bi);return t?iB():Wz()}function Wz(){Mc()||vt(!1);let t=k.useContext(ww),{basename:e,future:n,navigator:r}=k.useContext(Dc),{matches:i}=k.useContext(bi),{pathname:s}=Ew(),o=JSON.stringify(sN(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return uN(()=>{a.current=!0}),k.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=oN(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Js([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const qz=k.createContext(null);function Hz(t){let e=k.useContext(bi).outlet;return e&&k.createElement(qz.Provider,{value:t},e)}function cN(){let{matches:t}=k.useContext(bi),e=t[t.length-1];return e?e.params:{}}function Gz(t,e){return Kz(t,e)}function Kz(t,e,n,r){Mc()||vt(!1);let{navigator:i}=k.useContext(Dc),{matches:s}=k.useContext(bi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ew(),h;if(e){var d;let C=typeof e=="string"?Co(e):e;l==="/"||(d=C.pathname)!=null&&d.startsWith(l)||vt(!1),h=C}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let C=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let y=Ez(t,{pathname:g}),E=Zz(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Js([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:Js([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&E?k.createElement(Lp.Provider,{value:{location:nc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Yi.Pop}},E):E}function Qz(){let t=rB(),e=jz(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const Yz=k.createElement(Qz,null);class Xz extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(bi.Provider,{value:this.props.routeContext},k.createElement(lN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jz(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(ww);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(bi.Provider,{value:e},r)}function Zz(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||vt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,E=null,C=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||Yz,l&&(c<0&&p===0?(y=!0,C=null):c===p&&(y=!0,C=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),_=()=>{let w;return g?w=E:y?w=C:d.route.Component?w=k.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,k.createElement(Jz,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?k.createElement(Xz,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var hN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hN||{}),_f=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_f||{});function eB(t){let e=k.useContext(ww);return e||vt(!1),e}function tB(t){let e=k.useContext(Bz);return e||vt(!1),e}function nB(t){let e=k.useContext(bi);return e||vt(!1),e}function dN(t){let e=nB(),n=e.matches[e.matches.length-1];return n.route.id||vt(!1),n.route.id}function rB(){var t;let e=k.useContext(lN),n=tB(_f.UseRouteError),r=dN(_f.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iB(){let{router:t}=eB(hN.UseNavigateStable),e=dN(_f.UseNavigateStable),n=k.useRef(!1);return uN(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,nc({fromRouteId:e},s)))},[t,e])}function dI(t){let{to:e,replace:n,state:r,relative:i}=t;Mc()||vt(!1);let{future:s,static:o}=k.useContext(Dc),{matches:a}=k.useContext(bi),{pathname:l}=Ew(),c=Lc(),h=oN(e,sN(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return k.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function fI(t){return Hz(t.context)}function ei(t){vt(!1)}function sB(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yi.Pop,navigator:s,static:o=!1,future:a}=t;Mc()&&vt(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:s,static:o,future:nc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Co(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,E=k.useMemo(()=>{let C=iN(h,l);return C==null?null:{location:{pathname:C,search:d,hash:p,state:g,key:y},navigationType:i}},[l,h,d,p,g,y,i]);return E==null?null:k.createElement(Dc.Provider,{value:c},k.createElement(Lp.Provider,{children:n,value:E}))}function oB(t){let{children:e,location:n}=t;return Gz(C_(e),n)}new Promise(()=>{});function C_(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,C_(r.props.children,s));return}r.type!==ei&&vt(!1),!r.props.index||!r.props.children||vt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=C_(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const aB="6";try{window.__reactRouterVersion=aB}catch(t){}const lB="startTransition",pI=wa[lB];function uB(t){let{basename:e,children:n,future:r,window:i}=t,s=k.useRef();s.current==null&&(s.current=_z({window:i,v5Compat:!0}));let o=s.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=k.useCallback(d=>{c&&pI?pI(()=>l(d)):l(d)},[l,c]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.createElement(sB,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var mI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mI||(mI={}));var gI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gI||(gI={}));var fN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yI=Nt.createContext&&Nt.createContext(fN),cB=["attr","size","title"];function hB(t,e){if(t==null)return{};var n=dB(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vf(){return vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vf.apply(this,arguments)}function _I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(n),!0).forEach(function(r){fB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fB(t,e,n){return e=pB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pB(t){var e=mB(t,"string");return typeof e=="symbol"?e:e+""}function mB(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pN(t){return t&&t.map((e,n)=>Nt.createElement(e.tag,wf({key:n},e.attr),pN(e.child)))}function gB(t){return e=>Nt.createElement(yB,vf({attr:wf({},t.attr)},e),pN(t.child))}function yB(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=hB(t,cB),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Nt.createElement("svg",vf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:wf(wf({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Nt.createElement("title",null,s),t.children)};return yI!==void 0?Nt.createElement(yI.Consumer,null,n=>e(n)):e(fN)}function _B(t){return gB({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(t)}const vB=()=>{const t=async()=>{const n=new ti;try{const i=(await DV(_w,n)).user;e(i)}catch(r){console.error("Error signing in with Google: ",r)}},e=async n=>{const r=gr(pn,"users",n.uid);await J5(r,{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL},{merge:!0})};return D.jsxs("div",{className:"Login",children:[D.jsxs("h1",{style:{color:"white"},children:["Log in to Play ",D.jsx("span",{style:{color:"#739552"},children:"Online"})]}),D.jsxs("button",{onClick:t,children:["Log in with Google ",D.jsx(_B,{style:{width:"40px",height:"40px"}})]})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ra=function(){return ra=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ra.apply(this,arguments)},mN=function(t){return{loading:t==null,value:t}},wB=function(){return function(t,e){switch(e.type){case"error":return ra(ra({},t),{error:e.error,loading:!1,value:void 0});case"reset":return mN(e.defaultValue);case"value":return ra(ra({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},EB=function(t){var e=void 0,n=k.useReducer(wB(),mN(e)),r=n[0],i=n[1],s=k.useCallback(function(){var l=void 0;i({type:"reset",defaultValue:l})},[t]),o=k.useCallback(function(l){i({type:"error",error:l})},[]),a=k.useCallback(function(l){i({type:"value",value:l})},[]);return k.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},TB=function(t,e,n){var r=k.useRef(t);return k.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},SB=function(t,e){var n=!t&&!e,r=!!t&&!!e&&V5(t,e);return n||r},IB=function(t,e){return TB(t,SB,e)},CB=function(t,e){var n=EB(),r=n.error,i=n.loading,s=n.reset,o=n.setError,a=n.setValue,l=n.value,c=IB(t,s);return k.useEffect(function(){if(!c.current){a(void 0);return}var h=tj(c.current,a,o);return function(){h()}},[c.current]),[l,i,r]},bB=function(t,e){var n=CB(t),r=n[0],i=n[1],s=n[2],o=RB(r,void 0,void 0);return[o,i,s,r]},RB=function(t,e,n){return k.useMemo(function(){var r;return(r=t==null?void 0:t.data(e))!==null&&r!==void 0?r:n},[t,e,n])},gN={exports:{}},yN={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=k;function kB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var AB=typeof Object.is=="function"?Object.is:kB,PB=Fc.useSyncExternalStore,xB=Fc.useRef,NB=Fc.useEffect,OB=Fc.useMemo,DB=Fc.useDebugValue;yN.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=xB(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=OB(function(){function l(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var y=o.value;if(i(y,g))return d=y}return d=g}if(y=d,AB(h,g))return y;var E=r(g);return i!==void 0&&i(y,E)?y:(h=g,d=E)}var c=!1,h,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=PB(t,s[0],s[1]);return NB(function(){o.hasValue=!0,o.value=a},[a]),DB(a),a};gN.exports=yN;var MB=gN.exports,Nn="default"in wa?Nt:wa,vI=Symbol.for("react-redux-context"),wI=typeof globalThis<"u"?globalThis:{};function LB(){var n;if(!Nn.createContext)return{};const t=(n=wI[vI])!=null?n:wI[vI]=new Map;let e=t.get(Nn.createContext);return e||(e=Nn.createContext(null),t.set(Nn.createContext,e)),e}var vs=LB(),FB=()=>{throw new Error("uSES not initialized!")};function Tw(t=vs){return function(){return Nn.useContext(t)}}var _N=Tw(),vN=FB,VB=t=>{vN=t},$B=(t,e)=>t===e;function UB(t=vs){const e=t===vs?_N:Tw(t),n=(r,i={})=>{const{equalityFn:s=$B,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:c,stabilityCheck:h,identityFunctionCheck:d}=e();Nn.useRef(!0);const p=Nn.useCallback({[r.name](y){return r(y)}}[r.name],[r,h,o.stabilityCheck]),g=vN(l.addNestedSub,a.getState,c||a.getState,p,s);return Nn.useDebugValue(g),g};return Object.assign(n,{withTypes:()=>n}),n}var ol=UB();function jB(t){t()}function zB(){let t=null,e=null;return{clear(){t=null,e=null},notify(){jB(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var EI={notify(){},get:()=>[]};function BB(t,e){let n,r=EI,i=0,s=!1;function o(E){h();const C=r.subscribe(E);let v=!1;return()=>{v||(v=!0,C(),d())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return s}function h(){i++,n||(n=t.subscribe(l),r=zB())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=EI)}function p(){s||(s=!0,h())}function g(){s&&(s=!1,d())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return y}var WB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qB=typeof navigator<"u"&&navigator.product==="ReactNative",HB=WB||qB?Nn.useLayoutEffect:Nn.useEffect;function GB({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Nn.useMemo(()=>{const c=BB(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=Nn.useMemo(()=>t.getState(),[t]);HB(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||vs;return Nn.createElement(l.Provider,{value:o},n)}var KB=GB;function wN(t=vs){const e=t===vs?_N:Tw(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var QB=wN();function YB(t=vs){const e=t===vs?QB:wN(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Fp=YB();VB(MB.useSyncExternalStoreWithSelector);function Vt(t){return"Minified Redux error #".concat(t,"; visit https://redux.js.org/Errors?code=").concat(t," for the full message or use the non-minified dev environment for full errors. ")}var XB=typeof Symbol=="function"&&Symbol.observable||"@@observable",TI=XB,Dg=()=>Math.random().toString(36).substring(7).split("").join("."),JB={INIT:"@@redux/INIT".concat(Dg()),REPLACE:"@@redux/REPLACE".concat(Dg()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(Dg())},Ef=JB;function Sw(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function EN(t,e,n){if(typeof t!="function")throw new Error(Vt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Vt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Vt(1));return n(EN)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((C,v)=>{o.set(v,C)}))}function h(){if(l)throw new Error(Vt(3));return i}function d(C){if(typeof C!="function")throw new Error(Vt(4));if(l)throw new Error(Vt(5));let v=!0;c();const _=a++;return o.set(_,C),function(){if(v){if(l)throw new Error(Vt(6));v=!1,c(),o.delete(_),s=null}}}function p(C){if(!Sw(C))throw new Error(Vt(7));if(typeof C.type>"u")throw new Error(Vt(8));if(typeof C.type!="string")throw new Error(Vt(17));if(l)throw new Error(Vt(9));try{l=!0,i=r(i,C)}finally{l=!1}return(s=o).forEach(_=>{_()}),C}function g(C){if(typeof C!="function")throw new Error(Vt(10));r=C,p({type:Ef.REPLACE})}function y(){const C=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Vt(11));function _(){const P=v;P.next&&P.next(h())}return _(),{unsubscribe:C(_)}},[TI](){return this}}}return p({type:Ef.INIT}),{dispatch:p,subscribe:d,getState:h,replaceReducer:g,[TI]:y}}function ZB(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ef.INIT})>"u")throw new Error(Vt(12));if(typeof n(void 0,{type:Ef.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vt(13))})}function eW(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{ZB(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let h=0;h<r.length;h++){const d=r[h],p=n[d],g=o[d],y=p(g,a);if(typeof y>"u")throw a&&a.type,new Error(Vt(14));c[d]=y,l=l||y!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Tf(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function tW(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Vt(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=Tf(...a)(i.dispatch),{...i,dispatch:s}}}function nW(t){return Sw(t)&&"type"in t&&typeof t.type=="string"}var TN=Symbol.for("immer-nothing"),SI=Symbol.for("immer-draftable"),Fn=Symbol.for("immer-state");function _r(t,...e){throw new Error("[Immer] minified error nr: ".concat(t,". Full error at: https://bit.ly/3cXEKWf"))}var Wa=Object.getPrototypeOf;function ws(t){return!!t&&!!t[Fn]}function Ti(t){var e;return t?SN(t)||Array.isArray(t)||!!t[SI]||!!((e=t.constructor)!=null&&e[SI])||$p(t)||Up(t):!1}var rW=Object.prototype.constructor.toString();function SN(t){if(!t||typeof t!="object")return!1;const e=Wa(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===rW}function Sf(t,e){Vp(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Vp(t){const e=t[Fn];return e?e.type_:Array.isArray(t)?1:$p(t)?2:Up(t)?3:0}function b_(t,e){return Vp(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function IN(t,e,n){const r=Vp(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function iW(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function $p(t){return t instanceof Map}function Up(t){return t instanceof Set}function Fs(t){return t.copy_||t.base_}function R_(t,e){if($p(t))return new Map(t);if(Up(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=SN(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Fn];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Wa(t),r)}else{const r=Wa(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Iw(t,e=!1){return jp(t)||ws(t)||!Ti(t)||(Vp(t)>1&&(t.set=t.add=t.clear=t.delete=sW),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Iw(r,!0))),t}function sW(){_r(2)}function jp(t){return Object.isFrozen(t)}var oW={};function mo(t){const e=oW[t];return e||_r(0,t),e}var rc;function CN(){return rc}function aW(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function II(t,e){e&&(mo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function k_(t){A_(t),t.drafts_.forEach(lW),t.drafts_=null}function A_(t){t===rc&&(rc=t.parent_)}function CI(t){return rc=aW(rc,t)}function lW(t){const e=t[Fn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bI(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Fn].modified_&&(k_(e),_r(4)),Ti(t)&&(t=If(e,t),e.parent_||Cf(e,t)),e.patches_&&mo("Patches").generateReplacementPatches_(n[Fn].base_,t,e.patches_,e.inversePatches_)):t=If(e,n,[]),k_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==TN?t:void 0}function If(t,e,n){if(jp(e))return e;const r=e[Fn];if(!r)return Sf(e,(i,s)=>RI(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Cf(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Sf(s,(a,l)=>RI(t,r,i,a,l,n,o)),Cf(t,i,!1),n&&t.patches_&&mo("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function RI(t,e,n,r,i,s,o){if(ws(i)){const a=s&&e&&e.type_!==3&&!b_(e.assigned_,r)?s.concat(r):void 0,l=If(t,i,a);if(IN(n,r,l),ws(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Ti(i)&&!jp(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;If(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Cf(t,i)}}function Cf(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Iw(e,n)}function uW(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:CN(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Cw;n&&(i=[r],s=ic);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Cw={get(t,e){if(e===Fn)return t;const n=Fs(t);if(!b_(n,e))return cW(t,n,e);const r=n[e];return t.finalized_||!Ti(r)?r:r===Mg(t.base_,e)?(Lg(t),t.copy_[e]=x_(r,t)):r},has(t,e){return e in Fs(t)},ownKeys(t){return Reflect.ownKeys(Fs(t))},set(t,e,n){const r=bN(Fs(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Mg(Fs(t),e),s=i==null?void 0:i[Fn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(iW(n,i)&&(n!==void 0||b_(t.base_,e)))return!0;Lg(t),P_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Mg(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Lg(t),P_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Fs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){_r(11)},getPrototypeOf(t){return Wa(t.base_)},setPrototypeOf(){_r(12)}},ic={};Sf(Cw,(t,e)=>{ic[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ic.deleteProperty=function(t,e){return ic.set.call(this,t,e,void 0)};ic.set=function(t,e,n){return Cw.set.call(this,t[0],e,n,t[0])};function Mg(t,e){const n=t[Fn];return(n?Fs(n):t)[e]}function cW(t,e,n){var i;const r=bN(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function bN(t,e){if(!(e in t))return;let n=Wa(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Wa(n)}}function P_(t){t.modified_||(t.modified_=!0,t.parent_&&P_(t.parent_))}function Lg(t){t.copy_||(t.copy_=R_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var hW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,h=>n.call(this,h,...c))}}typeof n!="function"&&_r(6),r!==void 0&&typeof r!="function"&&_r(7);let i;if(Ti(e)){const s=CI(this),o=x_(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?k_(s):A_(s)}return II(s,r),bI(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===TN&&(i=void 0),this.autoFreeze_&&Iw(i,!0),r){const s=[],o=[];mo("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else _r(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ti(t)||_r(8),ws(t)&&(t=RN(t));const e=CI(this),n=x_(t,void 0);return n[Fn].isManual_=!0,A_(e),n}finishDraft(t,e){const n=t&&t[Fn];(!n||!n.isManual_)&&_r(9);const{scope_:r}=n;return II(r,e),bI(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=mo("Patches").applyPatches_;return ws(t)?r(t,e):this.produce(t,i=>r(i,e))}};function x_(t,e){const n=$p(t)?mo("MapSet").proxyMap_(t,e):Up(t)?mo("MapSet").proxySet_(t,e):uW(t,e);return(e?e.scope_:CN()).drafts_.push(n),n}function RN(t){return ws(t)||_r(10,t),kN(t)}function kN(t){if(!Ti(t)||jp(t))return t;const e=t[Fn];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=R_(t,e.scope_.immer_.useStrictShallowCopy_)}else n=R_(t,!0);return Sf(n,(r,i)=>{IN(n,r,kN(i))}),e&&(e.finalized_=!1),n}var Vn=new hW,AN=Vn.produce;Vn.produceWithPatches.bind(Vn);Vn.setAutoFreeze.bind(Vn);Vn.setUseStrictShallowCopy.bind(Vn);Vn.applyPatches.bind(Vn);Vn.createDraft.bind(Vn);Vn.finishDraft.bind(Vn);function dW(t,e="expected a function, instead received ".concat(typeof t)){if(typeof t!="function")throw new TypeError(e)}function fW(t,e="expected an object, instead received ".concat(typeof t)){if(typeof t!="object")throw new TypeError(e)}function pW(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?"function ".concat(r.name||"unnamed","()"):typeof r).join(", ");throw new TypeError("".concat(e,"[").concat(n,"]"))}}var kI=t=>Array.isArray(t)?t:[t];function mW(t){const e=Array.isArray(t[0])?t[0]:t;return pW(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function gW(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var yW=class{constructor(t){this.value=t}deref(){return this.value}},_W=typeof WeakRef<"u"?WeakRef:yW,vW=0,AI=1;function Oh(){return{s:vW,v:void 0,o:null,p:null}}function bw(t,e={}){let n=Oh();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d,p;let a=n;const{length:l}=arguments;for(let g=0,y=l;g<y;g++){const E=arguments[g];if(typeof E=="function"||typeof E=="object"&&E!==null){let C=a.o;C===null&&(a.o=C=new WeakMap);const v=C.get(E);v===void 0?(a=Oh(),C.set(E,a)):a=v}else{let C=a.p;C===null&&(a.p=C=new Map);const v=C.get(E);v===void 0?(a=Oh(),C.set(E,a)):a=v}}const c=a;let h;if(a.s===AI)h=a.v;else if(h=t.apply(null,arguments),s++,r){const g=(p=(d=i==null?void 0:i.deref)==null?void 0:d.call(i))!=null?p:i;g!=null&&r(g,h)&&(h=g,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new _W(h):h}return c.s=AI,c.v=h,h}return o.clearCache=()=>{n=Oh(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function PN(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),dW(c,"createSelector expects an output function after the inputs, but received: [".concat(typeof c,"]"));const h={...n,...l},{memoize:d,memoizeOptions:p=[],argsMemoize:g=bw,argsMemoizeOptions:y=[],devModeChecks:E={}}=h,C=kI(p),v=kI(y),_=mW(i),w=d(function(){return s++,c.apply(null,arguments)},...C),P=g(function(){o++;const L=gW(_,arguments);return a=w.apply(null,L),a},...v);return Object.assign(P,{resultFunc:c,memoizedResultFunc:w,dependencies:_,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var wW=PN(bw),EW=Object.assign((t,e=wW)=>{fW(t,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof t));const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>EW});function xN(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var TW=xN(),SW=xN,IW=(...t)=>{const e=PN(...t),n=Object.assign((...r)=>{const i=e(...r),s=(o,...a)=>i(ws(o)?RN(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};IW(bw);var CW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tf:Tf.apply(null,arguments)};function qa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Tn(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>"".concat(t),n.type=t,n.match=r=>nW(r)&&r.type===t,n}var NN=class Yl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yl.prototype)}static get[Symbol.species](){return Yl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yl(...e[0].concat(this)):new Yl(...e.concat(this))}};function PI(t){return Ti(t)?AN(t,()=>{}):t}function xI(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(Tn(10));const r=n.insert(e,t);return t.set(e,r),r}function bW(t){return typeof t=="boolean"}var RW=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e!=null?e:{};let o=new NN;return n&&(bW(n)?o.push(TW):o.push(SW(n.extraArgument))),o},kW="RTK_autoBatch",ON=t=>e=>{setTimeout(e,t)},AW=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ON(10),PW=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?AW:t.type==="callback"?t.queueNotification:ON(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const d=()=>i&&h(),p=r.subscribe(d);return a.add(h),()=>{p(),a.delete(h)}},dispatch(h){var d;try{return i=!((d=h==null?void 0:h.meta)!=null&&d[kW]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(h)}finally{i=!0}}})},xW=t=>function(n){const{autoBatch:r=!0}=n!=null?n:{};let i=new NN(t);return r&&i.push(PW(typeof r=="object"?r:void 0)),i},NW=!0;function OW(t){const e=RW(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Sw(n))a=eW(n);else throw new Error(Tn(1));let l;typeof r=="function"?l=r(e):l=e();let c=Tf;i&&(c=CW({trace:!NW,...typeof i=="object"&&i}));const h=tW(...l),d=xW(h);let p=typeof o=="function"?o(d):d();const g=c(...p);return EN(a,s,g)}function DN(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Tn(28));if(a in e)throw new Error(Tn(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function DW(t){return typeof t=="function"}function MW(t,e){let[n,r,i]=DN(e),s;if(DW(t))s=()=>PI(t());else{const a=PI(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[i]),c.reduce((h,d)=>{if(d)if(ws(h)){const g=d(h,l);return g===void 0?h:g}else{if(Ti(h))return AN(h,p=>d(p,l));{const p=d(h,l);if(p===void 0){if(h===null)return h;throw new Error(Tn(9))}return p}}return h},a)}return o.getInitialState=s,o}var LW="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",FW=(t=21)=>{let e="",n=t;for(;n--;)e+=LW[Math.random()*64|0];return e},VW=Symbol.for("rtk-slice-createasyncthunk");function $W(t,e){return"".concat(t,"/").concat(e)}function UW({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[VW];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Tn(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(BW()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(w,P){const O=typeof w=="string"?w:w.type;if(!O)throw new Error(Tn(12));if(O in c.sliceCaseReducersByType)throw new Error(Tn(13));return c.sliceCaseReducersByType[O]=P,h},addMatcher(w,P){return c.sliceMatchers.push({matcher:w,reducer:P}),h},exposeAction(w,P){return c.actionCreators[w]=P,h},exposeCaseReducer(w,P){return c.sliceCaseReducersByName[w]=P,h}};l.forEach(w=>{const P=a[w],O={reducerName:w,type:$W(s,w),createNotation:typeof i.reducers=="function"};qW(P)?GW(O,P,h,e):WW(O,P,h)});function d(){const[w={},P=[],O=void 0]=typeof i.extraReducers=="function"?DN(i.extraReducers):[i.extraReducers],L={...w,...c.sliceCaseReducersByType};return MW(i.initialState,S=>{for(let T in L)S.addCase(T,L[T]);for(let T of c.sliceMatchers)S.addMatcher(T.matcher,T.reducer);for(let T of P)S.addMatcher(T.matcher,T.reducer);O&&S.addDefaultCase(O)})}const p=w=>w,g=new Map;let y;function E(w,P){return y||(y=d()),y(w,P)}function C(){return y||(y=d()),y.getInitialState()}function v(w,P=!1){function O(S){let T=S[w];return typeof T>"u"&&P&&(T=C()),T}function L(S=p){const T=xI(g,P,{insert:()=>new WeakMap});return xI(T,S,{insert:()=>{var R;const b={};for(const[x,N]of Object.entries((R=i.selectors)!=null?R:{}))b[x]=jW(N,S,C,P);return b}})}return{reducerPath:w,getSelectors:L,get selectors(){return L(O)},selectSlice:O}}const _={name:s,reducer:E,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:C,...v(o),injectInto(w,{reducerPath:P,...O}={}){const L=P!=null?P:o;return w.inject({reducerPath:L,reducer:E},O),{..._,...v(L,!0)}}};return _}}function jW(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var zW=UW();function BW(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function WW({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!HW(r))throw new Error(Tn(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?qa(t,o):qa(t))}function qW(t){return t._reducerDefinitionType==="asyncThunk"}function HW(t){return t._reducerDefinitionType==="reducerWithPrepare"}function GW({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Tn(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:h}=n,d=i(t,s,h);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:o||Dh,pending:a||Dh,rejected:l||Dh,settled:c||Dh})}function Dh(){}var KW=(t,e)=>{if(typeof t!="function")throw new Error(Tn(32))},Rw="listenerMiddleware",QW=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=qa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Tn(21));return KW(s),{predicate:i,type:e,effect:s}},YW=Object.assign(t=>{const{type:e,predicate:n,effect:r}=QW(t);return{id:FW(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Tn(22))}}},{withTypes:()=>YW}),XW=Object.assign(qa("".concat(Rw,"/add")),{withTypes:()=>XW});qa("".concat(Rw,"/removeAll"));var JW=Object.assign(qa("".concat(Rw,"/remove")),{withTypes:()=>JW});function Tn(t){return"Minified Redux Toolkit error #".concat(t,"; visit https://redux-toolkit.js.org/Errors?code=").concat(t," for the full message or use the non-minified dev environment for full errors. ")}const ZW={loading:!1,error:null,popup:!1,uesr:null,gameData:null},MN=zW({name:"userSlice",initialState:ZW,reducers:{setError:(t,e)=>{t.error=e.payload},setPopup:(t,e)=>{t.popup=!!e.payload},setUser:(t,e)=>{t.user=e.payload},showPopup:(t,e)=>{t.error=e.payload,t.popup=!0},setReduxGameData:(t,e)=>{t.gameData=e.payload}},extraReducers:t=>{}}),{setError:e8,setPopup:t8,showPopup:N_,setUser:NI,setReduxGameData:ZQ}=MN.actions,n8=MN.reducer;function r8(){const{user:t}=ol(_=>_.user),e=Fp(),[n,r]=k.useState([]),[i,s]=k.useState(""),[o,a]=k.useState(""),l=Vi($i,"queue/".concat(t.uid)),c=Vi($i,"queue/"),h=Vi($i,"games/");tf(pn,"games");const[d,p]=k.useState([]),[g,y]=k.useState(5),E=Lc();k.useEffect(()=>{Zx(c).then(_=>{_.exists&&r(Object.values(_.val()||{}))}).catch(_=>{console.error("error while getting queue data: ",_)}),sz(h,_=>{_.exists()?p([_.val()]):p([])},_=>{console.log(_)})},[]),k.useEffect(()=>{(async()=>{if(console.log("queueData: ",n),!(n.filter(R=>R.uid===t.uid).length>0))return;const P=n.filter(R=>R.uid!==t.uid);if(console.log("filtered: ",P),!(P.length>0))return;const O=n.findIndex(R=>R.uid===t.uid),L=n.findIndex(R=>R.uid===P[0].uid);let S;O<L?(t.uid+""+P[0].uid,S={player1:t.uid,player2:P[0].uid,status:"waiting",moveHistory:[],createdAt:new Date().toISOString()}):(P[0].uid+""+t.uid,S={player1:P[0].uid,player2:t.uid,status:"waiting",moveHistory:[],createdAt:new Date().toISOString()});const T=tf(pn,"games"),b=await ej(T,S);await T_(Vi($i,"games/".concat(b.id)),S)})()},[n]),k.useEffect(()=>{if(d&&d.length>0&&!i){console.log("gamesData: ",d);const _=d.find(w=>{const P=Object.values(w)[0];return P.status==="waiting"&&(P.player1===t.uid||P.player2===t.uid)});if(console.log("filtered game data: ",_),_&&Object.values(_).length>0){const w=Object.values(_)[0],P=Object.keys(_)[0];console.log("game: ",w),v(),a(P),s(w.player1===t.uid?w.player1:w.player2),oI(Vi($i,"games/".concat(P))).remove().then(()=>{console.log("onDisconnect setup for game")}).catch(O=>{console.error("Error setting up onDisconnect:",O)}),oz(Vi($i,"games/".concat(P)),()=>{s(""),a(""),E("/"),e(N_("Opponent disconnected"))},O=>{console.log(O)})}}},[o,d]),k.useEffect(()=>{if(o){const _=setInterval(()=>{y(P=>P>0?P-1:(clearInterval(_),P))},1e3),w=setTimeout(()=>{console.log("NAVIGATING"),E("/online/".concat(o))},5e3);return()=>{clearInterval(_),clearTimeout(w)}}},[o,i]);const C=async()=>{try{await T_(l,{uid:t.uid}),oI(l).remove().then(()=>{console.log("onDisconnect setup for user")}).catch(_=>{console.error("Error setting up onDisconnect:",_)}),console.log("User added to queue")}catch(_){console.error("Error adding user to queue:",_)}},v=async()=>{try{await rz(l).then(()=>{console.log("removed")}).catch(_=>{console.error("error removing user from queue: ",_)})}catch(_){console.error("error while removing user from queue: ",_)}};return k.useEffect(()=>{if(!o)return console.log("adding"),C(),()=>{console.log("removing"),v()}},[]),D.jsx("div",{style:{color:"white"},children:i?"Match Found ".concat(g):"waiting in queue. . ."})}function LN({board:t,selectedPiece:e,setSelectedPiece:n,turn:r,userTurn:i}){return t.map((s,o)=>{const a=o+1,l=s.split("");let c=l[0]==="w";if(s&&s!=="h"&&l.length>0&&l.length<3)return D.jsx("div",{onClick:()=>{r===c&&r===i&&n({piece:s,position:a})},className:"".concat(s," square-").concat(a," piece ").concat(e.piece===s&&e.position===a?"selected-piece":"")},a);if(s==="h")return D.jsx("div",{className:"square-".concat(a," possible-move")},a);if(l[2]==="c"){let h="".concat(l[0]).concat(l[1]);return D.jsx("div",{className:"".concat(h," square-").concat(a," piece capturable ").concat(e.piece===h&&e.position===a?"selected-piece":"")},a)}else return null})}const i8=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],Rs="/Chess/",s8=new Audio(Rs+"assets/audio/capture.mp3");new Audio(Rs+"assets/audio/castle.mp3");const o8=new Audio(Rs+"assets/audio/check.mp3"),a8=new Audio(Rs+"assets/audio/checkMate.mp3");new Audio(Rs+"assets/audio/gameOver.mp3");const l8=new Audio(Rs+"assets/audio/gameStart.mp3"),u8=new Audio(Rs+"assets/audio/move.mp3"),c8=new Audio(Rs+"assets/audio/stalemate.mp3");function h8({customMoveHistory:t,muted:e,className:n,gameData:r,showEndScreen:i}){const{ID:s}=cN(),{user:o}=ol(G=>G.user),a={piece:"",position:""},l=(r==null?void 0:r.player1)===o.uid,[c,h]=k.useState(a),[d,p]=k.useState(i8),[g,y]=k.useState(!0),[E,C]=k.useState([]),[v,_]=k.useState(!1),[w,P]=k.useState([]),[O,L]=k.useState(""),[S,T]=k.useState(null),[b,R,x]=bB(gr(pn,"games",s));k.useEffect(()=>{b&&!R&&(console.log("dbGameData: ",b),C((b==null?void 0:b.moveHistory)||[]))},[b]),k.useEffect(()=>{if(Array.isArray(t)){const G=Array.from(t);C(G)}},[t]);const N=G=>{const H=parseInt(G.split("-")[1]),j=H-1;if(c.piece.charAt(1)==="p"&&!S){if(c.piece.charAt(0)==="w"&&j>=0&&j<8){T({piece:c.piece,from:c.position-1,to:j}),L("w".concat(H.toString().charAt(H.toString().length-1)));return}else if(c.piece.charAt(0)==="b"&&j>=56&&j<64){T({piece:c.piece,from:c.position-1,to:j}),L("b".concat((H-6).toString().charAt(H.toString().length-1)));return}}Ql(gr(pn,"games",s),{...r,moveHistory:[...E,{piece:c.piece,from:c.position-1,to:j,captured:d[j]!==""&&d[j]!=="h"?d[j].split("")[0]+d[j].split("")[1]:""}]},{merge:!0}),h(a)},A=G=>{S&&G&&(Ql(gr(pn,"games",s),{...r,moveHistory:[...E,{piece:S.piece,from:S.from,to:S.to,captured:d[S.to]!==""&&d[S.to]!=="h"?d[S.to].split("")[0]+d[S.to].split("")[1]:"",promotedTo:G}]},{merge:!0}),T(null),L(""))},V=G=>{e||G.play()};k.useEffect(()=>{V(l8)},[]);const W=(G,H,j,$)=>{const ie=$+1;let ee=[],ne=[],he=[],ve=[];if(H==="w"){if(j==="p"){$>=48&&$<=55?(he=[$-8,$-16],ve=[$-7,$-9]):(he=[$-8],ve=[$-7,$-9]),$%8===0&&(ve=ve.filter(ue=>ue!==$-9)),$%8===1&&(ve=ve.filter(ue=>ue!==$-7));let le=!1;he.forEach(ue=>{ue>=0&&G[ue]===""&&!le?ne.push(ue):le=!0}),ve.forEach(ue=>{ue>=0&&G[ue]!==""&&G[ue].charAt(0)!==H&&ee.push(ue)})}}else if(j==="p"){const le=ie-1;le>=8&&le<=15?(he=[le+8,le+16],ve=[le+7,le+9]):(he=[le+8],ve=[le+7,le+9]),le%8===0&&(ve=ve.filter(Re=>Re!==le+7)),le%8===1&&(ve=ve.filter(Re=>Re!==le+9));let ue=!1;he.forEach(Re=>{Re>=0&&G[Re]===""&&!ue?ne.push(Re):ue=!0}),ve.forEach(Re=>{Re>=0&&G[Re]!==""&&G[Re].charAt(0)!==H&&ee.push(Re)})}if(j==="r"||j==="q"){let le=$,ue=!1;for(let me=le+8;me<64&&!ue;me+=8)G[me]!=""?(ue=!0,G[me].charAt(0)!==H&&ee.push(me)):ee.push(me);let Re=!1;for(let me=le-8;me>=0&&!Re;me-=8)G[me]!=""?(Re=!0,G[me].charAt(0)!==H&&ee.push(me)):ee.push(me);let Ge=!1;for(let me=le+1;me%8!==0&&!Ge;me+=1)G[me]!=""?(Ge=!0,G[me].charAt(0)!==H&&ee.push(me)):ee.push(me);let ce=!1;for(let me=le-1;me%8!==7&&me>=0&&!ce;me-=1)G[me]!=""?(ce=!0,G[me].charAt(0)!==H&&ee.push(me)):ee.push(me)}if(j==="b"||j==="q"){let le=!1;for(let ce=$+9;ce<64&&ce%8!==0&&!le;ce+=9)G[ce]!==""?(le=!0,G[ce].charAt(0)!==H&&ee.push(ce)):ee.push(ce);let ue=!1;for(let ce=$-9;ce>=0&&ce%8!==7&&!ue;ce-=9)G[ce]!==""?(ue=!0,G[ce].charAt(0)!==H&&ee.push(ce)):ee.push(ce);let Re=!1;for(let ce=$+7;ce<64&&ce%8!==7&&!Re;ce+=7)G[ce]!==""?(Re=!0,G[ce].charAt(0)!==H&&ee.push(ce)):ee.push(ce);let Ge=!1;for(let ce=$-7;ce>=0&&ce%8!==0&&!Ge;ce-=7)G[ce]!==""?(Ge=!0,G[ce].charAt(0)!==H&&ee.push(ce)):ee.push(ce)}if(j==="k"){let le=[$+7,$-7,$+8,$-8,$+9,$-9,$+1,$-1];$%8===7?le=le.filter(ue=>ue!==$+1&&ue!==$-7&&ue!==$+9):$%8===0&&(le=le.filter(ue=>ue!==$-1&&ue!==$+7&&ue!==$-9)),le.forEach(ue=>{ue>=0&&ue<64&&(G[ue]===""||G[ue].charAt(0)!==H)&&ee.push(ue)})}if(j==="n"){const le=$-15,ue=$-17,Re=$+17,Ge=$+15,ce=$-10,me=$+6,Bn=$-6,hl=$+10,Ri=((ie%8?ie%8:8)-8)*-1,Kr=(ie%8?ie%8:8)-1,Wn=Math.floor(ie/8),ur=Math.floor((64-ie)/8),qn=cr=>{cr>=0&&cr<64&&(G[cr]===""||G[cr].charAt(0)!==H)&&ee.push(cr)};Ri>0&&Wn>1&&qn(le),Ri>1&&Wn>0&&qn(Bn),Ri>1&&ur>0&&qn(hl),ur>1&&Ri>0&&qn(Re),ur>1&&Kr>0&&qn(Ge),Kr>1&&ur>0&&qn(me),Kr>1&&Wn>0&&qn(ce),Wn>1&&Kr>0&&qn(ue)}return[ee.filter(le=>le>=0&&le<64),ne.filter(le=>le>=0&&le<64)]},z=G=>{let H=d;G.forEach(j=>{if(!(j>=0&&j<64))return;let $=g?"b":"w";H[j]!==""?H[j].charAt(0)===$&&(H[j]="".concat(H[j],"c")):H[j]="h";let ie=Array.from(H);p(ie)})},B=G=>{const H=g?"b":"w",j=g?"w":"b",$=G.findIndex(ee=>(ee==null?void 0:ee.charAt(0))===j&&ee.charAt(1)==="k");let ie=!1;return G.forEach((ee,ne)=>{if(!(ee===""||ie))if(ee.charAt(0)===H){const he=ee.charAt(1);let[ve]=W(G,H,he,ne);if(ve.includes($)){ie=!0;return}}else return}),ie},U=(G,H)=>{let j=[...d];j=j.map(ee=>{if(ee==="")return ee;const ne=ee.split("");return ne.includes("h")?"":ne.includes("c")?"".concat(ne[0]).concat(ne[1]):ee});let $=j[G];return j[G]="",j[H]=$,B(j)},Q=()=>{const G=g?"w":"b";let H=[];return d.forEach((j,$)=>{if(j!=="")if(j.charAt(0)===G){const ie=j.charAt(1);let[ee,ne]=W(d,G,ie,$);[...ee,...ne].forEach(ve=>{if(!(ve>=0&&ve<64))return;U($,ve)||H.push({moveIndex:ve,piece:j,index:$})})}else return}),H};k.useEffect(()=>{const G=B(d);_(G);const H=Q();P(H),!(H.length>0)&&G===!0?(Ql(gr(pn,"games",s),{...r,status:"ended"},{merge:!0}),V(a8),i&&i(g!==l?"user":"opponent")):!(H.length>0)&&G===!1?(Ql(gr(pn,"games",s),{...r,status:"ended"},{merge:!0}),V(c8),i&&i("stalemate")):H.length>0&&G===!0?V(o8):H.length>0&&G===!1&&E.length>0&&(E[E.length-1].captured?V(s8):V(u8))},[g]),k.useEffect(()=>{if(c.piece&&c.position){const G=H=>{const j=Array.from(H.target.classList);H.target.classList.contains("possible-move")?N(j[0]):H.target.classList.contains("capturable")?N(j[1]):(h(a),p($=>$.map(ie=>{const ee=ie.split("");return ee.includes("h")?"":ee.includes("c")?"".concat(ee[0]).concat(ee[1]):ie})))};return document.getElementById("board-grid").addEventListener("click",G),()=>{document.getElementById("board-grid").removeEventListener("click",G)}}else p(G=>G.map(H=>{const j=H.split("");return j.includes("h")?"":j.includes("c")?"".concat(j[0]).concat(j[1]):H}))},[c]),k.useEffect(()=>{if(c.piece&&c.position){const[G,H]=c.piece.split(""),j=c.position;let[$,ie]=W(d,G,H,j-1),ee=[...$,...ie].filter(ne=>w.filter(he=>he.piece===c.piece&&he.index===j-1&&he.moveIndex===ne).length>0);z(ee)}},[c]);const te=G=>{let H=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],j=[];return G.length>0?(G.forEach($=>{H[$.from]="",H[$.to]=$.promotedTo||$.piece,$.captured&&j.push($.captured)}),{boardToSend:H,capturedPieces:j}):{boardToSend:H,capturedPieces:j}};return k.useEffect(()=>{if(!(E.length>0)){p(["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"]),y(!0);return}const{boardToSend:G,capturedPieces:H}=te(E),j=Array.from(G);p(j),y($=>!$)},[E]),D.jsxs("div",{className:"board "+(l?"":"rotate ")+(v?"check-"+(g?"w":"b")+"k":"")+(n?" "+n:""),children:[" ",D.jsxs("div",{className:"board-grid",id:"board-grid",children:[D.jsx(LN,{board:d,selectedPiece:c,setSelectedPiece:h,turn:g,userTurn:l}),D.jsxs("div",{className:"promote-".concat(O.charAt(0),"p square-").concat(O.slice(1)," promote"),children:[D.jsx("div",{className:"".concat(O.charAt(0),"q"),onClick:()=>{A("".concat(O.charAt(0),"q"))}}),D.jsx("div",{className:"".concat(O.charAt(0),"n"),onClick:()=>{A("".concat(O.charAt(0),"n"))}}),D.jsx("div",{className:"".concat(O.charAt(0),"r"),onClick:()=>{A("".concat(O.charAt(0),"r"))}}),D.jsx("div",{className:"".concat(O.charAt(0),"b"),onClick:()=>{A("".concat(O.charAt(0),"b"))}}),D.jsx("div",{className:"promotion-close-btn",onClick:()=>{L(""),T(null)},children:"x"})]})]})]})}const sc={black:"#000",white:"#fff"},Oo={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Do={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Mo={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Lo={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Fo={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},$l={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},d8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function oc(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const f8=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"})),bf="$$material";function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q.apply(null,arguments)}function Fe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function FN(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var p8=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,m8=FN(function(t){return p8.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),g8=!1;function y8(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function _8(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var v8=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!g8:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(_8(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=y8(i);try{s.insertRule(r,s.cssRules.length)}catch(o){}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Xt="-ms-",Rf="-moz-",xe="-webkit-",VN="comm",kw="rule",Aw="decl",w8="@import",$N="@keyframes",E8="@layer",T8=Math.abs,zp=String.fromCharCode,S8=Object.assign;function I8(t,e){return Ut(t,0)^45?(((e<<2^Ut(t,0))<<2^Ut(t,1))<<2^Ut(t,2))<<2^Ut(t,3):0}function UN(t){return t.trim()}function C8(t,e){return(t=e.exec(t))?t[0]:t}function Ne(t,e,n){return t.replace(e,n)}function O_(t,e){return t.indexOf(e)}function Ut(t,e){return t.charCodeAt(e)|0}function ac(t,e,n){return t.slice(e,n)}function xr(t){return t.length}function Pw(t){return t.length}function Mh(t,e){return e.push(t),t}function b8(t,e){return t.map(e).join("")}var Bp=1,Ha=1,jN=0,Sn=0,gt=0,al="";function Wp(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Bp,column:Ha,length:o,return:""}}function Ul(t,e){return S8(Wp("",null,null,"",null,null,0),t,{length:-t.length},e)}function R8(){return gt}function k8(){return gt=Sn>0?Ut(al,--Sn):0,Ha--,gt===10&&(Ha=1,Bp--),gt}function Mn(){return gt=Sn<jN?Ut(al,Sn++):0,Ha++,gt===10&&(Ha=1,Bp++),gt}function jr(){return Ut(al,Sn)}function od(){return Sn}function Vc(t,e){return ac(al,t,e)}function lc(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zN(t){return Bp=Ha=1,jN=xr(al=t),Sn=0,[]}function BN(t){return al="",t}function ad(t){return UN(Vc(Sn-1,D_(t===91?t+2:t===40?t+1:t)))}function A8(t){for(;(gt=jr())&&gt<33;)Mn();return lc(t)>2||lc(gt)>3?"":" "}function P8(t,e){for(;--e&&Mn()&&!(gt<48||gt>102||gt>57&&gt<65||gt>70&&gt<97););return Vc(t,od()+(e<6&&jr()==32&&Mn()==32))}function D_(t){for(;Mn();)switch(gt){case t:return Sn;case 34:case 39:t!==34&&t!==39&&D_(gt);break;case 40:t===41&&D_(t);break;case 92:Mn();break}return Sn}function x8(t,e){for(;Mn()&&t+gt!==57;)if(t+gt===84&&jr()===47)break;return"/*"+Vc(e,Sn-1)+"*"+zp(t===47?t:Mn())}function N8(t){for(;!lc(jr());)Mn();return Vc(t,Sn)}function O8(t){return BN(ld("",null,null,null,[""],t=zN(t),0,[0],t))}function ld(t,e,n,r,i,s,o,a,l){for(var c=0,h=0,d=o,p=0,g=0,y=0,E=1,C=1,v=1,_=0,w="",P=i,O=s,L=r,S=w;C;)switch(y=_,_=Mn()){case 40:if(y!=108&&Ut(S,d-1)==58){O_(S+=Ne(ad(_),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:S+=ad(_);break;case 9:case 10:case 13:case 32:S+=A8(y);break;case 92:S+=P8(od()-1,7);continue;case 47:switch(jr()){case 42:case 47:Mh(D8(x8(Mn(),od()),e,n),l);break;default:S+="/"}break;case 123*E:a[c++]=xr(S)*v;case 125*E:case 59:case 0:switch(_){case 0:case 125:C=0;case 59+h:v==-1&&(S=Ne(S,/\f/g,"")),g>0&&xr(S)-d&&Mh(g>32?DI(S+";",r,n,d-1):DI(Ne(S," ","")+";",r,n,d-2),l);break;case 59:S+=";";default:if(Mh(L=OI(S,e,n,c,h,i,a,w,P=[],O=[],d),s),_===123)if(h===0)ld(S,e,L,L,P,s,d,a,O);else switch(p===99&&Ut(S,3)===110?100:p){case 100:case 108:case 109:case 115:ld(t,L,L,r&&Mh(OI(t,L,L,0,0,i,a,w,i,P=[],d),O),i,O,d,a,r?P:O);break;default:ld(S,L,L,L,[""],O,0,a,O)}}c=h=g=0,E=v=1,w=S="",d=o;break;case 58:d=1+xr(S),g=y;default:if(E<1){if(_==123)--E;else if(_==125&&E++==0&&k8()==125)continue}switch(S+=zp(_),_*E){case 38:v=h>0?1:(S+="\f",-1);break;case 44:a[c++]=(xr(S)-1)*v,v=1;break;case 64:jr()===45&&(S+=ad(Mn())),p=jr(),h=d=xr(w=S+=N8(od())),_++;break;case 45:y===45&&xr(S)==2&&(E=0)}}return s}function OI(t,e,n,r,i,s,o,a,l,c,h){for(var d=i-1,p=i===0?s:[""],g=Pw(p),y=0,E=0,C=0;y<r;++y)for(var v=0,_=ac(t,d+1,d=T8(E=o[y])),w=t;v<g;++v)(w=UN(E>0?p[v]+" "+_:Ne(_,/&\f/g,p[v])))&&(l[C++]=w);return Wp(t,e,n,i===0?kw:a,l,c,h)}function D8(t,e,n){return Wp(t,e,n,VN,zp(R8()),ac(t,2,-2),0)}function DI(t,e,n,r){return Wp(t,e,n,Aw,ac(t,0,r),ac(t,r+1,-1),r)}function _a(t,e){for(var n="",r=Pw(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function M8(t,e,n,r){switch(t.type){case E8:if(t.children.length)break;case w8:case Aw:return t.return=t.return||t.value;case VN:return"";case $N:return t.return=t.value+"{"+_a(t.children,r)+"}";case kw:t.value=t.props.join(",")}return xr(n=_a(t.children,r))?t.return=t.value+"{"+n+"}":""}function L8(t){var e=Pw(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function F8(t){return function(e){e.root||(e=e.return)&&t(e)}}var V8=function(e,n,r){for(var i=0,s=0;i=s,s=jr(),i===38&&s===12&&(n[r]=1),!lc(s);)Mn();return Vc(e,Sn)},$8=function(e,n){var r=-1,i=44;do switch(lc(i)){case 0:i===38&&jr()===12&&(n[r]=1),e[r]+=V8(Sn-1,n,r);break;case 2:e[r]+=ad(i);break;case 4:if(i===44){e[++r]=jr()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=zp(i)}while(i=Mn());return e},U8=function(e,n){return BN($8(zN(e),n))},MI=new WeakMap,j8=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!MI.get(r))&&!i){MI.set(e,!0);for(var s=[],o=U8(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var h=0;h<a.length;h++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[h]):a[h]+" "+o[l]}}},z8=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function WN(t,e){switch(I8(t,e)){case 5103:return xe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xe+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return xe+t+Rf+t+Xt+t+t;case 6828:case 4268:return xe+t+Xt+t+t;case 6165:return xe+t+Xt+"flex-"+t+t;case 5187:return xe+t+Ne(t,/(\w+).+(:[^]+)/,xe+"box-$1$2"+Xt+"flex-$1$2")+t;case 5443:return xe+t+Xt+"flex-item-"+Ne(t,/flex-|-self/,"")+t;case 4675:return xe+t+Xt+"flex-line-pack"+Ne(t,/align-content|flex-|-self/,"")+t;case 5548:return xe+t+Xt+Ne(t,"shrink","negative")+t;case 5292:return xe+t+Xt+Ne(t,"basis","preferred-size")+t;case 6060:return xe+"box-"+Ne(t,"-grow","")+xe+t+Xt+Ne(t,"grow","positive")+t;case 4554:return xe+Ne(t,/([^-])(transform)/g,"$1"+xe+"$2")+t;case 6187:return Ne(Ne(Ne(t,/(zoom-|grab)/,xe+"$1"),/(image-set)/,xe+"$1"),t,"")+t;case 5495:case 3959:return Ne(t,/(image-set\([^]*)/,xe+"$1$`$1");case 4968:return Ne(Ne(t,/(.+:)(flex-)?(.*)/,xe+"box-pack:$3"+Xt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xe+t+t;case 4095:case 3583:case 4068:case 2532:return Ne(t,/(.+)-inline(.+)/,xe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xr(t)-1-e>6)switch(Ut(t,e+1)){case 109:if(Ut(t,e+4)!==45)break;case 102:return Ne(t,/(.+:)(.+)-([^]+)/,"$1"+xe+"$2-$3$1"+Rf+(Ut(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~O_(t,"stretch")?WN(Ne(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ut(t,e+1)!==115)break;case 6444:switch(Ut(t,xr(t)-3-(~O_(t,"!important")&&10))){case 107:return Ne(t,":",":"+xe)+t;case 101:return Ne(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+xe+(Ut(t,14)===45?"inline-":"")+"box$3$1"+xe+"$2$3$1"+Xt+"$2box$3")+t}break;case 5936:switch(Ut(t,e+11)){case 114:return xe+t+Xt+Ne(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return xe+t+Xt+Ne(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return xe+t+Xt+Ne(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return xe+t+Xt+t+t}return t}var B8=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case Aw:e.return=WN(e.value,e.length);break;case $N:return _a([Ul(e,{value:Ne(e.value,"@","@"+xe)})],i);case kw:if(e.length)return b8(e.props,function(s){switch(C8(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _a([Ul(e,{props:[Ne(s,/:(read-\w+)/,":"+Rf+"$1")]})],i);case"::placeholder":return _a([Ul(e,{props:[Ne(s,/:(plac\w+)/,":"+xe+"input-$1")]}),Ul(e,{props:[Ne(s,/:(plac\w+)/,":"+Rf+"$1")]}),Ul(e,{props:[Ne(s,/:(plac\w+)/,Xt+"input-$1")]})],i)}return""})}},W8=[B8],qN=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(E){var C=E.getAttribute("data-emotion");C.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var i=e.stylisPlugins||W8,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(E){for(var C=E.getAttribute("data-emotion").split(" "),v=1;v<C.length;v++)s[C[v]]=!0;a.push(E)});var l,c=[j8,z8];{var h,d=[M8,F8(function(E){h.insert(E)})],p=L8(c.concat(i,d)),g=function(C){return _a(O8(C),p)};l=function(C,v,_,w){h=_,g(C?C+"{"+v.styles+"}":v.styles),w&&(y.inserted[v.name]=!0)}}var y={key:n,sheet:new v8({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return y.sheet.hydrate(a),y},HN={exports:{}},Ve={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt=typeof Symbol=="function"&&Symbol.for,xw=Lt?Symbol.for("react.element"):60103,Nw=Lt?Symbol.for("react.portal"):60106,qp=Lt?Symbol.for("react.fragment"):60107,Hp=Lt?Symbol.for("react.strict_mode"):60108,Gp=Lt?Symbol.for("react.profiler"):60114,Kp=Lt?Symbol.for("react.provider"):60109,Qp=Lt?Symbol.for("react.context"):60110,Ow=Lt?Symbol.for("react.async_mode"):60111,Yp=Lt?Symbol.for("react.concurrent_mode"):60111,Xp=Lt?Symbol.for("react.forward_ref"):60112,Jp=Lt?Symbol.for("react.suspense"):60113,q8=Lt?Symbol.for("react.suspense_list"):60120,Zp=Lt?Symbol.for("react.memo"):60115,em=Lt?Symbol.for("react.lazy"):60116,H8=Lt?Symbol.for("react.block"):60121,G8=Lt?Symbol.for("react.fundamental"):60117,K8=Lt?Symbol.for("react.responder"):60118,Q8=Lt?Symbol.for("react.scope"):60119;function jn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case xw:switch(t=t.type,t){case Ow:case Yp:case qp:case Gp:case Hp:case Jp:return t;default:switch(t=t&&t.$$typeof,t){case Qp:case Xp:case em:case Zp:case Kp:return t;default:return e}}case Nw:return e}}}function GN(t){return jn(t)===Yp}Ve.AsyncMode=Ow;Ve.ConcurrentMode=Yp;Ve.ContextConsumer=Qp;Ve.ContextProvider=Kp;Ve.Element=xw;Ve.ForwardRef=Xp;Ve.Fragment=qp;Ve.Lazy=em;Ve.Memo=Zp;Ve.Portal=Nw;Ve.Profiler=Gp;Ve.StrictMode=Hp;Ve.Suspense=Jp;Ve.isAsyncMode=function(t){return GN(t)||jn(t)===Ow};Ve.isConcurrentMode=GN;Ve.isContextConsumer=function(t){return jn(t)===Qp};Ve.isContextProvider=function(t){return jn(t)===Kp};Ve.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===xw};Ve.isForwardRef=function(t){return jn(t)===Xp};Ve.isFragment=function(t){return jn(t)===qp};Ve.isLazy=function(t){return jn(t)===em};Ve.isMemo=function(t){return jn(t)===Zp};Ve.isPortal=function(t){return jn(t)===Nw};Ve.isProfiler=function(t){return jn(t)===Gp};Ve.isStrictMode=function(t){return jn(t)===Hp};Ve.isSuspense=function(t){return jn(t)===Jp};Ve.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qp||t===Yp||t===Gp||t===Hp||t===Jp||t===q8||typeof t=="object"&&t!==null&&(t.$$typeof===em||t.$$typeof===Zp||t.$$typeof===Kp||t.$$typeof===Qp||t.$$typeof===Xp||t.$$typeof===G8||t.$$typeof===K8||t.$$typeof===Q8||t.$$typeof===H8)};Ve.typeOf=jn;HN.exports=Ve;var Y8=HN.exports,KN=Y8,X8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},J8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QN={};QN[KN.ForwardRef]=X8;QN[KN.Memo]=J8;var Z8=!0;function e7(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var YN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Z8===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},XN=function(e,n,r){YN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function t7(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var n7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},r7=!1,i7=/[A-Z]|^ms/g,s7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,JN=function(e){return e.charCodeAt(1)===45},LI=function(e){return e!=null&&typeof e!="boolean"},Fg=FN(function(t){return JN(t)?t:t.replace(i7,"-$&").toLowerCase()}),FI=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(s7,function(r,i,s){return Nr={name:i,styles:s,next:Nr},i})}return n7[e]!==1&&!JN(e)&&typeof n=="number"&&n!==0?n+"px":n},o7="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function uc(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Nr={name:i.name,styles:i.styles,next:Nr},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Nr={name:o.name,styles:o.styles,next:Nr},o=o.next;var a=s.styles+";";return a}return a7(t,e,n)}case"function":{if(t!==void 0){var l=Nr,c=n(t);return Nr=l,uc(t,e,c)}break}}var h=n;if(e==null)return h;var d=e[h];return d!==void 0?d:h}function a7(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=uc(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":LI(a)&&(r+=Fg(s)+":"+FI(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&r7)throw new Error(o7);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)LI(o[l])&&(r+=Fg(s)+":"+FI(s,o[l])+";");else{var c=uc(t,e,o);switch(s){case"animation":case"animationName":{r+=Fg(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}}return r}var VI=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Nr;function Dw(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Nr=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,i+=uc(n,e,s);else{var o=s;i+=o[0]}for(var a=1;a<t.length;a++)if(i+=uc(n,e,t[a]),r){var l=s;i+=l[a]}VI.lastIndex=0;for(var c="",h;(h=VI.exec(i))!==null;)c+="-"+h[1];var d=t7(i)+c;return{name:d,styles:i,next:Nr}}var l7=function(e){return e()},ZN=wa.useInsertionEffect?wa.useInsertionEffect:!1,u7=ZN||l7,$I=ZN||k.useLayoutEffect,eO=k.createContext(typeof HTMLElement<"u"?qN({key:"css"}):null),c7=eO.Provider,tO=function(e){return k.forwardRef(function(n,r){var i=k.useContext(eO);return e(n,i,r)})},ll=k.createContext({}),h7=function(){return k.useContext(ll)},Vg={exports:{}},UI;function nO(){return UI||(UI=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Vg)),Vg.exports}nO();var d7=tO(function(t,e){var n=t.styles,r=Dw([n],void 0,k.useContext(ll)),i=k.useRef();return $I(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),$I(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&XN(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function rO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Dw(e)}var tm=function(){var e=rO.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},f7=m8,p7=function(e){return e!=="theme"},jI=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?f7:p7},zI=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},m7=!1,g7=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return YN(n,r,i),u7(function(){return XN(n,r,i)}),null},y7=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=zI(e,n,r),l=a||jI(i),c=!l("as");return function(){var h=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),h[0]==null||h[0].raw===void 0)d.push.apply(d,h);else{d.push(h[0][0]);for(var p=h.length,g=1;g<p;g++)d.push(h[g],h[0][g])}var y=tO(function(E,C,v){var _=c&&E.as||i,w="",P=[],O=E;if(E.theme==null){O={};for(var L in E)O[L]=E[L];O.theme=k.useContext(ll)}typeof E.className=="string"?w=e7(C.registered,P,E.className):E.className!=null&&(w=E.className+" ");var S=Dw(d.concat(P),C.registered,O);w+=C.key+"-"+S.name,o!==void 0&&(w+=" "+o);var T=c&&a===void 0?jI(_):l,b={};for(var R in E)c&&R==="as"||T(R)&&(b[R]=E[R]);return b.className=w,v&&(b.ref=v),k.createElement(k.Fragment,null,k.createElement(g7,{cache:C,serialized:S,isStringTag:typeof _=="string"}),k.createElement(_,b))});return y.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",y.defaultProps=e.defaultProps,y.__emotion_real=y,y.__emotion_base=i,y.__emotion_styles=d,y.__emotion_forwardProp=a,Object.defineProperty(y,"toString",{value:function(){return o===void 0&&m7?"NO_COMPONENT_SELECTOR":"."+o}}),y.withComponent=function(E,C){return t(E,q({},n,C,{shouldForwardProp:zI(y,C,!0)})).apply(void 0,d)},y}},_7=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],M_=y7.bind();_7.forEach(function(t){M_[t]=M_(t)});let L_;typeof document=="object"&&(L_=qN({key:"css",prepend:!0}));function v7(t){const{injectFirst:e,children:n}=t;return e&&L_?D.jsx(c7,{value:L_,children:n}):n}function w7(t){return t==null||Object.keys(t).length===0}function E7(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(w7(i)?n:i):e;return D.jsx(d7,{styles:r})}function T7(t,e){return M_(t,e)}const S7=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},I7=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:E7,StyledEngineProvider:v7,ThemeContext:ll,css:rO,default:T7,internal_processStyles:S7,keyframes:tm},Symbol.toStringTag,{value:"Module"}));function qi(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function iO(t){if(!qi(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=iO(t[n])}),e}function zr(t,e,n={clone:!0}){const r=n.clone?q({},t):t;return qi(t)&&qi(e)&&Object.keys(e).forEach(i=>{qi(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&qi(t[i])?r[i]=zr(t[i],e[i],n):n.clone?r[i]=qi(e[i])?iO(e[i]):e[i]:r[i]=e[i]}),r}const C7=Object.freeze(Object.defineProperty({__proto__:null,default:zr,isPlainObject:qi},Symbol.toStringTag,{value:"Module"})),b7=["values","unit","step"],R7=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>q({},n,{[r.key]:r.val}),{})};function sO(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Fe(t,b7),s=R7(e),o=Object.keys(s);function a(p){const g=typeof e[p]=="number"?e[p]:p;return"@media (min-width:".concat(g).concat(n,")")}function l(p){const g=typeof e[p]=="number"?e[p]:p;return"@media (max-width:".concat(g-r/100).concat(n,")")}function c(p,g){const y=o.indexOf(g);return"@media (min-width:".concat(typeof e[p]=="number"?e[p]:p).concat(n,") and ")+"(max-width:".concat((y!==-1&&typeof e[o[y]]=="number"?e[o[y]]:g)-r/100).concat(n,")")}function h(p){return o.indexOf(p)+1<o.length?c(p,o[o.indexOf(p)+1]):a(p)}function d(p){const g=o.indexOf(p);return g===0?a(o[1]):g===o.length-1?l(o[g]):c(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return q({keys:o,values:s,up:a,down:l,between:c,only:h,not:d,unit:n},i)}const k7={borderRadius:4};function _u(t,e){return e?zr(t,e,{clone:!1}):t}const Mw={xs:0,sm:600,md:900,lg:1200,xl:1536},BI={keys:["xs","sm","md","lg","xl"],up:t=>"@media (min-width:".concat(Mw[t],"px)")};function Si(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||BI;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||BI;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||Mw).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function A7(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function P7(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function We(t){if(typeof t!="string")throw new Error(oc(7));return t.charAt(0).toUpperCase()+t.slice(1)}const x7=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));function nm(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r="vars.".concat(e).split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function kf(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=nm(t,n)||r,e&&(i=e(i,r,t)),i}function dt(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=nm(l,r)||{};return Si(o,a,d=>{let p=kf(c,i,d);return d===p&&typeof d=="string"&&(p=kf(c,i,"".concat(e).concat(d==="default"?"":We(d)),d)),n===!1?p:{[n]:p}})};return s.propTypes={},s.filterProps=[e],s}function N7(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const O7={m:"margin",p:"padding"},D7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},WI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},M7=N7(t=>{if(t.length>2)if(WI[t])t=WI[t];else return[t];const[e,n]=t.split(""),r=O7[e],i=D7[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),Lw=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Fw=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Lw,...Fw];function $c(t,e,n,r){var i;const s=(i=nm(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function oO(t){return $c(t,"spacing",8)}function Uc(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:"-".concat(r)}function L7(t,e){return n=>t.reduce((r,i)=>(r[i]=Uc(e,n),r),{})}function F7(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=M7(n),s=L7(i,r),o=t[n];return Si(t,o,s)}function aO(t,e){const n=oO(t.theme);return Object.keys(t).map(r=>F7(t,e,r,n)).reduce(_u,{})}function at(t){return aO(t,Lw)}at.propTypes={};at.filterProps=Lw;function lt(t){return aO(t,Fw)}lt.propTypes={};lt.filterProps=Fw;function V7(t=8){if(t.mui)return t;const e=oO({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?"".concat(o,"px"):o}).join(" ");return n.mui=!0,n}function rm(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?_u(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Yn(t){return typeof t!="number"?t:"".concat(t,"px solid")}function ar(t,e){return dt({prop:t,themeKey:"borders",transform:e})}const $7=ar("border",Yn),U7=ar("borderTop",Yn),j7=ar("borderRight",Yn),z7=ar("borderBottom",Yn),B7=ar("borderLeft",Yn),W7=ar("borderColor"),q7=ar("borderTopColor"),H7=ar("borderRightColor"),G7=ar("borderBottomColor"),K7=ar("borderLeftColor"),Q7=ar("outline",Yn),Y7=ar("outlineColor"),im=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=$c(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Uc(e,r)});return Si(t,t.borderRadius,n)}return null};im.propTypes={};im.filterProps=["borderRadius"];rm($7,U7,j7,z7,B7,W7,q7,H7,G7,K7,im,Q7,Y7);const sm=t=>{if(t.gap!==void 0&&t.gap!==null){const e=$c(t.theme,"spacing",8),n=r=>({gap:Uc(e,r)});return Si(t,t.gap,n)}return null};sm.propTypes={};sm.filterProps=["gap"];const om=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=$c(t.theme,"spacing",8),n=r=>({columnGap:Uc(e,r)});return Si(t,t.columnGap,n)}return null};om.propTypes={};om.filterProps=["columnGap"];const am=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=$c(t.theme,"spacing",8),n=r=>({rowGap:Uc(e,r)});return Si(t,t.rowGap,n)}return null};am.propTypes={};am.filterProps=["rowGap"];const X7=dt({prop:"gridColumn"}),J7=dt({prop:"gridRow"}),Z7=dt({prop:"gridAutoFlow"}),eq=dt({prop:"gridAutoColumns"}),tq=dt({prop:"gridAutoRows"}),nq=dt({prop:"gridTemplateColumns"}),rq=dt({prop:"gridTemplateRows"}),iq=dt({prop:"gridTemplateAreas"}),sq=dt({prop:"gridArea"});rm(sm,om,am,X7,J7,Z7,eq,tq,nq,rq,iq,sq);function va(t,e){return e==="grey"?e:t}const oq=dt({prop:"color",themeKey:"palette",transform:va}),aq=dt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:va}),lq=dt({prop:"backgroundColor",themeKey:"palette",transform:va});rm(oq,aq,lq);function An(t){return t<=1&&t!==0?"".concat(t*100,"%"):t}const uq=dt({prop:"width",transform:An}),Vw=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||Mw[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:"".concat(s).concat(t.theme.breakpoints.unit)}:{maxWidth:s}:{maxWidth:An(n)}};return Si(t,t.maxWidth,e)}return null};Vw.filterProps=["maxWidth"];const cq=dt({prop:"minWidth",transform:An}),hq=dt({prop:"height",transform:An}),dq=dt({prop:"maxHeight",transform:An}),fq=dt({prop:"minHeight",transform:An});dt({prop:"size",cssProperty:"width",transform:An});dt({prop:"size",cssProperty:"height",transform:An});const pq=dt({prop:"boxSizing"});rm(uq,Vw,cq,hq,dq,fq,pq);const jc={border:{themeKey:"borders",transform:Yn},borderTop:{themeKey:"borders",transform:Yn},borderRight:{themeKey:"borders",transform:Yn},borderBottom:{themeKey:"borders",transform:Yn},borderLeft:{themeKey:"borders",transform:Yn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Yn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:im},color:{themeKey:"palette",transform:va},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:va},backgroundColor:{themeKey:"palette",transform:va},p:{style:lt},pt:{style:lt},pr:{style:lt},pb:{style:lt},pl:{style:lt},px:{style:lt},py:{style:lt},padding:{style:lt},paddingTop:{style:lt},paddingRight:{style:lt},paddingBottom:{style:lt},paddingLeft:{style:lt},paddingX:{style:lt},paddingY:{style:lt},paddingInline:{style:lt},paddingInlineStart:{style:lt},paddingInlineEnd:{style:lt},paddingBlock:{style:lt},paddingBlockStart:{style:lt},paddingBlockEnd:{style:lt},m:{style:at},mt:{style:at},mr:{style:at},mb:{style:at},ml:{style:at},mx:{style:at},my:{style:at},margin:{style:at},marginTop:{style:at},marginRight:{style:at},marginBottom:{style:at},marginLeft:{style:at},marginX:{style:at},marginY:{style:at},marginInline:{style:at},marginInlineStart:{style:at},marginInlineEnd:{style:at},marginBlock:{style:at},marginBlockStart:{style:at},marginBlockEnd:{style:at},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:sm},rowGap:{style:am},columnGap:{style:om},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:An},maxWidth:{style:Vw},minWidth:{transform:An},height:{transform:An},maxHeight:{transform:An},minHeight:{transform:An},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function mq(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function gq(t,e){return typeof t=="function"?t(e):t}function lO(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:h,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const p=nm(i,c)||{};return d?d(o):Si(o,r,y=>{let E=kf(p,h,y);return y===E&&typeof y=="string"&&(E=kf(p,h,"".concat(n).concat(y==="default"?"":We(y)),y)),l===!1?E:{[l]:E}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:jc;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const h=A7(s.breakpoints),d=Object.keys(h);let p=h;return Object.keys(c).forEach(g=>{const y=gq(c[g],s);if(y!=null)if(typeof y=="object")if(o[g])p=_u(p,t(g,y,s,o));else{const E=Si({theme:s},y,C=>({[g]:C}));mq(E,y)?p[g]=e({sx:y,theme:s}):p=_u(p,E)}else p=_u(p,t(g,y,s,o))}),P7(d,p)}return Array.isArray(i)?i.map(a):a(i)}return e}const lm=lO();lm.filterProps=["sx"];function uO(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const yq=["breakpoints","palette","spacing","shape"];function $w(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Fe(t,yq),a=sO(n),l=V7(i);let c=zr({breakpoints:a,direction:"ltr",components:{},palette:q({mode:"light"},r),spacing:l,shape:q({},k7,s)},o);return c.applyStyles=uO,c=e.reduce((h,d)=>zr(h,d),c),c.unstable_sxConfig=q({},jc,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return lm({sx:d,theme:this})},c}const _q=Object.freeze(Object.defineProperty({__proto__:null,default:$w,private_createBreakpoints:sO,unstable_applyStyles:uO},Symbol.toStringTag,{value:"Module"}));function vq(t){return Object.keys(t).length===0}function Uw(t=null){const e=k.useContext(ll);return!e||vq(e)?t:e}const wq=$w();function Eq(t=wq){return Uw(t)}const Tq=["sx"],Sq=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:jc;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function cO(t){const{sx:e}=t,n=Fe(t,Tq),{systemProps:r,otherProps:i}=Sq(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return qi(a)?q({},r,a):r}:s=q({},r,e),q({},i,{sx:s})}const Iq=Object.freeze(Object.defineProperty({__proto__:null,default:lm,extendSxProp:cO,unstable_createStyleFunctionSx:lO,unstable_defaultSxConfig:jc},Symbol.toStringTag,{value:"Module"})),qI=t=>t,Cq=()=>{let t=qI;return{configure(e){t=e},generate(e){return t(e)},reset(){t=qI}}},bq=Cq();function hO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=hO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ze(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=hO(t))&&(r&&(r+=" "),r+=e);return r}const Rq={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function In(t,e,n="Mui"){const r=Rq[e];return r?"".concat(n,"-").concat(r):"".concat(bq.generate(t),"-").concat(e)}function Cn(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=In(t,i,n)}),r}var dO={exports:{}},$e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw=Symbol.for("react.element"),zw=Symbol.for("react.portal"),um=Symbol.for("react.fragment"),cm=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),dm=Symbol.for("react.provider"),fm=Symbol.for("react.context"),kq=Symbol.for("react.server_context"),pm=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),ym=Symbol.for("react.memo"),_m=Symbol.for("react.lazy"),Aq=Symbol.for("react.offscreen"),fO;fO=Symbol.for("react.module.reference");function lr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jw:switch(t=t.type,t){case um:case hm:case cm:case mm:case gm:return t;default:switch(t=t&&t.$$typeof,t){case kq:case fm:case pm:case _m:case ym:case dm:return t;default:return e}}case zw:return e}}}$e.ContextConsumer=fm;$e.ContextProvider=dm;$e.Element=jw;$e.ForwardRef=pm;$e.Fragment=um;$e.Lazy=_m;$e.Memo=ym;$e.Portal=zw;$e.Profiler=hm;$e.StrictMode=cm;$e.Suspense=mm;$e.SuspenseList=gm;$e.isAsyncMode=function(){return!1};$e.isConcurrentMode=function(){return!1};$e.isContextConsumer=function(t){return lr(t)===fm};$e.isContextProvider=function(t){return lr(t)===dm};$e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jw};$e.isForwardRef=function(t){return lr(t)===pm};$e.isFragment=function(t){return lr(t)===um};$e.isLazy=function(t){return lr(t)===_m};$e.isMemo=function(t){return lr(t)===ym};$e.isPortal=function(t){return lr(t)===zw};$e.isProfiler=function(t){return lr(t)===hm};$e.isStrictMode=function(t){return lr(t)===cm};$e.isSuspense=function(t){return lr(t)===mm};$e.isSuspenseList=function(t){return lr(t)===gm};$e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===um||t===hm||t===cm||t===mm||t===gm||t===Aq||typeof t=="object"&&t!==null&&(t.$$typeof===_m||t.$$typeof===ym||t.$$typeof===dm||t.$$typeof===fm||t.$$typeof===pm||t.$$typeof===fO||t.getModuleId!==void 0)};$e.typeOf=lr;dO.exports=$e;var HI=dO.exports;const Pq=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function pO(t){const e="".concat(t).match(Pq);return e&&e[1]||""}function mO(t,e=""){return t.displayName||t.name||pO(t)||e}function GI(t,e,n){const r=mO(e);return t.displayName||(r!==""?"".concat(n,"(").concat(r,")"):n)}function xq(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return mO(t,"Component");if(typeof t=="object")switch(t.$$typeof){case HI.ForwardRef:return GI(t,t.render,"ForwardRef");case HI.Memo:return GI(t,t.type,"memo");default:return}}}const Nq=Object.freeze(Object.defineProperty({__proto__:null,default:xq,getFunctionName:pO},Symbol.toStringTag,{value:"Module"}));function cc(t,e){const n=q({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=q({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=q({},s),Object.keys(i).forEach(o=>{n[r][o]=cc(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Oq(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:cc(e.components[n].defaultProps,r)}const Af=typeof window<"u"?k.useLayoutEffect:k.useEffect;function Dq(t,e,n,r,i){const[s,o]=k.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return Af(()=>{let a=!0;if(!n)return;const l=n(t),c=()=>{a&&o(l.matches)};return c(),l.addListener(c),()=>{a=!1,l.removeListener(c)}},[t,n]),s}const gO=k.useSyncExternalStore;function Mq(t,e,n,r,i){const s=k.useCallback(()=>e,[e]),o=k.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:h}=r(t);return()=>h}return s},[s,t,r,i,n]),[a,l]=k.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const h=n(t);return[()=>h.matches,d=>(h.addListener(d),()=>{h.removeListener(d)})]},[s,n,t]);return gO(l,a,o)}function yO(t,e={}){const n=Uw(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=Oq({name:"MuiUseMediaQuery",props:e,theme:n});let l=typeof t=="function"?t(n):t;return l=l.replace(/^@media( ?)/m,""),(gO!==void 0?Mq:Dq)(l,i,s,o,a)}function Lq(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Fq=Object.freeze(Object.defineProperty({__proto__:null,default:Lq},Symbol.toStringTag,{value:"Module"}));function KI(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function Ir(t){return t&&t.ownerDocument||document}function Bw(t){return Ir(t).defaultView||window}function F_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let QI=0;function Vq(t){const[e,n]=k.useState(t),r=t||e;return k.useEffect(()=>{e==null&&(QI+=1,n("mui-".concat(QI)))},[e]),r}const YI=wa.useId;function $q(t){if(YI!==void 0){const e=YI();return t!=null?t:e}return Vq(t)}function ui(t){const e=k.useRef(t);return Af(()=>{e.current=t}),k.useRef((...n)=>(0,e.current)(...n)).current}function Ii(...t){return k.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{F_(n,e)})},t)}const XI={};function Uq(t,e){const n=k.useRef(XI);return n.current===XI&&(n.current=t(e)),n}const jq=[];function zq(t){k.useEffect(t,jq)}class vm{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new vm}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Ww(){const t=Uq(vm.create).current;return zq(t.disposeEffect),t}let wm=!0,V_=!1;const Bq=new vm,Wq={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function qq(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Wq[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Hq(t){t.metaKey||t.altKey||t.ctrlKey||(wm=!0)}function $g(){wm=!1}function Gq(){this.visibilityState==="hidden"&&V_&&(wm=!0)}function Kq(t){t.addEventListener("keydown",Hq,!0),t.addEventListener("mousedown",$g,!0),t.addEventListener("pointerdown",$g,!0),t.addEventListener("touchstart",$g,!0),t.addEventListener("visibilitychange",Gq,!0)}function Qq(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(n){}return wm||qq(e)}function Yq(){const t=k.useCallback(i=>{i!=null&&Kq(i.ownerDocument)},[]),e=k.useRef(!1);function n(){return e.current?(V_=!0,Bq.start(100,()=>{V_=!1}),e.current=!1,!0):!1}function r(i){return Qq(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Xq(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function zn(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}function Jq(t){return typeof t=="string"}function Zq(t,e,n){return t===void 0||Jq(t)?e:q({},e,{ownerState:q({},e.ownerState,n)})}function Pf(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function JI(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function eH(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const g=ze(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),y=q({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),E=q({},n,i,r);return g.length>0&&(E.className=g),Object.keys(y).length>0&&(E.style=y),{props:E,internalRef:void 0}}const o=Pf(q({},i,r)),a=JI(r),l=JI(i),c=e(o),h=ze(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=q({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),p=q({},c,n,l,a);return h.length>0&&(p.className=h),Object.keys(d).length>0&&(p.style=d),{props:p,internalRef:c.ref}}function tH(t,e,n){return typeof t=="function"?t(e,n):t}const nH=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function $_(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=Fe(t,nH),a=s?{}:tH(r,i),{props:l,internalRef:c}=eH(q({},o,{externalSlotProps:a})),h=Ii(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Zq(n,q({},l,{ref:h}),i)}const _O=k.createContext(null);function vO(){return k.useContext(_O)}const rH=typeof Symbol=="function"&&Symbol.for,iH=rH?Symbol.for("mui.nested"):"__THEME_NESTED__";function sH(t,e){return typeof e=="function"?e(t):q({},t,e)}function oH(t){const{children:e,theme:n}=t,r=vO(),i=k.useMemo(()=>{const s=r===null?n:sH(r,n);return s!=null&&(s[iH]=r!==null),s},[n,r]);return D.jsx(_O.Provider,{value:i,children:e})}const aH=["value"],lH=k.createContext();function uH(t){let{value:e}=t,n=Fe(t,aH);return D.jsx(lH.Provider,q({value:e!=null?e:!0},n))}const wO=k.createContext(void 0);function cH({value:t,children:e}){return D.jsx(wO.Provider,{value:t,children:e})}function hH(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?cc(i.defaultProps,r):!i.styleOverrides&&!i.variants?cc(i,r):r}function dH({props:t,name:e}){const n=k.useContext(wO);return hH({props:t,name:e,theme:{components:n}})}const ZI={};function eC(t,e,n,r=!1){return k.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?q({},e,{[t]:s}):s;return r?()=>o:o}return t?q({},e,{[t]:n}):q({},e,n)},[t,e,n,r])}function fH(t){const{children:e,theme:n,themeId:r}=t,i=Uw(ZI),s=vO()||ZI,o=eC(r,i,n),a=eC(r,s,n,!0),l=o.direction==="rtl";return D.jsx(oH,{theme:a,children:D.jsx(ll.Provider,{value:o,children:D.jsx(uH,{value:l,children:D.jsx(cH,{value:o==null?void 0:o.components,children:e})})})})}function pH(t,e){return q({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var ft={},EO={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(EO);var TO=EO.exports;const mH=Es(f8),gH=Es(Fq);var SO=TO;Object.defineProperty(ft,"__esModule",{value:!0});var ia=ft.alpha=RO;ft.blend=PH;ft.colorChannel=void 0;var yH=ft.darken=Hw;ft.decomposeColor=or;var _H=ft.emphasize=kO,vH=ft.getContrastRatio=CH;ft.getLuminance=xf;ft.hexToRgb=IO;ft.hslToRgb=bO;var wH=ft.lighten=Gw;ft.private_safeAlpha=bH;ft.private_safeColorChannel=void 0;ft.private_safeDarken=RH;ft.private_safeEmphasize=AH;ft.private_safeLighten=kH;ft.recomposeColor=ul;ft.rgbToHex=IH;var tC=SO(mH),EH=SO(gH);function qw(t,e=0,n=1){return(0,EH.default)(t,e,n)}function IO(t){t=t.slice(1);const e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?"rgb".concat(n.length===4?"a":"","(").concat(n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", "),")"):""}function TH(t){const e=t.toString(16);return e.length===1?"0".concat(e):e}function or(t){if(t.type)return t;if(t.charAt(0)==="#")return or(IO(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,tC.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,tC.default)(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}const CO=t=>{const e=or(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?"".concat(n,"%"):n).join(" ")};ft.colorChannel=CO;const SH=(t,e)=>{try{return CO(t)}catch(n){return t}};ft.private_safeColorChannel=SH;function ul(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),e.indexOf("color")!==-1?r="".concat(n," ").concat(r.join(" ")):r="".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function IH(t){if(t.indexOf("#")===0)return t;const{values:e}=or(t);return"#".concat(e.map((n,r)=>TH(r===3?Math.round(255*n):n)).join(""))}function bO(t){t=or(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,h=(c+n/30)%12)=>i-s*Math.max(Math.min(h-3,9-h,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),ul({type:a,values:l})}function xf(t){t=or(t);let e=t.type==="hsl"||t.type==="hsla"?or(bO(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function CH(t,e){const n=xf(t),r=xf(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function RO(t,e){return t=or(t),e=qw(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]="/".concat(e):t.values[3]=e,ul(t)}function bH(t,e,n){try{return RO(t,e)}catch(r){return t}}function Hw(t,e){if(t=or(t),e=qw(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return ul(t)}function RH(t,e,n){try{return Hw(t,e)}catch(r){return t}}function Gw(t,e){if(t=or(t),e=qw(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return ul(t)}function kH(t,e,n){try{return Gw(t,e)}catch(r){return t}}function kO(t,e=.15){return xf(t)>.5?Hw(t,e):Gw(t,e)}function AH(t,e,n){try{return kO(t,e)}catch(r){return t}}function PH(t,e,n,r=1){const i=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),s=or(t),o=or(e),a=[i(s.values[0],o.values[0]),i(s.values[1],o.values[1]),i(s.values[2],o.values[2])];return ul({type:"rgb",values:a})}const xH=["mode","contrastThreshold","tonalOffset"],nC={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:sc.white,default:sc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ug={text:{primary:sc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:sc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function rC(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=wH(t.main,i):e==="dark"&&(t.dark=yH(t.main,s)))}function NH(t="light"){return t==="dark"?{main:Mo[200],light:Mo[50],dark:Mo[400]}:{main:Mo[700],light:Mo[400],dark:Mo[800]}}function OH(t="light"){return t==="dark"?{main:Do[200],light:Do[50],dark:Do[400]}:{main:Do[500],light:Do[300],dark:Do[700]}}function DH(t="light"){return t==="dark"?{main:Oo[500],light:Oo[300],dark:Oo[700]}:{main:Oo[700],light:Oo[400],dark:Oo[800]}}function MH(t="light"){return t==="dark"?{main:Lo[400],light:Lo[300],dark:Lo[700]}:{main:Lo[700],light:Lo[500],dark:Lo[900]}}function LH(t="light"){return t==="dark"?{main:Fo[400],light:Fo[300],dark:Fo[700]}:{main:Fo[800],light:Fo[500],dark:Fo[900]}}function FH(t="light"){return t==="dark"?{main:$l[400],light:$l[300],dark:$l[700]}:{main:"#ed6c02",light:$l[500],dark:$l[900]}}function VH(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Fe(t,xH),s=t.primary||NH(e),o=t.secondary||OH(e),a=t.error||DH(e),l=t.info||MH(e),c=t.success||LH(e),h=t.warning||FH(e);function d(E){return vH(E,Ug.text.primary)>=n?Ug.text.primary:nC.text.primary}const p=({color:E,name:C,mainShade:v=500,lightShade:_=300,darkShade:w=700})=>{if(E=q({},E),!E.main&&E[v]&&(E.main=E[v]),!E.hasOwnProperty("main"))throw new Error(oc(11,C?" (".concat(C,")"):"",v));if(typeof E.main!="string")throw new Error(oc(12,C?" (".concat(C,")"):"",JSON.stringify(E.main)));return rC(E,"light",_,r),rC(E,"dark",w,r),E.contrastText||(E.contrastText=d(E.main)),E},g={dark:Ug,light:nC};return zr(q({common:q({},sc),mode:e,primary:p({color:s,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:h,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:d8,contrastThreshold:n,getContrastText:d,augmentColor:p,tonalOffset:r},g[e]),i)}const $H=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function UH(t){return Math.round(t*1e5)/1e5}const iC={textTransform:"uppercase"},sC='"Roboto", "Helvetica", "Arial", sans-serif';function jH(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=sC,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:d}=n,p=Fe(n,$H),g=i/14,y=d||(v=>"".concat(v/c*g,"rem")),E=(v,_,w,P,O)=>q({fontFamily:r,fontWeight:v,fontSize:y(_),lineHeight:w},r===sC?{letterSpacing:"".concat(UH(P/_),"em")}:{},O,h),C={h1:E(s,96,1.167,-1.5),h2:E(s,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(a,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(a,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(a,14,1.75,.4,iC),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,iC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return zr(q({htmlFontSize:c,pxToRem:y,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},C),p,{clone:!1})}const zH=.2,BH=.14,WH=.12;function Je(...t){return["".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(t[3],"px rgba(0,0,0,").concat(zH,")"),"".concat(t[4],"px ").concat(t[5],"px ").concat(t[6],"px ").concat(t[7],"px rgba(0,0,0,").concat(BH,")"),"".concat(t[8],"px ").concat(t[9],"px ").concat(t[10],"px ").concat(t[11],"px rgba(0,0,0,").concat(WH,")")].join(",")}const qH=["none",Je(0,2,1,-1,0,1,1,0,0,1,3,0),Je(0,3,1,-2,0,2,2,0,0,1,5,0),Je(0,3,3,-2,0,3,4,0,0,1,8,0),Je(0,2,4,-1,0,4,5,0,0,1,10,0),Je(0,3,5,-1,0,5,8,0,0,1,14,0),Je(0,3,5,-1,0,6,10,0,0,1,18,0),Je(0,4,5,-2,0,7,10,1,0,2,16,1),Je(0,5,5,-3,0,8,10,1,0,3,14,2),Je(0,5,6,-3,0,9,12,1,0,3,16,2),Je(0,6,6,-3,0,10,14,1,0,4,18,3),Je(0,6,7,-4,0,11,15,1,0,4,20,3),Je(0,7,8,-4,0,12,17,2,0,5,22,4),Je(0,7,8,-4,0,13,19,2,0,5,24,4),Je(0,7,9,-4,0,14,21,2,0,5,26,4),Je(0,8,9,-5,0,15,22,2,0,6,28,5),Je(0,8,10,-5,0,16,24,2,0,6,30,5),Je(0,8,11,-5,0,17,26,2,0,6,32,5),Je(0,9,11,-5,0,18,28,2,0,7,34,6),Je(0,9,12,-6,0,19,29,2,0,7,36,6),Je(0,10,13,-6,0,20,31,3,0,8,38,7),Je(0,10,13,-6,0,21,33,3,0,8,40,7),Je(0,10,14,-6,0,22,35,3,0,8,42,7),Je(0,11,14,-7,0,23,36,3,0,9,44,8),Je(0,11,15,-7,0,24,38,3,0,9,46,8)],HH=["duration","easing","delay"],GH={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},KH={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function oC(t){return"".concat(Math.round(t),"ms")}function QH(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function YH(t){const e=q({},GH,t.easing),n=q({},KH,t.duration);return q({getAutoHeightDuration:QH,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Fe(s,HH),(Array.isArray(i)?i:[i]).map(c=>"".concat(c," ").concat(typeof o=="string"?o:oC(o)," ").concat(a," ").concat(typeof l=="string"?l:oC(l))).join(",")}},t,{easing:e,duration:n})}const XH={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},JH=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function AO(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Fe(t,JH);if(t.vars)throw new Error(oc(18));const a=VH(r),l=$w(t);let c=zr(l,{mixins:pH(l.breakpoints,n),palette:a,shadows:qH.slice(),typography:jH(a,s),transitions:YH(i),zIndex:q({},XH)});return c=zr(c,o),c=e.reduce((h,d)=>zr(h,d),c),c.unstable_sxConfig=q({},jc,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return lm({sx:d,theme:this})},c}const PO=AO();function zc(){const t=Eq(PO);return t[bf]||t}var Bc={},jg={exports:{}},aC;function ZH(){return aC||(aC=1,function(t){function e(n,r){if(n==null)return{};var i={};for(var s in n)if({}.hasOwnProperty.call(n,s)){if(r.includes(s))continue;i[s]=n[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(jg)),jg.exports}const eG=Es(I7),tG=Es(C7),nG=Es(x7),rG=Es(Nq),iG=Es(_q),sG=Es(Iq);var cl=TO;Object.defineProperty(Bc,"__esModule",{value:!0});var oG=Bc.default=vG;Bc.shouldForwardProp=ud;Bc.systemDefaultTheme=void 0;var Hn=cl(nO()),U_=cl(ZH()),lC=fG(eG),aG=tG;cl(nG);cl(rG);var lG=cl(iG),uG=cl(sG);const cG=["ownerState"],hG=["variants"],dG=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function xO(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(xO=function(r){return r?n:e})(t)}function fG(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=xO(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function pG(t){return Object.keys(t).length===0}function mG(t){return typeof t=="string"&&t.charCodeAt(0)>96}function ud(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const gG=Bc.systemDefaultTheme=(0,lG.default)(),yG=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Lh({defaultTheme:t,theme:e,themeId:n}){return pG(e)?t:e[n]||e}function _G(t){return t?(e,n)=>n[t]:null}function cd(t,e){let{ownerState:n}=e,r=(0,U_.default)(e,cG);const i=typeof t=="function"?t((0,Hn.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>cd(s,(0,Hn.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=(0,U_.default)(i,hG);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,Hn.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(h=>{(n==null?void 0:n[h])!==l.props[h]&&r[h]!==l.props[h]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,Hn.default)({ownerState:n},r,n)):l.style))}),a}return i}function vG(t={}){const{themeId:e,defaultTheme:n=gG,rootShouldForwardProp:r=ud,slotShouldForwardProp:i=ud}=t,s=o=>(0,uG.default)((0,Hn.default)({},o,{theme:Lh((0,Hn.default)({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{(0,lC.internal_processStyles)(o,O=>O.filter(L=>!(L!=null&&L.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:h,skipSx:d,overridesResolver:p=_G(yG(c))}=a,g=(0,U_.default)(a,dG),y=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,E=d||!1;let C,v=ud;c==="Root"||c==="root"?v=r:c?v=i:mG(o)&&(v=void 0);const _=(0,lC.default)(o,(0,Hn.default)({shouldForwardProp:v,label:C},g)),w=O=>typeof O=="function"&&O.__emotion_real!==O||(0,aG.isPlainObject)(O)?L=>cd(O,(0,Hn.default)({},L,{theme:Lh({theme:L.theme,defaultTheme:n,themeId:e})})):O,P=(O,...L)=>{let S=w(O);const T=L?L.map(w):[];l&&p&&T.push(x=>{const N=Lh((0,Hn.default)({},x,{defaultTheme:n,themeId:e}));if(!N.components||!N.components[l]||!N.components[l].styleOverrides)return null;const A=N.components[l].styleOverrides,V={};return Object.entries(A).forEach(([W,z])=>{V[W]=cd(z,(0,Hn.default)({},x,{theme:N}))}),p(x,V)}),l&&!y&&T.push(x=>{var N;const A=Lh((0,Hn.default)({},x,{defaultTheme:n,themeId:e})),V=A==null||(N=A.components)==null||(N=N[l])==null?void 0:N.variants;return cd({variants:V},(0,Hn.default)({},x,{theme:A}))}),E||T.push(s);const b=T.length-L.length;if(Array.isArray(O)&&b>0){const x=new Array(b).fill("");S=[...O,...x],S.raw=[...O.raw,...x]}const R=_(S,...T);return o.muiName&&(R.muiName=o.muiName),R};return _.withConfig&&(P.withConfig=_.withConfig),P}}function wG(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Kw=t=>wG(t)&&t!=="classes",st=oG({themeId:bf,defaultTheme:PO,rootShouldForwardProp:Kw}),EG=["theme"];function TG(t){let{theme:e}=t,n=Fe(t,EG);const r=e[bf];return D.jsx(fH,q({},n,{themeId:r?bf:void 0,theme:r||e}))}const uC=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function bn(t){return dH(t)}function j_(t,e){return j_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},j_(t,e)}function NO(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,j_(t,e)}const cC={disabled:!1},Nf=Nt.createContext(null);var SG=function(e){return e.scrollTop},Xl="unmounted",Vs="exited",$s="entering",zo="entered",z_="exiting",Gr=function(t){NO(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Vs,s.appearStatus=$s):l=zo:r.unmountOnExit||r.mountOnEnter?l=Xl:l=Vs,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Xl?{status:Vs}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==$s&&o!==zo&&(s=$s):(o===$s||o===zo)&&(s=z_)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===$s){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Eh.findDOMNode(this);o&&SG(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Vs&&this.setState({status:Xl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Eh.findDOMNode(this),a],c=l[0],h=l[1],d=this.getTimeouts(),p=a?d.appear:d.enter;if(!i&&!o||cC.disabled){this.safeSetState({status:zo},function(){s.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:$s},function(){s.props.onEntering(c,h),s.onTransitionEnd(p,function(){s.safeSetState({status:zo},function(){s.props.onEntered(c,h)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Eh.findDOMNode(this);if(!s||cC.disabled){this.safeSetState({status:Vs},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:z_},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Vs},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Eh.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Xl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Fe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Nt.createElement(Nf.Provider,{value:null},typeof o=="function"?o(i,a):Nt.cloneElement(Nt.Children.only(o),a))},e}(Nt.Component);Gr.contextType=Nf;Gr.propTypes={};function Vo(){}Gr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vo,onEntering:Vo,onEntered:Vo,onExit:Vo,onExiting:Vo,onExited:Vo};Gr.UNMOUNTED=Xl;Gr.EXITED=Vs;Gr.ENTERING=$s;Gr.ENTERED=zo;Gr.EXITING=z_;function IG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qw(t,e){var n=function(s){return e&&k.isValidElement(s)?e(s):s},r=Object.create(null);return t&&k.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function CG(t,e){t=t||{},e=e||{};function n(h){return h in e?e[h]:t[h]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Gs(t,e,n){return n[e]!=null?n[e]:t.props[e]}function bG(t,e){return Qw(t.children,function(n){return k.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Gs(n,"appear",t),enter:Gs(n,"enter",t),exit:Gs(n,"exit",t)})})}function RG(t,e,n){var r=Qw(t.children),i=CG(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(k.isValidElement(o)){var a=s in e,l=s in r,c=e[s],h=k.isValidElement(c)&&!c.props.in;l&&(!a||h)?i[s]=k.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Gs(o,"exit",t),enter:Gs(o,"enter",t)}):!l&&a&&!h?i[s]=k.cloneElement(o,{in:!1}):l&&a&&k.isValidElement(c)&&(i[s]=k.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Gs(o,"exit",t),enter:Gs(o,"enter",t)}))}}),i}var kG=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},AG={component:"div",childFactory:function(e){return e}},Yw=function(t){NO(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(IG(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?bG(i,a):RG(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Qw(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=q({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Fe(i,["component","childFactory"]),l=this.state.contextValue,c=kG(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Nt.createElement(Nf.Provider,{value:l},c):Nt.createElement(Nf.Provider,{value:l},Nt.createElement(s,a,c))},e}(Nt.Component);Yw.propTypes={};Yw.defaultProps=AG;const OO=t=>t.scrollTop;function Of(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function PG(t){return In("MuiPaper",t)}Cn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const xG=["className","component","elevation","square","variant"],NG=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&"elevation".concat(n)]};return zn(s,PG,i)},OG=st("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e["elevation".concat(n.elevation)]]}})(({theme:t,ownerState:e})=>{var n;return q({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:"1px solid ".concat((t.vars||t).palette.divider)},e.variant==="elevation"&&q({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:"linear-gradient(".concat(ia("#fff",uC(e.elevation)),", ").concat(ia("#fff",uC(e.elevation)),")")},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),Xw=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=Fe(r,xG),h=q({},r,{component:s,elevation:o,square:a,variant:l}),d=NG(h);return D.jsx(OG,q({as:s,ownerState:h,className:ze(d.root,i),ref:n},c))});function DG(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[h,d]=k.useState(!1),p=ze(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),g={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},y=ze(n.child,h&&n.childLeaving,r&&n.childPulsate);return!a&&!h&&d(!0),k.useEffect(()=>{if(!a&&l!=null){const E=setTimeout(l,c);return()=>{clearTimeout(E)}}},[l,a,c]),D.jsx("span",{className:p,style:g,children:D.jsx("span",{className:y})})}const Gn=Cn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),MG=["center","classes","className"];let Em=t=>t,hC,dC,fC,pC;const B_=550,LG=80;var xC;const FG=tm(hC||(hC=Em(xC||(xC=hn(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))));var NC;const VG=tm(dC||(dC=Em(NC||(NC=hn(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))));var OC;const $G=tm(fC||(fC=Em(OC||(OC=hn(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))))),UG=st("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"});var DC;const jG=st(DG,{name:"MuiTouchRipple",slot:"Ripple"})(pC||(pC=Em(DC||(DC=hn(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),0,0,0,0,0,0,0,0,0,0,0,0,0,0)),Gn.rippleVisible,FG,B_,({theme:t})=>t.transitions.easing.easeInOut,Gn.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Gn.child,Gn.childLeaving,VG,B_,({theme:t})=>t.transitions.easing.easeInOut,Gn.childPulsate,$G,({theme:t})=>t.transitions.easing.easeInOut),zG=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=Fe(r,MG),[l,c]=k.useState([]),h=k.useRef(0),d=k.useRef(null);k.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const p=k.useRef(!1),g=Ww(),y=k.useRef(null),E=k.useRef(null),C=k.useCallback(P=>{const{pulsate:O,rippleX:L,rippleY:S,rippleSize:T,cb:b}=P;c(R=>[...R,D.jsx(jG,{classes:{ripple:ze(s.ripple,Gn.ripple),rippleVisible:ze(s.rippleVisible,Gn.rippleVisible),ripplePulsate:ze(s.ripplePulsate,Gn.ripplePulsate),child:ze(s.child,Gn.child),childLeaving:ze(s.childLeaving,Gn.childLeaving),childPulsate:ze(s.childPulsate,Gn.childPulsate)},timeout:B_,pulsate:O,rippleX:L,rippleY:S,rippleSize:T},h.current)]),h.current+=1,d.current=b},[s]),v=k.useCallback((P={},O={},L=()=>{})=>{const{pulsate:S=!1,center:T=i||O.pulsate,fakeElement:b=!1}=O;if((P==null?void 0:P.type)==="mousedown"&&p.current){p.current=!1;return}(P==null?void 0:P.type)==="touchstart"&&(p.current=!0);const R=b?null:E.current,x=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let N,A,V;if(T||P===void 0||P.clientX===0&&P.clientY===0||!P.clientX&&!P.touches)N=Math.round(x.width/2),A=Math.round(x.height/2);else{const{clientX:W,clientY:z}=P.touches&&P.touches.length>0?P.touches[0]:P;N=Math.round(W-x.left),A=Math.round(z-x.top)}if(T)V=Math.sqrt((2*x.width**2+x.height**2)/3),V%2===0&&(V+=1);else{const W=Math.max(Math.abs((R?R.clientWidth:0)-N),N)*2+2,z=Math.max(Math.abs((R?R.clientHeight:0)-A),A)*2+2;V=Math.sqrt(W**2+z**2)}P!=null&&P.touches?y.current===null&&(y.current=()=>{C({pulsate:S,rippleX:N,rippleY:A,rippleSize:V,cb:L})},g.start(LG,()=>{y.current&&(y.current(),y.current=null)})):C({pulsate:S,rippleX:N,rippleY:A,rippleSize:V,cb:L})},[i,C,g]),_=k.useCallback(()=>{v({},{pulsate:!0})},[v]),w=k.useCallback((P,O)=>{if(g.clear(),(P==null?void 0:P.type)==="touchend"&&y.current){y.current(),y.current=null,g.start(0,()=>{w(P,O)});return}y.current=null,c(L=>L.length>0?L.slice(1):L),d.current=O},[g]);return k.useImperativeHandle(n,()=>({pulsate:_,start:v,stop:w}),[_,v,w]),D.jsx(UG,q({className:ze(Gn.root,s.root,o),ref:E},a,{children:D.jsx(Yw,{component:null,exit:!0,children:l})}))});function BG(t){return In("MuiButtonBase",t)}const WG=Cn("MuiButtonBase",["root","disabled","focusVisible"]),qG=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],HG=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=zn({root:["root",e&&"disabled",n&&"focusVisible"]},BG,i);return n&&r&&(o.root+=" ".concat(r)),o},GG=st("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(WG.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),KG=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:h=!1,disableTouchRipple:d=!1,focusRipple:p=!1,LinkComponent:g="a",onBlur:y,onClick:E,onContextMenu:C,onDragLeave:v,onFocus:_,onFocusVisible:w,onKeyDown:P,onKeyUp:O,onMouseDown:L,onMouseLeave:S,onMouseUp:T,onTouchEnd:b,onTouchMove:R,onTouchStart:x,tabIndex:N=0,TouchRippleProps:A,touchRippleRef:V,type:W}=r,z=Fe(r,qG),B=k.useRef(null),U=k.useRef(null),Q=Ii(U,V),{isFocusVisibleRef:te,onFocus:G,onBlur:H,ref:j}=Yq(),[$,ie]=k.useState(!1);c&&$&&ie(!1),k.useImperativeHandle(i,()=>({focusVisible:()=>{ie(!0),B.current.focus()}}),[]);const[ee,ne]=k.useState(!1);k.useEffect(()=>{ne(!0)},[]);const he=ee&&!h&&!c;k.useEffect(()=>{$&&p&&!h&&ee&&U.current.pulsate()},[h,p,$,ee]);function ve(ye,dl,Tm=d){return ui(Pi=>(dl&&dl(Pi),!Tm&&U.current&&U.current[ye](Pi),!0))}const le=ve("start",L),ue=ve("stop",C),Re=ve("stop",v),Ge=ve("stop",T),ce=ve("stop",ye=>{$&&ye.preventDefault(),S&&S(ye)}),me=ve("start",x),Bn=ve("stop",b),hl=ve("stop",R),Ri=ve("stop",ye=>{H(ye),te.current===!1&&ie(!1),y&&y(ye)},!1),Kr=ui(ye=>{B.current||(B.current=ye.currentTarget),G(ye),te.current===!0&&(ie(!0),w&&w(ye)),_&&_(ye)}),Wn=()=>{const ye=B.current;return l&&l!=="button"&&!(ye.tagName==="A"&&ye.href)},ur=k.useRef(!1),qn=ui(ye=>{p&&!ur.current&&$&&U.current&&ye.key===" "&&(ur.current=!0,U.current.stop(ye,()=>{U.current.start(ye)})),ye.target===ye.currentTarget&&Wn()&&ye.key===" "&&ye.preventDefault(),P&&P(ye),ye.target===ye.currentTarget&&Wn()&&ye.key==="Enter"&&!c&&(ye.preventDefault(),E&&E(ye))}),cr=ui(ye=>{p&&ye.key===" "&&U.current&&$&&!ye.defaultPrevented&&(ur.current=!1,U.current.stop(ye,()=>{U.current.pulsate(ye)})),O&&O(ye),E&&ye.target===ye.currentTarget&&Wn()&&ye.key===" "&&!ye.defaultPrevented&&E(ye)});let ki=l;ki==="button"&&(z.href||z.to)&&(ki=g);const Ai={};ki==="button"?(Ai.type=W===void 0?"button":W,Ai.disabled=c):(!z.href&&!z.to&&(Ai.role="button"),c&&(Ai["aria-disabled"]=c));const Ct=Ii(n,j,B),bt=q({},r,{centerRipple:s,component:l,disabled:c,disableRipple:h,disableTouchRipple:d,focusRipple:p,tabIndex:N,focusVisible:$}),bo=HG(bt);return D.jsxs(GG,q({as:ki,className:ze(bo.root,a),ownerState:bt,onBlur:Ri,onClick:E,onContextMenu:ue,onFocus:Kr,onKeyDown:qn,onKeyUp:cr,onMouseDown:le,onMouseLeave:ce,onMouseUp:Ge,onDragLeave:Re,onTouchEnd:Bn,onTouchMove:hl,onTouchStart:me,ref:Ct,tabIndex:c?-1:N,type:W},Ai,z,{children:[o,he?D.jsx(zG,q({ref:Q,center:s},A)):null]}))});function QG(t){return In("MuiTypography",t)}Cn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const YG=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],XG=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&"align".concat(We(e)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return zn(a,QG,o)},JG=st("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e["align".concat(We(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>q({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),mC={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ZG={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},eK=t=>ZG[t]||t,DO=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiTypography"}),i=eK(r.color),s=cO(q({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:h=!1,paragraph:d=!1,variant:p="body1",variantMapping:g=mC}=s,y=Fe(s,YG),E=q({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:h,paragraph:d,variant:p,variantMapping:g}),C=l||(d?"p":g[p]||mC[p])||"span",v=XG(E);return D.jsx(JG,q({as:C,ref:n,ownerState:E,className:ze(v.root,a)},y))});function tK(t){return typeof t=="function"?t():t}const nK=k.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=k.useState(null),l=Ii(k.isValidElement(r)?r.ref:null,n);if(Af(()=>{s||a(tK(i)||document.body)},[i,s]),Af(()=>{if(o&&!s)return F_(n,o),()=>{F_(n,null)}},[n,o,s]),s){if(k.isValidElement(r)){const c={ref:l};return k.cloneElement(r,c)}return D.jsx(k.Fragment,{children:r})}return D.jsx(k.Fragment,{children:o&&$v.createPortal(r,o)})}),rK=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],iK={entering:{opacity:1},entered:{opacity:1}},MO=k.forwardRef(function(e,n){const r=zc(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:h,onEntered:d,onEntering:p,onExit:g,onExited:y,onExiting:E,style:C,timeout:v=i,TransitionComponent:_=Gr}=e,w=Fe(e,rK),P=k.useRef(null),O=Ii(P,a.ref,n),L=V=>W=>{if(V){const z=P.current;W===void 0?V(z):V(z,W)}},S=L(p),T=L((V,W)=>{OO(V);const z=Of({style:C,timeout:v,easing:l},{mode:"enter"});V.style.webkitTransition=r.transitions.create("opacity",z),V.style.transition=r.transitions.create("opacity",z),h&&h(V,W)}),b=L(d),R=L(E),x=L(V=>{const W=Of({style:C,timeout:v,easing:l},{mode:"exit"});V.style.webkitTransition=r.transitions.create("opacity",W),V.style.transition=r.transitions.create("opacity",W),g&&g(V)}),N=L(y),A=V=>{s&&s(P.current,V)};return D.jsx(_,q({appear:o,in:c,nodeRef:P,onEnter:T,onEntered:b,onEntering:S,onExit:x,onExited:N,onExiting:R,addEndListener:A,timeout:v},w,{children:(V,W)=>k.cloneElement(a,q({style:q({opacity:0,visibility:V==="exited"&&!c?"hidden":void 0},iK[V],C,a.props.style),ref:O},W))}))});function sK(t){return In("MuiBackdrop",t)}Cn("MuiBackdrop",["root","invisible"]);const oK=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],aK=t=>{const{classes:e,invisible:n}=t;return zn({root:["root",n&&"invisible"]},sK,e)},lK=st("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>q({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),LO=k.forwardRef(function(e,n){var r,i,s;const o=bn({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:h={},componentsProps:d={},invisible:p=!1,open:g,slotProps:y={},slots:E={},TransitionComponent:C=MO,transitionDuration:v}=o,_=Fe(o,oK),w=q({},o,{component:c,invisible:p}),P=aK(w),O=(r=y.root)!=null?r:d.root;return D.jsx(C,q({in:g,timeout:v},_,{children:D.jsx(lK,q({"aria-hidden":!0},O,{as:(i=(s=E.root)!=null?s:h.Root)!=null?i:c,className:ze(P.root,l,O==null?void 0:O.className),ownerState:q({},w,O==null?void 0:O.ownerState),classes:P,ref:n,children:a}))}))});function uK(t){return In("MuiButton",t)}const Fh=Cn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),cK=k.createContext({}),hK=k.createContext(void 0),dK=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],fK=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,"".concat(s).concat(We(e)),"size".concat(We(i)),"".concat(s,"Size").concat(We(i)),"color".concat(We(e)),n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon","iconSize".concat(We(i))],endIcon:["icon","endIcon","iconSize".concat(We(i))]},l=zn(a,uK,o);return q({},o,l)},FO=t=>q({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),pK=st(KG,{shouldForwardProp:t=>Kw(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e["".concat(n.variant).concat(We(n.color))],e["size".concat(We(n.size))],e["".concat(n.variant,"Size").concat(We(n.size))],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return q({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":q({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):ia(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[e.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):ia(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:"1px solid ".concat((t.vars||t).palette[e.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[e.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):ia(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":q({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(Fh.focusVisible)]:q({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(Fh.disabled)]:q({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[e.color].mainChannel," / 0.5)"):"1px solid ".concat(ia(t.palette[e.color].main,.5))},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(Fh.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(Fh.disabled)]:{boxShadow:"none"}}),mK=st("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e["iconSize".concat(We(n.size))]]}})(({ownerState:t})=>q({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},FO(t))),gK=st("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e["iconSize".concat(We(n.size))]]}})(({ownerState:t})=>q({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},FO(t))),vu=k.forwardRef(function(e,n){const r=k.useContext(cK),i=k.useContext(hK),s=cc(r,e),o=bn({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:h,disabled:d=!1,disableElevation:p=!1,disableFocusRipple:g=!1,endIcon:y,focusVisibleClassName:E,fullWidth:C=!1,size:v="medium",startIcon:_,type:w,variant:P="text"}=o,O=Fe(o,dK),L=q({},o,{color:l,component:c,disabled:d,disableElevation:p,disableFocusRipple:g,fullWidth:C,size:v,type:w,variant:P}),S=fK(L),T=_&&D.jsx(mK,{className:S.startIcon,ownerState:L,children:_}),b=y&&D.jsx(gK,{className:S.endIcon,ownerState:L,children:y}),R=i||"";return D.jsxs(pK,q({ownerState:L,className:ze(r.className,S.root,h,R),component:c,disabled:d,focusRipple:!g,focusVisibleClassName:ze(S.focusVisible,E),ref:n,type:w},O,{classes:S,children:[T,a,b]}))});function gC(t){return t.substring(2).toLowerCase()}function yK(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function _K(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,o=k.useRef(!1),a=k.useRef(null),l=k.useRef(!1),c=k.useRef(!1);k.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const h=Ii(e.ref,a),d=ui(y=>{const E=c.current;c.current=!1;const C=Ir(a.current);if(!l.current||!a.current||"clientX"in y&&yK(y,C))return;if(o.current){o.current=!1;return}let v;y.composedPath?v=y.composedPath().indexOf(a.current)>-1:v=!C.documentElement.contains(y.target)||a.current.contains(y.target),!v&&(n||!E)&&i(y)}),p=y=>E=>{c.current=!0;const C=e.props[y];C&&C(E)},g={ref:h};return s!==!1&&(g[s]=p(s)),k.useEffect(()=>{if(s!==!1){const y=gC(s),E=Ir(a.current),C=()=>{o.current=!0};return E.addEventListener(y,d),E.addEventListener("touchmove",C),()=>{E.removeEventListener(y,d),E.removeEventListener("touchmove",C)}}},[d,s]),r!==!1&&(g[r]=p(r)),k.useEffect(()=>{if(r!==!1){const y=gC(r),E=Ir(a.current);return E.addEventListener(y,d),()=>{E.removeEventListener(y,d)}}},[d,r]),D.jsx(k.Fragment,{children:k.cloneElement(e,g)})}function vK(t){const e=Ir(t);return e.body===t?Bw(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function wu(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function yC(t){return parseInt(Bw(t).getComputedStyle(t).paddingRight,10)||0}function wK(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function _C(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!wK(o);a&&l&&wu(o,i)})}function zg(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function EK(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(vK(r)){const o=Xq(Ir(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(yC(r)+o,"px");const a=Ir(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight="".concat(yC(l)+o,"px")})}let s;if(r.parentNode instanceof DocumentFragment)s=Ir(r).body;else{const o=r.parentElement,a=Bw(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function TK(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class SK{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&wu(e.modalRef,!1);const i=TK(n);_C(n,e.mount,e.modalRef,i,!0);const s=zg(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=zg(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=EK(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=zg(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&wu(e.modalRef,n),_C(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&wu(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const IK=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function CK(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function bK(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector('input[type="radio"]'.concat(r));let n=e('[name="'.concat(t.name,'"]:checked'));return n||(n=e('[name="'.concat(t.name,'"]'))),n!==t}function RK(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||bK(t))}function kK(t){const e=[],n=[];return Array.from(t.querySelectorAll(IK)).forEach((r,i)=>{const s=CK(r);s===-1||!RK(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function AK(){return!0}function PK(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=kK,isEnabled:o=AK,open:a}=t,l=k.useRef(!1),c=k.useRef(null),h=k.useRef(null),d=k.useRef(null),p=k.useRef(null),g=k.useRef(!1),y=k.useRef(null),E=Ii(e.ref,y),C=k.useRef(null);k.useEffect(()=>{!a||!y.current||(g.current=!n)},[n,a]),k.useEffect(()=>{if(!a||!y.current)return;const w=Ir(y.current);return y.current.contains(w.activeElement)||(y.current.hasAttribute("tabIndex")||y.current.setAttribute("tabIndex","-1"),g.current&&y.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),k.useEffect(()=>{if(!a||!y.current)return;const w=Ir(y.current),P=S=>{C.current=S,!(r||!o()||S.key!=="Tab")&&w.activeElement===y.current&&S.shiftKey&&(l.current=!0,h.current&&h.current.focus())},O=()=>{const S=y.current;if(S===null)return;if(!w.hasFocus()||!o()||l.current){l.current=!1;return}if(S.contains(w.activeElement)||r&&w.activeElement!==c.current&&w.activeElement!==h.current)return;if(w.activeElement!==p.current)p.current=null;else if(p.current!==null)return;if(!g.current)return;let T=[];if((w.activeElement===c.current||w.activeElement===h.current)&&(T=s(y.current)),T.length>0){var b,R;const x=!!((b=C.current)!=null&&b.shiftKey&&((R=C.current)==null?void 0:R.key)==="Tab"),N=T[0],A=T[T.length-1];typeof N!="string"&&typeof A!="string"&&(x?A.focus():N.focus())}else S.focus()};w.addEventListener("focusin",O),w.addEventListener("keydown",P,!0);const L=setInterval(()=>{w.activeElement&&w.activeElement.tagName==="BODY"&&O()},50);return()=>{clearInterval(L),w.removeEventListener("focusin",O),w.removeEventListener("keydown",P,!0)}},[n,r,i,o,a,s]);const v=w=>{d.current===null&&(d.current=w.relatedTarget),g.current=!0,p.current=w.target;const P=e.props.onFocus;P&&P(w)},_=w=>{d.current===null&&(d.current=w.relatedTarget),g.current=!0};return D.jsxs(k.Fragment,{children:[D.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),k.cloneElement(e,{ref:E,onFocus:v}),D.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:h,"data-testid":"sentinelEnd"})]})}function xK(t){return typeof t=="function"?t():t}function NK(t){return t?t.props.hasOwnProperty("in"):!1}const OK=new SK;function DK(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=OK,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:h,rootRef:d}=t,p=k.useRef({}),g=k.useRef(null),y=k.useRef(null),E=Ii(y,d),[C,v]=k.useState(!h),_=NK(l);let w=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(w=!1);const P=()=>Ir(g.current),O=()=>(p.current.modalRef=y.current,p.current.mount=g.current,p.current),L=()=>{i.mount(O(),{disableScrollLock:r}),y.current&&(y.current.scrollTop=0)},S=ui(()=>{const z=xK(e)||P().body;i.add(O(),z),y.current&&L()}),T=k.useCallback(()=>i.isTopModal(O()),[i]),b=ui(z=>{g.current=z,z&&(h&&T()?L():y.current&&wu(y.current,w))}),R=k.useCallback(()=>{i.remove(O(),w)},[w,i]);k.useEffect(()=>()=>{R()},[R]),k.useEffect(()=>{h?S():(!_||!s)&&R()},[h,R,_,s,S]);const x=z=>B=>{var U;(U=z.onKeyDown)==null||U.call(z,B),!(B.key!=="Escape"||B.which===229||!T())&&(n||(B.stopPropagation(),c&&c(B,"escapeKeyDown")))},N=z=>B=>{var U;(U=z.onClick)==null||U.call(z,B),B.target===B.currentTarget&&c&&c(B,"backdropClick")};return{getRootProps:(z={})=>{const B=Pf(t);delete B.onTransitionEnter,delete B.onTransitionExited;const U=q({},B,z);return q({role:"presentation"},U,{onKeyDown:x(U),ref:E})},getBackdropProps:(z={})=>{const B=z;return q({"aria-hidden":!0},B,{onClick:N(B),open:h})},getTransitionProps:()=>{const z=()=>{v(!1),o&&o()},B=()=>{v(!0),a&&a(),s&&R()};return{onEnter:KI(z,l==null?void 0:l.props.onEnter),onExited:KI(B,l==null?void 0:l.props.onExited)}},rootRef:E,portalRef:b,isTopModal:T,exited:C,hasTransition:_}}function MK(t){return In("MuiModal",t)}Cn("MuiModal",["root","hidden","backdrop"]);const LK=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],FK=t=>{const{open:e,exited:n,classes:r}=t;return zn({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},MK,r)},VK=st("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>q({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),$K=st(LO,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),UK=k.forwardRef(function(e,n){var r,i,s,o,a,l;const c=bn({name:"MuiModal",props:e}),{BackdropComponent:h=$K,BackdropProps:d,className:p,closeAfterTransition:g=!1,children:y,container:E,component:C,components:v={},componentsProps:_={},disableAutoFocus:w=!1,disableEnforceFocus:P=!1,disableEscapeKeyDown:O=!1,disablePortal:L=!1,disableRestoreFocus:S=!1,disableScrollLock:T=!1,hideBackdrop:b=!1,keepMounted:R=!1,onBackdropClick:x,open:N,slotProps:A,slots:V}=c,W=Fe(c,LK),z=q({},c,{closeAfterTransition:g,disableAutoFocus:w,disableEnforceFocus:P,disableEscapeKeyDown:O,disablePortal:L,disableRestoreFocus:S,disableScrollLock:T,hideBackdrop:b,keepMounted:R}),{getRootProps:B,getBackdropProps:U,getTransitionProps:Q,portalRef:te,isTopModal:G,exited:H,hasTransition:j}=DK(q({},z,{rootRef:n})),$=q({},z,{exited:H}),ie=FK($),ee={};if(y.props.tabIndex===void 0&&(ee.tabIndex="-1"),j){const{onEnter:Ge,onExited:ce}=Q();ee.onEnter=Ge,ee.onExited=ce}const ne=(r=(i=V==null?void 0:V.root)!=null?i:v.Root)!=null?r:VK,he=(s=(o=V==null?void 0:V.backdrop)!=null?o:v.Backdrop)!=null?s:h,ve=(a=A==null?void 0:A.root)!=null?a:_.root,le=(l=A==null?void 0:A.backdrop)!=null?l:_.backdrop,ue=$_({elementType:ne,externalSlotProps:ve,externalForwardedProps:W,getSlotProps:B,additionalProps:{ref:n,as:C},ownerState:$,className:ze(p,ve==null?void 0:ve.className,ie==null?void 0:ie.root,!$.open&&$.exited&&(ie==null?void 0:ie.hidden))}),Re=$_({elementType:he,externalSlotProps:le,additionalProps:d,getSlotProps:Ge=>U(q({},Ge,{onClick:ce=>{x&&x(ce),Ge!=null&&Ge.onClick&&Ge.onClick(ce)}})),className:ze(le==null?void 0:le.className,d==null?void 0:d.className,ie==null?void 0:ie.backdrop),ownerState:$});return!R&&!N&&(!j||H)?null:D.jsx(nK,{ref:te,container:E,disablePortal:L,children:D.jsxs(ne,q({},ue,{children:[!b&&h?D.jsx(he,q({},Re)):null,D.jsx(PK,{disableEnforceFocus:P,disableAutoFocus:w,disableRestoreFocus:S,isEnabled:G,open:N,children:k.cloneElement(y,ee)})]}))})});function jK(t){return In("MuiDialog",t)}const Bg=Cn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),VO=k.createContext({}),zK=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],BK=st(LO,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),WK=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container","scroll".concat(We(n))],paper:["paper","paperScroll".concat(We(n)),"paperWidth".concat(We(String(r))),i&&"paperFullWidth",s&&"paperFullScreen"]};return zn(o,jK,e)},qK=st(UK,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),HK=st("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e["scroll".concat(We(n.scroll))]]}})(({ownerState:t})=>q({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),GK=st(Xw,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e["scrollPaper".concat(We(n.scroll))],e["paperWidth".concat(We(String(n.maxWidth)))],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>q({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(Bg.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:"".concat(t.breakpoints.values[e.maxWidth]).concat(t.breakpoints.unit),["&.".concat(Bg.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(Bg.paperScrollBody)]:{margin:0,maxWidth:"100%"}})),$O=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiDialog"}),i=zc(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:h,className:d,disableEscapeKeyDown:p=!1,fullScreen:g=!1,fullWidth:y=!1,maxWidth:E="sm",onBackdropClick:C,onClick:v,onClose:_,open:w,PaperComponent:P=Xw,PaperProps:O={},scroll:L="paper",TransitionComponent:S=MO,transitionDuration:T=s,TransitionProps:b}=r,R=Fe(r,zK),x=q({},r,{disableEscapeKeyDown:p,fullScreen:g,fullWidth:y,maxWidth:E,scroll:L}),N=WK(x),A=k.useRef(),V=U=>{A.current=U.target===U.currentTarget},W=U=>{v&&v(U),A.current&&(A.current=null,C&&C(U),_&&_(U,"backdropClick"))},z=$q(a),B=k.useMemo(()=>({titleId:z}),[z]);return D.jsx(qK,q({className:ze(N.root,d),closeAfterTransition:!0,components:{Backdrop:BK},componentsProps:{backdrop:q({transitionDuration:T,as:l},c)},disableEscapeKeyDown:p,onClose:_,open:w,ref:n,onClick:W,ownerState:x},R,{children:D.jsx(S,q({appear:!0,in:w,timeout:T,role:"presentation"},b,{children:D.jsx(HK,{className:ze(N.container),onMouseDown:V,ownerState:x,children:D.jsx(GK,q({as:P,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":z},O,{className:ze(N.paper,O.className),ownerState:x,children:D.jsx(VO.Provider,{value:B,children:h})}))})}))}))});function KK(t){return In("MuiDialogActions",t)}Cn("MuiDialogActions",["root","spacing"]);const QK=["className","disableSpacing"],YK=t=>{const{classes:e,disableSpacing:n}=t;return zn({root:["root",!n&&"spacing"]},KK,e)},XK=st("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>q({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),UO=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=Fe(r,QK),a=q({},r,{disableSpacing:s}),l=YK(a);return D.jsx(XK,q({className:ze(l.root,i),ownerState:a,ref:n},o))});function JK(t){return In("MuiDialogContent",t)}Cn("MuiDialogContent",["root","dividers"]);function ZK(t){return In("MuiDialogTitle",t)}const eQ=Cn("MuiDialogTitle",["root"]),tQ=["className","dividers"],nQ=t=>{const{classes:e,dividers:n}=t;return zn({root:["root",n&&"dividers"]},JK,e)},rQ=st("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>q({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(eQ.root," + &")]:{paddingTop:0}})),jO=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=Fe(r,tQ),a=q({},r,{dividers:s}),l=nQ(a);return D.jsx(rQ,q({className:ze(l.root,i),ownerState:a,ref:n},o))});function iQ(t){return In("MuiDialogContentText",t)}Cn("MuiDialogContentText",["root"]);const sQ=["children","className"],oQ=t=>{const{classes:e}=t,r=zn({root:["root"]},iQ,e);return q({},e,r)},aQ=st(DO,{shouldForwardProp:t=>Kw(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),zO=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiDialogContentText"}),{className:i}=r,s=Fe(r,sQ),o=oQ(s);return D.jsx(aQ,q({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:ze(o.root,i)},r,{classes:o}))}),lQ=["className","id"],uQ=t=>{const{classes:e}=t;return zn({root:["root"]},ZK,e)},cQ=st(DO,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),BO=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=Fe(r,lQ),a=r,l=uQ(a),{titleId:c=s}=k.useContext(VO);return D.jsx(cQ,q({component:"h2",className:ze(l.root,i),ownerState:a,ref:n,variant:"h6",id:s!=null?s:c},o))}),hQ=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function W_(t){return"scale(".concat(t,", ").concat(t**2,")")}const dQ={entering:{opacity:1,transform:W_(1)},entered:{opacity:1,transform:"none"}},Wg=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),WO=k.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:h,onExit:d,onExited:p,onExiting:g,style:y,timeout:E="auto",TransitionComponent:C=Gr}=e,v=Fe(e,hQ),_=Ww(),w=k.useRef(),P=zc(),O=k.useRef(null),L=Ii(O,s.ref,n),S=W=>z=>{if(W){const B=O.current;z===void 0?W(B):W(B,z)}},T=S(h),b=S((W,z)=>{OO(W);const{duration:B,delay:U,easing:Q}=Of({style:y,timeout:E,easing:o},{mode:"enter"});let te;E==="auto"?(te=P.transitions.getAutoHeightDuration(W.clientHeight),w.current=te):te=B,W.style.transition=[P.transitions.create("opacity",{duration:te,delay:U}),P.transitions.create("transform",{duration:Wg?te:te*.666,delay:U,easing:Q})].join(","),l&&l(W,z)}),R=S(c),x=S(g),N=S(W=>{const{duration:z,delay:B,easing:U}=Of({style:y,timeout:E,easing:o},{mode:"exit"});let Q;E==="auto"?(Q=P.transitions.getAutoHeightDuration(W.clientHeight),w.current=Q):Q=z,W.style.transition=[P.transitions.create("opacity",{duration:Q,delay:B}),P.transitions.create("transform",{duration:Wg?Q:Q*.666,delay:Wg?B:B||Q*.333,easing:U})].join(","),W.style.opacity=0,W.style.transform=W_(.75),d&&d(W)}),A=S(p),V=W=>{E==="auto"&&_.start(w.current||0,W),r&&r(O.current,W)};return D.jsx(C,q({appear:i,in:a,nodeRef:O,onEnter:b,onEntered:R,onEntering:T,onExit:N,onExited:A,onExiting:x,addEndListener:V,timeout:E==="auto"?null:E},v,{children:(W,z)=>k.cloneElement(s,q({style:q({opacity:0,transform:W_(.75),visibility:W==="exited"&&!a?"hidden":void 0},dQ[W],y,s.props.style),ref:L},z))}))});WO.muiSupportAuto=!0;function fQ(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:s}=t,o=Ww();k.useEffect(()=>{if(!i)return;function v(_){_.defaultPrevented||(_.key==="Escape"||_.key==="Esc")&&(r==null||r(_,"escapeKeyDown"))}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[i,r]);const a=ui((v,_)=>{r==null||r(v,_)}),l=ui(v=>{!r||v==null||o.start(v,()=>{a(null,"timeout")})});k.useEffect(()=>(i&&l(e),o.clear),[i,e,l,o]);const c=v=>{r==null||r(v,"clickaway")},h=o.clear,d=k.useCallback(()=>{e!=null&&l(s!=null?s:e*.5)},[e,s,l]),p=v=>_=>{const w=v.onBlur;w==null||w(_),d()},g=v=>_=>{const w=v.onFocus;w==null||w(_),h()},y=v=>_=>{const w=v.onMouseEnter;w==null||w(_),h()},E=v=>_=>{const w=v.onMouseLeave;w==null||w(_),d()};return k.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",d),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",h)}},[n,i,d,h]),{getRootProps:(v={})=>{const _=q({},Pf(t),Pf(v));return q({role:"presentation"},v,_,{onBlur:p(_),onFocus:g(_),onMouseEnter:y(_),onMouseLeave:E(_)})},onClickAway:c}}function pQ(t){return In("MuiSnackbarContent",t)}Cn("MuiSnackbarContent",["root","message","action"]);const mQ=["action","className","message","role"],gQ=t=>{const{classes:e}=t;return zn({root:["root"],action:["action"],message:["message"]},pQ,e)},yQ=st(Xw,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=_H(t.palette.background.default,e);return q({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),_Q=st("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),vQ=st("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),wQ=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:o,role:a="alert"}=r,l=Fe(r,mQ),c=r,h=gQ(c);return D.jsxs(yQ,q({role:a,square:!0,elevation:6,className:ze(h.root,s),ownerState:c,ref:n},l,{children:[D.jsx(_Q,{className:h.message,ownerState:c,children:o}),i?D.jsx(vQ,{className:h.action,ownerState:c,children:i}):null]}))});function EQ(t){return In("MuiSnackbar",t)}Cn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const TQ=["onEnter","onExited"],SQ=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],IQ=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root","anchorOrigin".concat(We(n.vertical)).concat(We(n.horizontal))]};return zn(r,EQ,e)},vC=st("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e["anchorOrigin".concat(We(n.anchorOrigin.vertical)).concat(We(n.anchorOrigin.horizontal))]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return q({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:q({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),CQ=k.forwardRef(function(e,n){const r=bn({props:e,name:"MuiSnackbar"}),i=zc(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:h,className:d,ClickAwayListenerProps:p,ContentProps:g,disableWindowBlurListener:y=!1,message:E,open:C,TransitionComponent:v=WO,transitionDuration:_=s,TransitionProps:{onEnter:w,onExited:P}={}}=r,O=Fe(r.TransitionProps,TQ),L=Fe(r,SQ),S=q({},r,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:c,disableWindowBlurListener:y,TransitionComponent:v,transitionDuration:_}),T=IQ(S),{getRootProps:b,onClickAway:R}=fQ(q({},S)),[x,N]=k.useState(!0),A=$_({elementType:vC,getSlotProps:b,externalForwardedProps:L,ownerState:S,additionalProps:{ref:n},className:[T.root,d]}),V=z=>{N(!0),P&&P(z)},W=(z,B)=>{N(!1),w&&w(z,B)};return!C&&x?null:D.jsx(_K,q({onClickAway:R},p,{children:D.jsx(vC,q({},A,{children:D.jsx(v,q({appear:!0,in:C,timeout:_,direction:a==="top"?"down":"up",onEnter:W,onExited:V},O,{children:h||D.jsx(wQ,q({message:E,action:o},g))}))}))}))});function bQ({}){const{ID:t}=cN(),[e,n]=k.useState(null),[r,i]=k.useState(null),[s,o]=k.useState({gameState:"",message:""}),{user:a}=ol(C=>C.user),[l,c]=k.useState(!1),h=Lc(),d=Fp(),p=C=>{C==="user"?(o({gameState:"Game Over",message:"".concat((a==null?void 0:a.displayName)||"N/A"," (").concat((r==null?void 0:r.player1)===a.uid?"white":"black",") won by checkmate")}),c(!0)):C==="opponent"?(o({gameState:"Game Over",message:"".concat((e==null?void 0:e.displayName)||"N/A"," (").concat((r==null?void 0:r.player1)===(e==null?void 0:e.uid)?"white":"black",") won by checkmate")}),c(!0)):C==="stalemate"&&(o({gameState:"Game Over",message:"It's a stalemate"}),c(!0))};k.useEffect(()=>{r&&r.status==="waiting"&&(console.log("gameData: ",r),iz(Vi($i,"games/".concat(t)),{...r,status:"ongoing"}),Ql(gr(pn,"games",t),{...r,status:"ongoing"},{merge:!0}))},[r]),k.useEffect(()=>{if(e)return;(async()=>{try{let v;r.player1===(a==null?void 0:a.uid)?v=await SS(gr(pn,"users",r.player2)):v=await SS(gr(pn,"users",r.player1)),v.exists()?(n(v.data()),console.log("snapshot: ",v.data())):console.log("No such document!")}catch(v){console.error(v)}})()},[r]),console.log("opponentData: ",e),k.useEffect(()=>{if(!t){h("/");return}Zx(Vi($i,"games/".concat(t))).then(C=>{if(C.exists&&C.val()&&(C.val().player1===a.uid||C.val().player2===a.uid))i(C.val());else{i(null),d(showPopup("Invalid Game ID")),h("/");return}}).catch(C=>{console.error(C)})},[t]);const g=h7(),y=yO(g.breakpoints.down("md")),E=()=>{c(!1)};return D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"templateMainDiv",children:D.jsxs("div",{className:"content",children:[D.jsxs("div",{className:"player",children:[D.jsx("img",{style:{backgroundColor:"white"},src:(e==null?void 0:e.photoURL)||"https://www.pngkey.com/png/full/204-2049354_box-icon-png.png"}),D.jsxs("div",{children:[D.jsx("h6",{children:(e==null?void 0:e.displayName)||"Player 2"}),D.jsx("p",{children:"(1000)"})]})]}),D.jsx(h8,{showEndScreen:p,gameData:r}),D.jsxs("div",{className:"player",children:[D.jsx("img",{style:{backgroundColor:"white"},src:(a==null?void 0:a.photoUrl)||"https://www.pngkey.com/png/full/204-2049354_box-icon-png.png"}),D.jsxs("div",{children:[D.jsx("h6",{children:(a==null?void 0:a.displayName)||"Player 1"}),D.jsx("p",{children:"(1000)"})]})]})]})}),D.jsxs($O,{fullScreen:y,open:l,onClose:E,"aria-labelledby":"responsive-dialog-title",children:[D.jsx(BO,{id:"responsive-dialog-title",children:(s==null?void 0:s.gameState)||""}),D.jsx(jO,{children:D.jsx(zO,{children:(s==null?void 0:s.message)||""})}),D.jsxs(UO,{children:[D.jsx(vu,{onClick:E,children:"close"}),D.jsx(vu,{onClick:()=>{E(),h("/")},children:"Home"})]})]})]})}const qO=[{path:"login",component:D.jsx(vB,{}),type:"Public"},{path:"queue",component:D.jsx(r8,{}),type:"Private",exact:!0},{path:"online/:ID",component:D.jsx(bQ,{}),type:"Private"}],RQ=()=>qO.filter(e=>e.type==="Private"),kQ=()=>qO.filter(e=>e.type=="Public"),wC=t=>Array.isArray(t)&&t.length>0?t.map((e,n)=>e.default?D.jsx(ei,{index:!0,element:e.component},n):D.jsx(ei,{path:e.path,element:e.component},n)):D.jsx(D.Fragment,{}),AQ=()=>{const[t,e]=k.useState({top:0,left:0});return k.useEffect(()=>{const n=r=>{e({top:r.pageY,left:r.pageX})};return document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}},[]),D.jsxs("div",{className:"Container",children:[D.jsxs("div",{className:"text",children:[D.jsx("h1",{children:"404"}),D.jsx("h2",{children:"Uh, Ohh"}),D.jsx("h3",{children:"Sorry we can't find what you are looking for 'cuz it's so dark in here"})]}),D.jsx("div",{className:"torch",style:{position:"absolute",top:"".concat(t.top,"px"),left:"".concat(t.left,"px")}})]})},PQ=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],ks="/Chess/",xQ=new Audio(ks+"assets/audio/capture.mp3");new Audio(ks+"assets/audio/castle.mp3");const NQ=new Audio(ks+"assets/audio/check.mp3"),OQ=new Audio(ks+"assets/audio/checkMate.mp3");new Audio(ks+"assets/audio/gameOver.mp3");const DQ=new Audio(ks+"assets/audio/gameStart.mp3"),MQ=new Audio(ks+"assets/audio/move.mp3"),LQ=new Audio(ks+"assets/audio/stalemate.mp3");function HO({customMoveHistory:t,muted:e,className:n,showEndScreen:r}){const i={piece:"",position:""},[s,o]=k.useState(i),[a,l]=k.useState(PQ),[c,h]=k.useState(!0),[d,p]=k.useState([]),[g,y]=k.useState(!1),[E,C]=k.useState([]),[v,_]=k.useState(""),[w,P]=k.useState(null);Fp(),k.useEffect(()=>{if(Array.isArray(t)){const V=Array.from(t);p(V)}},[t]);const O=V=>{const W=parseInt(V.split("-")[1]),z=W-1;if(s.piece.charAt(1)==="p"&&!w){if(s.piece.charAt(0)==="w"&&z>=0&&z<8){P({piece:s.piece,from:s.position-1,to:z}),_("w".concat(W.toString().charAt(W.toString().length-1)));return}else if(s.piece.charAt(0)==="b"&&z>=56&&z<64){P({piece:s.piece,from:s.position-1,to:z}),_("b".concat((W-6).toString().charAt(W.toString().length-1)));return}}p(B=>[...B,{piece:s.piece,from:s.position-1,to:z,captured:a[z]!==""&&a[z]!=="h"?a[z].split("")[0]+a[z].split("")[1]:""}]),o(i)},L=V=>{console.log("promotionSquareInfo: ",w),console.log("promoteTo received: ",V),w&&V&&(p(W=>[...W,{piece:w.piece,from:w.from,to:w.to,captured:a[w.to]!==""&&a[w.to]!=="h"?a[w.to].split("")[0]+a[w.to].split("")[1]:"",promotedTo:V}]),P(null),_(""))},S=V=>{e||V.play()};k.useEffect(()=>{S(DQ)},[]);const T=(V,W,z,B)=>{const U=B+1;let Q=[],te=[],G=[],H=[];if(W==="w"){if(z==="p"){B>=48&&B<=55?(G=[B-8,B-16],H=[B-7,B-9]):(G=[B-8],H=[B-7,B-9]),B%8===0&&(H=H.filter($=>$!==B-9)),B%8===1&&(H=H.filter($=>$!==B-7));let j=!1;G.forEach($=>{$>=0&&V[$]===""&&!j?te.push($):j=!0}),H.forEach($=>{$>=0&&V[$]!==""&&V[$].charAt(0)!==W&&Q.push($)})}}else if(z==="p"){const j=U-1;j>=8&&j<=15?(G=[j+8,j+16],H=[j+7,j+9]):(G=[j+8],H=[j+7,j+9]),j%8===0&&(H=H.filter(ie=>ie!==j+7)),j%8===1&&(H=H.filter(ie=>ie!==j+9));let $=!1;G.forEach(ie=>{ie>=0&&V[ie]===""&&!$?te.push(ie):$=!0}),H.forEach(ie=>{ie>=0&&ie<=63&&V[ie]!==""&&V[ie].charAt(0)!==W&&Q.push(ie)})}if(z==="r"||z==="q"){let j=B,$=!1;for(let he=j+8;he<64&&!$;he+=8)V[he]!=""?($=!0,V[he].charAt(0)!==W&&Q.push(he)):Q.push(he);let ie=!1;for(let he=j-8;he>=0&&!ie;he-=8)V[he]!=""?(ie=!0,V[he].charAt(0)!==W&&Q.push(he)):Q.push(he);let ee=!1;for(let he=j+1;he%8!==0&&!ee;he+=1)V[he]!=""?(ee=!0,V[he].charAt(0)!==W&&Q.push(he)):Q.push(he);let ne=!1;for(let he=j-1;he%8!==7&&he>=0&&!ne;he-=1)V[he]!=""?(ne=!0,V[he].charAt(0)!==W&&Q.push(he)):Q.push(he)}if(z==="b"||z==="q"){let j=!1;for(let ne=B+9;ne<64&&ne%8!==0&&!j;ne+=9)V[ne]!==""?(j=!0,V[ne].charAt(0)!==W&&Q.push(ne)):Q.push(ne);let $=!1;for(let ne=B-9;ne>=0&&ne%8!==7&&!$;ne-=9)V[ne]!==""?($=!0,V[ne].charAt(0)!==W&&Q.push(ne)):Q.push(ne);let ie=!1;for(let ne=B+7;ne<64&&ne%8!==7&&!ie;ne+=7)V[ne]!==""?(ie=!0,V[ne].charAt(0)!==W&&Q.push(ne)):Q.push(ne);let ee=!1;for(let ne=B-7;ne>=0&&ne%8!==0&&!ee;ne-=7)V[ne]!==""?(ee=!0,V[ne].charAt(0)!==W&&Q.push(ne)):Q.push(ne)}if(z==="k"){let j=[B+7,B-7,B+8,B-8,B+9,B-9,B+1,B-1];B%8===7?j=j.filter($=>$!==B+1&&$!==B-7&&$!==B+9):B%8===0&&(j=j.filter($=>$!==B-1&&$!==B+7&&$!==B-9)),j.forEach($=>{$>=0&&$<64&&(V[$]===""||V[$].charAt(0)!==W)&&Q.push($)})}if(z==="n"){const j=B-15,$=B-17,ie=B+17,ee=B+15,ne=B-10,he=B+6,ve=B-6,le=B+10,ue=((U%8?U%8:8)-8)*-1,Re=(U%8?U%8:8)-1,Ge=Math.floor(U/8),ce=Math.floor((64-U)/8),me=Bn=>{Bn>=0&&Bn<64&&(V[Bn]===""||V[Bn].charAt(0)!==W)&&Q.push(Bn)};ue>0&&Ge>1&&me(j),ue>1&&Ge>0&&me(ve),ue>1&&ce>0&&me(le),ce>1&&ue>0&&me(ie),ce>1&&Re>0&&me(ee),Re>1&&ce>0&&me(he),Re>1&&Ge>0&&me(ne),Ge>1&&Re>0&&me($)}return[Q.filter(j=>j>=0&&j<64),te.filter(j=>j>=0&&j<64)]},b=V=>{let W=a;V.forEach(z=>{if(!(z>=0&&z<64))return;let B=c?"b":"w";W[z]!==""?W[z].charAt(0)===B&&(W[z]="".concat(W[z],"c")):W[z]="h";let U=Array.from(W);l(U)})},R=V=>{const W=c?"b":"w",z=c?"w":"b",B=V.findIndex(Q=>(Q==null?void 0:Q.charAt(0))===z&&Q.charAt(1)==="k");let U=!1;return V.forEach((Q,te)=>{if(!(Q===""||U))if(Q.charAt(0)===W){const G=Q.charAt(1);let[H]=T(V,W,G,te);if(H.includes(B)){U=!0;return}}else return}),U},x=(V,W)=>{let z=[...a];z=z.map(Q=>{if(Q==="")return Q;const te=Q.split("");return te.includes("h")?"":te.includes("c")?"".concat(te[0]).concat(te[1]):Q});let B=z[V];return z[V]="",z[W]=B,R(z)},N=()=>{const V=c?"w":"b";let W=[];return a.forEach((z,B)=>{if(z!=="")if(z.charAt(0)===V){const U=z.charAt(1);let[Q,te]=T(a,V,U,B);[...Q,...te].forEach(H=>{if(!(H>=0&&H<64))return;x(B,H)||W.push({moveIndex:H,piece:z,index:B})})}else return}),W};k.useEffect(()=>{const V=R(a);y(V);const W=N();C(W),!(W.length>0)&&V===!0?(S(OQ),r&&r(c?"black":"white")):!(W.length>0)&&V===!1?(S(LQ),r&&r("stalemate")):W.length>0&&V===!0?S(NQ):W.length>0&&V===!1&&d.length>0&&(d[d.length-1].captured?S(xQ):S(MQ))},[c]),k.useEffect(()=>{if(s.piece&&s.position){const V=W=>{const z=Array.from(W.target.classList);W.target.classList.contains("possible-move")?O(z[0]):W.target.classList.contains("capturable")?O(z[1]):(o(i),l(B=>B.map(U=>{const Q=U.split("");return Q.includes("h")?"":Q.includes("c")?"".concat(Q[0]).concat(Q[1]):U})))};return document.getElementById("board-grid").addEventListener("click",V),()=>{document.getElementById("board-grid").removeEventListener("click",V)}}else l(V=>V.map(W=>{const z=W.split("");return z.includes("h")?"":z.includes("c")?"".concat(z[0]).concat(z[1]):W}))},[s]),k.useEffect(()=>{if(s.piece&&s.position){const[V,W]=s.piece.split(""),z=s.position;let[B,U]=T(a,V,W,z-1),Q=[...B,...U].filter(te=>E.filter(G=>G.piece===s.piece&&G.index===z-1&&G.moveIndex===te).length>0);b(Q)}},[s]);const A=V=>{let W=["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"],z=[];return V.length>0?(V.forEach(B=>{W[B.from]="",W[B.to]=B.promotedTo||B.piece,B.captured&&z.push(B.captured)}),{boardToSend:W,capturedPieces:z}):{boardToSend:W,capturedPieces:z}};return k.useEffect(()=>{const V=W=>{W.ctrlKey&&W.key=="z"&&(W.stopPropagation(),d.length>0&&p(z=>z.slice(0,-1)))};return window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)}},[d]),k.useEffect(()=>{if(!(d.length>0)){l(["br","bn","bb","bq","bk","bb","bn","br","bp","bp","bp","bp","bp","bp","bp","bp","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","wp","wp","wp","wp","wp","wp","wp","wp","wr","wn","wb","wq","wk","wb","wn","wr"]),h(!0);return}const{boardToSend:V,capturedPieces:W}=A(d),z=Array.from(V);l(z),h(B=>!B)},[d]),D.jsxs("div",{className:"board "+(g?"check-"+(c?"w":"b")+"k":"")+(n?" "+n:""),children:[" ",D.jsxs("div",{className:"board-grid",id:"board-grid",children:[D.jsx(LN,{board:a,selectedPiece:s,setSelectedPiece:o,turn:c,userTurn:c}),D.jsxs("div",{className:"promote-".concat(v.charAt(0),"p square-").concat(v.slice(1)," promote"),children:[D.jsx("div",{className:"".concat(v.charAt(0),"q"),onClick:()=>{L("".concat(v.charAt(0),"q"))}}),D.jsx("div",{className:"".concat(v.charAt(0),"n"),onClick:()=>{L("".concat(v.charAt(0),"n"))}}),D.jsx("div",{className:"".concat(v.charAt(0),"r"),onClick:()=>{L("".concat(v.charAt(0),"r"))}}),D.jsx("div",{className:"".concat(v.charAt(0),"b"),onClick:()=>{L("".concat(v.charAt(0),"b"))}}),D.jsx("div",{className:"promotion-close-btn",onClick:()=>{_(""),P(null)},children:"x"})]})]})]})}function FQ(){const{user:t}=ol(d=>d.user),e={scholarsMate:[{piece:"wp",from:52,to:36,captured:""},{piece:"bp",from:12,to:28,captured:""},{piece:"wb",from:61,to:34,captured:""},{piece:"bn",from:1,to:18,captured:""},{piece:"wq",from:59,to:31,captured:""},{piece:"bn",from:6,to:21,captured:""},{piece:"wq",from:31,to:13,captured:"bp"}]},[n,r]=k.useState([]),[i,s]=k.useState(0),[o,a]=k.useState(0),l=Lc(),c=Object.keys(e);k.useEffect(()=>{const d=setInterval(()=>{i<e[c[o]].length?s(p=>p+1):(r([]),s(0),a(Math.floor(Math.random()*c.length)))},1e3);return()=>clearInterval(d)},[i]),k.useEffect(()=>{i<e[c[o]].length?r(d=>[...d,e[c[o]][i]]):r(d=>[])},[i]);const h=async()=>{try{await fV(_w),N_("Logged Out")}catch(d){N_("Error Logging Out"),console.error("Error Logging Out: ",d)}};return D.jsxs(D.Fragment,{children:[t?D.jsx("div",{className:"logoutButton",onClick:h,children:"Log Out"}):null,D.jsxs("div",{className:"row homepageOuterDiv",style:{width:"100%",height:"100%"},children:[D.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 d-flex align-items-center justify-content-center boardOuterDiv",children:[D.jsx("div",{className:"noClickOverlay noMediaQuery",style:{position:"absolute",zIndex:"1"}}),D.jsx(HO,{className:"noMediaQuery",customMoveHistory:n,muted:!0})]}),D.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 homepageMenu",children:[D.jsxs("h1",{style:{color:"white"},children:["Play ",D.jsx("span",{style:{color:"#739552"},children:"Chess"})]}),D.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"80%"},children:[D.jsx("button",{onClick:()=>l("/queue"),className:"hompageButton playOnline",children:"Play Online"}),D.jsx("button",{onClick:()=>l("/offline"),className:"hompageButton playOffline",children:"2-Player Offline"})]})]})]})]})}function EC(){const t=Lc(),[e,n]=k.useState({gameState:"",message:""}),r=c=>{c==="white"?(n({gameState:"Game Over",message:"Player 1 (white) won by checkmate"}),s(!0)):c==="black"?(n({gameState:"Game Over",message:"Player 2 (black) won by checkmate"}),s(!0)):c==="stalemate"&&(n({gameState:"Game Over",message:"It's a stalemate"}),s(!0))},[i,s]=k.useState(!1),o=zc(),a=yO(o.breakpoints.down("md")),l=()=>{s(!1)};return D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"templateMainDiv",children:D.jsxs("div",{className:"content",children:[D.jsxs("div",{className:"player",children:[D.jsx("img",{style:{backgroundColor:"white"},src:"https://www.pngkey.com/png/full/204-2049354_box-icon-png.png"}),D.jsxs("div",{children:[D.jsx("h6",{children:"Player 2"}),D.jsx("p",{children:"(1000)"})]})]}),D.jsx(HO,{showEndScreen:r}),D.jsxs("div",{className:"player",children:[D.jsx("img",{style:{backgroundColor:"white"},src:"https://www.pngkey.com/png/full/204-2049354_box-icon-png.png"}),D.jsxs("div",{children:[D.jsx("h6",{children:"Player 1"}),D.jsx("p",{children:"(1000)"})]})]})]})}),D.jsxs($O,{fullScreen:a,open:i,onClose:l,"aria-labelledby":"responsive-dialog-title",children:[D.jsx(BO,{id:"responsive-dialog-title",children:(e==null?void 0:e.gameState)||""}),D.jsx(jO,{children:D.jsx(zO,{children:(e==null?void 0:e.message)||""})}),D.jsxs(UO,{children:[D.jsx(vu,{onClick:l,children:"close"}),D.jsx(vu,{onClick:()=>{l(),window.location.reload()},children:"Play Again?"}),D.jsx(vu,{onClick:()=>{l(),t("/")},children:"Home"})]})]})]})}function VQ(){const{user:t}=ol(r=>r.user),e=()=>t?D.jsx(dI,{to:"/"}):D.jsx(fI,{}),n=()=>t?D.jsx(fI,{}):D.jsx(dI,{to:"/login"});return D.jsx(uB,{children:D.jsxs(oB,{children:[D.jsx(ei,{path:"/",element:D.jsx(e,{}),children:wC(kQ())}),D.jsx(ei,{path:"/",element:D.jsx(n,{}),children:wC(RQ())}),D.jsx(ei,{index:!0,element:D.jsx(FQ,{})}),D.jsx(ei,{path:"/offline",element:D.jsx(EC,{})}),D.jsx(ei,{path:"/testing",element:D.jsx(EC,{})}),D.jsx(ei,{path:"*",element:D.jsx(AQ,{})})]})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $Q(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function UQ(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sa=function(){return sa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sa.apply(this,arguments)},GO=function(t){return{loading:t==null,value:t}},jQ=function(){return function(t,e){switch(e.type){case"error":return sa(sa({},t),{error:e.error,loading:!1,value:void 0});case"reset":return GO(e.defaultValue);case"value":return sa(sa({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},zQ=function(t){var e=t?t():void 0,n=k.useReducer(jQ(),GO(e)),r=n[0],i=n[1],s=k.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=k.useCallback(function(l){i({type:"error",error:l})},[]),a=k.useCallback(function(l){i({type:"value",value:l})},[]);return k.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},BQ=function(t,e){var n=zQ(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return k.useEffect(function(){var l=dV(t,function(c){return $Q(void 0,void 0,void 0,function(){var h;return UQ(this,function(d){switch(d.label){case 0:return[3,4];case 1:return d.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return d.sent(),[3,4];case 3:return h=d.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]};function WQ(){const t=Fp(),[e]=BQ(_w),{user:n,loading:r,error:i,popup:s}=ol(a=>a.user);k.useEffect(()=>{if(e){const a={uid:e.uid,displayName:e.displayName,email:e.email,photoUrl:e.photoURL};console.log("dataToSet: ",e),t(NI(a))}else t(NI(null))},[e,t]),k.useEffect(()=>{if(!n)return;(async()=>{try{const l=wS(tf(pn,"games"),Ph("player1","==",n.uid),Ph("status","in",["waiting","ongoing"])),c=wS(tf(pn,"games"),Ph("player2","==",n.uid),Ph("status","in",["waiting","ongoing"])),h=await IS(l),d=await IS(c);[...h.docs,...d.docs].forEach(g=>{Z5(gr(pn,"games",g.id))})}catch(l){console.error("Error cleaning up Firestore games:",l)}})()},[n]);const o=AO({palette:{mode:"dark"}});return D.jsxs(D.Fragment,{children:[D.jsx(CQ,{open:s,autoHideDuration:6e3,onAnimationEnd:()=>t(e8("")),onClose:()=>t(t8(!1)),message:i}),D.jsx(TG,{theme:o,children:D.jsx("div",{className:"wrapper",children:D.jsx(VQ,{})})})]})}const qQ=OW({reducer:{user:n8},devTools:!0});qg.createRoot(document.getElementById("root")).render(D.jsx(KB,{store:qQ,children:D.jsx(WQ,{})}));export{GQ as __vite_legacy_guard};
